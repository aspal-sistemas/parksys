import{bO as ws,bP as Cs,e as vs,Y as R,j as e,aB as Es,U as Ke,D as Ve,p as ss,B as k,b5 as hs,r as Ue,t as He,v as Be,w as We,aW as is,f as ie,b3 as Re,b4 as ms,y as B,I as de,z as Te,H as Fe,J as Le,K as Pe,N as M,aX as xs,F as as,W as _s,C as te,c as re,as as Je,a4 as us,ak as ps,aH as ks,aI as Ss,aJ as Xe,aK as Ye,a as ve,b as Se,b0 as Ze,a3 as ts,Z as Ds,h as gs,n as fs,P as rs,aq as Os,ar as Is,x as As,M as Rs,cp as Ts,m as js,i as Fs}from"./index-BBGHPKhn.js";import{U as Ls}from"./user-plus-BwfiH0lC.js";var bs={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(n,Ge){((ze,T)=>{n.exports=T()})(ws,function ze(){var T=typeof self<"u"?self:typeof window<"u"?window:T!==void 0?T:{},S,xe=!T.document&&!!T.postMessage,ge=T.IS_PAPA_WORKER||!1,fe={},De=0,j={};function W(a){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=l(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new I(r),(this._handle.streamer=this)._config=r}).call(this,a),this.parseChunk=function(t,r){var c=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<c){let y=this._config.newline;y||(o=this._config.quoteChar||'"',y=this._handle.guessLineEndings(t,o)),t=[...t.split(y).slice(c)].join(y)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(t))!==void 0&&(t=o),this.isFirstChunk=!1,this._halted=!1;var c=this._partialLine+t,o=(this._partialLine="",this._handle.parse(c,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=o.meta.cursor,c=(this._finished||(this._partialLine=c.substring(t-this._baseIndex),this._baseIndex=t),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),ge)T.postMessage({results:o,workerId:j.WORKER_ID,finished:c});else if(A(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!c||!A(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){A(this._config.error)?this._config.error(t):ge&&this._config.error&&T.postMessage({workerId:j.WORKER_ID,error:t,finished:!1})}}function C(a){var t;(a=a||{}).chunkSize||(a.chunkSize=j.RemoteChunkSize),W.call(this,a),this._nextChunk=xe?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),xe||(t.onload=J(this._chunkLoaded,this),t.onerror=J(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!xe),this._config.downloadRequestHeaders){var r,c=this._config.downloadRequestHeaders;for(r in c)t.setRequestHeader(r,c[r])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+o));try{t.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}xe&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function ne(a){(a=a||{}).chunkSize||(a.chunkSize=j.LocalChunkSize),W.call(this,a);var t,r,c=typeof FileReader<"u";this.stream=function(o){this._input=o,r=o.slice||o.webkitSlice||o.mozSlice,c?((t=new FileReader).onload=J(this._chunkLoaded,this),t.onerror=J(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,y=(this._config.chunkSize&&(y=Math.min(this._start+this._config.chunkSize,this._input.size),o=r.call(o,this._start,y)),t.readAsText(o,this._config.encoding));c||this._chunkLoaded({target:{result:y}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(t.error)}}function be(a){var t;W.call(this,a=a||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,c;if(!this._finished)return r=this._config.chunkSize,t=r?(c=t.substring(0,r),t.substring(r)):(c=t,""),this._finished=!t,this.parseChunk(c)}}function Ne(a){W.call(this,a=a||{});var t=[],r=!0,c=!1;this.pause=function(){W.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){W.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){c&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=J(function(o){try{t.push(typeof o=="string"?o:o.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(y){this._streamError(y)}},this),this._streamError=J(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=J(function(){this._streamCleanUp(),c=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function I(a){var t,r,c,o,y=Math.pow(2,53),K=-y,ce=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,oe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,f=this,U=0,v=0,Y=!1,b=!1,E=[],h={data:[],errors:[],meta:{}};function G(w){return a.skipEmptyLines==="greedy"?w.join("").trim()==="":w.length===1&&w[0].length===0}function V(){if(h&&c&&(F("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+j.DefaultDelimiter+"'"),c=!1),a.skipEmptyLines&&(h.data=h.data.filter(function(g){return!G(g)})),Z()){let g=function($,L){A(a.transformHeader)&&($=a.transformHeader($,L)),E.push($)};if(h)if(Array.isArray(h.data[0])){for(var w=0;Z()&&w<h.data.length;w++)h.data[w].forEach(g);h.data.splice(0,1)}else h.data.forEach(g)}function D(g,$){for(var L=a.header?{}:[],O=0;O<g.length;O++){var z=O,_=g[O],_=((he,N)=>(q=>(a.dynamicTypingFunction&&a.dynamicTyping[q]===void 0&&(a.dynamicTyping[q]=a.dynamicTypingFunction(q)),(a.dynamicTyping[q]||a.dynamicTyping)===!0))(he)?N==="true"||N==="TRUE"||N!=="false"&&N!=="FALSE"&&((q=>{if(ce.test(q)&&(q=parseFloat(q),K<q&&q<y))return 1})(N)?parseFloat(N):oe.test(N)?new Date(N):N===""?null:N):N)(z=a.header?O>=E.length?"__parsed_extra":E[O]:z,_=a.transform?a.transform(_,z):_);z==="__parsed_extra"?(L[z]=L[z]||[],L[z].push(_)):L[z]=_}return a.header&&(O>E.length?F("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+O,v+$):O<E.length&&F("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+O,v+$)),L}var P;h&&(a.header||a.dynamicTyping||a.transform)&&(P=1,!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(D),P=h.data.length):h.data=D(h.data,0),a.header&&h.meta&&(h.meta.fields=E),v+=P)}function Z(){return a.header&&E.length===0}function F(w,D,P,g){w={type:w,code:D,message:P},g!==void 0&&(w.row=g),h.errors.push(w)}A(a.step)&&(o=a.step,a.step=function(w){h=w,Z()?V():(V(),h.data.length!==0&&(U+=w.data.length,a.preview&&U>a.preview?r.abort():(h.data=h.data[0],o(h,f))))}),this.parse=function(w,D,P){var g=a.quoteChar||'"',g=(a.newline||(a.newline=this.guessLineEndings(w,g)),c=!1,a.delimiter?A(a.delimiter)&&(a.delimiter=a.delimiter(w),h.meta.delimiter=a.delimiter):((g=(($,L,O,z,_)=>{var he,N,q,Ee;_=_||[",","	","|",";",j.RECORD_SEP,j.UNIT_SEP];for(var se=0;se<_.length;se++){for(var ae,ye=_[se],Q=0,me=0,H=0,X=(q=void 0,new Ce({comments:z,delimiter:ye,newline:L,preview:10}).parse($)),je=0;je<X.data.length;je++)O&&G(X.data[je])?H++:(ae=X.data[je].length,me+=ae,q===void 0?q=ae:0<ae&&(Q+=Math.abs(ae-q),q=ae));0<X.data.length&&(me/=X.data.length-H),(N===void 0||Q<=N)&&(Ee===void 0||Ee<me)&&1.99<me&&(N=Q,he=ye,Ee=me)}return{successful:!!(a.delimiter=he),bestDelimiter:he}})(w,a.newline,a.skipEmptyLines,a.comments,a.delimitersToGuess)).successful?a.delimiter=g.bestDelimiter:(c=!0,a.delimiter=j.DefaultDelimiter),h.meta.delimiter=a.delimiter),l(a));return a.preview&&a.header&&g.preview++,t=w,r=new Ce(g),h=r.parse(t,D,P),V(),Y?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return Y},this.pause=function(){Y=!0,r.abort(),t=A(a.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){f.streamer._halted?(Y=!1,f.streamer.parseChunk(t,!0)):setTimeout(f.resume,3)},this.aborted=function(){return b},this.abort=function(){b=!0,r.abort(),h.meta.aborted=!0,A(a.complete)&&a.complete(h),t=""},this.guessLineEndings=function($,g){$=$.substring(0,1048576);var g=new RegExp(le(g)+"([^]*?)"+le(g),"gm"),P=($=$.replace(g,"")).split("\r"),g=$.split(`
`),$=1<g.length&&g[0].length<P[0].length;if(P.length===1||$)return`
`;for(var L=0,O=0;O<P.length;O++)P[O][0]===`
`&&L++;return L>=P.length/2?`\r
`:"\r"}}function le(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ce(a){var t=(a=a||{}).delimiter,r=a.newline,c=a.comments,o=a.step,y=a.preview,K=a.fastMode,ce=null,oe=!1,f=a.quoteChar==null?'"':a.quoteChar,U=f;if(a.escapeChar!==void 0&&(U=a.escapeChar),(typeof t!="string"||-1<j.BAD_DELIMITERS.indexOf(t))&&(t=","),c===t)throw new Error("Comment character same as delimiter");c===!0?c="#":(typeof c!="string"||-1<j.BAD_DELIMITERS.indexOf(c))&&(c=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var v=0,Y=!1;this.parse=function(b,E,h){if(typeof b!="string")throw new Error("Input must be a string");var G=b.length,V=t.length,Z=r.length,F=c.length,w=A(o),D=[],P=[],g=[],$=v=0;if(!b)return Q();if(K||K!==!1&&b.indexOf(f)===-1){for(var L=b.split(r),O=0;O<L.length;O++){if(g=L[O],v+=g.length,O!==L.length-1)v+=r.length;else if(h)return Q();if(!c||g.substring(0,F)!==c){if(w){if(D=[],Ee(g.split(t)),me(),Y)return Q()}else Ee(g.split(t));if(y&&y<=O)return D=D.slice(0,y),Q(!0)}}return Q()}for(var z=b.indexOf(t,v),_=b.indexOf(r,v),he=new RegExp(le(U)+le(f),"g"),N=b.indexOf(f,v);;)if(b[v]===f)for(N=v,v++;;){if((N=b.indexOf(f,N+1))===-1)return h||P.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:D.length,index:v}),ae();if(N===G-1)return ae(b.substring(v,N).replace(he,f));if(f===U&&b[N+1]===U)N++;else if(f===U||N===0||b[N-1]!==U){z!==-1&&z<N+1&&(z=b.indexOf(t,N+1));var q=se((_=_!==-1&&_<N+1?b.indexOf(r,N+1):_)===-1?z:Math.min(z,_));if(b.substr(N+1+q,V)===t){g.push(b.substring(v,N).replace(he,f)),b[v=N+1+q+V]!==f&&(N=b.indexOf(f,v)),z=b.indexOf(t,v),_=b.indexOf(r,v);break}if(q=se(_),b.substring(N+1+q,N+1+q+Z)===r){if(g.push(b.substring(v,N).replace(he,f)),ye(N+1+q+Z),z=b.indexOf(t,v),N=b.indexOf(f,v),w&&(me(),Y))return Q();if(y&&D.length>=y)return Q(!0);break}P.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:D.length,index:v}),N++}}else if(c&&g.length===0&&b.substring(v,v+F)===c){if(_===-1)return Q();v=_+Z,_=b.indexOf(r,v),z=b.indexOf(t,v)}else if(z!==-1&&(z<_||_===-1))g.push(b.substring(v,z)),v=z+V,z=b.indexOf(t,v);else{if(_===-1)break;if(g.push(b.substring(v,_)),ye(_+Z),w&&(me(),Y))return Q();if(y&&D.length>=y)return Q(!0)}return ae();function Ee(H){D.push(H),$=v}function se(H){var X=0;return X=H!==-1&&(H=b.substring(N+1,H))&&H.trim()===""?H.length:X}function ae(H){return h||(H===void 0&&(H=b.substring(v)),g.push(H),v=G,Ee(g),w&&me()),Q()}function ye(H){v=H,Ee(g),g=[],_=b.indexOf(r,v)}function Q(H){if(a.header&&!E&&D.length&&!oe){var X=D[0],je=Object.create(null),Ie=new Set(X);let Oe=!1;for(let _e=0;_e<X.length;_e++){let ue=X[_e];if(je[ue=A(a.transformHeader)?a.transformHeader(ue,_e):ue]){let Ae,Qe=je[ue];for(;Ae=ue+"_"+Qe,Qe++,Ie.has(Ae););Ie.add(Ae),X[_e]=Ae,je[ue]++,Oe=!0,(ce=ce===null?{}:ce)[Ae]=ue}else je[ue]=1,X[_e]=ue;Ie.add(ue)}Oe&&console.warn("Duplicate headers found and renamed."),oe=!0}return{data:D,errors:P,meta:{delimiter:t,linebreak:r,aborted:Y,truncated:!!H,cursor:$+(E||0),renamedHeaders:ce}}}function me(){o(Q()),D=[],P=[]}},this.abort=function(){Y=!0},this.getCharIndex=function(){return v}}function Me(a){var t=a.data,r=fe[t.workerId],c=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){c=!0,qe(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:$e,resume:$e};if(A(r.userStep)){for(var y=0;y<t.results.data.length&&(r.userStep({data:t.results.data[y],errors:t.results.errors,meta:t.results.meta},o),!c);y++);delete t.results}else A(r.userChunk)&&(r.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!c&&qe(t.workerId,t.results)}function qe(a,t){var r=fe[a];A(r.userComplete)&&r.userComplete(t),r.terminate(),delete fe[a]}function $e(){throw new Error("Not implemented.")}function l(a){if(typeof a!="object"||a===null)return a;var t,r=Array.isArray(a)?[]:{};for(t in a)r[t]=l(a[t]);return r}function J(a,t){return function(){a.apply(t,arguments)}}function A(a){return typeof a=="function"}return j.parse=function(a,t){var r=(t=t||{}).dynamicTyping||!1;if(A(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!A(t.transform)&&t.transform,!t.worker||!j.WORKERS_SUPPORTED)return r=null,j.NODE_STREAM_INPUT,typeof a=="string"?(a=(c=>c.charCodeAt(0)!==65279?c:c.slice(1))(a),r=new(t.download?C:be)(t)):a.readable===!0&&A(a.read)&&A(a.on)?r=new Ne(t):(T.File&&a instanceof File||a instanceof Object)&&(r=new ne(t)),r.stream(a);(r=(()=>{var c;return!!j.WORKERS_SUPPORTED&&(c=(()=>{var o=T.URL||T.webkitURL||null,y=ze.toString();return j.BLOB_URL||(j.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",y,")();"],{type:"text/javascript"})))})(),(c=new T.Worker(c)).onmessage=Me,c.id=De++,fe[c.id]=c)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=A(t.step),t.chunk=A(t.chunk),t.complete=A(t.complete),t.error=A(t.error),delete t.worker,r.postMessage({input:a,config:t,workerId:r.id})},j.unparse=function(a,t){var r=!1,c=!0,o=",",y=`\r
`,K='"',ce=K+K,oe=!1,f=null,U=!1,v=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||j.BAD_DELIMITERS.filter(function(E){return t.delimiter.indexOf(E)!==-1}).length||(o=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(oe=t.skipEmptyLines),typeof t.newline=="string"&&(y=t.newline),typeof t.quoteChar=="string"&&(K=t.quoteChar),typeof t.header=="boolean"&&(c=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");f=t.columns}t.escapeChar!==void 0&&(ce=t.escapeChar+K),t.escapeFormulae instanceof RegExp?U=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(le(K),"g"));if(typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(a)){if(!a.length||Array.isArray(a[0]))return Y(null,a,oe);if(typeof a[0]=="object")return Y(f||Object.keys(a[0]),a,oe)}else if(typeof a=="object")return typeof a.data=="string"&&(a.data=JSON.parse(a.data)),Array.isArray(a.data)&&(a.fields||(a.fields=a.meta&&a.meta.fields||f),a.fields||(a.fields=Array.isArray(a.data[0])?a.fields:typeof a.data[0]=="object"?Object.keys(a.data[0]):[]),Array.isArray(a.data[0])||typeof a.data[0]=="object"||(a.data=[a.data])),Y(a.fields||[],a.data||[],oe);throw new Error("Unable to serialize unrecognized input");function Y(E,h,G){var V="",Z=(typeof E=="string"&&(E=JSON.parse(E)),typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(E)&&0<E.length),F=!Array.isArray(h[0]);if(Z&&c){for(var w=0;w<E.length;w++)0<w&&(V+=o),V+=b(E[w],w);0<h.length&&(V+=y)}for(var D=0;D<h.length;D++){var P=(Z?E:h[D]).length,g=!1,$=Z?Object.keys(h[D]).length===0:h[D].length===0;if(G&&!Z&&(g=G==="greedy"?h[D].join("").trim()==="":h[D].length===1&&h[D][0].length===0),G==="greedy"&&Z){for(var L=[],O=0;O<P;O++){var z=F?E[O]:O;L.push(h[D][z])}g=L.join("").trim()===""}if(!g){for(var _=0;_<P;_++){0<_&&!$&&(V+=o);var he=Z&&F?E[_]:_;V+=b(h[D][he],_)}D<h.length-1&&(!G||0<P&&!$)&&(V+=y)}}return V}function b(E,h){var G,V;return E==null?"":E.constructor===Date?JSON.stringify(E).slice(1,25):(V=!1,U&&typeof E=="string"&&U.test(E)&&(E="'"+E,V=!0),G=E.toString().replace(v,ce),(V=V||r===!0||typeof r=="function"&&r(E,h)||Array.isArray(r)&&r[h]||((Z,F)=>{for(var w=0;w<F.length;w++)if(-1<Z.indexOf(F[w]))return!0;return!1})(G,j.BAD_DELIMITERS)||-1<G.indexOf(o)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?K+G+K:G)}},j.RECORD_SEP="",j.UNIT_SEP="",j.BYTE_ORDER_MARK="\uFEFF",j.BAD_DELIMITERS=["\r",`
`,'"',j.BYTE_ORDER_MARK],j.WORKERS_SUPPORTED=!xe&&!!T.Worker,j.NODE_STREAM_INPUT=1,j.LocalChunkSize=10485760,j.RemoteChunkSize=5242880,j.DefaultDelimiter=",",j.Parser=Ce,j.ParserHandle=I,j.NetworkStreamer=C,j.FileStreamer=ne,j.StringStreamer=be,j.ReadableStreamStreamer=Ne,T.jQuery&&((S=T.jQuery).fn.parse=function(a){var t=a.config||{},r=[];return this.each(function(y){if(!(S(this).prop("tagName").toUpperCase()==="INPUT"&&S(this).attr("type").toLowerCase()==="file"&&T.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)r.push({file:this.files[K],inputElem:this,instanceConfig:S.extend({},t)})}),c(),this;function c(){if(r.length===0)A(a.complete)&&a.complete();else{var y,K,ce,oe,f=r[0];if(A(a.before)){var U=a.before(f.file,f.inputElem);if(typeof U=="object"){if(U.action==="abort")return y="AbortError",K=f.file,ce=f.inputElem,oe=U.reason,void(A(a.error)&&a.error({name:y},K,ce,oe));if(U.action==="skip")return void o();typeof U.config=="object"&&(f.instanceConfig=S.extend(f.instanceConfig,U.config))}else if(U==="skip")return void o()}var v=f.instanceConfig.complete;f.instanceConfig.complete=function(Y){A(v)&&v(Y,f.file,f.inputElem),o()},j.parse(f.file,f.instanceConfig)}}function o(){r.splice(0,1),c()}}),ge&&(T.onmessage=function(a){a=a.data,j.WORKER_ID===void 0&&a&&(j.WORKER_ID=a.workerId),typeof a.input=="string"?T.postMessage({workerId:j.WORKER_ID,results:j.parse(a.input,a.config),finished:!0}):(T.File&&a.input instanceof File||a.input instanceof Object)&&(a=j.parse(a.input,a.config))&&T.postMessage({workerId:j.WORKER_ID,results:a,finished:!0})}),(C.prototype=Object.create(W.prototype)).constructor=C,(ne.prototype=Object.create(W.prototype)).constructor=ne,(be.prototype=Object.create(be.prototype)).constructor=be,(Ne.prototype=Object.create(W.prototype)).constructor=Ne,j})})(bs);var Ps=bs.exports;const es=Cs(Ps);function zs({employee:n,departments:Ge,onSave:ze,onCancel:T}){const[S,xe]=R.useState({firstName:(n==null?void 0:n.fullName.split(" ")[0])||"",lastName:(n==null?void 0:n.fullName.split(" ").slice(1).join(" "))||"",email:(n==null?void 0:n.email)||"",phone:(n==null?void 0:n.phone)||"",position:(n==null?void 0:n.position)||"",department:(n==null?void 0:n.department)||"",hireDate:(n==null?void 0:n.hireDate)||new Date().toISOString().split("T")[0],salary:(n==null?void 0:n.salary)||25e3,address:(n==null?void 0:n.address)||"",emergencyContactName:(n==null?void 0:n.emergencyContact)||"",emergencyContactPhone:(n==null?void 0:n.emergencyPhone)||"",education:(n==null?void 0:n.education)||"",workSchedule:(n==null?void 0:n.workSchedule)||"Lunes a Viernes 9:00-17:00",status:(n==null?void 0:n.status)||"active"}),[ge,fe]=R.useState((n==null?void 0:n.skills)||[]),[De,j]=R.useState((n==null?void 0:n.certifications)||[]),[W,C]=R.useState(""),[ne,be]=R.useState(""),{toast:Ne}=vs(),I=(l,J)=>{xe(A=>({...A,[l]:J}))},le=()=>{W.trim()&&!ge.includes(W.trim())&&(fe([...ge,W.trim()]),C(""))},Ce=l=>{fe(ge.filter(J=>J!==l))},Me=()=>{ne.trim()&&!De.includes(ne.trim())&&(j([...De,ne.trim()]),be(""))},qe=l=>{j(De.filter(J=>J!==l))},$e=l=>{if(l.preventDefault(),!S.firstName||!S.lastName||!S.email||!S.position||!S.department||!S.emergencyContactName||!S.emergencyContactPhone){Ne({title:"Campos requeridos",description:"Por favor completa todos los campos obligatorios marcados con *.",variant:"destructive"});return}const J={...S,fullName:`${S.firstName} ${S.lastName}`,skills:ge,certifications:De,emergencyContact:S.emergencyContactName,emergencyPhone:S.emergencyContactPhone,id:(n==null?void 0:n.id)||Date.now()};ze(J)};return e.jsxs("form",{onSubmit:$e,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Información Personal"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"firstName",children:"Nombre *"}),e.jsx(de,{id:"firstName",value:S.firstName,onChange:l=>I("firstName",l.target.value),placeholder:"Juan",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"lastName",children:"Apellidos *"}),e.jsx(de,{id:"lastName",value:S.lastName,onChange:l=>I("lastName",l.target.value),placeholder:"Pérez García",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"email",children:"Email *"}),e.jsx(de,{id:"email",type:"email",value:S.email,onChange:l=>I("email",l.target.value),placeholder:"juan.perez@empresa.com",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"phone",children:"Teléfono"}),e.jsx(de,{id:"phone",value:S.phone,onChange:l=>I("phone",l.target.value),placeholder:"555-0123"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(B,{htmlFor:"address",children:"Dirección"}),e.jsx(de,{id:"address",value:S.address,onChange:l=>I("address",l.target.value),placeholder:"Av. Principal 123, Colonia, Ciudad, CP"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Información Laboral"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"position",children:"Puesto *"}),e.jsx(de,{id:"position",value:S.position,onChange:l=>I("position",l.target.value),placeholder:"Coordinador de Área",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"department",children:"Departamento *"}),e.jsxs(Te,{value:S.department,onValueChange:l=>I("department",l),children:[e.jsx(Fe,{children:e.jsx(Le,{placeholder:"Seleccionar departamento"})}),e.jsx(Pe,{children:Ge.map(l=>e.jsxs(M,{value:l.name,children:[l.name," (Nivel ",l.hierarchy,")"]},l.name))})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"hireDate",children:"Fecha de Contratación *"}),e.jsx(de,{id:"hireDate",type:"date",value:S.hireDate,onChange:l=>I("hireDate",l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"salary",children:"Salario Mensual (MXN) *"}),e.jsx(de,{id:"salary",type:"number",value:S.salary,onChange:l=>I("salary",parseInt(l.target.value)),placeholder:"25000",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"workSchedule",children:"Horario de Trabajo"}),e.jsxs(Te,{value:S.workSchedule,onValueChange:l=>I("workSchedule",l),children:[e.jsx(Fe,{children:e.jsx(Le,{})}),e.jsxs(Pe,{children:[e.jsx(M,{value:"Lunes a Viernes 8:00-17:00",children:"Lunes a Viernes 8:00-17:00"}),e.jsx(M,{value:"Lunes a Viernes 9:00-18:00",children:"Lunes a Viernes 9:00-18:00"}),e.jsx(M,{value:"Lunes a Sábado 7:00-15:00",children:"Lunes a Sábado 7:00-15:00"}),e.jsx(M,{value:"Lunes a Sábado 8:00-16:00",children:"Lunes a Sábado 8:00-16:00"}),e.jsx(M,{value:"Turnos rotativos",children:"Turnos rotativos"}),e.jsx(M,{value:"Horario flexible",children:"Horario flexible"})]})]})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"status",children:"Estado"}),e.jsxs(Te,{value:S.status,onValueChange:l=>I("status",l),children:[e.jsx(Fe,{children:e.jsx(Le,{})}),e.jsxs(Pe,{children:[e.jsx(M,{value:"active",children:"Activo"}),e.jsx(M,{value:"inactive",children:"Inactivo"}),e.jsx(M,{value:"vacation",children:"Vacaciones"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"emergencyContactName",children:"Nombre de Contacto de Emergencia *"}),e.jsx(de,{id:"emergencyContactName",value:S.emergencyContactName,onChange:l=>I("emergencyContactName",l.target.value),placeholder:"María Pérez",required:!0})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"emergencyContactPhone",children:"Teléfono de Contacto de Emergencia *"}),e.jsx(de,{id:"emergencyContactPhone",value:S.emergencyContactPhone,onChange:l=>I("emergencyContactPhone",l.target.value),placeholder:"555-0124",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Educación y Formación"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"education",children:"Nivel de Estudios"}),e.jsx(de,{id:"education",value:S.education,onChange:l=>I("education",l.target.value),placeholder:"Licenciatura en Administración"})]}),e.jsxs("div",{children:[e.jsx(B,{children:"Habilidades"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(de,{value:W,onChange:l=>C(l.target.value),placeholder:"Agregar habilidad",onKeyPress:l=>l.key==="Enter"&&(l.preventDefault(),le())}),e.jsx(k,{type:"button",onClick:le,variant:"outline",children:e.jsx(is,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:ge.map((l,J)=>e.jsxs(ie,{variant:"secondary",className:"cursor-pointer",onClick:()=>Ce(l),children:[l," ×"]},J))})]}),e.jsxs("div",{children:[e.jsx(B,{children:"Certificaciones"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(de,{value:ne,onChange:l=>be(l.target.value),placeholder:"Agregar certificación",onKeyPress:l=>l.key==="Enter"&&(l.preventDefault(),Me())}),e.jsx(k,{type:"button",onClick:Me,variant:"outline",children:e.jsx(is,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:De.map((l,J)=>e.jsxs(ie,{variant:"outline",className:"cursor-pointer",onClick:()=>qe(l),children:[l," ×"]},J))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(k,{type:"button",variant:"outline",onClick:T,children:"Cancelar"}),e.jsxs(k,{type:"submit",children:[n?"Actualizar":"Crear"," Empleado"]})]})]})}function $s(){var ls,cs;const{toast:n}=vs(),[Ge,ze]=R.useState("list"),[T,S]=R.useState(""),[xe,ge]=R.useState("all"),[fe,De]=R.useState("all"),[j,W]=R.useState(!1),[C,ne]=R.useState(null),[be,Ne]=R.useState(!1),[I,le]=R.useState(1),Ce=50,[Me,qe]=R.useState(!1),[$e,l]=R.useState(!1),[J,A]=R.useState(!1),[a,t]=R.useState(null),[r,c]=R.useState([]),[o,y]=R.useState({}),[K,ce]=R.useState(!1),oe=R.useRef(null),[f,U]=R.useState([]),[v,Y]=R.useState(!0),[b,E]=R.useState("name"),[h,G]=R.useState("asc"),[V,Z]=R.useState("all"),[F,w]=R.useState([{name:"Dirección General",hierarchy:1},{name:"Asistencia de Dirección",hierarchy:2},{name:"Secretaría Ejecutiva",hierarchy:2},{name:"Coordinación de Administración",hierarchy:3},{name:"Coordinación de Eventos y Actividades",hierarchy:3},{name:"Coordinación de Mantenimiento",hierarchy:3},{name:"Coordinación de Seguridad",hierarchy:3},{name:"Coordinación de Recursos Humanos",hierarchy:3},{name:"Coordinación de Finanzas",hierarchy:3},{name:"Área de Contabilidad",hierarchy:4},{name:"Área de Sistemas",hierarchy:4},{name:"Área de Compras",hierarchy:4},{name:"Personal Operativo",hierarchy:5}]),[D,P]=R.useState(!1),[g,$]=R.useState(null),[L,O]=R.useState({name:"",hierarchy:1}),z=()=>{O({name:"",hierarchy:1}),$(null),P(!0)},_=s=>{O({name:s.name,hierarchy:s.hierarchy}),$(s),P(!0)},he=()=>{if(!L.name.trim()){n({title:"Error",description:"El nombre del departamento es requerido",variant:"destructive"});return}if(g)w(s=>s.map(i=>i.name===g.name?{name:L.name,hierarchy:L.hierarchy}:i)),n({title:"Departamento actualizado",description:`Se actualizó el departamento "${L.name}"`});else{const s={name:L.name,hierarchy:L.hierarchy};w(i=>[...i,s]),n({title:"Departamento creado",description:`Se creó el departamento "${L.name}"`})}P(!1),$(null),O({name:"",hierarchy:1})},N=s=>{const i=f.filter(u=>u.department===s.name);if(i.length>0){n({title:"No se puede eliminar",description:`El departamento "${s.name}" tiene ${i.length} empleados asignados`,variant:"destructive"});return}window.confirm(`¿Estás seguro de que deseas eliminar el departamento "${s.name}"?`)&&(w(u=>u.filter(m=>m.name!==s.name)),n({title:"Departamento eliminado",description:`Se eliminó el departamento "${s.name}"`}))},q=async()=>{try{Y(!0),console.log("Cargando empleados desde la base de datos...");const s=await fetch("/api/hr/employees");if(console.log("Respuesta del servidor para empleados:",s.status),s.ok){const i=await s.json();console.log("Empleados recibidos:",i),console.log("Cantidad de empleados:",i.length),Array.isArray(i)?(U(i),console.log("Estado de empleados actualizado exitosamente")):(console.error("Datos de empleados no son un array:",i),n({title:"Error",description:"Formato de datos incorrecto del servidor",variant:"destructive"}))}else console.error("Error en la respuesta:",s.status,s.statusText),n({title:"Error",description:`Error al cargar empleados: ${s.status}`,variant:"destructive"})}catch(s){console.error("Error loading employees:",s),n({title:"Error",description:"No se pudieron cargar los empleados",variant:"destructive"})}finally{Y(!1)}};R.useEffect(()=>{q()},[]);const se=(()=>{console.log("=== DEBUG FILTRADO ==="),console.log("Total empleados recibidos:",f.length),console.log("Filtros activos:",{searchTerm:T,departmentFilter:xe,statusFilter:fe,hierarchyFilter:V});let s=f.filter(i=>{if(!i)return!1;const p=i.fullName||"",u=i.email||"",m=i.position||"",d=i.department||"",x=i.status||"",ee=T===""||p.toLowerCase().includes(T.toLowerCase())||u.toLowerCase().includes(T.toLowerCase())||m.toLowerCase().includes(T.toLowerCase()),ke=xe==="all"||d===xe,pe=fe==="all"||x===fe,we=V==="all"||(()=>{const ds=F.find(ys=>ys.name===d);return ds?ds.hierarchy.toString()===V:!1})(),os=ee&&ke&&pe&&we;return os||console.log(`Empleado ${p} filtrado por:`,{matchesSearch:ee,matchesDepartment:ke,matchesStatus:pe,matchesHierarchy:we,department:d,status:x}),os});return console.log("Empleados después de filtrado:",s.length),s.sort((i,p)=>{var m,d;let u=0;switch(b){case"name":case"alphabetical":u=(i.fullName||"").localeCompare(p.fullName||"");break;case"department":u=(i.department||"").localeCompare(p.department||"");break;case"seniority":const x=new Date(i.hireDate||""),ee=new Date(p.hireDate||"");u=x.getTime()-ee.getTime();break;case"hierarchy":const ke=((m=F.find(we=>we.name===i.department))==null?void 0:m.hierarchy)||999,pe=((d=F.find(we=>we.name===p.department))==null?void 0:d.hierarchy)||999;u=ke-pe;break;default:u=0}return h==="asc"?u:-u}),s})(),ae=Math.ceil(se.length/Ce),ye=(I-1)*Ce,Q=ye+Ce,me=se.slice(ye,Q),H=s=>{ne(s),Ne(!0)},X=s=>{ne(s),W(!0)},je=async s=>{if(window.confirm(`⚠️ ADVERTENCIA: Esta acción no se puede deshacer.

¿Estás seguro de que deseas eliminar permanentemente a ${s.fullName}?

Esta acción eliminará:
- Todos los datos del empleado
- Su historial laboral
- Sus asignaciones actuales

Escribe "ELIMINAR" para confirmar.`)){const p=window.prompt(`Para confirmar la eliminación de ${s.fullName}, escribe exactamente: ELIMINAR`);if(p==="ELIMINAR")try{const u=await fetch(`/api/hr/employees/${s.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(u.ok)n({title:"Empleado eliminado",description:`${s.fullName} ha sido eliminado permanentemente del sistema.`,variant:"destructive"}),console.log(`Empleado ${s.id} - ${s.fullName} eliminado`),q();else{const m=await u.json();n({title:"Error al eliminar empleado",description:m.error||"No se pudo eliminar el empleado",variant:"destructive"})}}catch(u){console.error("Error eliminando empleado:",u),n({title:"Error de conexión",description:"No se pudo conectar con el servidor",variant:"destructive"})}else p!==null&&n({title:"Eliminación cancelada",description:"La confirmación no coincide. El empleado no fue eliminado.",variant:"default"})}},Ie=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"vacation":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Oe=s=>{switch(s){case"active":return"Activo";case"inactive":return"Inactivo";case"vacation":return"Vacaciones";default:return"Desconocido"}},_e=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s),ue=s=>{var p;const i=(p=s.target.files)==null?void 0:p[0];i&&i.type==="text/csv"?(t(i),Ae(i)):n({title:"Archivo inválido",description:"Por favor selecciona un archivo CSV válido.",variant:"destructive"})},Ae=s=>{es.parse(s,{header:!0,skipEmptyLines:!0,complete:i=>{c(i.data.slice(0,5));const p=Object.keys(i.data[0]||{}),u={};p.forEach(m=>{const d=m.toLowerCase();d.includes("nombre")||d.includes("name")?u[m]="fullName":d.includes("email")||d.includes("correo")?u[m]="email":d.includes("telefono")||d.includes("phone")?u[m]="phone":d.includes("puesto")||d.includes("position")?u[m]="position":d.includes("departamento")||d.includes("department")?u[m]="department":(d.includes("salario")||d.includes("salary"))&&(u[m]="salary")}),y(u)}})},Qe=()=>{a&&(ce(!0),es.parse(a,{header:!0,skipEmptyLines:!0,complete:s=>{n({title:"Importación exitosa",description:`Se importaron ${s.data.length} empleados correctamente.`}),ce(!1),l(!1),t(null),c([]),y({})}}))},ns=s=>{const i=se.map(x=>s==="simple"?{"Nombre Completo":x.fullName,Email:x.email,Teléfono:x.phone,Puesto:x.position,Departamento:x.department,Salario:x.salary,Estado:Oe(x.status)}:{ID:x.id,"Nombre Completo":x.fullName,Email:x.email,Teléfono:x.phone,Puesto:x.position,Departamento:x.department,Salario:x.salary,Estado:Oe(x.status),Dirección:x.address,"Contacto de Emergencia":x.emergencyContact,Educación:x.education,Habilidades:x.skills.join(", ")}),p=es.unparse(i),u=new Blob([p],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),d=URL.createObjectURL(u);m.setAttribute("href",d),m.setAttribute("download",`empleados_${s}_${new Date().toISOString().split("T")[0]}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m),n({title:"Exportación exitosa",description:`Se exportaron ${i.length} empleados en formato ${s}.`}),A(!1)},Ns=()=>{const s=[{"Nombre Completo":"Juan Pérez García",Email:"juan.perez@empresa.com",Teléfono:"555-0123",Puesto:"Coordinador de Área",Departamento:"Coordinación de Administración",Salario:"35000"}],i=es.unparse(s),p=new Blob([i],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),m=URL.createObjectURL(p);u.setAttribute("href",m),u.setAttribute("download","plantilla_empleados.csv"),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),n({title:"Plantilla descargada",description:"Se descargó la plantilla CSV con formato de ejemplo."})};return e.jsx(Es,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ke,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Personal"}),e.jsx("p",{className:"text-gray-600",children:"Administración integral de empleados y recursos humanos con jerarquías organizacionales"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ve,{open:Me,onOpenChange:qe,children:[e.jsx(ss,{asChild:!0,children:e.jsxs(k,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"Gestionar Departamentos"]})}),e.jsxs(Ue,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(He,{children:[e.jsx(Be,{children:"Gestión de Departamentos"}),e.jsx(We,{children:"Administra los departamentos y sus niveles jerárquicos organizacionales"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",F.length," departamentos"]}),e.jsxs(k,{onClick:z,className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Nuevo Departamento"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:F.map((s,i)=>{const p=f.filter(m=>m.department===s.name).length,u={1:"from-[#8498a5] to-[#6b8394] text-white",2:"from-[#5ba8c4] to-[#4a96b2] text-white",3:"from-[#00a587] to-[#067f5f] text-white",4:"from-[#22c55e] to-[#16a34a] text-white",5:"from-[#bcd256] to-[#a6c548] text-white"};return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r ${u[s.hierarchy]}`,children:["Nivel ",s.hierarchy]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-lg",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.hierarchy===1?"Dirección":s.hierarchy===2?"Asistencias":s.hierarchy===3?"Coordinaciones":s.hierarchy===4?"Áreas":"Operativo"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ie,{variant:"secondary",className:"px-3 py-1",children:[p," empleados"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>_(s),className:"h-8 w-8 p-0",children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>N(s),className:"h-8 w-8 p-0 text-red-600 hover:text-red-800",disabled:p>0,children:e.jsx(ms,{className:"h-4 w-4"})})]})]})]},i)})}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Estructura Jerárquica Organizacional"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 text-sm",children:[e.jsxs("div",{className:"p-2 bg-[#8498a5]/10 rounded border-l-4 border-[#8498a5]",children:[e.jsx("div",{className:"font-medium text-[#8498a5]",children:"Nivel 1"}),e.jsx("div",{className:"text-[#6b8394]",children:"Dirección"})]}),e.jsxs("div",{className:"p-2 bg-[#5ba8c4]/10 rounded border-l-4 border-[#5ba8c4]",children:[e.jsx("div",{className:"font-medium text-[#5ba8c4]",children:"Nivel 2"}),e.jsx("div",{className:"text-[#4a96b2]",children:"Asistencias"})]}),e.jsxs("div",{className:"p-2 bg-[#00a587]/10 rounded border-l-4 border-[#00a587]",children:[e.jsx("div",{className:"font-medium text-[#00a587]",children:"Nivel 3"}),e.jsx("div",{className:"text-[#067f5f]",children:"Coordinaciones"})]}),e.jsxs("div",{className:"p-2 bg-[#22c55e]/10 rounded border-l-4 border-[#22c55e]",children:[e.jsx("div",{className:"font-medium text-[#22c55e]",children:"Nivel 4"}),e.jsx("div",{className:"text-[#16a34a]",children:"Áreas"})]}),e.jsxs("div",{className:"p-2 bg-[#bcd256]/10 rounded border-l-4 border-[#bcd256]",children:[e.jsx("div",{className:"font-medium text-[#bcd256]",children:"Nivel 5"}),e.jsx("div",{className:"text-[#a6c548]",children:"Operativo"})]})]})]})]}),e.jsx(Ve,{open:D,onOpenChange:P,children:e.jsxs(Ue,{children:[e.jsxs(He,{children:[e.jsx(Be,{children:g?"Editar Departamento":"Nuevo Departamento"}),e.jsx(We,{children:g?"Modifica la información del departamento":"Crea un nuevo departamento organizacional"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"deptName",children:"Nombre del Departamento *"}),e.jsx(de,{id:"deptName",value:L.name,onChange:s=>O(i=>({...i,name:s.target.value})),placeholder:"Ej: Coordinación de Marketing"})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"deptHierarchy",children:"Nivel Jerárquico *"}),e.jsxs(Te,{value:L.hierarchy.toString(),onValueChange:s=>O(i=>({...i,hierarchy:parseInt(s)})),children:[e.jsx(Fe,{children:e.jsx(Le,{})}),e.jsxs(Pe,{children:[e.jsx(M,{value:"1",children:"Nivel 1 - Dirección"}),e.jsx(M,{value:"2",children:"Nivel 2 - Asistencias"}),e.jsx(M,{value:"3",children:"Nivel 3 - Coordinaciones"}),e.jsx(M,{value:"4",children:"Nivel 4 - Áreas"}),e.jsx(M,{value:"5",children:"Nivel 5 - Operativo"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(k,{variant:"outline",onClick:()=>P(!1),children:"Cancelar"}),e.jsxs(k,{onClick:he,children:[g?"Actualizar":"Crear"," Departamento"]})]})]})})]})]}),e.jsxs(Ve,{open:$e,onOpenChange:l,children:[e.jsx(ss,{asChild:!0,children:e.jsxs(k,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),"Importar CSV"]})}),e.jsxs(Ue,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(He,{children:[e.jsx(Be,{children:"Importar Empleados desde CSV"}),e.jsx(We,{children:"Sube un archivo CSV para importar empleados masivamente al sistema"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-blue-50 rounded-lg",children:[e.jsxs(k,{variant:"outline",onClick:Ns,children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Descargar Plantilla"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Descarga la plantilla CSV con el formato correcto para importar datos"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"csvFile",children:"Seleccionar archivo CSV"}),e.jsx("input",{ref:oe,type:"file",accept:".csv",onChange:ue,className:"hidden"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs(k,{variant:"outline",onClick:()=>{var s;return(s=oe.current)==null?void 0:s.click()},children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Seleccionar Archivo"]}),a&&e.jsxs("span",{className:"text-sm text-green-600",children:["✓ ",a.name]})]})]}),r.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Vista previa de datos (primeras 5 filas)"}),e.jsx("div",{className:"mt-2 border rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:Object.keys(r[0]||{}).map(s=>e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:s},s))})}),e.jsx("tbody",{children:r.map((s,i)=>e.jsx("tr",{className:"border-t",children:Object.values(s).map((p,u)=>e.jsx("td",{className:"px-3 py-2",children:String(p)},u))},i))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(k,{variant:"outline",onClick:()=>{l(!1),t(null),c([])},children:"Cancelar"}),e.jsx(k,{onClick:Qe,disabled:K,children:K?"Procesando...":"Importar Empleados"})]})]})]})]})]})]}),e.jsxs(Ve,{open:J,onOpenChange:A,children:[e.jsx(ss,{asChild:!0,children:e.jsxs(k,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Exportar CSV"]})}),e.jsxs(Ue,{children:[e.jsxs(He,{children:[e.jsx(Be,{children:"Exportar Empleados a CSV"}),e.jsx(We,{children:"Selecciona el formato de exportación para descargar los datos"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(te,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>ns("simple"),children:e.jsx(re,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(as,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Exportación Simple"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Información básica: nombre, email, teléfono, puesto, departamento, salario"})]})]})})}),e.jsx(te,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>ns("complete"),children:e.jsx(re,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(as,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Exportación Completa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Toda la información disponible"})]})]})})})]})})]})]}),e.jsxs(k,{className:"flex items-center gap-2",onClick:()=>{n({title:"Función disponible",description:"El formulario de nuevo empleado está listo para usar."}),W(!0)},children:[e.jsx(Ls,{className:"h-4 w-4"}),"Nuevo Empleado"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(te,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Ke,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.length}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Empleados"})]})]})})}),e.jsx(te,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:F.length}),e.jsx("div",{className:"text-sm text-green-800",children:"Departamentos"})]})]})})}),e.jsx(te,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(us,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"5"}),e.jsx("div",{className:"text-sm text-purple-800",children:"Niveles Jerárquicos"})]})]})})}),e.jsx(te,{children:e.jsx(re,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ps,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:_e(f.reduce((s,i)=>s+i.salary,0)/f.length)}),e.jsx("div",{className:"text-sm text-orange-800",children:"Salario Promedio"})]})]})})})]}),e.jsxs(ks,{value:Ge,onValueChange:ze,className:"space-y-6",children:[e.jsxs(Ss,{className:"grid w-full grid-cols-4",children:[e.jsx(Xe,{value:"list",children:"Lista de Empleados"}),e.jsx(Xe,{value:"directory",children:"Directorio"}),e.jsx(Xe,{value:"departments",children:"Departamentos"}),e.jsx(Xe,{value:"organigram",children:"Organigrama"})]}),e.jsx(Ye,{value:"list",children:e.jsxs(te,{children:[e.jsx(ve,{children:e.jsxs(Se,{children:["Empleados (",se.length,")"]})}),e.jsx(re,{children:e.jsx("div",{className:"space-y-4",children:v?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Cargando empleados..."})}):me.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No se encontraron empleados"})}):me.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:s.fullName.split(" ").map(i=>i[0]).join("").substring(0,2)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.position}),e.jsx("p",{className:"text-xs text-gray-500",children:s.department})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ie,{variant:"outline",className:Ie(s.status),children:Oe(s.status)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",onClick:()=>H(s),children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsx(k,{size:"sm",variant:"outline",onClick:()=>X(s),children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx(k,{size:"sm",variant:"outline",onClick:()=>je(s),className:"text-red-600 hover:text-red-700 hover:border-red-300",children:e.jsx(ms,{className:"h-4 w-4"})})]})]})]},s.id))})}),ae>1&&e.jsx("div",{className:"px-6 py-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",ye+1,"-",Math.min(Q,se.length)," de ",se.length," empleados"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",onClick:()=>le(I-1),disabled:I===1,children:"Anterior"}),[...Array(ae)].map((s,i)=>e.jsx(k,{size:"sm",variant:I===i+1?"default":"outline",onClick:()=>le(i+1),children:i+1},i)),e.jsx(k,{size:"sm",variant:"outline",onClick:()=>le(I+1),disabled:I===ae,children:"Siguiente"})]})]})})]})}),e.jsx(Ye,{value:"directory",children:e.jsxs(te,{children:[e.jsxs(ve,{children:[e.jsxs(Se,{children:["Directorio de Empleados (",se.length,")"]}),e.jsx(ts,{children:"Directorio completo con filtros avanzados y gestión de perfiles"})]}),e.jsxs(re,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"directory-search",children:"Buscar por nombre"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ds,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(de,{id:"directory-search",placeholder:"Nombre del empleado...",value:T,onChange:s=>S(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Departamento"}),e.jsxs(Te,{value:xe,onValueChange:ge,children:[e.jsx(Fe,{children:e.jsx(Le,{placeholder:"Seleccionar departamento"})}),e.jsxs(Pe,{children:[e.jsx(M,{value:"all",children:"Todos los departamentos"}),F.map(s=>e.jsx(M,{value:s.name,children:s.name},s.name))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Nivel jerárquico"}),e.jsxs(Te,{value:V,onValueChange:Z,children:[e.jsx(Fe,{children:e.jsx(Le,{placeholder:"Seleccionar nivel"})}),e.jsxs(Pe,{children:[e.jsx(M,{value:"all",children:"Todos los niveles"}),e.jsx(M,{value:"1",children:"Nivel 1 - Dirección"}),e.jsx(M,{value:"2",children:"Nivel 2 - Asistencias"}),e.jsx(M,{value:"3",children:"Nivel 3 - Coordinaciones"}),e.jsx(M,{value:"4",children:"Nivel 4 - Áreas"}),e.jsx(M,{value:"5",children:"Nivel 5 - Operativo"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Ordenar por"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Te,{value:b,onValueChange:E,children:[e.jsx(Fe,{className:"flex-1",children:e.jsx(Le,{})}),e.jsxs(Pe,{children:[e.jsx(M,{value:"name",children:"Nombre"}),e.jsx(M,{value:"alphabetical",children:"Alfabético"}),e.jsx(M,{value:"department",children:"Departamento"}),e.jsx(M,{value:"seniority",children:"Antigüedad"}),e.jsx(M,{value:"hierarchy",children:"Jerarquía"})]})]}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>G(h==="asc"?"desc":"asc"),className:"px-3",children:h==="asc"?"↑":"↓"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v?e.jsx("div",{className:"col-span-full text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Cargando directorio..."})}):se.length===0?e.jsx("div",{className:"col-span-full text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No se encontraron empleados con los filtros aplicados"})}):se.map(s=>{var d,x,ee,ke;const i=F.find(pe=>pe.name===s.department),p=(i==null?void 0:i.hierarchy)||5,u=new Date(s.hireDate),m=new Date().getFullYear()-u.getFullYear();return e.jsx(te,{className:"hover:shadow-lg transition-shadow duration-200",children:e.jsxs(re,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:s.fullName.split(" ").map(pe=>pe[0]).join("").substring(0,2)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.fullName}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.position})]})]}),e.jsx(ie,{variant:"outline",className:Ie(s.status),children:Oe(s.status)})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.department}),e.jsxs(ie,{variant:"secondary",className:"text-xs",children:["Nivel ",p]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[m," ",m===1?"año":"años"," de antigüedad"]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700 truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:s.phone})]})]}),(((d=s.skills)==null?void 0:d.length)>0||((x=s.certifications)==null?void 0:x.length)>0)&&e.jsxs("div",{className:"mb-4",children:[((ee=s.skills)==null?void 0:ee.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Habilidades principales:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.skills.slice(0,2).map((pe,we)=>e.jsx(ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:pe},we)),s.skills.length>2&&e.jsxs(ie,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:["+",s.skills.length-2]})]})]}),((ke=s.certifications)==null?void 0:ke.length)>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Certificaciones:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.certifications.slice(0,2).map((pe,we)=>e.jsx(ie,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:pe},we)),s.certifications.length>2&&e.jsxs(ie,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-600",children:["+",s.certifications.length-2]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(k,{size:"sm",variant:"outline",onClick:()=>H(s),className:"flex-1",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ver Perfil"]}),e.jsxs(k,{size:"sm",variant:"outline",onClick:()=>X(s),className:"flex-1",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Editar"]})]})]})},s.id)})}),ae>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",ye+1,"-",Math.min(Q,se.length)," de ",se.length," empleados"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{size:"sm",variant:"outline",onClick:()=>le(I-1),disabled:I===1,children:[e.jsx(Os,{className:"h-4 w-4"}),"Anterior"]}),[...Array(Math.min(5,ae))].map((s,i)=>{const p=I<=3?i+1:I-2+i;return p>ae?null:e.jsx(k,{size:"sm",variant:I===p?"default":"outline",onClick:()=>le(p),children:p},p)}),e.jsxs(k,{size:"sm",variant:"outline",onClick:()=>le(I+1),disabled:I===ae,children:["Siguiente",e.jsx(Is,{className:"h-4 w-4"})]})]})]})]})]})}),e.jsx(Ye,{value:"departments",children:e.jsxs(te,{children:[e.jsxs(ve,{className:"bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-t-lg",children:[e.jsxs(Se,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#00a587] to-[#067f5f] rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-white"})}),"Departamentos Organizacionales"]}),e.jsx(ts,{className:"text-gray-700",children:"Estructura departamental con distribución de personal y jerarquías"})]}),e.jsxs(re,{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:F.map((s,i)=>{const p=f.filter(d=>d.department===s.name),m=(d=>{const x={1:{bg:"bg-gradient-to-br from-[#8498a5]/20 to-[#8498a5]/30",border:"border-[#8498a5]",badge:"bg-[#8498a5] text-white",icon:"text-[#8498a5]"},2:{bg:"bg-gradient-to-br from-[#5ba8c4]/20 to-[#5ba8c4]/30",border:"border-[#5ba8c4]",badge:"bg-[#5ba8c4] text-white",icon:"text-[#5ba8c4]"},3:{bg:"bg-gradient-to-br from-[#00a587]/20 to-[#00a587]/30",border:"border-[#00a587]",badge:"bg-[#00a587] text-white",icon:"text-[#00a587]"},4:{bg:"bg-gradient-to-br from-[#22c55e]/20 to-[#22c55e]/30",border:"border-[#22c55e]",badge:"bg-[#22c55e] text-white",icon:"text-[#22c55e]"},5:{bg:"bg-gradient-to-br from-[#bcd256]/20 to-[#bcd256]/30",border:"border-[#bcd256]",badge:"bg-[#bcd256] text-white",icon:"text-[#bcd256]"}};return x[d]||x[5]})(s.hierarchy);return e.jsxs(te,{className:`${m.bg} ${m.border} border-2 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1`,children:[e.jsx(ve,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(Je,{className:`h-5 w-5 ${m.icon}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Nivel ",s.hierarchy," - Jerarquía organizacional"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(ie,{className:`${m.badge} px-3 py-1 text-sm font-semibold`,children:[p.length," ",p.length===1?"empleado":"empleados"]}),e.jsx(ie,{variant:"outline",className:"text-xs text-gray-600 border-gray-400",children:s.hierarchy===1?"Dirección":s.hierarchy===2?"Asistencias":s.hierarchy===3?"Coordinaciones":s.hierarchy===4?"Áreas":"Operativo"})]})]})}),e.jsx(re,{className:"pt-0",children:p.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(Ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm italic",children:"Sin empleados asignados"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Personal asignado:"]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:p.map((d,x)=>e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-3 border border-white/50 hover:bg-white/90 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-500 to-gray-700 rounded-full flex items-center justify-center text-white text-xs font-bold",children:d.fullName.split(" ").map(ee=>ee[0]).join("").substring(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:d.fullName}),e.jsx("p",{className:"text-xs text-gray-600",children:d.position})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>H(d),className:"h-7 w-7 p-0",children:e.jsx(Ze,{className:"h-3 w-3"})}),e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>X(d),className:"h-7 w-7 p-0",children:e.jsx(Re,{className:"h-3 w-3"})})]})]})},d.id))})]})})]},s.name)})}),e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-lg p-6 border border-[#00a587]/30",children:[e.jsxs("h4",{className:"font-bold text-lg text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-[#00a587]"}),"Resumen Organizacional"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(s=>{const i=F.filter(d=>d.hierarchy===s),p=f.filter(d=>{const x=F.find(ee=>ee.name===d.department);return(x==null?void 0:x.hierarchy)===s}),u={1:"bg-[#8498a5]/20 border-[#8498a5] text-[#8498a5]",2:"bg-[#5ba8c4]/20 border-[#5ba8c4] text-[#5ba8c4]",3:"bg-[#00a587]/20 border-[#00a587] text-[#00a587]",4:"bg-[#22c55e]/20 border-[#22c55e] text-[#22c55e]",5:"bg-[#bcd256]/20 border-[#bcd256] text-[#bcd256]"},m=s===1?"Dirección":s===2?"Asistencias":s===3?"Coordinaciones":s===4?"Áreas":"Operativo";return e.jsxs("div",{className:`${u[s]} rounded-lg p-3 border-2 text-center`,children:[e.jsx("div",{className:"text-lg font-bold",children:p.length}),e.jsx("div",{className:"text-xs font-medium",children:"empleados"}),e.jsx("div",{className:"text-xs mt-1",children:m}),e.jsxs("div",{className:"text-xs opacity-75",children:[i.length," dept."]})]},s)})})]})]})]})}),e.jsx(Ye,{value:"organigram",children:e.jsxs(te,{children:[e.jsxs(ve,{className:"bg-gradient-to-r from-green-50 to-teal-50 rounded-t-lg",children:[e.jsxs(Se,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg",children:e.jsx(hs,{className:"h-6 w-6 text-white"})}),"Organigrama Institucional"]}),e.jsx(ts,{className:"text-gray-700",children:"Estructura jerárquica completa con distribución de personal por niveles organizacionales"})]}),e.jsxs(re,{className:"p-6",children:[e.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(s=>{const i=s===1?"Dirección":s===2?"Asistencias":s===3?"Coordinaciones":s===4?"Áreas":"Operativo",p=F.filter(x=>x.hierarchy===s),u=f.filter(x=>{const ee=F.find(ke=>ke.name===x.department);return(ee==null?void 0:ee.hierarchy)===s}),m={1:"🏛️",2:"🎯",3:"⚡",4:"🔧",5:"👥"},d={1:"from-[#8498a5] to-[#6b8394] border-[#8498a5]",2:"from-[#5ba8c4] to-[#4a96b2] border-[#5ba8c4]",3:"from-[#00a587] to-[#008f75] border-[#00a587]",4:"from-[#22c55e] to-[#16a34a] border-[#22c55e]",5:"from-[#bcd256] to-[#a6c548] border-[#bcd256]"};return e.jsxs("div",{className:`bg-gradient-to-br ${d[s]} text-white rounded-xl p-4 border-2 text-center shadow-lg transform hover:scale-105 transition-all duration-300`,children:[e.jsx("div",{className:"text-2xl mb-2",children:m[s]}),e.jsx("div",{className:"text-lg font-bold",children:u.length}),e.jsx("div",{className:"text-xs font-medium opacity-90",children:"empleados"}),e.jsx("div",{className:"text-sm font-semibold mt-2 border-t border-white/30 pt-2",children:i}),e.jsxs("div",{className:"text-xs opacity-75",children:[p.length," departamentos"]})]},s)})})}),e.jsx("div",{className:"space-y-8",children:[1,2,3,4,5].map(s=>{const i=F.filter(m=>m.hierarchy===s);if(i.length===0)return null;const u={1:{bg:"bg-gradient-to-br from-[#8498a5]/20 via-[#8498a5]/10 to-white",border:"border-[#8498a5]/30",title:"bg-gradient-to-r from-[#8498a5] to-[#6b8394]",icon:"🏛️",name:"Dirección General",description:"Máximo nivel ejecutivo y toma de decisiones estratégicas"},2:{bg:"bg-gradient-to-br from-[#5ba8c4]/20 via-[#5ba8c4]/10 to-white",border:"border-[#5ba8c4]/30",title:"bg-gradient-to-r from-[#5ba8c4] to-[#4a96b2]",icon:"🎯",name:"Asistencias de Dirección",description:"Soporte directo y coordinación ejecutiva"},3:{bg:"bg-gradient-to-br from-[#00a587]/20 via-[#00a587]/10 to-white",border:"border-[#00a587]/30",title:"bg-gradient-to-r from-[#00a587] to-[#067f5f]",icon:"⚡",name:"Coordinaciones Operativas",description:"Gestión y coordinación de operaciones principales"},4:{bg:"bg-gradient-to-br from-[#22c55e]/20 via-[#22c55e]/10 to-white",border:"border-[#22c55e]/30",title:"bg-gradient-to-r from-[#22c55e] to-[#16a34a]",icon:"🔧",name:"Áreas Especializadas",description:"Departamentos técnicos y especializados"},5:{bg:"bg-gradient-to-br from-[#bcd256]/20 via-[#bcd256]/10 to-white",border:"border-[#bcd256]/30",title:"bg-gradient-to-r from-[#bcd256] to-[#a6c548]",icon:"👥",name:"Personal Operativo",description:"Ejecución directa y operaciones de campo"}}[s];return e.jsxs("div",{className:`${u.bg} ${u.border} border-2 rounded-2xl p-6 shadow-lg`,children:[e.jsx("div",{className:`${u.title} text-white rounded-xl p-4 mb-6 shadow-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:u.icon}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["Nivel ",s," - ",u.name]}),e.jsx("p",{className:"text-sm opacity-90",children:u.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("div",{className:"text-xs opacity-90",children:"departamentos"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:i.map(m=>{const d=f.filter(x=>x.department===m.name);return e.jsxs(te,{className:"bg-white/80 backdrop-blur-sm border-2 border-white/50 hover:bg-white hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx(ve,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-gray-600 to-gray-800 rounded-lg",children:e.jsx(Je,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:m.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs(ie,{className:"text-xs bg-blue-600 text-white",children:[d.length," empleados"]})})]})]})})}),e.jsx(re,{className:"pt-0",children:d.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(Ke,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-xs italic",children:"Sin personal asignado"})]}):e.jsx("div",{className:"space-y-2",children:d.map(x=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-2 hover:bg-gray-100 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:x.fullName.split(" ").map(ee=>ee[0]).join("").substring(0,2)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:x.fullName}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:x.position})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>H(x),className:"h-6 w-6 p-0 hover:bg-blue-100",children:e.jsx(Ze,{className:"h-3 w-3 text-blue-600"})}),e.jsx(k,{size:"sm",variant:"ghost",onClick:()=>X(x),className:"h-6 w-6 p-0 hover:bg-green-100",children:e.jsx(Re,{className:"h-3 w-3 text-green-600"})})]})]})},x.id))})})]},m.name)})}),s===5&&e.jsx("div",{className:"mt-6",children:(()=>{const m=f.filter(d=>!F.some(x=>x.name===d.department));return m.length===0?null:e.jsxs("div",{className:"bg-gradient-to-r from-red-100 to-pink-100 border-2 border-red-300 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-bold text-red-800 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-red-600 rounded",children:e.jsx(As,{className:"h-4 w-4 text-white"})}),"Empleados sin departamento definido (",m.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3",children:m.map(d=>e.jsx("div",{className:"bg-white/80 border border-red-200 rounded-lg p-3 hover:bg-white transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-red-500 to-pink-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:d.fullName.split(" ").map(x=>x[0]).join("").substring(0,2)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:d.fullName}),e.jsx("p",{className:"text-xs text-gray-600",children:d.position}),e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["Dept: ",d.department]})]})]}),e.jsx(k,{size:"sm",variant:"outline",onClick:()=>X(d),className:"border-red-300 text-red-600 hover:bg-red-50",children:e.jsx(Re,{className:"h-3 w-3"})})]})},d.id))})]})})()})]},s)})})]})]})})]}),e.jsx(Ve,{open:j,onOpenChange:W,children:e.jsxs(Ue,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(He,{children:[e.jsx(Be,{children:C?"Editar Empleado":"Nuevo Empleado"}),e.jsx(We,{children:C?"Modifica la información del empleado seleccionado":"Completa el formulario para agregar un nuevo empleado al sistema"})]}),e.jsx(zs,{employee:C,departments:F,onSave:async s=>{try{console.log("Datos del empleado a guardar:",s);const i=C&&C.id;let p;if(i)p=await fetch(`/api/hr/employees/${C.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});else{const m=await fetch("/api/hr/employees");if(m.ok&&(await m.json()).some(ee=>ee.email===s.email)){n({title:"Email ya registrado",description:`El email ${s.email} ya está registrado. Usa un email diferente.`,variant:"destructive"});return}p=await fetch("/api/hr/employees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}if(!p.ok){let m=i?"Error al actualizar el empleado":"Error al crear el empleado";try{const d=await p.json();d.error&&(m=d.error)}catch{const x=await p.text();console.error("Error response (not JSON):",x),p.status===500?m="Error del servidor. Verifica que los datos sean válidos.":p.status===400&&(m="Datos inválidos. Verifica que el email no esté duplicado.")}throw new Error(m)}const u=await p.json();n({title:i?"Empleado actualizado exitosamente":"Empleado creado exitosamente",description:`${s.firstName} ${s.lastName} ha sido ${i?"actualizado":"agregado"} en el sistema.`}),W(!1),ne(null),await q()}catch(i){console.error("Error al procesar empleado:",i),n({title:"Error",description:i.message||"No se pudo procesar el empleado. Intenta nuevamente.",variant:"destructive"})}},onCancel:()=>{W(!1),ne(null)}})]})}),e.jsx(Ve,{open:be,onOpenChange:Ne,children:e.jsxs(Ue,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(He,{children:e.jsx(Be,{className:"flex items-center gap-3",children:C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:C.fullName.split(" ").map(s=>s[0]).join("").substring(0,2)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold",children:C.fullName}),e.jsx("div",{className:"text-sm text-gray-600 font-normal",children:C.position})]}),e.jsx(ie,{variant:"outline",className:Ie(C.status),children:Oe(C.status)})]})})}),C&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(te,{children:[e.jsx(ve,{children:e.jsx(Se,{className:"text-lg",children:"Información Personal"})}),e.jsxs(re,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.address})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ts,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.education})]})]})]}),e.jsxs(te,{children:[e.jsx(ve,{children:e.jsx(Se,{className:"text-lg",children:"Información Laboral"})}),e.jsxs(re,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Je,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.department})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.position})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ps,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:_e(typeof C.salary=="string"?parseFloat(C.salary):C.salary)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(gs,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Desde ",new Date(C.hireDate).toLocaleDateString("es-MX")]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.workSchedule})]})]})]})]}),e.jsxs(te,{children:[e.jsx(ve,{children:e.jsx(Se,{className:"text-lg",children:"Contacto de Emergencia"})}),e.jsxs(re,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.emergencyContact})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rs,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:C.emergencyPhone})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(te,{children:[e.jsx(ve,{children:e.jsx(Se,{className:"text-lg",children:"Certificaciones"})}),e.jsx(re,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(ls=C.certifications)==null?void 0:ls.map((s,i)=>e.jsx(ie,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:s},i))})})]}),e.jsxs(te,{children:[e.jsx(ve,{children:e.jsx(Se,{className:"text-lg",children:"Habilidades"})}),e.jsx(re,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(cs=C.skills)==null?void 0:cs.map((s,i)=>e.jsx(ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:s},i))})})]})]}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:e.jsxs(k,{variant:"outline",onClick:()=>{Ne(!1),ne(C),W(!0)},children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Editar Información"]})})]})]})})]})})}export{$s as default};
