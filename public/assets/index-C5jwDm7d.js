import{a2 as C,ae as oe,u as G,ag as O,j as e,aX as xe,f as c,m as A,B as x,bh as he,b1 as je,b2 as me,b3 as E,F as ue,ch as H,t as z,b4 as M,g as h,h as j,a7 as pe,i as m,N as i,Q as y,V as b,W as N,Y as f,_ as l,bH as U,bI as Q,bJ as k,bK as t,bL as J,bM as d,r as S,o as w,O as u,e as ge,bN as ve,br as R,n as X,w as K,y as $,z as W,I as Y,$ as ye,ah as Z,bo as ee,cb as P,aq as be,a1 as q}from"./index-D5qLf1ib.js";function Te(){var B;const[se,ae]=C.useState("requests"),[p,D]=C.useState({status:"all",employeeId:"all",requestType:"all",page:1}),[le,F]=C.useState(!1),[g,I]=C.useState({open:!1,request:null}),[r,v]=C.useState({employeeId:"",requestType:"vacation",startDate:"",endDate:"",requestedDays:"",reason:"",description:""}),_=oe(),{data:o,isLoading:ie}=G({queryKey:["vacation-requests",p],queryFn:async()=>{const s=new URLSearchParams;p.status!=="all"&&s.append("status",p.status),p.employeeId&&s.append("employeeId",p.employeeId),p.requestType!=="all"&&s.append("requestType",p.requestType),s.append("page",p.page.toString()),s.append("limit","10"),console.log("游깷 [API REQUEST] GET /api/hr/vacation-requests?"+s);const a=await fetch(`/api/hr/vacation-requests?${s}`,{headers:{Authorization:"Bearer direct-token-1750522117022","X-User-Id":"1","X-User-Role":"super_admin"}});if(!a.ok)throw new Error("Error al obtener solicitudes");const n=await a.json();return console.log("游늶 Respuesta del servidor:",n),n}}),{data:T,isLoading:Ne,error:fe}=G({queryKey:["employees-active"],queryFn:async()=>{console.log("游깷 [API REQUEST] GET /api/hr/employees");const a=await(await fetch("/api/hr/employees")).json();console.log("游늶 Empleados recibidos:",a),console.log("游늶 Total empleados:",(a==null?void 0:a.length)||0);const n=a.filter(V=>V.fullName);return console.log("游늶 Empleados filtrados:",n),console.log("游늶 Total filtrados:",(n==null?void 0:n.length)||0),n}}),re=O({mutationFn:async s=>{console.log("游닋 Enviando datos de solicitud:",s);const a=await fetch("/api/hr/vacation-requests",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer direct-token-1750522117022","X-User-Id":"1","X-User-Role":"super_admin"},body:JSON.stringify(s)});if(!a.ok){const n=await a.text();throw new Error(n||"Error al crear solicitud")}return a.json()},onSuccess:()=>{P({title:"Solicitud creada",description:"La solicitud de vacaciones ha sido creada exitosamente"}),F(!1),v({employeeId:"",requestType:"vacation",startDate:"",endDate:"",requestedDays:"",reason:"",description:""}),_.invalidateQueries({queryKey:["vacation-requests"]})},onError:s=>{P({title:"Error",description:s.message||"Error al crear la solicitud",variant:"destructive"})}}),L=O({mutationFn:async({id:s,action:a,reviewComments:n})=>await be(`/api/hr/vacation-requests/${s}/review`,{method:"PUT",data:{action:a,reviewComments:n}}),onSuccess:()=>{P({title:"Solicitud procesada",description:"La solicitud ha sido procesada exitosamente"}),I({open:!1,request:null}),_.invalidateQueries({queryKey:["vacation-requests"]})},onError:s=>{P({title:"Error",description:s.message||"Error al procesar la solicitud",variant:"destructive"})}}),ne=(s,a)=>{if(!s||!a)return"";const n=new Date(s),V=new Date(a),ce=Math.abs(V.getTime()-n.getTime());return(Math.ceil(ce/(1e3*60*60*24))+1).toString()};C.useEffect(()=>{if(r.startDate&&r.endDate){const s=ne(r.startDate,r.endDate);v(a=>({...a,requestedDays:s}))}},[r.startDate,r.endDate]);const te=s=>{switch(s){case"pending":return e.jsxs(w,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(X,{className:"h-3 w-3 mr-1"}),"Pendiente"]});case"approved":return e.jsxs(w,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"Aprobada"]});case"rejected":return e.jsxs(w,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Rechazada"]});default:return e.jsx(w,{variant:"outline",children:s})}},de=s=>{const n={vacation:{label:"Vacaciones",color:"bg-blue-50 text-blue-700 border-blue-200"},sick_leave:{label:"Incapacidad",color:"bg-orange-50 text-orange-700 border-orange-200"},personal_leave:{label:"Permiso Personal",color:"bg-purple-50 text-purple-700 border-purple-200"},maternity_leave:{label:"Maternidad",color:"bg-pink-50 text-pink-700 border-pink-200"},paternity_leave:{label:"Paternidad",color:"bg-indigo-50 text-indigo-700 border-indigo-200"},unpaid_leave:{label:"Sin Goce",color:"bg-gray-50 text-gray-700 border-gray-200"}}[s]||{label:s,color:"bg-gray-50 text-gray-700 border-gray-200"};return e.jsx(w,{variant:"outline",className:n.color,children:n.label})};return e.jsx(xe,{children:e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx(c,{className:"p-4 bg-gray-50 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-8 h-8 text-gray-900"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gesti칩n de Vacaciones"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema integral para gesti칩n de vacaciones, permisos e incapacidades"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(x,{onClick:()=>F(!0),className:"bg-green-600 hover:bg-green-700 text-white gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Nueva Solicitud"]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(je,{value:se,onValueChange:ae,className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-4",children:[e.jsxs(E,{value:"requests",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"Solicitudes"]}),e.jsxs(E,{value:"dashboard",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Panel de Control"]}),e.jsxs(E,{value:"balances",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Balances"]}),e.jsxs(E,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Configuraci칩n"]})]}),e.jsxs(M,{value:"requests",className:"space-y-4",children:[e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Filtros"]})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"status-filter",children:"Estado"}),e.jsxs(y,{value:p.status,onValueChange:s=>D(a=>({...a,status:s,page:1})),children:[e.jsx(b,{children:e.jsx(N,{placeholder:"Todos los estados"})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:"Todos los estados"}),e.jsx(l,{value:"pending",children:"Pendientes"}),e.jsx(l,{value:"approved",children:"Aprobadas"}),e.jsx(l,{value:"rejected",children:"Rechazadas"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"employee-filter",children:"Empleado"}),e.jsxs(y,{value:p.employeeId,onValueChange:s=>D(a=>({...a,employeeId:s,page:1})),children:[e.jsx(b,{children:e.jsx(N,{placeholder:"Todos los empleados"})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:"Todos los empleados"}),T==null?void 0:T.filter(s=>s.id&&s.fullName).map(s=>e.jsx(l,{value:s.id.toString(),children:s.fullName},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"type-filter",children:"Tipo"}),e.jsxs(y,{value:p.requestType,onValueChange:s=>D(a=>({...a,requestType:s,page:1})),children:[e.jsx(b,{children:e.jsx(N,{placeholder:"Todos los tipos"})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:"Todos los tipos"}),e.jsx(l,{value:"vacation",children:"Vacaciones"}),e.jsx(l,{value:"sick_leave",children:"Incapacidad"}),e.jsx(l,{value:"personal_leave",children:"Permiso Personal"}),e.jsx(l,{value:"maternity_leave",children:"Maternidad"}),e.jsx(l,{value:"paternity_leave",children:"Paternidad"}),e.jsx(l,{value:"unpaid_leave",children:"Sin Goce"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(x,{onClick:()=>D({status:"all",employeeId:"",requestType:"all",page:1}),variant:"outline",className:"w-full",children:"Limpiar Filtros"})})]})})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsx(j,{children:"Solicitudes de Vacaciones"})}),e.jsxs(m,{children:[ie?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00a587] mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando solicitudes..."})]}):e.jsxs(U,{children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(t,{children:"Empleado"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{children:"Per칤odo"}),e.jsx(t,{children:"D칤as"}),e.jsx(t,{children:"Estado"}),e.jsx(t,{children:"Solicitado"}),e.jsx(t,{children:"Acciones"})]})}),e.jsx(J,{children:(B=o==null?void 0:o.data)==null?void 0:B.map(s=>e.jsxs(k,{children:[e.jsx(d,{className:"font-medium",children:s.employeeName}),e.jsx(d,{children:de(s.requestType)}),e.jsxs(d,{children:[S(new Date(s.startDate),"dd/MM/yyyy",{locale:q})," - ",S(new Date(s.endDate),"dd/MM/yyyy",{locale:q})]}),e.jsxs(d,{children:[s.requestedDays," d칤as"]}),e.jsx(d,{children:te(s.status)}),e.jsx(d,{children:S(new Date(s.submittedAt),"dd/MM/yyyy",{locale:q})}),e.jsx(d,{children:s.status==="pending"&&e.jsx(x,{size:"sm",variant:"outline",onClick:()=>I({open:!0,request:s}),children:"Revisar"})})]},s.id))})]}),(o==null?void 0:o.pagination)&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["P치gina ",o.pagination.page," de ",o.pagination.pages,"- Total: ",o.pagination.total," solicitudes"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>D(s=>({...s,page:s.page-1})),disabled:o.pagination.page===1,children:"Anterior"}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>D(s=>({...s,page:s.page+1})),disabled:o.pagination.page===o.pagination.pages,children:"Siguiente"})]})]})]})]})]}),e.jsxs(M,{value:"dashboard",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(c,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Solicitudes Pendientes"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"8"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Requieren revisi칩n"})]})]}),e.jsxs(c,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Empleados en Vacaciones"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"12"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Esta semana"})]})]}),e.jsxs(c,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"D칤as Promedio"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"15.3"}),e.jsx("p",{className:"text-xs text-gray-600",children:"D칤as por empleado"})]})]}),e.jsxs(c,{children:[e.jsx(h,{className:"pb-2",children:e.jsx(j,{className:"text-sm font-medium",children:"Cobertura"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"89%"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Posiciones cubiertas"})]})]})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Pr칩ximas Vacaciones (Pr칩ximas 2 semanas)"]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:[{name:"Ana Garc칤a L칩pez",department:"Recursos Humanos",dates:"15-19 Jul",days:5,status:"confirmada"},{name:"Carlos Mendoza",department:"Finanzas",dates:"18-25 Jul",days:8,status:"confirmada"},{name:"Elena Morales",department:"Operaciones",dates:"22-29 Jul",days:8,status:"pendiente"},{name:"Franco Colapinto",department:"Marketing",dates:"25 Jul - 2 Ago",days:9,status:"confirmada"}].map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-600",children:s.department})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:s.dates}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:[s.days," d칤as"]}),e.jsx(w,{variant:s.status==="confirmada"?"default":"secondary",className:"text-xs",children:s.status})]})]})]},a))})})]})]}),e.jsx(M,{value:"balances",className:"space-y-4",children:e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Balances de Vacaciones por Empleado"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{htmlFor:"search-employee",children:"Buscar empleado"}),e.jsx(u,{id:"search-employee",placeholder:"Nombre del empleado...",className:"max-w-sm"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"department-filter",children:"Departamento"}),e.jsxs(y,{defaultValue:"all",children:[e.jsx(b,{className:"w-40",children:e.jsx(N,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:"Todos"}),e.jsx(l,{value:"rh",children:"Recursos Humanos"}),e.jsx(l,{value:"finanzas",children:"Finanzas"}),e.jsx(l,{value:"operaciones",children:"Operaciones"}),e.jsx(l,{value:"marketing",children:"Marketing"})]})]})]})]}),e.jsxs(U,{children:[e.jsx(Q,{children:e.jsxs(k,{children:[e.jsx(t,{children:"Empleado"}),e.jsx(t,{children:"Departamento"}),e.jsx(t,{children:"D칤as Ganados"}),e.jsx(t,{children:"D칤as Usados"}),e.jsx(t,{children:"D칤as Pendientes"}),e.jsx(t,{children:"Saldo Disponible"}),e.jsx(t,{children:"Acciones"})]})}),e.jsx(J,{children:[{name:"Ana Garc칤a L칩pez",department:"Recursos Humanos",earned:20,used:8,pending:0,available:12},{name:"Carlos Mendoza",department:"Finanzas",earned:20,used:5,pending:8,available:7},{name:"Elena Morales",department:"Operaciones",earned:20,used:12,pending:8,available:0},{name:"Franco Colapinto",department:"Marketing",earned:20,used:3,pending:9,available:8},{name:"Luis Antonio Roman",department:"Administraci칩n",earned:20,used:0,pending:0,available:20},{name:"Mar칤a Elena Ruiz",department:"Operaciones",earned:20,used:15,pending:0,available:5}].map((s,a)=>e.jsxs(k,{children:[e.jsx(d,{className:"font-medium",children:s.name}),e.jsx(d,{children:s.department}),e.jsx(d,{children:s.earned}),e.jsx(d,{children:s.used}),e.jsx(d,{children:e.jsx(w,{variant:s.pending>0?"secondary":"outline",children:s.pending})}),e.jsx(d,{children:e.jsx("span",{className:`font-medium ${s.available>10?"text-green-600":s.available>5?"text-yellow-600":"text-red-600"}`,children:s.available})}),e.jsx(d,{children:e.jsx(x,{variant:"outline",size:"sm",children:"Ajustar"})})]},a))})]})]})})]})}),e.jsxs(M,{value:"settings",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Pol칤ticas de Vacaciones"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"annual-days",children:"D칤as anuales por empleado"}),e.jsx(u,{id:"annual-days",type:"number",defaultValue:"20"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"max-consecutive",children:"M치ximo d칤as consecutivos"}),e.jsx(u,{id:"max-consecutive",type:"number",defaultValue:"15"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"advance-notice",children:"D칤as de aviso previo"}),e.jsx(u,{id:"advance-notice",type:"number",defaultValue:"30"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"carryover-days",children:"D칤as acumulables al siguiente a침o"}),e.jsx(u,{id:"carryover-days",type:"number",defaultValue:"5"})]})]})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Flujo de Aprobaciones"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"approval-levels",children:"Niveles de aprobaci칩n"}),e.jsxs(y,{defaultValue:"2",children:[e.jsx(b,{children:e.jsx(N,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"1",children:"1 Nivel (Supervisor directo)"}),e.jsx(l,{value:"2",children:"2 Niveles (Supervisor + RH)"}),e.jsx(l,{value:"3",children:"3 Niveles (Supervisor + RH + Gerente)"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"auto-approval",children:"Aprobaci칩n autom치tica"}),e.jsxs(y,{defaultValue:"disabled",children:[e.jsx(b,{children:e.jsx(N,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"disabled",children:"Deshabilitada"}),e.jsx(l,{value:"1-day",children:"Solicitudes de 1 d칤a"}),e.jsx(l,{value:"3-days",children:"Solicitudes hasta 3 d칤as"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notification-time",children:"Recordatorio de aprobaci칩n (horas)"}),e.jsx(u,{id:"notification-time",type:"number",defaultValue:"24"})]})]})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Notificaciones"]})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{htmlFor:"email-notifications",children:"Notificaciones por email"}),e.jsx(R,{id:"email-notifications",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{htmlFor:"sms-notifications",children:"Notificaciones por SMS"}),e.jsx(R,{id:"sms-notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{htmlFor:"calendar-integration",children:"Integraci칩n con calendario"}),e.jsx(R,{id:"calendar-integration",defaultChecked:!0})]})]})})]}),e.jsxs(c,{children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Per칤odos Especiales"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"blackout-start",children:"Per칤odo de restricci칩n - Inicio"}),e.jsx(u,{id:"blackout-start",type:"date"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"blackout-end",children:"Per칤odo de restricci칩n - Fin"}),e.jsx(u,{id:"blackout-end",type:"date"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"holiday-adjustment",children:"Ajuste por d칤as festivos"}),e.jsx(R,{id:"holiday-adjustment",defaultChecked:!0})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(x,{variant:"outline",children:"Cancelar"}),e.jsx(x,{className:"bg-[#00a587] hover:bg-[#067f5f]",children:"Guardar Configuraci칩n"})]})]})]}),e.jsx(K,{open:le,onOpenChange:F,children:e.jsxs($,{className:"max-w-2xl",children:[e.jsx(W,{children:e.jsx(Y,{children:"Nueva Solicitud de Vacaciones"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"employee",children:"Empleado"}),e.jsxs(y,{value:r.employeeId,onValueChange:s=>v(a=>({...a,employeeId:s})),children:[e.jsx(b,{children:e.jsx(N,{placeholder:"Seleccionar empleado"})}),e.jsx(f,{children:T==null?void 0:T.filter(s=>s.id&&s.fullName).map(s=>e.jsx(l,{value:s.id.toString(),children:s.fullName},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"type",children:"Tipo de Solicitud"}),e.jsxs(y,{value:r.requestType,onValueChange:s=>v(a=>({...a,requestType:s})),children:[e.jsx(b,{children:e.jsx(N,{placeholder:"Seleccionar tipo"})}),e.jsxs(f,{children:[e.jsx(l,{value:"vacation",children:"Vacaciones"}),e.jsx(l,{value:"sick_leave",children:"Incapacidad"}),e.jsx(l,{value:"personal_leave",children:"Permiso Personal"}),e.jsx(l,{value:"maternity_leave",children:"Maternidad"}),e.jsx(l,{value:"paternity_leave",children:"Paternidad"}),e.jsx(l,{value:"unpaid_leave",children:"Sin Goce"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"start-date",children:"Fecha Inicio"}),e.jsx(u,{id:"start-date",type:"date",value:r.startDate,onChange:s=>v(a=>({...a,startDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"end-date",children:"Fecha Fin"}),e.jsx(u,{id:"end-date",type:"date",value:r.endDate,onChange:s=>v(a=>({...a,endDate:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"days",children:"D칤as Solicitados"}),e.jsx(u,{id:"days",type:"number",value:r.requestedDays,readOnly:!0,className:"bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"reason",children:"Motivo"}),e.jsx(u,{id:"reason",value:r.reason,onChange:s=>v(a=>({...a,reason:s.target.value})),placeholder:"Motivo de la solicitud"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"description",children:"Descripci칩n (Opcional)"}),e.jsx(ye,{id:"description",value:r.description,onChange:s=>v(a=>({...a,description:s.target.value})),placeholder:"Detalles adicionales"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),e.jsx(x,{onClick:()=>re.mutate(r),disabled:!r.employeeId||!r.startDate||!r.endDate||!r.reason,className:"bg-[#00a587] hover:bg-[#067f5f]",children:"Crear Solicitud"})]})]})]})}),e.jsx(K,{open:g.open,onOpenChange:s=>I({open:s,request:g.request}),children:e.jsxs($,{children:[e.jsx(W,{children:e.jsx(Y,{children:"Revisar Solicitud"})}),g.request&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Empleado:"})," ",g.request.employeeName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," ",g.request.requestType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Per칤odo:"})," ",S(new Date(g.request.startDate),"dd/MM/yyyy",{locale:q})," - ",S(new Date(g.request.endDate),"dd/MM/yyyy",{locale:q})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D칤as:"})," ",g.request.requestedDays]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Motivo:"})," ",g.request.reason]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{onClick:()=>L.mutate({id:g.request.id,action:"approve",reviewComments:""}),className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Aprobar"]}),e.jsxs(x,{onClick:()=>L.mutate({id:g.request.id,action:"reject",reviewComments:"Rechazada"}),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Rechazar"]})]})]})]})})]})]})})}export{Te as default};
