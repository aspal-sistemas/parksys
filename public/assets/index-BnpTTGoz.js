import{am as V,Y as r,u as T,j as e,aI as J,B as n,cY as R,C as d,a as x,b as m,c as o,h as y,al as k,Z as U,I as Y,z as G,H as O,J as Q,K as Z,N as h,a3 as W,bh as X,bi as ee,bj as E,bk as l,bl as se,bm as t,dp as w,f as C,b7 as ae,ba as le,D as te,r as ce,t as ne,v as ie,n as re,P as de,M as xe,U as me}from"./index-Dzu3mJf5.js";const L={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"},D={pending:"Pendiente",confirmed:"Confirmada",cancelled:"Cancelada",completed:"Completada"},q={playground:"Área de Juegos",kiosk:"Kiosco",picnic_area:"Área de Picnic",open_area:"Área Abierta",pavilion:"Pabellón"};function pe(){const[oe,_]=V(),[j,I]=r.useState(""),[g,M]=r.useState("all"),[a,S]=r.useState(null),[c,N]=r.useState(1),[p]=r.useState(10),{data:F=[],isLoading:H,error:z}=T({queryKey:["/api/space-reservations"],queryFn:async()=>{const s=await fetch("/api/space-reservations");if(!s.ok)throw new Error("Error al cargar las reservas");return s.json()}}),{data:u={},isLoading:he}=T({queryKey:["/api/space-reservations/stats"],queryFn:async()=>{const s=await fetch("/api/space-reservations/stats");if(!s.ok)throw new Error("Error al cargar las estadísticas");return s.json()}}),i=F.filter(s=>{const b=(s.customer_name||"").toLowerCase().includes(j.toLowerCase())||(s.space_name||"").toLowerCase().includes(j.toLowerCase())||(s.park_name||"").toLowerCase().includes(j.toLowerCase()),K=g==="all"||s.status===g;return b&&K}),v=Math.ceil(i.length/p),f=(c-1)*p,P=i.slice(f,f+p),A=s=>{S(s)},$=s=>{_(`/admin/space-reservations/edit/${s.id}`)},B=()=>{_("/admin/space-reservations/new")};return H?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):z?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:"Error al cargar las reservas de espacios"})}):e.jsx(J,{title:"Reservas de Espacios",subtitle:"Gestiona las reservas de espacios recreativos en los parques",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsxs(n,{onClick:B,className:"bg-[#00a587] hover:bg-[#067f5f] text-white",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Nueva Reserva"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Reservas"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold",children:u.total_reservations||0})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Confirmadas"}),e.jsx(y,{className:"h-4 w-4 text-green-600"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.confirmed||0})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Pendientes"}),e.jsx(y,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(o,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.pending||0})})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Ingresos del Mes"}),e.jsx(k,{className:"h-4 w-4 text-[#00a587]"})]}),e.jsx(o,{children:e.jsxs("div",{className:"text-2xl font-bold text-[#00a587]",children:["$",u.monthly_revenue||"0.00"]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(Y,{placeholder:"Buscar por cliente, espacio o parque...",value:j,onChange:s=>I(s.target.value),className:"pl-10"})]})}),e.jsxs(G,{value:g,onValueChange:M,children:[e.jsx(O,{className:"w-full sm:w-[180px]",children:e.jsx(Q,{placeholder:"Filtrar por estado"})}),e.jsxs(Z,{children:[e.jsx(h,{value:"all",children:"Todos los estados"}),e.jsx(h,{value:"pending",children:"Pendiente"}),e.jsx(h,{value:"confirmed",children:"Confirmada"}),e.jsx(h,{value:"cancelled",children:"Cancelada"}),e.jsx(h,{value:"completed",children:"Completada"})]})]})]}),e.jsxs(d,{children:[e.jsxs(x,{children:[e.jsx(m,{children:"Reservas Activas"}),e.jsxs(W,{children:["Mostrando ",P.length," de ",i.length," reservas"]})]}),e.jsxs(o,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(X,{children:[e.jsx(ee,{children:e.jsxs(E,{children:[e.jsx(l,{children:"Cliente"}),e.jsx(l,{children:"Espacio"}),e.jsx(l,{children:"Parque"}),e.jsx(l,{children:"Fecha"}),e.jsx(l,{children:"Horario"}),e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Total"}),e.jsx(l,{children:"Acciones"})]})}),e.jsx(se,{children:P.map(s=>e.jsxs(E,{children:[e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.customer_name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.customer_email})]})}),e.jsx(t,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.space_name}),e.jsx("div",{className:"text-sm text-gray-500",children:q[s.space_type]})]})}),e.jsx(t,{children:s.park_name}),e.jsx(t,{children:w(s.reservation_date)}),e.jsxs(t,{children:[s.start_time," - ",s.end_time,e.jsxs("div",{className:"text-sm text-gray-500",children:[s.total_hours,"h"]})]}),e.jsx(t,{children:e.jsx(C,{className:L[s.status],children:D[s.status]})}),e.jsxs(t,{className:"font-medium",children:["$",s.total_cost]}),e.jsx(t,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>A(s),children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>$(s),children:e.jsx(le,{className:"h-4 w-4"})})]})})]},s.id))})]})}),v>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Mostrando ",f+1," a ",Math.min(f+p,i.length)," de ",i.length," reservas"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>N(c-1),disabled:c===1,children:"Anterior"}),Array.from({length:v},(s,b)=>b+1).map(s=>e.jsx(n,{variant:c===s?"default":"outline",size:"sm",onClick:()=>N(s),className:c===s?"bg-[#00a587] hover:bg-[#067f5f]":"",children:s},s)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>N(c+1),disabled:c===v,children:"Siguiente"})]})]})]})]}),e.jsx(te,{open:!!a,onOpenChange:s=>!s&&S(null),children:e.jsxs(ce,{className:"max-w-2xl",children:[e.jsx(ne,{children:e.jsx(ie,{children:"Detalles de la Reserva"})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Información del Cliente"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Nombre:"}),e.jsx("span",{children:a.customer_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:a.customer_email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:a.customer_phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Información del Espacio"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:a.space_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Parque:"}),e.jsx("span",{children:a.park_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:["Capacidad: ",a.space_capacity," personas"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Tipo:"}),e.jsx("span",{children:q[a.space_type]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Detalles de la Reserva"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(y,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Fecha:"}),e.jsx("span",{children:w(a.reservation_date)})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Horario:"}),e.jsxs("span",{children:[a.start_time," - ",a.end_time]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsxs("span",{children:[a.total_hours," horas"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Costo por hora:"}),e.jsxs("span",{children:["$",a.hourly_rate]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-[#00a587]",children:["$",a.total_cost]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Depósito:"}),e.jsx(C,{className:a.deposit_paid?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:a.deposit_paid?"Pagado":"Pendiente"})]})]})]})]}),a.special_requests&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Solicitudes Especiales"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.special_requests})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Estado:"}),e.jsx(C,{className:`ml-2 ${L[a.status]}`,children:D[a.status]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Creada: ",w(a.created_at)]})]})})]})]})})]})})}export{pe as default};
