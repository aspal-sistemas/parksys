import{l as T,a2 as h,j as e,aX as q,f as c,g as r,h as d,bE as N,ab as o,aR as F,i as p,B as i,bG as v,m as M,bp as I,N as n,br as m,Q as E,V as G,W as P,Y as Z,_ as x,O as b,F as H,bS as U,o as C,D as V,bn as L,a1 as $}from"./index-D5qLf1ib.js";import{P as K}from"./progress-CD1SWYCP.js";function W(){const{toast:u}=T(),[k,j]=h.useState(!1),[g,f]=h.useState(0),[t,l]=h.useState({enabled:!0,frequency:"daily",time:"02:00",retentionDays:30,includeUploads:!0,includeDatabase:!0,includeConfigs:!0}),w=[{id:"1",filename:"parksys_gdl_backup_20250808_143000.sql.gz",size:486e6,createdAt:"2025-08-08T14:30:00Z",type:"automatic",status:"completed"},{id:"2",filename:"manual_activities_backup_20250808_091500.sql.gz",size:125e6,createdAt:"2025-08-08T09:15:00Z",type:"manual",status:"completed"},{id:"3",filename:"parksys_gdl_backup_20250807_020000.sql.gz",size:478e6,createdAt:"2025-08-07T02:00:00Z",type:"automatic",status:"completed"},{id:"4",filename:"parksys_gdl_backup_20250806_020000.sql.gz",size:471e6,createdAt:"2025-08-06T02:00:00Z",type:"automatic",status:"completed"},{id:"5",filename:"emergency_trees_backup_20250805_182200.sql.gz",size:89e6,createdAt:"2025-08-05T18:22:00Z",type:"manual",status:"completed"}],_=async()=>{j(!0),f(0);const s=setInterval(()=>{f(a=>a>=100?(clearInterval(s),j(!1),u({title:"Respaldo completado",description:"El respaldo manual se ha creado exitosamente"}),100):a+10)},500)},B=s=>{u({title:"Descargando respaldo",description:`Iniciando descarga de ${s.filename}`})},S=s=>{u({title:"Respaldo eliminado",description:`${s.filename} ha sido eliminado`})},D=s=>{if(s===0)return"0 Bytes";const a=1024,R=["Bytes","KB","MB","GB"],y=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,y)).toFixed(2))+" "+R[y]},z=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=s=>({completed:"Completado",in_progress:"En progreso",failed:"Falló"})[s]||s;return e.jsx(q,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border-blue-200",children:e.jsxs(r,{children:[e.jsxs(d,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(N,{className:"h-6 w-6"}),"Sistema de Respaldos"]}),e.jsx(o,{className:"text-blue-700",children:"Gestión integral de respaldos de base de datos y archivos del sistema."})]})}),e.jsxs(c,{children:[e.jsxs(r,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-blue-600"}),"Crear Respaldo Manual"]}),e.jsx(o,{children:"Genere un respaldo inmediato de la base de datos y archivos"})]}),e.jsx(p,{className:"space-y-4",children:k?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Creando respaldo... ",g,"%"]}),e.jsx(K,{value:g})]}):e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(i,{onClick:_,className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Crear Respaldo Ahora"]}),e.jsxs(i,{variant:"outline",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Programar Respaldo"]})]})})]}),e.jsxs(c,{children:[e.jsxs(r,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5 text-purple-600"}),"Configuración de Respaldos Automáticos"]}),e.jsx(o,{children:"Configure la frecuencia y opciones de los respaldos automáticos"})]}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(n,{children:"Respaldos automáticos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Habilitar respaldos programados"})]}),e.jsx(m,{checked:t.enabled,onCheckedChange:s=>l(a=>({...a,enabled:s}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"frequency",children:"Frecuencia"}),e.jsxs(E,{value:t.frequency,onValueChange:s=>l(a=>({...a,frequency:s})),children:[e.jsx(G,{children:e.jsx(P,{})}),e.jsxs(Z,{children:[e.jsx(x,{value:"hourly",children:"Cada hora"}),e.jsx(x,{value:"daily",children:"Diario"}),e.jsx(x,{value:"weekly",children:"Semanal"}),e.jsx(x,{value:"monthly",children:"Mensual"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"time",children:"Hora de ejecución"}),e.jsx(b,{id:"time",type:"time",value:t.time,onChange:s=>l(a=>({...a,time:s.target.value}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"retention",children:"Días de retención"}),e.jsx(b,{id:"retention",type:"number",min:"7",max:"365",value:t.retentionDays,onChange:s=>l(a=>({...a,retentionDays:parseInt(s.target.value)}))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{children:"Contenido del respaldo"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Base de datos"}),e.jsx(m,{checked:t.includeDatabase,onCheckedChange:s=>l(a=>({...a,includeDatabase:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Archivos subidos"}),e.jsx(m,{checked:t.includeUploads,onCheckedChange:s=>l(a=>({...a,includeUploads:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Configuraciones"}),e.jsx(m,{checked:t.includeConfigs,onCheckedChange:s=>l(a=>({...a,includeConfigs:s}))})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(i,{children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Guardar Configuración"]})})]})]}),e.jsxs(c,{children:[e.jsxs(r,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-green-600"}),"Respaldos Existentes"]}),e.jsx(o,{children:"Historial de respaldos disponibles para descarga y restauración"})]}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:w.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(N,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.filename}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx("span",{children:D(s.size)}),e.jsx("span",{children:U(new Date(s.createdAt),{locale:$,addSuffix:!0})}),e.jsx(C,{variant:"outline",children:s.type==="manual"?"Manual":"Automático"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:z(s.status),children:A(s.status)}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>B(s),children:e.jsx(V,{className:"h-4 w-4"})}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>S(s),children:e.jsx(L,{className:"h-4 w-4"})})]})]},s.id))})})]})]})})}export{W as default};
