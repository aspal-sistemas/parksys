import{u as T,j as e,aI as m,C as a,a as l,c as r,aJ as w,M as h,b as i,T as g,h as S,U as k,aK as I,a9 as y,aL as q,aM as U,x as L,aN as R,aj as B,a3 as D,f as v}from"./index-Dzu3mJf5.js";import{S as j}from"./skeleton-Die7Hc3c.js";import{L as C,M as E,T as V,a as $}from"./leaflet-x_zWA9SN.js";import{P as F}from"./Popup-5uo8TqZR.js";delete C.Icon.Default.prototype._getIconUrl;C.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const W=()=>{var f,N,p,b;const{data:t,isLoading:A,error:M}=T({queryKey:["/api/parks/dashboard"]});if(A)return e.jsx(m,{title:"Dashboard de Parques",children:e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((s,n)=>e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"h-4 w-24"}),e.jsx(j,{className:"h-4 w-4"})]}),e.jsxs(r,{children:[e.jsx(j,{className:"h-8 w-16 mb-2"}),e.jsx(j,{className:"h-3 w-32"})]})]},n))})})});if(M)return e.jsx(m,{title:"Resumen Operativo de Parques",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Error al cargar los datos del resumen operativo"})]})});if(!t)return e.jsx(m,{title:"Resumen Operativo de Parques",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No hay datos disponibles"})})});const P=[19.4326,-99.1332];return e.jsx(m,{title:"Resumen operativo",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"bg-green-500 rounded-full p-2",children:e.jsx(h,{className:"h-5 w-5 text-white"})}),"Información General"]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-emerald-100",children:"Total de Parques"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(h,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalParks}),e.jsxs("p",{className:"text-xs text-emerald-100",children:[t.activeParks," activos"]})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-blue-100",children:"Superficie Total"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(g,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalSurface?`${(t.totalSurface/1e4).toFixed(1)} ha`:"N/A"}),e.jsx("p",{className:"text-xs text-blue-100",children:"Superficie total de parques"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-teal-500 to-teal-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-teal-100",children:"Área Permeable"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(g,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalGreenArea?`${(t.totalGreenArea/1e4).toFixed(1)} ha`:"N/A"}),e.jsx("p",{className:"text-xs text-teal-100",children:"Superficie permeable total"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-purple-100",children:"Actividades"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(S,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalActivities}),e.jsx("p",{className:"text-xs text-purple-100",children:"Eventos programados"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-orange-100",children:"Voluntarios"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(k,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalVolunteers}),e.jsx("p",{className:"text-xs text-orange-100",children:"Activos en el sistema"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-green-500 to-green-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-green-100",children:"Árboles"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(g,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalTrees}),e.jsx("p",{className:"text-xs text-green-100",children:"En inventario"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-pink-500 to-pink-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-pink-100",children:"Visitantes"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(I,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalVisitors?t.totalVisitors.toLocaleString():"N/A"}),e.jsx("p",{className:"text-xs text-pink-100",children:"Visitantes totales"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-yellow-100",children:"Calificación"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(y,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.averageRating?t.averageRating.toFixed(1):"N/A"}),e.jsx("p",{className:"text-xs text-yellow-100",children:"Promedio de evaluaciones"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-red-500 to-red-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-red-100",children:"En Mantenimiento"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(w,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.maintenanceAreas}),e.jsx("p",{className:"text-xs text-red-100",children:"Áreas en mantenimiento"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-cyan-500 to-cyan-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-cyan-100",children:"Amenidades"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(q,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalAmenities}),e.jsx("p",{className:"text-xs text-cyan-100",children:"Amenidades disponibles"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-indigo-100",children:"Instructores"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(U,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalInstructors}),e.jsx("p",{className:"text-xs text-indigo-100",children:"Instructores activos"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-amber-500 to-amber-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-amber-100",children:"Incidencias"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(L,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalIncidents}),e.jsx("p",{className:"text-xs text-amber-100",children:"Incidencias (últimos 30 días)"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg bg-gradient-to-br from-slate-500 to-slate-600 text-white",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-slate-100",children:"Activos"}),e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(R,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalAssets}),e.jsx("p",{className:"text-xs text-slate-100",children:"Activos registrados"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-8"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(a,{className:"border-0 shadow-lg",children:[e.jsx(l,{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-t-lg",children:e.jsxs(i,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"bg-emerald-500 rounded-full p-2",children:e.jsx(h,{className:"h-4 w-4 text-white"})}),"Parques por Municipio"]})}),e.jsx(r,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:(f=t.parksByMunicipality)==null?void 0:f.map((s,n)=>{var c;const x=Math.max(...((c=t.parksByMunicipality)==null?void 0:c.map(d=>d.count))||[1]),o=s.count/x*100;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 text-sm font-medium text-right text-gray-700 truncate",children:s.municipalityName}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 h-6 rounded-full flex items-center justify-end pr-3 transition-all duration-700 shadow-sm",style:{width:`${Math.max(o,5)}%`},children:e.jsx("span",{className:"text-white text-xs font-bold",children:s.count})})})})]},n)})})})]}),e.jsxs(a,{className:"border-0 shadow-lg",children:[e.jsx(l,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-lg",children:e.jsxs(i,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"bg-blue-500 rounded-full p-2",children:e.jsx(B,{className:"h-4 w-4 text-white"})}),"Distribución por Tipo"]})}),e.jsx(r,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:(N=t.parksByType)==null?void 0:N.map((s,n)=>{var c;const x=Math.max(...((c=t.parksByType)==null?void 0:c.map(d=>d.count))||[1]),o=s.count/x*100;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 text-sm font-medium text-right text-gray-700 truncate",children:s.type}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-6 rounded-full flex items-center justify-end pr-3 transition-all duration-700 shadow-sm",style:{width:`${Math.max(o,5)}%`},children:e.jsx("span",{className:"text-white text-xs font-bold",children:s.count})})})})]},n)})})})]})]}),e.jsxs(a,{className:"border-0 shadow-lg",children:[e.jsx(l,{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-t-lg",children:e.jsxs(i,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"bg-teal-500 rounded-full p-2",children:e.jsx(y,{className:"h-4 w-4 text-white"})}),"Estado de Conservación"]})}),e.jsx(r,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:(p=t.conservationStatus)==null?void 0:p.map((s,n)=>{var d;const x=Math.max(...((d=t.conservationStatus)==null?void 0:d.map(u=>u.count))||[1]),o=s.count/x*100,c=u=>{switch(u.toLowerCase()){case"excelente":return"bg-gradient-to-r from-green-500 to-green-600";case"bueno":return"bg-gradient-to-r from-emerald-500 to-green-500";case"regular":return"bg-gradient-to-r from-yellow-500 to-orange-500";case"malo":return"bg-gradient-to-r from-red-500 to-red-600";default:return"bg-gradient-to-r from-gray-500 to-gray-600"}};return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-20 text-sm font-medium text-right text-gray-700 truncate",children:s.status}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:`${c(s.status)} h-6 rounded-full flex items-center justify-end pr-3 transition-all duration-700 shadow-sm`,style:{width:`${Math.max(o,5)}%`},children:e.jsx("span",{className:"text-white text-xs font-bold",children:s.count})})})})]},n)})})})]}),e.jsxs(a,{className:"border-0 shadow-xl",children:[e.jsxs(l,{className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-t-lg",children:[e.jsxs(i,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"bg-emerald-500 rounded-full p-2",children:e.jsx(h,{className:"h-5 w-5 text-white"})}),"Ubicación de Parques"]}),e.jsx(D,{className:"text-gray-600",children:"Mapa interactivo mostrando la ubicación de todos los parques en el sistema"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-96 w-full",children:e.jsxs(E,{center:P,zoom:6,className:"h-full w-full rounded-lg",children:[e.jsx(V,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(b=t.parksWithCoordinates)==null?void 0:b.filter(s=>s.latitude!=null&&s.longitude!=null&&!isNaN(s.latitude)&&!isNaN(s.longitude)).map(s=>e.jsx($,{position:[s.latitude,s.longitude],children:e.jsx(F,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.municipality}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(v,{variant:"outline",className:"text-xs",children:s.type}),s.area&&e.jsxs(v,{variant:"secondary",className:"text-xs",children:[(s.area/1e4).toFixed(1)," ha"]})]})]})})},s.id))]})})})]})]})]})})};export{W as default};
