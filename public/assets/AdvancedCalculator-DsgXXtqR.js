import{aD as me,Y as m,j as e,aI as he,d0 as je,z as B,H as Y,J as U,K as X,N as y,D as pe,p as ue,B as A,bz as ve,r as ge,t as Ce,v as fe,w as ye,y as n,I as c,aO as be,aP as Ne,aQ as N,aR as P,C as h,a as j,b as p,a3 as u,c as v,aK as Pe,al as Fe,d3 as Me,c7 as Te,f as D,aS as q,b4 as Ae,aU as H,aV as J,aW as Z,aX as Q,cz as W,b5 as _,aZ as I}from"./index-VG22aPDC.js";import{T as we}from"./trending-down-CpXUJmlr.js";import{B as Se}from"./BarChart-DH8XXsDW.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ge=()=>{const[ee,se]=m.useState("calculator"),[w,k]=m.useState(""),[ae,S]=m.useState(!1),[ie,re]=m.useState(""),[g,te]=m.useState([{id:1,name:"Clase de Yoga Matutina",category:"Deportivo",data:{title:"Yoga Matutino",audience:"Adultos",location:"Área verde",duration:"60",minCapacity:"8",maxCapacity:"20",feePerPerson:"150",tutorCost:"800",materialsCost:"200",variableCosts:"50",indirectCosts:"300"}},{id:2,name:"Taller de Arte Infantil",category:"Cultural",data:{title:"Taller de Pintura",audience:"Niños",location:"Salón multiusos",duration:"90",minCapacity:"6",maxCapacity:"15",feePerPerson:"200",tutorCost:"1000",materialsCost:"400",variableCosts:"75",indirectCosts:"250"}},{id:3,name:"Clase de Aqua Aeróbicos",category:"Deportivo",data:{title:"Aqua Aeróbicos",audience:"Adultos mayores",location:"Alberca",duration:"45",minCapacity:"10",maxCapacity:"25",feePerPerson:"180",tutorCost:"900",materialsCost:"150",variableCosts:"40",indirectCosts:"400"}}]),[i,d]=m.useState({title:"",audience:"",location:"",duration:"",minCapacity:"",maxCapacity:"",feePerPerson:"",tutorCost:"",materialsCost:"",variableCosts:"",indirectCosts:""}),[x,z]=m.useState({currentPrice:150,minPrice:100,maxPrice:300,priceStep:25}),r=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s),R=s=>{const a=parseInt(s.minCapacity)||0,l=parseInt(s.maxCapacity)||0,o=parseFloat(s.feePerPerson)||0,C=parseFloat(s.tutorCost)||0,f=parseFloat(s.materialsCost)||0,b=parseFloat(s.variableCosts)||0,ce=parseFloat(s.indirectCosts)||0,F=a*o,M=l*o,T=C+f+ce,O=T+a*b,L=T+l*b,V=F-O,$=M-L,de=Math.ceil(T/(o-b)),oe=F>0?V/F*100:0,xe=M>0?$/M*100:0;return{minRevenue:F,maxRevenue:M,minTotalCosts:O,maxTotalCosts:L,minProfit:V,maxProfit:$,breakeven:de,minMargin:oe,maxMargin:xe,fixedCosts:T}},t=R(i),G=(()=>{const s=[];for(let a=x.minPrice;a<=x.maxPrice;a+=x.priceStep){const l=parseInt(i.maxCapacity)||20,o=l*a,C=t.fixedCosts+l*(parseFloat(i.variableCosts)||0),f=o-C,b=o>0?f/o*100:0;s.push({price:a,revenue:o,profit:f,margin:Math.round(b*100)/100,participants:l})}return s})(),K=g.map(s=>{const a=R(s.data);return{activity:s.name,revenue:a.maxRevenue,costs:a.maxTotalCosts,profit:a.maxProfit,margin:a.maxMargin,breakeven:a.breakeven}}),ne=[{scenario:"Pesimista",occupancy:60,price:parseFloat(i.feePerPerson)*.9,costs:t.fixedCosts*1.1,color:"#ef4444"},{scenario:"Realista",occupancy:80,price:parseFloat(i.feePerPerson),costs:t.fixedCosts,color:"#f59e0b"},{scenario:"Optimista",occupancy:95,price:parseFloat(i.feePerPerson)*1.1,costs:t.fixedCosts*.95,color:"#22c55e"}].map(s=>{const a=Math.round((parseInt(i.maxCapacity)||20)*(s.occupancy/100)),l=a*s.price,o=s.costs+a*(parseFloat(i.variableCosts)||0),C=l-o,f=l>0?C/l*100:0;return{...s,capacity:a,revenue:l,totalCosts:o,profit:C,margin:f}}),E=s=>{const a=g.find(l=>l.id===parseInt(s));a&&(d(a.data),re(""))},le=()=>{if(w.trim()){const s={id:g.length+1,name:w,category:"Personalizado",data:{...i}};te([...g,s]),k(""),S(!1)}};return e.jsx(he,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(je,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Calculadora Avanzada"}),e.jsx("p",{className:"text-gray-600",children:"Análisis profundo de costos y optimización de precios"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(B,{value:ie,onValueChange:E,children:[e.jsx(Y,{className:"w-48",children:e.jsx(U,{placeholder:"Cargar plantilla"})}),e.jsx(X,{children:g.map(s=>e.jsx(y,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsxs(pe,{open:ae,onOpenChange:S,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(A,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Guardar como Plantilla"]})}),e.jsxs(ge,{children:[e.jsxs(Ce,{children:[e.jsx(fe,{children:"Guardar Plantilla"}),e.jsx(ye,{children:"Guarda la configuración actual como plantilla reutilizable"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateName",children:"Nombre de la plantilla"}),e.jsx(c,{id:"templateName",value:w,onChange:s=>k(s.target.value),placeholder:"Ej: Clase de Zumba Nocturna"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(A,{variant:"outline",onClick:()=>S(!1),children:"Cancelar"}),e.jsx(A,{onClick:le,children:"Guardar Plantilla"})]})]})]})]})]})]}),e.jsxs(be,{value:ee,onValueChange:se,className:"space-y-6",children:[e.jsxs(Ne,{className:"grid w-full grid-cols-5",children:[e.jsx(N,{value:"calculator",children:"Calculadora"}),e.jsx(N,{value:"optimizer",children:"Optimizador"}),e.jsx(N,{value:"comparison",children:"Comparador"}),e.jsx(N,{value:"scenarios",children:"Escenarios"}),e.jsx(N,{value:"templates",children:"Plantillas"})]}),e.jsx(P,{value:"calculator",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Configuración de la Actividad"}),e.jsx(u,{children:"Ingresa los detalles básicos y costos"})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",children:"Título de la Actividad"}),e.jsx(c,{id:"title",value:i.title,onChange:s=>d({...i,title:s.target.value}),placeholder:"Ej: Clase de Yoga"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"audience",children:"Audiencia"}),e.jsxs(B,{value:i.audience,onValueChange:s=>d({...i,audience:s}),children:[e.jsx(Y,{children:e.jsx(U,{placeholder:"Seleccionar"})}),e.jsxs(X,{children:[e.jsx(y,{value:"Niños",children:"Niños"}),e.jsx(y,{value:"Jóvenes",children:"Jóvenes"}),e.jsx(y,{value:"Adultos",children:"Adultos"}),e.jsx(y,{value:"Adultos mayores",children:"Adultos mayores"}),e.jsx(y,{value:"Familias",children:"Familias"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"location",children:"Ubicación"}),e.jsx(c,{id:"location",value:i.location,onChange:s=>d({...i,location:s.target.value}),placeholder:"Ej: Área verde"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"duration",children:"Duración (min)"}),e.jsx(c,{id:"duration",type:"number",value:i.duration,onChange:s=>d({...i,duration:s.target.value}),placeholder:"60"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"minCapacity",children:"Capacidad Mínima"}),e.jsx(c,{id:"minCapacity",type:"number",value:i.minCapacity,onChange:s=>d({...i,minCapacity:s.target.value}),placeholder:"8"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"maxCapacity",children:"Capacidad Máxima"}),e.jsx(c,{id:"maxCapacity",type:"number",value:i.maxCapacity,onChange:s=>d({...i,maxCapacity:s.target.value}),placeholder:"20"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"feePerPerson",children:"Tarifa por Persona"}),e.jsx(c,{id:"feePerPerson",type:"number",value:i.feePerPerson,onChange:s=>d({...i,feePerPerson:s.target.value}),placeholder:"150"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"tutorCost",children:"Costo del Instructor"}),e.jsx(c,{id:"tutorCost",type:"number",value:i.tutorCost,onChange:s=>d({...i,tutorCost:s.target.value}),placeholder:"800"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"materialsCost",children:"Materiales"}),e.jsx(c,{id:"materialsCost",type:"number",value:i.materialsCost,onChange:s=>d({...i,materialsCost:s.target.value}),placeholder:"200"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"variableCosts",children:"Costos Variables (por persona)"}),e.jsx(c,{id:"variableCosts",type:"number",value:i.variableCosts,onChange:s=>d({...i,variableCosts:s.target.value}),placeholder:"50"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"indirectCosts",children:"Costos Indirectos"}),e.jsx(c,{id:"indirectCosts",type:"number",value:i.indirectCosts,onChange:s=>d({...i,indirectCosts:s.target.value}),placeholder:"300"})]})]})})]}),e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Análisis de Resultados"}),e.jsx(u,{children:"Métricas clave de rentabilidad"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Ingresos Máximos"]}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:r(t.maxRevenue)})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800 font-medium mb-1",children:[e.jsx(we,{className:"h-4 w-4"}),"Costos Máximos"]}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:r(t.maxTotalCosts)})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium mb-1",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Ganancia Máxima"]}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r(t.maxProfit)})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-800 font-medium mb-1",children:[e.jsx(Me,{className:"h-4 w-4"}),"Punto de Equilibrio"]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[t.breakeven," personas"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Margen de Ganancia"}),e.jsxs("span",{children:[t.maxMargin.toFixed(1),"%"]})]}),e.jsx(Te,{value:Math.max(0,Math.min(100,t.maxMargin)),className:"h-3"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.maxMargin>=30?"Excelente rentabilidad":t.maxMargin>=15?"Rentabilidad moderada":"Rentabilidad baja"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Rango de Ganancia:"}),e.jsxs("span",{children:[r(t.minProfit)," - ",r(t.maxProfit)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Margen Mínimo:"}),e.jsxs("span",{children:[t.minMargin.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Costos Fijos:"}),e.jsx("span",{children:r(t.fixedCosts)})]})]})]})]})]})}),e.jsx(P,{value:"optimizer",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Optimizador de Precios"}),e.jsx(u,{children:"Encuentra el precio óptimo para maximizar ganancias"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"minPrice",children:"Precio Mínimo"}),e.jsx(c,{id:"minPrice",type:"number",value:x.minPrice,onChange:s=>z({...x,minPrice:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"maxPrice",children:"Precio Máximo"}),e.jsx(c,{id:"maxPrice",type:"number",value:x.maxPrice,onChange:s=>z({...x,maxPrice:Number(s.target.value)})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Recomendaciones de Precio"}),G.sort((s,a)=>a.profit-s.profit).slice(0,3).map((s,a)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:r(s.price)}),e.jsx(D,{variant:a===0?"default":"secondary",children:a===0?"Óptimo":`Top ${a+1}`})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Ganancia: ",r(s.profit)," | Margen: ",s.margin,"%"]})]},s.price))]})]})]}),e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Análisis de Sensibilidad"}),e.jsx(u,{children:"Impacto del precio en la rentabilidad"})]}),e.jsx(v,{children:e.jsx(q,{width:"100%",height:300,children:e.jsxs(Ae,{data:G,children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(J,{dataKey:"price",tickFormatter:s=>`$${s}`}),e.jsx(Z,{tickFormatter:s=>`$${(s/1e3).toFixed(0)}K`}),e.jsx(Q,{formatter:(s,a)=>[r(Number(s)),a]}),e.jsx(W,{}),e.jsx(_,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",name:"Ingresos"}),e.jsx(_,{type:"monotone",dataKey:"profit",stroke:"#82ca9d",name:"Ganancia"})]})})})]})]})}),e.jsx(P,{value:"comparison",children:e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Comparador de Actividades"}),e.jsx(u,{children:"Compara la rentabilidad entre diferentes actividades"})]}),e.jsxs(v,{children:[e.jsx(q,{width:"100%",height:400,children:e.jsxs(Se,{data:K,children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(J,{dataKey:"activity"}),e.jsx(Z,{tickFormatter:s=>`$${(s/1e3).toFixed(0)}K`}),e.jsx(Q,{formatter:s=>r(Number(s))}),e.jsx(W,{}),e.jsx(I,{dataKey:"revenue",fill:"#8884d8",name:"Ingresos"}),e.jsx(I,{dataKey:"costs",fill:"#ff7c7c",name:"Costos"}),e.jsx(I,{dataKey:"profit",fill:"#82ca9d",name:"Ganancia"})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Ranking de Rentabilidad"}),K.sort((s,a)=>a.margin-s.margin).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(D,{variant:"outline",children:["#",a+1]}),e.jsx("span",{className:"font-medium",children:s.activity})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.margin.toFixed(1),"% margen"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[r(s.profit)," ganancia"]})]})]},s.activity))]})]})]})}),e.jsx(P,{value:"scenarios",children:e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Simulador de Escenarios"}),e.jsx(u,{children:"Analiza diferentes escenarios de ocupación y precios"})]}),e.jsx(v,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:ne.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-medium",children:s.scenario})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ocupación:"}),e.jsxs("span",{children:[s.occupancy,"% (",s.capacity," personas)"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Precio:"}),e.jsx("span",{children:r(s.price)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ingresos:"}),e.jsx("span",{children:r(s.revenue)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Costos:"}),e.jsx("span",{children:r(s.totalCosts)})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Ganancia:"}),e.jsx("span",{className:s.profit>0?"text-green-600":"text-red-600",children:r(s.profit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Margen:"}),e.jsxs("span",{children:[s.margin.toFixed(1),"%"]})]})]})]},s.scenario))})})]})}),e.jsx(P,{value:"templates",children:e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Gestión de Plantillas"}),e.jsx(u,{children:"Administra tus plantillas guardadas de actividades"})]}),e.jsx(v,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx(D,{variant:"outline",children:s.category})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:["Audiencia: ",s.data.audience]}),e.jsxs("div",{children:["Capacidad: ",s.data.minCapacity,"-",s.data.maxCapacity]}),e.jsxs("div",{children:["Precio: ",r(parseFloat(s.data.feePerPerson))]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(A,{size:"sm",variant:"outline",onClick:()=>E(s.id.toString()),className:"flex-1",children:[e.jsx(De,{className:"h-3 w-3 mr-1"}),"Usar"]})})]},s.id))})})]})})]})]})})};export{Ge as default};
