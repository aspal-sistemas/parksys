import{Y as c,u as R,R as Y,j as e,C as d,c as o,Z as W,I as X,z as L,H as F,J as M,K as P,N as l,B as x,_ as ee,$ as se,o as ae,a as C,b as S,T,L as Z,f as m,G,au as re,av as te}from"./index-BBGHPKhn.js";import{S as N}from"./skeleton-DR_YLL_-.js";import{P as U}from"./PublicLayout-CCgfkENm.js";import{S as K}from"./sun-CxngwEQB.js";const le="/assets/park-with-lake-and-stone-bridge-old-european-town-2024-12-04-10-14-36-utc_1752941385588-CISPbUsF.jpg",ie={Lento:"bg-red-100 text-red-800 border-red-200",Medio:"bg-yellow-100 text-yellow-800 border-yellow-200",Rápido:"bg-green-100 text-green-800 border-green-200"},ne={Nativo:"bg-blue-100 text-blue-800 border-blue-200",Introducido:"bg-purple-100 text-purple-800 border-purple-200",Naturalizado:"bg-teal-100 text-teal-800 border-teal-200"};function ce({species:s,viewMode:k}){const n=ie[s.growthRate]||"bg-gray-100 text-gray-800 border-gray-200",p=ne[s.origin]||"bg-gray-100 text-gray-800 border-gray-200";return k==="list"?e.jsx(Z,{href:`/tree-species/${s.id}`,children:e.jsx(d,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-32 h-32 flex-shrink-0",children:s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.commonName,className:"w-full h-full object-cover rounded-lg"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"h-16 w-16 text-white opacity-80"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.commonName}),e.jsx("p",{className:"text-sm text-gray-500 italic",children:s.scientificName})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{className:n,children:s.growthRate}),e.jsx(m,{className:p,children:s.origin}),s.isEndangered&&e.jsx(m,{variant:"destructive",children:"En peligro"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Familia:"}),e.jsx("span",{className:"font-medium",children:s.family})]}),s.climateZone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Zona:"}),e.jsx("span",{className:"font-medium",children:s.climateZone})]}),s.heightMature&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Altura:"}),e.jsx("span",{className:"font-medium",children:s.heightMature})]}),s.waterRequirements&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Agua:"}),e.jsx("span",{className:"font-medium",children:s.waterRequirements})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:s.description}),s.ecologicalBenefits&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-green-700 mb-1",children:"Beneficios Ecológicos:"}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.ecologicalBenefits})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(x,{className:"bg-[#00a587] hover:bg-[#067f5f] text-white px-6 py-2",size:"sm",children:"Ver más información"})})]})]})})})}):e.jsx(Z,{href:`/tree-species/${s.id}`,children:e.jsx(d,{className:"hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:e.jsxs(o,{className:"p-0",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.commonName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center",children:e.jsx(T,{className:"h-16 w-16 text-white opacity-80"})}),e.jsxs("div",{className:"absolute top-2 left-2 flex gap-1",children:[e.jsx(m,{className:p,children:s.origin}),s.isEndangered&&e.jsx(m,{variant:"destructive",children:"En peligro"})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:s.commonName}),e.jsx("p",{className:"text-sm text-gray-500 italic",children:s.scientificName})]}),e.jsx(m,{className:n,children:s.growthRate})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Familia:"}),e.jsx("span",{className:"font-medium",children:s.family})]}),s.climateZone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Zona:"}),e.jsx("span",{className:"font-medium",children:s.climateZone})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3 mb-4",children:s.description}),s.ecologicalBenefits&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium text-green-700 mb-1",children:"Beneficios:"}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.ecologicalBenefits})]}),e.jsx("div",{className:"text-center",children:e.jsx(x,{className:"bg-[#00a587] hover:bg-[#067f5f] text-white px-6 py-2",size:"sm",children:"Ver más información"})})]})]})})})}function he(){const[s,k]=c.useState(""),[n,p]=c.useState("all"),[h,_]=c.useState("all"),[g,O]=c.useState("all"),[f,z]=c.useState("grid"),[t,v]=c.useState(1),b=10,{data:E,isLoading:$}=R({queryKey:["/api/tree-species"],queryFn:async()=>{const a=await fetch("/api/tree-species?limit=1000");if(!a.ok)throw new Error("Error cargando especies arbóreas");return a.json()}}),{data:A}=R({queryKey:["/api/parks"],queryFn:async()=>{const a=await fetch("/api/parks?limit=100");if(!a.ok)throw new Error("Error cargando parques");return a.json()}}),{data:q}=R({queryKey:["/api/park-tree-species"],queryFn:async()=>{const a=await fetch("/api/park-tree-species");if(!a.ok)throw new Error("Error cargando especies por parque");return a.json()}}),i=(E==null?void 0:E.data)||[],D=(A==null?void 0:A.data)||[],B=(q==null?void 0:q.data)||[],y=c.useMemo(()=>Array.isArray(i)?i.filter(a=>{const u=s===""||a.commonName.toLowerCase().includes(s.toLowerCase())||a.scientificName.toLowerCase().includes(s.toLowerCase())||a.family.toLowerCase().includes(s.toLowerCase()),r=n==="all"||a.origin===n,J=h==="all"||a.growthRate===h,Q=g==="all"||B.some(V=>V.speciesId===a.id&&V.parkId===parseInt(g));return u&&r&&J&&Q}):[],[i,s,n,h,g,B]),I=y.length,j=Math.ceil(I/b),w=(t-1)*b,H=y.slice(w,w+b);return Y.useEffect(()=>{v(1)},[s,n,h,g]),$?e.jsx(U,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-96 mx-auto mb-4 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-64 mx-auto animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((a,u)=>e.jsx(d,{children:e.jsxs(o,{className:"p-0",children:[e.jsx(N,{className:"h-48 w-full"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(N,{className:"h-4 w-3/4"}),e.jsx(N,{className:"h-3 w-1/2"}),e.jsx(N,{className:"h-3 w-full"}),e.jsx(N,{className:"h-3 w-full"})]})]})},u))})]})})}):e.jsx(U,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[e.jsxs("div",{className:"relative h-96 overflow-hidden",children:[e.jsx("img",{src:le,alt:"Parque urbano con árboles",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Especies Arbóreas"}),e.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto px-4",children:"Descubre la diversidad de árboles en nuestros parques urbanos de Guadalajara"})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(X,{placeholder:"Buscar especies...",value:s,onChange:a=>k(a.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(L,{value:g,onValueChange:O,children:[e.jsx(F,{className:"w-48",children:e.jsx(M,{placeholder:"Parque"})}),e.jsxs(P,{children:[e.jsx(l,{value:"all",children:"Todos los parques"}),D.map(a=>e.jsx(l,{value:a.id.toString(),children:a.name},a.id))]})]}),e.jsxs(L,{value:n,onValueChange:p,children:[e.jsx(F,{className:"w-40",children:e.jsx(M,{placeholder:"Origen"})}),e.jsxs(P,{children:[e.jsx(l,{value:"all",children:"Todos los orígenes"}),e.jsx(l,{value:"Nativo",children:"Nativo"}),e.jsx(l,{value:"Introducido",children:"Introducido"}),e.jsx(l,{value:"Naturalizado",children:"Naturalizado"})]})]}),e.jsxs(L,{value:h,onValueChange:_,children:[e.jsx(F,{className:"w-40",children:e.jsx(M,{placeholder:"Crecimiento"})}),e.jsxs(P,{children:[e.jsx(l,{value:"all",children:"Todos los ritmos"}),e.jsx(l,{value:"Lento",children:"Lento"}),e.jsx(l,{value:"Medio",children:"Medio"}),e.jsx(l,{value:"Rápido",children:"Rápido"})]})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[e.jsx(x,{variant:f==="grid"?"default":"ghost",size:"sm",onClick:()=>z("grid"),className:"rounded-r-none",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(x,{variant:f==="list"?"default":"ghost",size:"sm",onClick:()=>z("list"),className:"rounded-l-none",children:e.jsx(se,{className:"h-4 w-4"})})]})]})]})})}),e.jsx("div",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] mb-8",children:e.jsx(ae,{spaceId:"36",position:"banner",pageType:"tree-species"})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(d,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(S,{className:"text-2xl font-bold text-green-600",children:Array.isArray(i)?i.length:0})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Especies registradas"})})]}),e.jsxs(d,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(S,{className:"text-2xl font-bold text-blue-600",children:Array.isArray(i)?i.filter(a=>a.origin==="Nativo").length:0})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Especies nativas"})})]}),e.jsxs(d,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(S,{className:"text-2xl font-bold text-red-600",children:Array.isArray(i)?i.filter(a=>a.isEndangered).length:0})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"En peligro"})})]}),e.jsxs(d,{children:[e.jsx(C,{className:"pb-2",children:e.jsx(S,{className:"text-2xl font-bold text-purple-600",children:y.length})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Resultados filtrados"})})]})]}),y.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:f==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:H.map(a=>e.jsx(ce,{species:a,viewMode:f},a.id))}),e.jsxs("div",{className:"flex items-center justify-between mt-8 mb-12",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",w+1," a ",Math.min(w+b,I)," de ",I," especies"]}),j>1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>v(Math.max(1,t-1)),disabled:t===1,children:"Anterior"}),e.jsx("div",{className:"flex space-x-1",children:[...Array(j)].map((a,u)=>{const r=u+1;return r===1||r===j||r>=t-1&&r<=t+1?e.jsx(x,{variant:t===r?"default":"outline",size:"sm",onClick:()=>v(r),className:t===r?"bg-[#00a587] hover:bg-[#067f5f]":"",children:r},r):r===t-2||r===t+2?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},r):null})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>v(Math.min(j,t+1)),disabled:t===j,children:"Siguiente"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron especies"}),e.jsx("p",{className:"text-gray-500",children:"Intenta ajustar los filtros o el término de búsqueda"})]})]})]})})}export{he as default};
