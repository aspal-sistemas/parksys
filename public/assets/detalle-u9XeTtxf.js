import{al as C,Y as u,u as n,j as e,aB as l,B as r,aq as j,f as t,C as g,a as p,b as N,c as v,h as D,l as d,X as o,M as w,i as b,U as k,bw as P,b3 as q,bx as A}from"./index-BBGHPKhn.js";const E={"Arte y Cultura":"bg-pink-100 text-pink-800","Recreación y Bienestar":"bg-green-100 text-green-800","Eventos de Temporada":"bg-amber-100 text-amber-800","Naturaleza, Ciencia y Conservación":"bg-blue-100 text-blue-800"},R=()=>{const[m,x]=C(),[h,y]=u.useState(null);u.useEffect(()=>{const i=m.split("/").pop();i&&y(parseInt(i))},[m]);const{data:a,isLoading:f}=n({queryKey:[`/api/activities/${h}`],enabled:h!==null}),s=a?{id:a.id||0,title:a.title||"Actividad sin título",description:a.description||"Sin descripción disponible",category:a.category||"Sin categoría",parkId:a.parkId||0,parkName:a.parkName||"",startDate:a.startDate||null,endDate:a.endDate||null,location:a.location||null,createdAt:a.createdAt||new Date().toISOString(),capacity:a.capacity||null,price:a.price||null,materials:a.materials||null,requirements:a.requirements||null,duration:a.duration||null,isRecurring:a.isRecurring||!1,recurringDays:a.recurringDays||[],instructorId:a.instructorId||null,instructorName:a.instructorName||null,startTime:a.startTime||null,isFree:a.isFree||!1}:null;console.log("Datos crudos recibidos:",a),console.log("Actividad procesada:",s);const{data:c}=n({queryKey:["/api/parks",s==null?void 0:s.parkId],enabled:!!(s!=null&&s.parkId)});if(n({queryKey:["/api/instructors",s==null?void 0:s.instructorId],enabled:!!(s!=null&&s.instructorId)}),f)return e.jsx(l,{children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-gray-500",children:"Cargando detalles de la actividad..."})})})});if(!s)return e.jsx(l,{children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-500",children:"Actividad no encontrada"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"La actividad que estás buscando no existe o ha sido eliminada."}),e.jsxs(r,{className:"mt-6",onClick:()=>x("/admin/organizador/catalogo/ver"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Volver al catálogo"]})]})})});const I=E[s.category]||"bg-gray-100 text-gray-800";return e.jsx(l,{children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(r,{variant:"outline",onClick:()=>x("/admin/organizador/catalogo/ver"),className:"mb-4",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Volver al catálogo"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.title}),e.jsx(t,{className:I,children:s.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(g,{className:"col-span-1 md:col-span-2",children:[e.jsx(p,{children:e.jsx(N,{children:"Información de la actividad"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Descripción"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Fechas"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Inicio: ",s.startDate?(()=>{try{return d(new Date(s.startDate),"PPP",{locale:o})}catch{return"Fecha no disponible"}})():"Fecha no disponible"]}),s.endDate&&e.jsxs("p",{children:["Fin: ",(()=>{try{return d(new Date(s.endDate),"PPP",{locale:o})}catch{return"Fecha no disponible"}})()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Ubicación"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{children:(c==null?void 0:c.name)||s.parkName||(s.parkId?`Parque #${s.parkId}`:"Parque no especificado")}),s.location&&e.jsx("p",{children:s.location})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.duration&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Duración"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsxs("span",{children:[s.duration," minutos"]})]})]}),s.capacity&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Capacidad"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsxs("span",{children:[s.capacity," personas"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Precio"}),e.jsx("div",{children:s.price&&Number(s.price)>0?e.jsxs(t,{variant:"outline",className:"text-yellow-700",children:["$",Number(s.price).toFixed(2)," MXN"]}):e.jsx(t,{className:"bg-green-50 text-green-700 border-0",children:"Gratuita"})})]})]}),s.isRecurring&&s.recurringDays&&s.recurringDays.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Actividad recurrente"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.recurringDays.map(i=>e.jsx(t,{variant:"outline",children:i.charAt(0).toUpperCase()+i.slice(1)},i))})]}),(s.materials||s.requirements)&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.materials&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Materiales"}),e.jsx("p",{className:"text-gray-700",children:s.materials})]}),s.requirements&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Requisitos"}),e.jsx("p",{className:"text-gray-700",children:s.requirements})]})]})]}),e.jsxs(P,{className:"border-t bg-gray-50 justify-end gap-2",children:[e.jsxs(r,{variant:"outline",onClick:()=>{console.log(`Editar actividad ${s.id}`)},children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsxs(r,{variant:"destructive",onClick:()=>{window.confirm("¿Estás seguro de que deseas eliminar esta actividad?")&&console.log(`Eliminar actividad ${s.id}`)},children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]}),e.jsxs(g,{children:[e.jsx(p,{children:e.jsx(N,{children:"Información adicional"})}),e.jsxs(v,{className:"space-y-4",children:[s.instructorId&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Instructor"}),e.jsxs("div",{className:"p-3 border rounded-md",children:[e.jsx("div",{className:"font-medium",children:s.instructorName||`Instructor #${s.instructorId}`}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["ID: ",s.instructorId]})]})]}),s.startTime&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Horario de inicio"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsx("span",{children:s.startTime})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Fecha de creación"}),e.jsx("div",{className:"text-gray-700",children:d(new Date(s.createdAt),"PPP",{locale:o})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"ID de referencia"}),e.jsx("div",{className:"font-mono text-sm bg-gray-100 p-2 rounded",children:s.id})]})]})]})]})]})})};export{R as default};
