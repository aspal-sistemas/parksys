import{am as W,Y as c,u as D,j as e,aI as w,B as i,b2 as ee,C as d,a as o,b as x,M as L,c as m,a9 as A,i as C,U as F,Z as se,I as ae,z as _,H as S,J as k,K as P,N as l,a3 as le,f as R,al as ie,b7 as re,ba as I,h as z,D as ce,r as te,t as ne,v as de}from"./index-Dzu3mJf5.js";import{C as oe}from"./circle-x-C53LJYQf.js";const V={playground:"Área de Juegos",kiosk:"Kiosco",picnic_area:"Área de Picnic",open_area:"Área Abierta",pavilion:"Pabellón"},xe={playground:"bg-green-100 text-green-800",kiosk:"bg-blue-100 text-blue-800",picnic_area:"bg-yellow-100 text-yellow-800",open_area:"bg-purple-100 text-purple-800",pavilion:"bg-red-100 text-red-800"};function pe(){const[me,N]=W(),[h,B]=c.useState(""),[g,K]=c.useState("all"),[f,M]=c.useState("all"),[j,$]=c.useState("all"),[a,E]=c.useState(null),[r,b]=c.useState(1),[p]=c.useState(9),{data:t=[],isLoading:H,error:J}=D({queryKey:["/api/reservable-spaces"],queryFn:async()=>{const s=await fetch("/api/reservable-spaces");if(!s.ok)throw new Error("Error al cargar los espacios reservables");return s.json()}}),{data:G=[]}=D({queryKey:["/api/parks"],queryFn:async()=>{const s=await fetch("/api/parks");if(!s.ok)throw new Error("Error al cargar los parques");return s.json()}}),u=t.filter(s=>{const n=s.name.toLowerCase().includes(h.toLowerCase())||s.description.toLowerCase().includes(h.toLowerCase())||s.park_name.toLowerCase().includes(h.toLowerCase()),X=g==="all"||s.park_id.toString()===g,Y=f==="all"||s.space_type===f,Z=j==="all"||j==="active"&&s.is_active||j==="inactive"&&!s.is_active;return n&&X&&Y&&Z}),y=Math.ceil(u.length/p),v=(r-1)*p,U=u.slice(v,v+p),O=s=>{E(s)},q=s=>{N(`/admin/space-reservations/spaces/edit/${s.id}`)},Q=()=>{N("/admin/space-reservations/spaces/new")},T=s=>{N(`/admin/space-reservations/new?space_id=${s.id}`)};return H?e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):J?e.jsx(w,{children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-red-600",children:"Error al cargar los espacios reservables"})})}):e.jsx(w,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Espacios Disponibles"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona los espacios reservables en los parques"})]}),e.jsxs(i,{onClick:Q,className:"bg-[#00a587] hover:bg-[#067f5f] text-white",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Nuevo Espacio"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total Espacios"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Activos"}),e.jsx(A,{className:"h-4 w-4 text-green-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(s=>s.is_active).length})})]}),e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Requieren Aprobación"}),e.jsx(C,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(s=>s.requires_approval).length})})]}),e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Capacidad Total"}),e.jsx(F,{className:"h-4 w-4 text-[#00a587]"})]}),e.jsx(m,{children:e.jsx("div",{className:"text-2xl font-bold text-[#00a587]",children:t.reduce((s,n)=>s+n.capacity,0)})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(ae,{placeholder:"Buscar por nombre, descripción o parque...",value:h,onChange:s=>B(s.target.value),className:"pl-10"})]})}),e.jsxs(_,{value:g,onValueChange:K,children:[e.jsx(S,{className:"w-full lg:w-[200px]",children:e.jsx(k,{placeholder:"Filtrar por parque"})}),e.jsxs(P,{children:[e.jsx(l,{value:"all",children:"Todos los parques"}),G.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsxs(_,{value:f,onValueChange:M,children:[e.jsx(S,{className:"w-full lg:w-[180px]",children:e.jsx(k,{placeholder:"Filtrar por tipo"})}),e.jsxs(P,{children:[e.jsx(l,{value:"all",children:"Todos los tipos"}),e.jsx(l,{value:"playground",children:"Área de Juegos"}),e.jsx(l,{value:"kiosk",children:"Kiosco"}),e.jsx(l,{value:"picnic_area",children:"Área de Picnic"}),e.jsx(l,{value:"open_area",children:"Área Abierta"}),e.jsx(l,{value:"pavilion",children:"Pabellón"})]})]}),e.jsxs(_,{value:j,onValueChange:$,children:[e.jsx(S,{className:"w-full lg:w-[150px]",children:e.jsx(k,{placeholder:"Estado"})}),e.jsxs(P,{children:[e.jsx(l,{value:"all",children:"Todos"}),e.jsx(l,{value:"active",children:"Activos"}),e.jsx(l,{value:"inactive",children:"Inactivos"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(s=>e.jsxs(d,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{className:"text-lg",children:s.name}),e.jsx(le,{className:"mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(L,{className:"h-3 w-3"}),s.park_name]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:xe[s.space_type],children:V[s.space_type]}),s.is_active?e.jsx(A,{className:"h-4 w-4 text-green-500"}):e.jsx(oe,{className:"h-4 w-4 text-red-500"})]})]})}),e.jsxs(m,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),"Capacidad:"]}),e.jsxs("span",{className:"font-medium",children:[s.capacity," personas"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3"}),"Precio/hora:"]}),e.jsxs("span",{className:"font-medium",children:["$",s.hourly_rate]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3"}),"Duración:"]}),e.jsxs("span",{className:"font-medium",children:[s.minimum_hours,"-",s.maximum_hours,"h"]})]}),s.requires_approval&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-600",children:[e.jsx(C,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Requiere aprobación"})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>O(s),className:"flex-1",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Ver"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>q(s),className:"flex-1",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"Editar"]}),e.jsxs(i,{size:"sm",onClick:()=>T(s),className:"bg-[#00a587] hover:bg-[#067f5f] text-white flex-1",disabled:!s.is_active,children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),"Reservar"]})]})]})]},s.id))}),y>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Mostrando ",v+1," a ",Math.min(v+p,u.length)," de ",u.length," espacios"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>b(r-1),disabled:r===1,children:"Anterior"}),Array.from({length:y},(s,n)=>n+1).map(s=>e.jsx(i,{variant:r===s?"default":"outline",size:"sm",onClick:()=>b(s),className:r===s?"bg-[#00a587] hover:bg-[#067f5f]":"",children:s},s)),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>b(r+1),disabled:r===y,children:"Siguiente"})]})]}),e.jsx(ce,{open:!!a,onOpenChange:s=>!s&&E(null),children:e.jsxs(te,{className:"max-w-2xl",children:[e.jsx(ne,{children:e.jsx(de,{children:"Detalles del Espacio"})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Información General"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nombre:"})," ",a.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Parque:"})," ",a.park_name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tipo:"})," ",V[a.space_type]]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Estado:"}),e.jsx(R,{className:`ml-2 ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?"Activo":"Inactivo"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Capacidad y Precios"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Capacidad:"})," ",a.capacity," personas"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Precio por hora:"})," $",a.hourly_rate]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración mínima:"})," ",a.minimum_hours," horas"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración máxima:"})," ",a.maximum_hours," horas"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Descripción"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Amenidades"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.amenities})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Reglas y Condiciones"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.rules})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Requiere aprobación:"}),e.jsx("span",{className:"ml-2",children:a.requires_approval?"Sí":"No"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Reserva anticipada:"}),e.jsxs("span",{className:"ml-2",children:[a.advance_booking_days," días"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsxs(i,{variant:"outline",onClick:()=>q(a),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsxs(i,{onClick:()=>T(a),className:"bg-[#00a587] hover:bg-[#067f5f]",disabled:!a.is_active,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Reservar Espacio"]})]})]})]})})]})})}export{pe as default};
