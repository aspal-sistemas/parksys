import{u as A,j as e,D as U,r as G,t as xe,a0 as me,a1 as he,a2 as je,v as pe,w as we,f as F,aH as ue,aI as ge,aJ as P,aK as k,C as f,c as v,n as Ne,P as fe,h as D,M as Ce,cD as Z,cp as ve,F as _e,i as re,m as Ee,S as Q,a4 as Y,U as J,b7 as ye,B as j,e as Se,a6 as Fe,a7 as De,R as X,a8 as Te,aa as Ae,ab as b,ac as w,ad as C,ae as _,I as T,af as E,z as V,H as B,J as K,K as R,N as h,O as le,bt as Pe,cf as ke,cg as S,cE as Ie,ag as Le,al as be,Y as I,a as M,bw as Me,cx as ze,cy as $e,cz as qe,cA as Ve,cB as ie,cF as te,cC as L,b0 as ce,b3 as ne,Q as Be,aB as Ke,aW as Re,b as q,aF as de,aj as Ue,ap as Ge,Z as He,cG as Oe,x as Qe}from"./index-BBGHPKhn.js";import{S as W}from"./Spinner-BbVzRL4X.js";import{E as Ye}from"./ellipsis-DJvwf0dh.js";import{R as oe}from"./refresh-cw-DS5oknip.js";function Je({instructorId:r,open:x,onOpenChange:m}){const{data:s,isLoading:N}=A({queryKey:[`/api/instructors/${r}`],enabled:x&&!!r}),{data:c}=A({queryKey:[`/api/instructors/${r}/assignments`],enabled:x&&!!r}),{data:g}=A({queryKey:[`/api/instructors/${r}/evaluations`],enabled:x&&!!r}),{data:i}=A({queryKey:[`/api/instructors/${r}/recognitions`],enabled:x&&!!r}),p=a=>a?a.split(" ").map(n=>n[0]).slice(0,2).join("").toUpperCase():"",d=a=>{if(!a)return null;const n=[];for(let o=1;o<=5;o++)n.push(e.jsx(Q,{className:`h-4 w-4 ${o<=a?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},o));return e.jsx("div",{className:"flex items-center",children:n})},l=a=>a?new Date(a).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}):"";return N?e.jsx(U,{open:x,onOpenChange:m,children:e.jsx(G,{className:"sm:max-w-[600px]","aria-describedby":"profile-loading-description",children:e.jsx("div",{id:"profile-loading-description",className:"flex items-center justify-center h-40",children:e.jsx(W,{size:"lg"})})})}):s?e.jsx(U,{open:x,onOpenChange:m,children:e.jsxs(G,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto","aria-describedby":"instructor-profile-description",children:[e.jsx(xe,{children:e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsxs(me,{className:"h-16 w-16 mr-4",children:[e.jsx(he,{src:s.profile_image_url||s.profileImageUrl,alt:s.full_name||s.fullName}),e.jsx(je,{children:p(s.full_name||s.fullName||"")})]}),e.jsxs("div",{children:[e.jsx(pe,{className:"text-xl",children:s.full_name||s.fullName}),e.jsx(we,{children:e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx(F,{className:`${(s.status||s.estado)==="active"?"bg-green-100 text-green-800 hover:bg-green-100":(s.status||s.estado)==="inactive"?"bg-gray-100 text-gray-800 hover:bg-gray-100":"bg-yellow-100 text-yellow-800 hover:bg-yellow-100"}`,children:(s.status||s.estado)==="active"?"Activo":(s.status||s.estado)==="inactive"?"Inactivo":"Pendiente"}),(s.rating||s.calificacion)&&e.jsx("div",{className:"flex items-center",children:d(s.rating||s.calificacion)})]})})]})]})}),e.jsx("div",{id:"instructor-profile-description",className:"sr-only",children:"Perfil detallado del instructor con información profesional"}),e.jsxs(ue,{defaultValue:"profile",children:[e.jsxs(ge,{className:"grid w-full grid-cols-4",children:[e.jsx(P,{value:"profile",children:"Perfil"}),e.jsx(P,{value:"assignments",children:"Asignaciones"}),e.jsx(P,{value:"evaluations",children:"Evaluaciones"}),e.jsx(P,{value:"recognitions",children:"Reconocimientos"})]}),e.jsx(k,{value:"profile",children:e.jsx(f,{children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Información Personal"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ne,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Correo electrónico"}),e.jsx("p",{children:s.email||s.correo})]})]}),(s.phone||s.telefono)&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(fe,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Teléfono"}),e.jsx("p",{children:s.phone||s.telefono})]})]}),(s.date_of_birth||s.fechaNacimiento)&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(D,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Fecha de nacimiento"}),e.jsx("p",{children:l(s.date_of_birth||s.fechaNacimiento)})]})]}),(s.address||s.direccion)&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ce,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Dirección"}),e.jsx("p",{children:s.address||s.direccion})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Experiencia Profesional"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(Z,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Experiencia"}),e.jsxs("p",{children:[s.experience_years||s.experienceYears||0," ",(s.experience_years||s.experienceYears)===1?"año":"años"]})]})]}),(s.specialties||s.especialidades)&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(ve,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Especialidades"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(s.specialties||s.especialidades||"").split(",").map((a,n)=>e.jsx(F,{variant:"outline",className:"mr-1 mb-1",children:a.trim()},n))})]})]}),(s.biography||s.biografia)&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(_e,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Biografía"}),e.jsx("p",{className:"text-sm whitespace-pre-line",children:s.biography||s.biografia})]})]}),(s.created_at||s.createdAt)&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(re,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Fecha de registro"}),e.jsx("p",{children:l(s.created_at||s.createdAt)})]})]})]})]})]})})})}),e.jsx(k,{value:"assignments",children:e.jsx(f,{children:e.jsx(v,{className:"pt-6",children:c&&c.length>0?e.jsx("div",{className:"space-y-4",children:Array.from(new Map(c.map(a=>[`${a.activityId||a.activity_id||0}-${a.parkId||a.park_id||0}-${a.startDate||a.start_date||""}`,a])).values()).map(a=>e.jsx("div",{className:"border p-3 rounded-md hover:bg-gray-50",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.activity_title||a.activityTitle||"Actividad sin título"}),e.jsx("p",{className:"text-sm text-gray-500",children:a.park_name||a.parkName||"Parque no especificado"}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center mr-3",children:[e.jsx(D,{className:"h-4 w-4 mr-1 text-gray-400"}),l(a.start_date||a.startDate)]}),e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-1 text-gray-400"}),a.status||a.estado||"Pendiente"]})]})]}),e.jsx(F,{className:`${(a.status||a.estado)==="active"?"bg-green-100 text-green-800 hover:bg-green-100":(a.status||a.estado)==="completed"?"bg-blue-100 text-blue-800 hover:bg-blue-100":"bg-yellow-100 text-yellow-800 hover:bg-yellow-100"}`,children:(a.status||a.estado)==="active"?"Activa":(a.status||a.estado)==="completed"?"Completada":"Programada"})]})},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-8 w-8 mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"No hay asignaciones registradas"})]})})})}),e.jsx(k,{value:"evaluations",children:e.jsx(f,{children:e.jsx(v,{className:"pt-6",children:g&&g.length>0?e.jsx("div",{className:"space-y-4",children:g.map(a=>e.jsx("div",{className:"border p-3 rounded-md hover:bg-gray-50",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h4",{className:"font-medium",children:a.title||"Evaluación"}),e.jsx("div",{className:"ml-2",children:d(a.rating)})]}),a.activity_title&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Actividad: ",a.activity_title]}),a.comments&&e.jsx("p",{className:"mt-2 text-sm whitespace-pre-line",children:a.comments}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center mr-3",children:[e.jsx(D,{className:"h-4 w-4 mr-1 text-gray-400"}),l(a.evaluation_date)]}),e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1 text-gray-400"}),a.evaluator_name]})]})]})})},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{className:"h-8 w-8 mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"No hay evaluaciones registradas"})]})})})}),e.jsx(k,{value:"recognitions",children:e.jsx(f,{children:e.jsx(v,{className:"pt-6",children:i&&i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(a=>e.jsx("div",{className:"border p-3 rounded-md hover:bg-gray-50",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("h4",{className:"font-medium",children:a.title})]}),e.jsx("p",{className:"mt-2 text-sm whitespace-pre-line",children:a.description}),e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("span",{className:"inline-flex items-center mr-3",children:[e.jsx(D,{className:"h-4 w-4 mr-1 text-gray-400"}),l(a.award_date)]}),a.issuing_organization&&e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(J,{className:"h-4 w-4 mr-1 text-gray-400"}),a.issuing_organization]})]})]})})},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"h-8 w-8 mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"No hay reconocimientos registrados"})]})})})})]}),e.jsx(ye,{children:e.jsx(j,{onClick:()=>m(!1),children:"Cerrar"})})]})}):null}const Xe=ke({full_name:S().min(3,{message:"El nombre debe tener al menos 3 caracteres"}),email:S().email({message:"Por favor ingrese un correo electrónico válido"}),phone:S().optional(),specialties:S().optional(),experience_years:Ie.number().min(0).max(50),biography:S().optional(),address:S().optional(),status:S()});function We({instructorId:r,open:x,onOpenChange:m}){const{toast:s}=Se(),N=Fe(),{data:c,isLoading:g}=A({queryKey:[`/api/instructors/${r}`],enabled:x&&!!r}),i=De({resolver:Le(Xe),defaultValues:{full_name:"",email:"",phone:"",specialties:"",experience_years:0,biography:"",address:"",status:"active"}});X.useEffect(()=>{c&&i.reset({full_name:c.full_name||"",email:c.email||"",phone:c.phone||"",specialties:c.specialties||"",experience_years:c.experience_years||0,biography:c.biography||"",address:c.address||"",status:c.status||"active"})},[c,i]);const p=Te({mutationFn:async l=>{const a=await fetch(`/api/instructors/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!a.ok){const n=await a.json();throw new Error(n.message||"Error al actualizar instructor")}return await a.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["/api/instructors"]}),N.invalidateQueries({queryKey:[`/api/instructors/${r}`]}),s({title:"Instructor actualizado",description:"Los datos del instructor se han actualizado correctamente."}),m(!1)},onError:l=>{s({title:"Error",description:l.message||"Hubo un problema al actualizar el instructor",variant:"destructive"})}}),d=l=>{p.mutate(l)};return g?e.jsx(U,{open:x,onOpenChange:m,children:e.jsx(G,{className:"sm:max-w-[600px]","aria-describedby":"loading-description",children:e.jsx("div",{id:"loading-description",className:"flex items-center justify-center h-40",children:e.jsx(W,{size:"lg"})})})}):e.jsx(U,{open:x,onOpenChange:m,children:e.jsxs(G,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto","aria-describedby":"instructor-edit-description",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Editar Instructor"})}),e.jsx("div",{id:"instructor-edit-description",className:"sr-only",children:"Formulario para editar la información del instructor"}),e.jsx(Ae,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(d),className:"space-y-6",children:[e.jsxs(ue,{defaultValue:"general",children:[e.jsxs(ge,{className:"grid w-full grid-cols-2",children:[e.jsx(P,{value:"general",children:"Información General"}),e.jsx(P,{value:"additional",children:"Información Adicional"})]}),e.jsxs(k,{value:"general",className:"space-y-4 mt-4",children:[e.jsx(b,{control:i.control,name:"full_name",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Nombre completo"}),e.jsx(_,{children:e.jsx(T,{placeholder:"Nombre completo",...l})}),e.jsx(E,{})]})}),e.jsx(b,{control:i.control,name:"email",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Correo electrónico"}),e.jsx(_,{children:e.jsx(T,{type:"email",placeholder:"correo@ejemplo.com",...l})}),e.jsx(E,{})]})}),e.jsx(b,{control:i.control,name:"phone",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Teléfono"}),e.jsx(_,{children:e.jsx(T,{placeholder:"Teléfono de contacto",...l})}),e.jsx(E,{})]})}),e.jsx(b,{control:i.control,name:"status",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Estado"}),e.jsxs(V,{onValueChange:l.onChange,defaultValue:l.value,value:l.value,children:[e.jsx(_,{children:e.jsx(B,{children:e.jsx(K,{placeholder:"Seleccione un estado"})})}),e.jsxs(R,{children:[e.jsx(h,{value:"active",children:"Activo"}),e.jsx(h,{value:"inactive",children:"Inactivo"}),e.jsx(h,{value:"pending",children:"Pendiente"})]})]}),e.jsx(E,{})]})})]}),e.jsxs(k,{value:"additional",className:"space-y-4 mt-4",children:[e.jsx(b,{control:i.control,name:"specialties",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Especialidades"}),e.jsx(_,{children:e.jsx(le,{placeholder:"Yoga, Pilates, Meditación, etc. Separadas por comas",...l})}),e.jsx(Pe,{children:"Ingrese las especialidades separadas por comas."}),e.jsx(E,{})]})}),e.jsx(b,{control:i.control,name:"experience_years",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Años de experiencia"}),e.jsx(_,{children:e.jsx(T,{type:"number",min:"0",max:"50",...l,onChange:a=>l.onChange(parseInt(a.target.value,10)||0)})}),e.jsx(E,{})]})}),e.jsx(b,{control:i.control,name:"biography",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Biografía"}),e.jsx(_,{children:e.jsx(le,{placeholder:"Breve biografía del instructor",className:"min-h-[120px]",...l})}),e.jsx(E,{})]})}),e.jsx(b,{control:i.control,name:"address",render:({field:l})=>e.jsxs(w,{children:[e.jsx(C,{children:"Dirección"}),e.jsx(_,{children:e.jsx(T,{placeholder:"Dirección completa",...l})}),e.jsx(E,{})]})})]})]}),e.jsxs(ye,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>m(!1),disabled:p.isPending,children:"Cancelar"}),e.jsx(j,{type:"submit",disabled:p.isPending,children:p.isPending?e.jsxs(e.Fragment,{children:[e.jsx(W,{size:"sm",className:"mr-2"}),"Guardando..."]}):"Guardar cambios"})]})]})})]})})}function Ze({instructor:r,showActions:x=!0,compact:m=!1}){const[,s]=be(),[N,c]=I.useState(!1),[g,i]=I.useState(!1),p=n=>n.split(" ").map(o=>o[0]).slice(0,2).join("").toUpperCase(),d=n=>{if(!n)return null;const o=n.split(",").map(u=>u.trim());return o.length<=2||m?o.map((u,H)=>e.jsx(F,{variant:"outline",className:"mr-1 mb-1",children:u},H)):e.jsxs(e.Fragment,{children:[e.jsx(F,{variant:"outline",className:"mr-1 mb-1",children:o[0]}),e.jsx(F,{variant:"outline",className:"mr-1 mb-1",children:o[1]}),e.jsxs(F,{variant:"outline",className:"mb-1",children:["+",o.length-2," más"]})]})},l=n=>{switch(n){case"active":return"bg-green-50 border-green-200";case"inactive":return"bg-gray-50 border-gray-200";case"pending":return"bg-yellow-50 border-yellow-200";default:return""}},a=n=>{if(!n)return null;const o=[];for(let u=1;u<=5;u++)o.push(e.jsx(Q,{className:`h-4 w-4 ${u<=n?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},u));return e.jsx("div",{className:"flex items-center",children:o})};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{className:`h-full overflow-hidden transition-all ${l(r.status)}`,children:[e.jsx(M,{className:"pb-0 pt-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(me,{className:"h-14 w-14 mr-3",children:[e.jsx(he,{src:r.profile_image_url,alt:r.full_name}),e.jsx(je,{children:p(r.full_name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold truncate",children:r.full_name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[r.experience_years," ",r.experience_years===1?"año":"años"," de experiencia"]})]}),!m&&r.rating&&e.jsx("div",{className:"mt-1",children:a(r.rating)})]})]})}),e.jsxs(v,{className:"pt-4",children:[!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm mb-3 flex items-center text-gray-500",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"truncate",children:r.email})]}),r.phone&&e.jsxs("div",{className:"text-sm mb-3 flex items-center text-gray-500",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r.phone})]})]}),e.jsx("div",{className:"mt-2 flex flex-wrap",children:d(r.specialties)})]}),x&&e.jsxs(Me,{className:"flex justify-between border-t p-3 bg-gray-50",children:[e.jsxs(ze,{children:[e.jsx($e,{asChild:!0,children:e.jsxs(j,{variant:"ghost",size:"sm",children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Acciones"]})}),e.jsxs(qe,{align:"start",className:"w-48",children:[e.jsx(Ve,{children:"Opciones"}),e.jsx(ie,{}),e.jsxs(te,{children:[e.jsxs(L,{onClick:()=>c(!0),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Ver perfil"]}),e.jsxs(L,{onClick:()=>i(!0),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Editar perfil"]})]}),e.jsx(ie,{}),e.jsxs(te,{children:[e.jsxs(L,{onClick:()=>s(`/admin/instructors/${r.id}/assignments`),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Asignaciones"]}),e.jsxs(L,{onClick:()=>s(`/admin/instructors/${r.id}/evaluations`),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Evaluaciones"]}),e.jsxs(L,{onClick:()=>s(`/admin/instructors/${r.id}/recognitions`),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Reconocimientos"]})]})]})]}),e.jsxs("div",{children:[e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>c(!0),children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),"Ver"]}),e.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>i(!0),children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"Editar"]})]})]})]}),e.jsx(Je,{instructorId:r.id,open:N,onOpenChange:c}),e.jsx(We,{instructorId:r.id,open:g,onOpenChange:i})]})}function ls(){const[,r]=be(),[x,m]=I.useState(""),[s,N]=I.useState("all"),[c,g]=I.useState("all"),[i,p]=I.useState("all"),{data:d,isLoading:l,isError:a,refetch:n}=A({queryKey:["/api/instructors"],retry:1,enabled:!0}),o=X.useMemo(()=>d?d.filter(t=>{var se,ae;const y=x===""||((se=t.full_name)==null?void 0:se.toLowerCase().includes(x.toLowerCase()))||((ae=t.email)==null?void 0:ae.toLowerCase().includes(x.toLowerCase())),ee=s==="all"||t.status===s,O=c==="all"||t.specialties&&t.specialties.toLowerCase().includes(c.toLowerCase());let z=!0;if(i!=="all"){const $=t.experience_years||0;i==="novice"&&$>2&&(z=!1),i==="intermediate"&&($<3||$>5)&&(z=!1),i==="expert"&&$<6&&(z=!1)}return y&&ee&&O&&z}):[],[d,x,s,c,i]),u=X.useMemo(()=>{if(!d)return[];const t=new Set;return d.forEach(y=>{y.specialties&&y.specialties.split(",").forEach(O=>{t.add(O.trim())})}),Array.from(t)},[d]),H=()=>{m(""),N("all"),g("all"),p("all")};return e.jsx(Ke,{children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Instructores"}),e.jsx("p",{className:"text-muted-foreground",children:"Explora todos los instructores disponibles para las actividades."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(j,{variant:"outline",onClick:()=>r("/admin/instructors"),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Ver como lista"]}),e.jsxs(j,{onClick:()=>r("/admin/users"),children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Nuevo Instructor"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(f,{children:[e.jsx(M,{className:"pb-2",children:e.jsx(q,{className:"text-lg",children:"Total"})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("span",{className:"text-2xl font-bold",children:d?d.length:0})]})})]}),e.jsxs(f,{children:[e.jsx(M,{className:"pb-2",children:e.jsx(q,{className:"text-lg",children:"Activos"})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-2xl font-bold",children:d?d.filter(t=>t.status==="active").length:0})]})})]}),e.jsxs(f,{children:[e.jsx(M,{className:"pb-2",children:e.jsx(q,{className:"text-lg",children:"Experiencia promedio"})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 text-amber-600 mr-2"}),e.jsxs("span",{className:"text-2xl font-bold",children:[d&&d.length>0?Math.round(d.reduce((t,y)=>t+(y.experience_years||0),0)/d.length):0," años"]})]})})]}),e.jsxs(f,{children:[e.jsx(M,{className:"pb-2",children:e.jsx(q,{className:"text-lg",children:"Especialidades"})}),e.jsx(v,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"h-5 w-5 text-purple-600 mr-2"}),e.jsx("span",{className:"text-2xl font-bold",children:u.length})]})})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ue,{className:"h-5 w-5 mr-2 text-gray-500"}),e.jsx("h2",{className:"font-medium",children:"Filtros"}),e.jsxs(j,{variant:"ghost",size:"sm",className:"ml-auto",onClick:H,children:[e.jsx(Ge,{className:"h-4 w-4 mr-1"}),"Limpiar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(T,{placeholder:"Buscar por nombre o email...",className:"pl-8",value:x,onChange:t=>m(t.target.value)})]})}),e.jsx("div",{children:e.jsxs(V,{value:s,onValueChange:N,children:[e.jsx(B,{children:e.jsx(K,{placeholder:"Estado"})}),e.jsxs(R,{children:[e.jsx(h,{value:"all",children:"Todos los estados"}),e.jsx(h,{value:"active",children:"Activos"}),e.jsx(h,{value:"inactive",children:"Inactivos"}),e.jsx(h,{value:"pending",children:"Pendientes"})]})]})}),e.jsx("div",{children:e.jsxs(V,{value:c,onValueChange:g,children:[e.jsx(B,{children:e.jsx(K,{placeholder:"Especialidad"})}),e.jsxs(R,{children:[e.jsx(h,{value:"all",children:"Todas las especialidades"}),u.map((t,y)=>e.jsx(h,{value:t,children:t},y))]})]})}),e.jsx("div",{children:e.jsxs(V,{value:i,onValueChange:p,children:[e.jsx(B,{children:e.jsx(K,{placeholder:"Experiencia"})}),e.jsxs(R,{children:[e.jsx(h,{value:"all",children:"Cualquier nivel"}),e.jsx(h,{value:"novice",children:"Principiante (0-2 años)"}),e.jsx(h,{value:"intermediate",children:"Intermedio (3-5 años)"}),e.jsx(h,{value:"expert",children:"Experto (6+ años)"})]})]})})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(j,{onClick:()=>n(),variant:"outline",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Actualizar datos"]}),e.jsxs(j,{onClick:()=>{fetch("/api/admin/seed/instructors",{method:"POST",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(()=>{n(),alert("Datos de muestra de instructores cargados correctamente")}).catch(t=>{console.error("Error al cargar datos de muestra:",t),alert("Error al cargar datos de muestra: "+t.message)})},variant:"secondary",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Cargar datos de muestra"]})]}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"h-8 w-8 animate-spin mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Cargando instructores..."})]}):a?e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg shadow-sm border p-6",children:[e.jsx(Qe,{className:"h-8 w-8 mx-auto text-red-500"}),e.jsx("p",{className:"mt-2 text-red-500",children:"Error al cargar los instructores"}),e.jsx(j,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>n(),children:"Reintentar"})]}):(o==null?void 0:o.length)===0?e.jsxs("div",{className:"text-center py-8 bg-white rounded-lg shadow-sm border p-6",children:[e.jsx(de,{className:"h-8 w-8 mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:d?"No se encontraron instructores que coincidan con los criterios de búsqueda.":"Haz clic en 'Actualizar datos' para ver los instructores."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(t=>e.jsx(Ze,{instructor:t,showActions:!0,compact:!1},t.id))})]})})}export{ls as default};
