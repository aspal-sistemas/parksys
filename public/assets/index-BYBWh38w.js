import{a2 as H,j as s,aX as V,f as t,g as c,h as d,e as _,i as r,U as k,ar as I,a4 as J,O as S,B as l,a7 as O,L as o,a5 as T,dX as L,bh as W,ab as j,bH as Y,bI as F,bJ as D,bK as n,bL as X,bM as x,o as u,ah as z,w as p,x as f,au as K,y as g,z as b,I as y,J as w,N as i,bq as Q,Q as Z,V as $,W as ss,Y as es,_ as E,cb as as,bY as is}from"./index-D5qLf1ib.js";import{P as v}from"./progress-CD1SWYCP.js";import{S as M,R as q,a as ls}from"./RoleBadge-D5voYAx-.js";import{u as ts}from"./RoleGuard-BpTshTfO.js";import{C as rs}from"./gem-dXiyKzl3.js";const A=[{roleId:"super-admin",userCount:2,activeUsers:2,lastActivity:"2 horas"},{roleId:"director-general",userCount:3,activeUsers:3,lastActivity:"1 hora"},{roleId:"coordinador-parques",userCount:8,activeUsers:7,lastActivity:"30 min"},{roleId:"coordinador-actividades",userCount:6,activeUsers:5,lastActivity:"15 min"},{roleId:"admin-financiero",userCount:4,activeUsers:4,lastActivity:"45 min"},{roleId:"operador-parque",userCount:15,activeUsers:12,lastActivity:"5 min"},{roleId:"consultor-auditor",userCount:5,activeUsers:2,lastActivity:"2 días"}],os=()=>{const[N,B]=H.useState(""),h=ts(),P=M.filter(a=>a.name.toLowerCase().includes(N.toLowerCase())||a.description.toLowerCase().includes(N.toLowerCase())),C=A.reduce((a,e)=>a+e.userCount,0),U=A.reduce((a,e)=>a+e.activeUsers,0),R=Math.round(U/C*100);return s.jsxs(V,{title:"Gestión de Roles",subtitle:"Sistema avanzado de roles y jerarquías",children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-4 mb-8",children:[s.jsxs(t,{className:"bg-gradient-to-br from-purple-50 to-indigo-50 border-purple-200",children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium text-purple-800",children:"Total de Roles"}),s.jsx(_,{className:"h-5 w-5 text-purple-600"})]}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-purple-900",children:M.length}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"7 roles jerárquicos activos"})]})]}),s.jsxs(t,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-blue-200",children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium text-blue-800",children:"Usuarios Totales"}),s.jsx(k,{className:"h-5 w-5 text-blue-600"})]}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-blue-900",children:C}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Asignados a roles activos"})]})]}),s.jsxs(t,{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium text-green-800",children:"Actividad"}),s.jsx(I,{className:"h-5 w-5 text-green-600"})]}),s.jsxs(r,{children:[s.jsxs("div",{className:"text-3xl font-bold text-green-900",children:[R,"%"]}),s.jsx(v,{value:R,className:"mt-2"}),s.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[U," usuarios activos"]})]})]}),s.jsxs(t,{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-orange-200",children:[s.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(d,{className:"text-sm font-medium text-orange-800",children:"Mi Nivel"}),s.jsx(rs,{className:"h-5 w-5 text-orange-600"})]}),s.jsxs(r,{children:[s.jsx("div",{className:"text-3xl font-bold text-orange-900",children:h.roleLevel}),s.jsx("div",{className:"mt-2",children:s.jsx(q,{roleId:h.userRole,size:"sm"})}),s.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Nivel jerárquico actual"})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(S,{placeholder:"Buscar roles...",value:N,onChange:a=>B(a.target.value),className:"pl-10 w-80"})]}),s.jsxs(l,{variant:"outline",size:"sm",children:[s.jsx(O,{className:"h-4 w-4 mr-2"}),"Filtros"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{href:"/admin/permissions/matrix",children:s.jsxs(l,{variant:"outline",children:[s.jsx(T,{className:"h-4 w-4 mr-2"}),"Matriz de Permisos"]})}),s.jsx(o,{href:"/admin/role-assignments",children:s.jsxs(l,{variant:"outline",children:[s.jsx(L,{className:"h-4 w-4 mr-2"}),"Asignar Usuarios"]})}),h.canAdmin("Seguridad")&&s.jsxs(l,{children:[s.jsx(W,{className:"h-4 w-4 mr-2"}),"Nuevo Rol"]})]})]}),s.jsxs(t,{children:[s.jsxs(c,{children:[s.jsx(d,{children:"Roles del Sistema"}),s.jsx(j,{children:"Gestión de los 7 roles jerárquicos con permisos granulares por módulo"})]}),s.jsx(r,{children:s.jsxs(Y,{children:[s.jsx(F,{children:s.jsxs(D,{children:[s.jsx(n,{children:"Rol"}),s.jsx(n,{children:"Nivel"}),s.jsx(n,{children:"Usuarios"}),s.jsx(n,{children:"Activos"}),s.jsx(n,{children:"Última Actividad"}),s.jsx(n,{children:"Estado"}),s.jsx(n,{className:"text-right",children:"Acciones"})]})}),s.jsx(X,{children:P.map(a=>{const e=A.find(G=>G.roleId===a.id),m=e?Math.round(e.activeUsers/e.userCount*100):0;return s.jsxs(D,{children:[s.jsx(x,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ls,{roleId:a.id}),s.jsx("div",{children:s.jsx("div",{className:"text-sm text-gray-500",children:a.description})})]})}),s.jsx(x,{children:s.jsxs(u,{variant:"outline",className:"font-mono",children:["L",a.level]})}),s.jsx(x,{children:s.jsx("div",{className:"font-medium",children:(e==null?void 0:e.userCount)||0})}),s.jsx(x,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.activeUsers)||0}),s.jsx(v,{value:m,className:"w-16"})]})}),s.jsx(x,{children:s.jsx("span",{className:"text-sm text-gray-600",children:(e==null?void 0:e.lastActivity)||"N/A"})}),s.jsx(x,{children:s.jsxs(u,{variant:"outline",className:"text-green-600 border-green-300",children:[s.jsx(z,{className:"h-3 w-3 mr-1"}),"Activo"]})}),s.jsx(x,{className:"text-right",children:s.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[s.jsxs(p,{children:[s.jsx(f,{asChild:!0,children:s.jsx(l,{variant:"ghost",size:"sm",children:s.jsx(K,{className:"h-4 w-4"})})}),s.jsxs(g,{className:"max-w-lg",children:[s.jsxs(b,{children:[s.jsx(y,{children:"Detalles del Rol"}),s.jsxs(w,{children:["Información completa del rol ",a.name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Rol"}),s.jsx("div",{className:"mt-1",children:s.jsx(q,{roleId:a.id,showIcon:!0})})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Descripción"}),s.jsx("p",{className:"text-sm text-gray-600",children:a.description})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Nivel Jerárquico"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Nivel ",a.level," de 7"]})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Usuarios Asignados"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[(e==null?void 0:e.userCount)||0," usuarios totales"]})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Usuarios Activos"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[(e==null?void 0:e.activeUsers)||0," usuarios"]}),s.jsx(v,{value:m,className:"w-24"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[m,"%"]})]})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Última Actividad"}),s.jsx("p",{className:"text-sm text-gray-600",children:(e==null?void 0:e.lastActivity)||"N/A"})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Estado"}),s.jsx("div",{className:"mt-1",children:s.jsxs(u,{variant:"outline",className:"text-green-600 border-green-300",children:[s.jsx(z,{className:"h-3 w-3 mr-1"}),"Activo"]})})]})]})]})]}),h.canWrite("Seguridad")&&s.jsxs(p,{children:[s.jsx(f,{asChild:!0,children:s.jsx(l,{variant:"ghost",size:"sm",children:s.jsx(Q,{className:"h-4 w-4"})})}),s.jsxs(g,{className:"max-w-md",children:[s.jsxs(b,{children:[s.jsx(y,{children:"Editar Rol"}),s.jsxs(w,{children:["Modifica las propiedades del rol ",a.name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Descripción"}),s.jsx(S,{defaultValue:a.description})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Estado"}),s.jsxs(Z,{defaultValue:"active",children:[s.jsx($,{children:s.jsx(ss,{})}),s.jsxs(es,{children:[s.jsx(E,{value:"active",children:"Activo"}),s.jsx(E,{value:"inactive",children:"Inactivo"})]})]})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Configuración Avanzada"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Los niveles jerárquicos no se pueden modificar"}),s.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Nivel:"})," ",a.level,"/7",s.jsx("br",{}),s.jsx("span",{className:"font-medium",children:"ID:"})," ",a.id]})})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(l,{variant:"outline",children:"Cancelar"}),s.jsx(l,{onClick:()=>{as({title:"Rol actualizado",description:"Los cambios se han guardado exitosamente"})},children:"Guardar Cambios"})]})]})]})]}),s.jsxs(p,{children:[s.jsx(f,{asChild:!0,children:s.jsx(l,{variant:"ghost",size:"sm",children:s.jsx(is,{className:"h-4 w-4"})})}),s.jsxs(g,{className:"max-w-lg",children:[s.jsxs(b,{children:[s.jsx(y,{children:"Estadísticas del Rol"}),s.jsxs(w,{children:["Métricas y análisis de uso del rol ",a.name]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(t,{children:s.jsxs(r,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.userCount)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuarios Totales"})]})}),s.jsx(t,{children:s.jsxs(r,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.activeUsers)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuarios Activos"})]})})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Tasa de Actividad"}),s.jsxs("div",{className:"mt-2",children:[s.jsx(v,{value:m,className:"w-full"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m,"% de usuarios activos"]})]})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Última Actividad"}),s.jsx("p",{className:"text-sm text-gray-600",children:(e==null?void 0:e.lastActivity)||"Sin actividad reciente"})]}),s.jsxs("div",{children:[s.jsx(i,{className:"text-sm font-medium",children:"Nivel de Acceso"}),s.jsx("div",{className:"mt-1",children:s.jsxs(u,{variant:"outline",className:"font-mono",children:["Nivel ",a.level," - ",a.level<=2?"Alto":a.level<=4?"Medio":"Básico"]})})]})]})]})]})]})})]},a.id)})})]})})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mt-8",children:[s.jsxs(t,{children:[s.jsxs(c,{children:[s.jsxs(d,{className:"flex items-center",children:[s.jsx(T,{className:"h-5 w-5 mr-2 text-purple-500"}),"Matriz de Permisos"]}),s.jsx(j,{children:"Configura permisos granulares por módulo y rol"})]}),s.jsx(r,{children:s.jsx(o,{href:"/admin/permissions/matrix",children:s.jsx(l,{className:"w-full",children:"Abrir Matriz"})})})]}),s.jsxs(t,{children:[s.jsxs(c,{children:[s.jsxs(d,{className:"flex items-center",children:[s.jsx(L,{className:"h-5 w-5 mr-2 text-blue-500"}),"Asignación de Usuarios"]}),s.jsx(j,{children:"Gestiona asignaciones masivas de roles"})]}),s.jsx(r,{children:s.jsx(o,{href:"/admin/role-assignments",children:s.jsx(l,{className:"w-full",children:"Gestionar Usuarios"})})})]}),s.jsxs(t,{children:[s.jsxs(c,{children:[s.jsxs(d,{className:"flex items-center",children:[s.jsx(I,{className:"h-5 w-5 mr-2 text-green-500"}),"Auditoría de Roles"]}),s.jsx(j,{children:"Revisa logs de actividad y cambios"})]}),s.jsx(r,{children:s.jsx(o,{href:"/admin/configuracion-seguridad/audit/role-audits",children:s.jsx(l,{className:"w-full",children:"Ver Auditoría"})})})]})]})]})};export{os as default};
