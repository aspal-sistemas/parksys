import{Y as x,e as k,a6 as q,u as L,a8 as d,j as e,aB as h,D as g,p as P,B as l,aW as j,r as p,t as v,v as C,C as z,a as Q,b as K,b4 as M,c as O,am as N,f as I,y as m,I as f,O as $,ah as u}from"./index-BBGHPKhn.js";import{P as A}from"./pen-BW4wfSc2.js";const H=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16"];function b({category:s,onSave:n,onCancel:c}){const[t,i]=x.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",color:(s==null?void 0:s.color)||"#3B82F6"}),o=r=>{r.preventDefault(),t.name.trim()&&n(t)};return e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nombre de la categoría"}),e.jsx(f,{id:"name",value:t.name,onChange:r=>i({...t,name:r.target.value}),placeholder:"Ej: Culturales, Deportivos...",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Descripción (opcional)"}),e.jsx($,{id:"description",value:t.description,onChange:r=>i({...t,description:r.target.value}),placeholder:"Descripción de la categoría...",rows:3})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Color de la categoría"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:"w-8 h-8 rounded border-2 border-gray-300",style:{backgroundColor:t.color}}),e.jsx(f,{type:"color",value:t.color,onChange:r=>i({...t,color:r.target.value}),className:"w-16 h-8 p-1 border rounded"})]}),e.jsx("div",{className:"grid grid-cols-8 gap-1 mt-2",children:H.map(r=>e.jsx("button",{type:"button",className:"w-6 h-6 rounded border hover:scale-110 transition-transform",style:{backgroundColor:r},onClick:()=>i({...t,color:r})},r))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{type:"button",variant:"outline",onClick:c,children:"Cancelar"}),e.jsxs(l,{type:"submit",children:[s?"Actualizar":"Crear"," Categoría"]})]})]})}function U(){const[s,n]=x.useState(null),[c,t]=x.useState(!1),{toast:i}=k(),o=q(),{data:r=[],isLoading:E}=L({queryKey:["/api/event-categories"]}),y=d({mutationFn:async a=>u("/api/event-categories",{method:"POST",body:a}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/event-categories"]}),t(!1),i({title:"Categoría creada",description:"La categoría de evento se ha creado exitosamente."})},onError:a=>{i({title:"Error",description:a.message||"Error al crear la categoría",variant:"destructive"})}}),w=d({mutationFn:async({id:a,data:T})=>u(`/api/event-categories/${a}`,{method:"PUT",body:T}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/event-categories"]}),n(null),i({title:"Categoría actualizada",description:"La categoría de evento se ha actualizado exitosamente."})},onError:a=>{i({title:"Error",description:a.message||"Error al actualizar la categoría",variant:"destructive"})}}),D=d({mutationFn:async a=>u(`/api/event-categories/${a}`,{method:"DELETE"}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/event-categories"]}),i({title:"Categoría eliminada",description:"La categoría de evento se ha eliminado exitosamente."})},onError:a=>{i({title:"Error",description:a.message||"Error al eliminar la categoría",variant:"destructive"})}}),F=a=>{y.mutate(a)},S=a=>{s&&w.mutate({id:s.id,data:a})},B=a=>{confirm(`¿Estás seguro de que deseas eliminar la categoría "${a.name}"?`)&&D.mutate(a.id)};return E?e.jsx(h,{title:"Categorías de Eventos",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando categorías..."})]})})}):e.jsx(h,{title:"Categorías de Eventos",children:e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categorías de Eventos"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona las categorías para clasificar eventos"})]}),e.jsxs(g,{open:c,onOpenChange:t,children:[e.jsx(P,{asChild:!0,children:e.jsxs(l,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Nueva Categoría"]})}),e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(C,{children:"Crear Nueva Categoría"})}),e.jsx(b,{onSave:F,onCancel:()=>t(!1)})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(a=>e.jsxs(z,{className:"relative",children:[e.jsx(Q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.color}}),e.jsx(K,{className:"text-lg",children:a.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n(a),children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>B(a),className:"text-red-600 hover:text-red-700",children:e.jsx(M,{className:"h-4 w-4"})})]})]})}),e.jsxs(O,{children:[a.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsxs("span",{children:["ID: ",a.id]})]}),e.jsx(I,{variant:"outline",className:"mt-2",style:{borderColor:a.color,color:a.color},children:a.name})]})]},a.id))}),r.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Crea la primera categoría para eventos"}),e.jsxs(l,{onClick:()=>t(!0),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Crear Primera Categoría"]})]}),e.jsx(g,{open:!!s,onOpenChange:a=>!a&&n(null),children:e.jsxs(p,{children:[e.jsx(v,{children:e.jsx(C,{children:"Editar Categoría"})}),s&&e.jsx(b,{category:s,onSave:S,onCancel:()=>n(null)})]})})]})})}export{U as default};
