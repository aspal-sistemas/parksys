import{u,j as e,aX as L,f as I,b0 as k,L as d,B as n,au as A,av as b,bh as E,m as S,U as B,bH as $,bI as M,bJ as m,bK as l,bL as O,bM as i,o as C,bq as F}from"./index-D5qLf1ib.js";const R=()=>{const{data:r=[],isLoading:t}=u({queryKey:["/api/activities"],retry:1}),{data:h,isLoading:D}=u({queryKey:["/api/parks"],retry:1}),p=(h==null?void 0:h.data)||[],{data:y=[],isLoading:z}=u({queryKey:["/api/activity-categories"],retry:1}),o=Array.isArray(y)?y.reduce((s,a)=>(s[a.id]=a,s),{}):{},T=Array.isArray(r)?r.length:0,q=Array.isArray(r)?r.filter(s=>new Date(s.startDate)>=new Date).length:0,x={deportivo:"Deportivo",artecultura:"Arte y Cultura",recreacionbienestar:"Recreación y Bienestar",temporada:"Eventos de Temporada",naturalezaciencia:"Naturaleza y Ciencia",comunidad:"Comunidad",fitness:"Fitness y Ejercicio"},g=Array.isArray(r)?r.reduce((s,a)=>{let c=null;const j=a.categoryId||a.category_id;return j&&o[j]?c=o[j].name:a.category&&x[a.category]&&(c=x[a.category]),c&&(s[c]=(s[c]||0)+1),s},{}):{},v=Array.isArray(r)?r.reduce((s,a)=>(s[a.parkId]=(s[a.parkId]||0)+1,s),{}):{},N=Array.isArray(p)?p.reduce((s,a)=>(s[a.id]=a.name,s),{}):{},f=Object.entries(v).map(([s,a])=>({parkId:parseInt(s),name:N[s]||`Parque ${s}`,count:a})).sort((s,a)=>Number(a.count)-Number(s.count)).slice(0,5),w=Array.isArray(r)?r.filter(s=>new Date(s.startDate)>=new Date).sort((s,a)=>new Date(s.startDate).getTime()-new Date(a.startDate).getTime()).slice(0,5):[],P=Math.max(...Object.values(v).map(Number),1);return e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{className:"p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestión de actividades y eventos en parques"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{href:"/admin/organizador/catalogo/ver",children:e.jsxs(n,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(A,{size:16}),"Ver Todas las Actividades"]})}),e.jsx(d,{href:"/admin/activities/categories",children:e.jsxs(n,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(b,{size:16}),"Gestionar Categorías"]})}),e.jsx(d,{href:"/admin/organizador/nueva-actividad",children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(E,{size:16}),"Nueva Actividad"]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Actividades"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t?"...":T})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(S,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividades Próximas"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t?"...":q})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(B,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Categorías Activas"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t?"...":Object.keys(g).length})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(b,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Actividades Próximas"}),e.jsxs($,{children:[e.jsx(M,{children:e.jsxs(m,{children:[e.jsx(l,{children:"Nombre"}),e.jsx(l,{children:"Categoría"}),e.jsx(l,{children:"Parque"}),e.jsx(l,{children:"Fecha"}),e.jsx(l,{children:"Ubicación"}),e.jsx(l,{children:"Acciones"})]})}),e.jsx(O,{children:t?e.jsx(m,{children:e.jsx(i,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Cargando actividades..."})}):w.length===0?e.jsx(m,{children:e.jsx(i,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No hay actividades próximas programadas"})}):w.map(s=>e.jsxs(m,{children:[e.jsx(i,{className:"font-medium",children:s.title}),e.jsx(i,{children:e.jsx(C,{variant:"outline",children:(()=>{const a=s.categoryId||s.category_id;return a&&o[a]?o[a].name:s.category&&x[s.category]?x[s.category]:"Sin categoría"})()})}),e.jsx(i,{children:N[s.parkId]||`Parque ${s.parkId}`}),e.jsx(i,{children:new Date(s.startDate).toLocaleDateString("es-ES")}),e.jsx(i,{children:s.location||"Sin especificar"}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{href:`/admin/organizador/catalogo/${s.id}`,children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(A,{className:"h-4 w-4"})})}),e.jsx(d,{href:`/admin/organizador/catalogo/editar/${s.id}`,children:e.jsx(n,{variant:"outline",size:"sm",children:e.jsx(F,{className:"h-4 w-4"})})})]})})]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Categorías de Actividades"}),e.jsx(d,{href:"/admin/activities/categories",children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Gestionar Categorías"]})})]}),e.jsx("div",{className:"space-y-2",children:t||z?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Cargando categorías..."}):Object.keys(g).length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No hay categorías disponibles"}):Object.entries(g).map(([s,a])=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-md",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(C,{className:`${s==="Arte y Cultura"?"bg-green-100 text-green-800":s==="Recreación y Bienestar"?"bg-blue-100 text-blue-800":s==="Eventos de Temporada"?"bg-orange-100 text-orange-800":s==="Deportivo"?"bg-red-100 text-red-800":s==="Comunidad"?"bg-purple-100 text-purple-800":s==="Naturaleza y Ciencia"?"bg-teal-100 text-teal-800":s==="Fitness y Ejercicio"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"} hover:${s==="Arte y Cultura"?"bg-green-100":s==="Recreación y Bienestar"?"bg-blue-100":s==="Eventos de Temporada"?"bg-orange-100":s==="Deportivo"?"bg-red-100":s==="Comunidad"?"bg-purple-100":s==="Naturaleza y Ciencia"?"bg-teal-100":s==="Fitness y Ejercicio"?"bg-indigo-100":"bg-emerald-100"}`,children:s})}),e.jsxs("span",{className:"text-sm text-gray-500",children:[a," actividades"]})]},s))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Parques con Más Actividades"}),e.jsx("div",{className:"space-y-2",children:D||t?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Cargando parques..."}):f.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No hay parques con actividades"}):f.map(s=>e.jsx("div",{className:"flex items-center p-3 bg-gray-50 rounded-md",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.count," actividades"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${s.count/P*100}%`}})})]})},s.parkId))})]})]})]})})};export{R as default};
