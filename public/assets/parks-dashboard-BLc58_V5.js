import{u as B,j as e,aX as u,f as a,ar as N,g as l,i as r,aW as y,h as c,M as E,T as v,m as S,U as T,aY as P,ah as I,aZ as R,a_ as U,K as q,a$ as L,ab as V,o as C}from"./index-D5qLf1ib.js";import{S as g}from"./skeleton-XQWc31Aw.js";import{L as k,M as $,T as G,a as F}from"./leaflet-CDEiJxZW.js";import{P as W}from"./Popup-DlyBzOr7.js";delete k.Icon.Default.prototype._getIconUrl;k.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const H=()=>{var p,f,b,w;const{data:t,isLoading:D,error:A}=B({queryKey:["/api/parks/dashboard"]});if(D)return e.jsx(u,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(a,{className:"p-4 bg-gray-50 mb-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-gray-900"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Resumen General del Sistema"})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((s,i)=>e.jsxs(a,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"h-4 w-24"}),e.jsx(g,{className:"h-4 w-4"})]}),e.jsxs(r,{children:[e.jsx(g,{className:"h-8 w-16 mb-2"}),e.jsx(g,{className:"h-3 w-32"})]})]},i))})]})});if(A)return e.jsxs(u,{children:[e.jsx(a,{className:"p-4 bg-gray-50 mb-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-gray-900"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Resumen General del Sistema"})]})]})}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Error al cargar los datos del dashboard"})]})]});if(!t)return e.jsxs(u,{children:[e.jsx(a,{className:"p-4 bg-gray-50 mb-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-gray-900"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Resumen General del Sistema"})]})]})}),e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:"No hay datos disponibles"})})]});const M=[19.4326,-99.1332];return e.jsx(u,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(a,{className:"p-4",style:{backgroundColor:"#003D49"},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"#513C73"},children:e.jsx(N,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-200 mt-2",children:"Resumen General del Sistema"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Información General"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Total de Parques"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(E,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalParks}),e.jsxs("p",{className:"text-xs text-white",children:[t.activeParks," activos"]})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Superficie Total"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(v,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalSurface?`${(t.totalSurface/1e4).toFixed(1)} ha`:"N/A"}),e.jsx("p",{className:"text-xs text-white",children:"Superficie total de parques"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Actividades"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(S,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalActivities}),e.jsx("p",{className:"text-xs text-white",children:"Eventos programados"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Voluntarios"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#B275B0"},children:e.jsx(T,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalVolunteers}),e.jsx("p",{className:"text-xs text-white",children:"Activos en el sistema"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Árboles"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(v,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalTrees}),e.jsx("p",{className:"text-xs text-white",children:"En inventario"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Visitantes"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(P,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalVisitors?t.totalVisitors.toLocaleString():"N/A"}),e.jsx("p",{className:"text-xs text-white",children:"Visitantes totales"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Calificación"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(I,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.averageRating?t.averageRating.toFixed(1):"N/A"}),e.jsx("p",{className:"text-xs text-white",children:"Promedio de evaluaciones"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"En Mantenimiento"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#B275B0"},children:e.jsx(y,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.maintenanceAreas}),e.jsx("p",{className:"text-xs text-white",children:"Áreas en mantenimiento"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Amenidades"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(R,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalAmenities}),e.jsx("p",{className:"text-xs text-white",children:"Amenidades disponibles"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Instructores"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#513C73"},children:e.jsx(U,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalInstructors}),e.jsx("p",{className:"text-xs text-white",children:"Instructores activos"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Incidencias"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#B275B0"},children:e.jsx(q,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalIncidents}),e.jsx("p",{className:"text-xs text-white",children:"Incidencias (últimos 30 días)"})]})]}),e.jsxs(a,{className:"border-0 shadow-lg text-white",style:{backgroundColor:"#003D49"},children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-base font-medium text-gray-100",children:"Activos"}),e.jsx("div",{className:"rounded-full p-2",style:{backgroundColor:"#B275B0"},children:e.jsx(L,{className:"h-5 w-5 text-white"})})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalAssets}),e.jsx("p",{className:"text-xs text-white",children:"Activos registrados"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-8"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(a,{className:"border-0 shadow-lg",children:[e.jsx(l,{className:"bg-white rounded-t-lg",children:e.jsx(c,{className:"text-lg font-bold text-gray-800",children:"Parques por Municipio"})}),e.jsx(r,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:(p=t.parksByMunicipality)==null?void 0:p.map((s,i)=>{var d;const h=Math.max(...((d=t.parksByMunicipality)==null?void 0:d.map(o=>o.count))||[1]),m=s.count/h*100,n=["#D2EAEA","#036668","#003D49"],x=n[i%n.length];return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 text-sm font-medium text-right text-gray-700 truncate",children:s.municipalityName}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"h-6 rounded-full flex items-center justify-end pr-3 transition-all duration-700 shadow-sm",style:{width:`${Math.max(m,5)}%`,backgroundColor:x},children:e.jsx("span",{className:`text-xs font-bold ${x==="#D2EAEA"?"text-gray-800":"text-white"}`,children:s.count})})})})]},i)})})})]}),e.jsxs(a,{className:"border-0 shadow-lg",children:[e.jsx(l,{className:"bg-white rounded-t-lg",children:e.jsx(c,{className:"text-lg font-bold text-gray-800",children:"Distribución por Tipo"})}),e.jsx(r,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:(f=t.parksByType)==null?void 0:f.map((s,i)=>{var d;const h=Math.max(...((d=t.parksByType)==null?void 0:d.map(o=>o.count))||[1]),m=s.count/h*100,n=["#B3C077","#1E5AA6","#198DCE","#90D3EC"],x=n[i%n.length];return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-24 text-sm font-medium text-right text-gray-700 truncate",children:s.type}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"h-6 rounded-full flex items-center justify-end pr-3 transition-all duration-700 shadow-sm",style:{width:`${Math.max(m,5)}%`,backgroundColor:x},children:e.jsx("span",{className:"text-white text-xs font-bold",children:s.count})})})})]},i)})})})]})]}),e.jsxs(a,{className:"border-0 shadow-lg",children:[e.jsx(l,{className:"bg-white rounded-t-lg",children:e.jsx(c,{className:"text-lg font-bold text-gray-800",children:"Estado de Conservación"})}),e.jsx(r,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:(b=t.conservationStatus)==null?void 0:b.map((s,i)=>{var o;const h=Math.max(...((o=t.conservationStatus)==null?void 0:o.map(j=>j.count))||[1]),m=s.count/h*100,n=["#036668","#003D49","#61B1A0"],x=n[i%n.length],d=j=>{switch(j.toLowerCase()){case"good":return"Excelente";case"excellent":return"Excelente";case"fair":return"Bueno";case"regular":return"Regular";case"poor":return"Malo";case"bad":return"Malo";default:return j}};return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-20 text-sm font-medium text-right text-gray-700 truncate",children:d(s.status)}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"h-6 rounded-full flex items-center justify-end pr-3 transition-all duration-700 shadow-sm",style:{width:`${Math.max(m,5)}%`,backgroundColor:x},children:e.jsx("span",{className:"text-white text-xs font-bold",children:s.count})})})})]},i)})})})]}),e.jsxs(a,{className:"border-0 shadow-xl",children:[e.jsxs(l,{className:"bg-white rounded-t-lg",children:[e.jsx(c,{className:"text-xl font-bold text-gray-800",children:"Ubicación de Parques"}),e.jsx(V,{className:"text-gray-600",children:"Mapa interactivo mostrando la ubicación de todos los parques en el sistema"})]}),e.jsx(r,{children:e.jsx("div",{className:"h-96 w-full",children:e.jsxs($,{center:M,zoom:6,className:"h-full w-full rounded-lg",children:[e.jsx(G,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(w=t.parksWithCoordinates)==null?void 0:w.filter(s=>s.latitude!=null&&s.longitude!=null&&!isNaN(s.latitude)&&!isNaN(s.longitude)).map(s=>e.jsx(F,{position:[s.latitude,s.longitude],children:e.jsx(W,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.municipality}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(C,{variant:"outline",className:"text-xs",children:s.type}),s.area&&e.jsxs(C,{variant:"secondary",className:"text-xs",children:[(s.area/1e4).toFixed(1)," ha"]})]})]})})},s.id))]})})})]})]})]})})};export{H as default};
