import{u as j,j as e,aB as q,L as t,B as d,b0 as N,am as u,aW as k,h as L,U as E,ba as I,bb as B,bc as m,bd as n,be as S,bf as r,f as y,b3 as O}from"./index-BBGHPKhn.js";const M=()=>{const{data:l=[],isLoading:i}=j({queryKey:["/api/activities"]}),{data:w=[],isLoading:C}=j({queryKey:["/api/parks"]}),{data:A=[],isLoading:z}=j({queryKey:["/api/activity-categories"]}),o=A.reduce((s,a)=>(s[a.id]=a,s),{}),D=l.length,P=l.filter(s=>new Date(s.startDate)>=new Date).length,x={deportivo:"Deportivo",artecultura:"Arte y Cultura",recreacionbienestar:"Recreación y Bienestar",temporada:"Eventos de Temporada",naturalezaciencia:"Naturaleza y Ciencia",comunidad:"Comunidad",fitness:"Fitness y Ejercicio"},h=l.reduce((s,a)=>{let c=null;const g=a.categoryId||a.category_id;return g&&o[g]?c=o[g].name:a.category&&x[a.category]&&(c=x[a.category]),c&&(s[c]=(s[c]||0)+1),s},{}),b=l.reduce((s,a)=>(s[a.parkId]=(s[a.parkId]||0)+1,s),{}),p=w.reduce((s,a)=>(s[a.id]=a.name,s),{}),v=Object.entries(b).map(([s,a])=>({parkId:parseInt(s),name:p[s]||`Parque ${s}`,count:a})).sort((s,a)=>a.count-s.count).slice(0,5),f=l.filter(s=>new Date(s.startDate)>=new Date).sort((s,a)=>new Date(s.startDate)-new Date(a.startDate)).slice(0,5),T=Math.max(...Object.values(b),1);return e.jsxs(q,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organizador"}),e.jsx("p",{className:"text-gray-500",children:"Gestión de actividades y eventos en parques"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{href:"/admin/organizador/catalogo/ver",children:e.jsxs(d,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(N,{size:16}),"Ver Todas las Actividades"]})}),e.jsx(t,{href:"/admin/activities/categories",children:e.jsxs(d,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(u,{size:16}),"Gestionar Categorías"]})}),e.jsx(t,{href:"/admin/organizador/nueva-actividad",children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(k,{size:16}),"Nueva Actividad"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Total Actividades"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:i?"...":D})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(L,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividades Próximas"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:i?"...":P})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(E,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Categorías Activas"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:i?"...":Object.keys(h).length})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(u,{className:"h-6 w-6 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Actividades Próximas"}),e.jsxs(I,{children:[e.jsx(B,{children:e.jsxs(m,{children:[e.jsx(n,{children:"Nombre"}),e.jsx(n,{children:"Categoría"}),e.jsx(n,{children:"Parque"}),e.jsx(n,{children:"Fecha"}),e.jsx(n,{children:"Ubicación"}),e.jsx(n,{children:"Acciones"})]})}),e.jsx(S,{children:i?e.jsx(m,{children:e.jsx(r,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Cargando actividades..."})}):f.length===0?e.jsx(m,{children:e.jsx(r,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No hay actividades próximas programadas"})}):f.map(s=>e.jsxs(m,{children:[e.jsx(r,{className:"font-medium",children:s.title}),e.jsx(r,{children:e.jsx(y,{variant:"outline",children:(()=>{const a=s.categoryId||s.category_id;return a&&o[a]?o[a].name:s.category&&x[s.category]?x[s.category]:"Sin categoría"})()})}),e.jsx(r,{children:p[s.parkId]||`Parque ${s.parkId}`}),e.jsx(r,{children:new Date(s.startDate).toLocaleDateString("es-ES")}),e.jsx(r,{children:s.location||"Sin especificar"}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{href:`/admin/organizador/catalogo/${s.id}`,children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(N,{className:"h-4 w-4"})})}),e.jsx(t,{href:`/admin/organizador/catalogo/editar/${s.id}`,children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})})]})})]},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Categorías de Actividades"}),e.jsx(t,{href:"/admin/activities/categories",children:e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Gestionar Categorías"]})})]}),e.jsx("div",{className:"space-y-2",children:i||z?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Cargando categorías..."}):Object.keys(h).length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No hay categorías disponibles"}):Object.entries(h).map(([s,a])=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-md",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(y,{className:`${s==="Arte y Cultura"?"bg-green-100 text-green-800":s==="Recreación y Bienestar"?"bg-blue-100 text-blue-800":s==="Eventos de Temporada"?"bg-orange-100 text-orange-800":s==="Deportivo"?"bg-red-100 text-red-800":s==="Comunidad"?"bg-purple-100 text-purple-800":s==="Naturaleza y Ciencia"?"bg-teal-100 text-teal-800":s==="Fitness y Ejercicio"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"} hover:${s==="Arte y Cultura"?"bg-green-100":s==="Recreación y Bienestar"?"bg-blue-100":s==="Eventos de Temporada"?"bg-orange-100":s==="Deportivo"?"bg-red-100":s==="Comunidad"?"bg-purple-100":s==="Naturaleza y Ciencia"?"bg-teal-100":s==="Fitness y Ejercicio"?"bg-indigo-100":"bg-emerald-100"}`,children:s})}),e.jsxs("span",{className:"text-sm text-gray-500",children:[a," actividades"]})]},s))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Parques con Más Actividades"}),e.jsx("div",{className:"space-y-2",children:C||i?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Cargando parques..."}):v.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No hay parques con actividades"}):v.map(s=>e.jsx("div",{className:"flex items-center p-3 bg-gray-50 rounded-md",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.count," actividades"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${s.count/T*100}%`}})})]})},s.parkId))})]})]})]})};export{M as default};
