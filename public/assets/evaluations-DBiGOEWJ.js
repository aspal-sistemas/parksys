import{aD as A,Y as g,u as j,j as e,aI as p,D as q,p as I,B as N,b2 as u,r as L,t as $,v as k,S as c,z,H,J as K,K as B,N as y,C as i,c as n,aK as Q,a4 as U,a as V,b as O,f as J,l as f,X as v,s as b}from"./index-VG22aPDC.js";import{M as X}from"./message-circle-BdS_6jGD.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=A("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),W=()=>{const[d,w]=g.useState("all"),[S,o]=g.useState(!1),{data:r}=j({queryKey:["/api/sponsors"],queryFn:()=>b("/api/sponsors",{})}),{data:x,isLoading:R}=j({queryKey:["/api/sponsorship-evaluations"],queryFn:async()=>{try{return await b("/api/sponsorship-evaluations",{})}catch(s){return console.error("Error cargando evaluaciones:",s),[]}},staleTime:5*60*1e3,gcTime:10*60*1e3}),l=(x==null?void 0:x.filter(s=>d==="all"?!0:s.sponsorId===parseInt(d)))||[],C=s=>s.length===0?0:s.reduce((t,F)=>t+(F.overallSatisfaction||0),0)/s.length,E=s=>s.length===0?0:s.filter(t=>t.wouldRenew).length/s.length*100,m=C(l),D=E(l),T=l.length,M=l.length>0?l.reduce((s,a)=>s+(a.recommendationScore||0),0)/l.length:0,h=s=>s>=8?"text-green-600":s>=6?"text-yellow-600":"text-red-600",P=s=>{const a=[];for(let t=1;t<=10;t++)a.push(e.jsx(c,{className:`w-4 h-4 ${t<=s?"text-yellow-400 fill-current":"text-gray-300"}`},t));return a};return R?e.jsx(p,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},s))})]})}):e.jsx(p,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Evaluaciones de Patrocinio"}),e.jsx("p",{className:"text-gray-600",children:"Analiza la satisfacción de los patrocinadores"})]}),e.jsxs(q,{open:S,onOpenChange:o,children:[e.jsx(I,{asChild:!0,children:e.jsxs(N,{className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Nueva Evaluación"]})}),e.jsxs(L,{className:"max-w-2xl",children:[e.jsx($,{children:e.jsx(k,{children:"Crear Nueva Evaluación"})}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"w-16 h-16 mx-auto text-[#00a587] mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Funcionalidad de evaluaciones en desarrollo"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtrar por patrocinador:"}),e.jsxs(z,{value:d,onValueChange:w,children:[e.jsx(H,{className:"w-64",children:e.jsx(K,{})}),e.jsxs(B,{children:[e.jsx(y,{value:"all",children:"Todos los patrocinadores"}),r==null?void 0:r.map(s=>e.jsx(y,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Evaluaciones Totales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T})]}),e.jsx(X,{className:"w-8 h-8 text-[#00a587]"})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Calificación Promedio"}),e.jsxs("p",{className:`text-2xl font-bold ${h(m)}`,children:[m.toFixed(1),"/10"]})]}),e.jsx(c,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tasa de Renovación"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[D.toFixed(1),"%"]})]}),e.jsx(Q,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NPS Promedio"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:M.toFixed(1)})]}),e.jsx(U,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(i,{children:[e.jsx(V,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"}),"Evaluaciones Recientes"]})}),e.jsxs(n,{children:[e.jsx("div",{className:"space-y-6",children:l.map(s=>{const a=r==null?void 0:r.find(t=>t.id===s.sponsorId);return e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-900",children:(a==null?void 0:a.name)||"Patrocinador Desconocido"}),e.jsx(J,{variant:"outline",children:f(new Date(s.evaluationDate),"dd/MM/yyyy",{locale:v})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:P(s.overallSatisfaction||0)}),e.jsxs("span",{className:`font-bold ${h(s.overallSatisfaction||0)}`,children:[s.overallSatisfaction,"/10"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor por dinero"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.valueForMoney,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Organización"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.organizationQuality,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Audiencia"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.audienceQuality,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Comunicación"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.communicationRating,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Logística"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.logisticsRating,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NPS"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.recommendationScore,"/10"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Comentarios"}),e.jsx("p",{className:"text-sm text-gray-800 bg-gray-50 p-3 rounded",children:s.feedback||"Sin comentarios"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sugerencias de mejora"}),e.jsx("p",{className:"text-sm text-gray-800 bg-gray-50 p-3 rounded",children:s.improvements||"Sin sugerencias"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:`w-4 h-4 ${s.wouldRenew?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`text-sm ${s.wouldRenew?"text-green-600":"text-gray-600"}`,children:s.wouldRenew?"Renovaría el patrocinio":"No renovaría"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Evaluado el ",f(new Date(s.evaluationDate),"dd MMMM yyyy",{locale:v})]})]})]},s.id)})}),l.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay evaluaciones disponibles"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d!=="all"?"Este patrocinador no tiene evaluaciones registradas":"Crea la primera evaluación de patrocinio"}),e.jsxs(N,{onClick:()=>o(!0),className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Crear Evaluación"]})]})]})]})]})})};export{W as default};
