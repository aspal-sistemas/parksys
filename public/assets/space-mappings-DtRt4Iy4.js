import{Y as N,u as F,j as e,aI as G,L as m,B as i,bg as f,M as P,aO as Q,aP as H,aQ as C,aR as D,_ as k,$ as L,C as A,a as E,b as S,a3 as M,b7 as $,c as I,f as l,h as z,E as K,at as Y,au as J}from"./index-Dzu3mJf5.js";import{L as q}from"./link-BhuCbKuM.js";const Z=()=>{const[r,h]=N.useState("grid"),[T,U]=N.useState(1),[c,u]=N.useState(1),d=10,{data:n,isLoading:V}=F({queryKey:["/api/advertising-management/space-mappings"]});if(V)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});const B=(n==null?void 0:n.reduce((s,t)=>(s[t.page_type]||(s[t.page_type]=[]),s[t.page_type].push(t),s),{}))||{},p=n||[],x=(n==null?void 0:n.filter(s=>s.ad_id&&s.placement_active))||[];Math.ceil(p.length/d);const y=(T-1)*d,O=y+d,R=p.slice(y,O),j=Math.ceil(x.length/d),g=(c-1)*d,b=g+d,_=x.slice(g,b);R.reduce((s,t)=>(s[t.page_type]||(s[t.page_type]=[]),s[t.page_type].push(t),s),{});const v=s=>({homepage:"Página Principal",parks:"Parques","park-landing":"Landing Pages de Parques",activities:"Actividades","activity-detail":"Detalles de Actividad",concessions:"Concesiones",instructors:"Instructores","instructor-profile":"Perfil de Instructor",volunteers:"Voluntarios","tree-species":"Especies Arbóreas"})[s]||s,o=s=>({header:"Cabecera",sidebar:"Barra Lateral",footer:"Pie de Página",hero:"Área Principal"})[s]||s,w=s=>({homepage:"/",parks:"/parks","park-landing":"/parque/bosque-los-colomos-5",activities:"/activities","activity-detail":"/activities",concessions:"/concessions",instructors:"/instructors","instructor-profile":"/instructor/87",volunteers:"/volunteers","tree-species":"/tree-species"})[s]||"/";return e.jsx(G,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mapeo de Espacios Publicitarios"}),e.jsx("p",{className:"text-gray-600",children:"Visualización completa de espacios publicitarios y sus anuncios asignados"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{href:"/admin/advertising/advertisements",children:e.jsxs(i,{variant:"outline",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Gestionar Anuncios"]})}),e.jsx(m,{href:"/admin/advertising/spaces",children:e.jsxs(i,{variant:"outline",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Gestionar Espacios"]})})]})]}),e.jsxs(Q,{defaultValue:"by-page",className:"w-full",children:[e.jsxs(H,{className:"grid w-full grid-cols-2",children:[e.jsx(C,{value:"by-page",children:"Por Página"}),e.jsx(C,{value:"active-only",children:"Solo Activos"})]}),e.jsxs(D,{value:"by-page",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Agrupado por páginas del sistema"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:r==="grid"?"default":"outline",size:"sm",onClick:()=>h("grid"),children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(i,{variant:r==="list"?"default":"outline",size:"sm",onClick:()=>h("list"),children:e.jsx(L,{className:"h-4 w-4"})})]})]}),Object.entries(B).map(([s,t])=>e.jsxs(A,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-blue-600"}),v(s)]}),e.jsxs(M,{children:[t.length," espacios publicitarios configurados"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(m,{href:w(s),target:"_blank",children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Ver Página"]})})})]})}),e.jsx(I,{children:r==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(a=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:a.space_active?"default":"secondary",children:o(a.position)}),e.jsx(l,{variant:a.placement_active?"default":"outline",children:a.placement_active?"Activo":"Inactivo"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",a.space_id]})]}),e.jsx("h3",{className:"font-semibold text-sm mb-1",children:a.space_name||`Espacio ${a.space_id}`}),a.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:a.description}),a.ad_id?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Anuncio Asignado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Título:"}),e.jsx("span",{className:"text-sm font-medium",children:a.ad_title})]}),a.image_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Imagen disponible"})]}),a.link_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Enlace configurado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-3 w-3 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[new Date(a.start_date).toLocaleDateString()," - ",new Date(a.end_date).toLocaleDateString()]})]})]})]})}):e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Sin Anuncio Asignado"})]}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Este espacio está disponible para asignar anuncios"})]})]},`${a.space_id}-${a.placement_id}`))}):e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.space_name||`Espacio ${a.space_id}`}),e.jsx("span",{className:"text-sm text-gray-600",children:o(a.position)})]}),e.jsx("div",{className:"flex items-center gap-2",children:a.ad_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:a.ad_title})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Sin anuncio asignado"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:a.space_active?"default":"secondary",children:o(a.position)}),e.jsx(l,{variant:a.placement_active?"default":"outline",children:a.placement_active?"Activo":"Inactivo"}),a.ad_id&&e.jsxs(l,{variant:"outline",children:[new Date(a.start_date).toLocaleDateString()," - ",new Date(a.end_date).toLocaleDateString()]})]})]},`${a.space_id}-${a.placement_id}`))})})]},s))]}),e.jsxs(D,{value:"active-only",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Espacios con anuncios activos (",x.length," total)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:r==="grid"?"default":"outline",size:"sm",onClick:()=>h("grid"),children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(i,{variant:r==="list"?"default":"outline",size:"sm",onClick:()=>h("list"),children:e.jsx(L,{className:"h-4 w-4"})})]})]}),e.jsxs(A,{children:[e.jsxs(E,{children:[e.jsx(S,{children:"Espacios Publicitarios Activos"}),e.jsx(M,{children:"Solo espacios con anuncios activos asignados"})]}),e.jsx(I,{children:r==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:"default",children:o(s.position)}),e.jsx(l,{variant:"default",children:"Activo"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",s.space_id]})]}),e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.space_name||`Espacio ${s.space_id}`}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:v(s.page_type)}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:s.ad_title})]}),e.jsxs("div",{className:"space-y-2",children:[s.image_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Imagen disponible"})]}),s.link_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Enlace configurado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-3 w-3 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[new Date(s.start_date).toLocaleDateString()," - ",new Date(s.end_date).toLocaleDateString()]})]})]})]})})]},`${s.space_id}-${s.placement_id}`))}):e.jsx("div",{className:"space-y-4",children:_.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.space_name||`Espacio ${s.space_id}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:[v(s.page_type)," - ",o(s.position)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:s.ad_title})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",children:[new Date(s.start_date).toLocaleDateString()," - ",new Date(s.end_date).toLocaleDateString()]}),e.jsx(m,{href:w(s.page_type),target:"_blank",children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsx(m,{href:`/admin/advertising/advertisements/${s.ad_id}`,children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(K,{className:"h-4 w-4"})})})]})]},`${s.space_id}-${s.placement_id}`))})})]}),j>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",g+1," a ",Math.min(b,x.length)," de ",x.length," espacios activos"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>u(s=>Math.max(s-1,1)),disabled:c===1,children:[e.jsx(Y,{className:"h-4 w-4"}),"Anterior"]}),Array.from({length:j},(s,t)=>t+1).map(s=>e.jsx(i,{variant:c===s?"default":"outline",size:"sm",onClick:()=>u(s),className:"w-8 h-8",style:{backgroundColor:c===s?"#00a587":void 0,borderColor:c===s?"#00a587":void 0},children:s},s)),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>u(s=>Math.min(s+1,j)),disabled:c===j,children:["Siguiente",e.jsx(J,{className:"h-4 w-4"})]})]})]})]})]})]})})};export{Z as default};
