import{aw as E,Y as c,e as B,a6 as O,a8 as G,u as H,j as e,aB as w,L as g,B as r,b9 as b,M as _,Z as K,I as Q,z as C,H as P,J as k,K as S,N as t,_ as R,$ as J,C as U,a as Y,b as Z,a3 as W,b0 as X,c as ee,f as d,h as se,ah as ae}from"./index-BBGHPKhn.js";import{L as ie}from"./link-zU-gXm1j.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=E("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=E("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),re=()=>{const[x,j]=c.useState("grid"),[l,D]=c.useState(""),[o,I]=c.useState("all"),[n,M]=c.useState("all"),{toast:v}=B(),F=O(),m=G({mutationFn:async({spaceId:a,isActive:i})=>ae(`/api/advertising-management/spaces/${a}`,{method:"PUT",data:{isActive:!i}}),onSuccess:a=>{F.invalidateQueries({queryKey:["/api/advertising-management/space-mappings"]}),v({title:"Espacio actualizado",description:`El espacio ha sido ${a.data.isActive?"activado":"desactivado"} correctamente.`})},onError:a=>{v({title:"Error",description:"No se pudo actualizar el espacio. Intenta nuevamente.",variant:"destructive"}),console.error("Error toggling space:",a)}}),{data:u,isLoading:q}=H({queryKey:["/api/advertising-management/space-mappings"],queryFn:async()=>{const a=await fetch("/api/advertising-management/space-mappings");if(!a.ok)throw new Error("Error al obtener espacios publicitarios");return a.json()}}),h=c.useMemo(()=>u?u.filter(i=>{var f,N,y;const s=l===""||((f=i.space_name)==null?void 0:f.toLowerCase().includes(l.toLowerCase()))||((N=i.description)==null?void 0:N.toLowerCase().includes(l.toLowerCase()))||((y=i.ad_title)==null?void 0:y.toLowerCase().includes(l.toLowerCase())),T=o==="all"||i.page_type===o,V=n==="all"||n==="active"&&i.space_active||n==="inactive"&&!i.space_active||n==="with_ad"&&i.ad_id||n==="without_ad"&&!i.ad_id;return s&&T&&V}).reduce((i,s)=>(i[s.page_type]||(i[s.page_type]=[]),i[s.page_type].push(s),i),{}):{},[u,l,o,n]),$=a=>({parks:"Parques","park-landing":"Landing Pages de Parques",activities:"Actividades","activity-detail":"Detalles de Actividades",instructors:"Instructores",concessions:"Concesiones","tree-species":"Especies Arbóreas",volunteers:"Voluntarios",home:"Página Principal"})[a]||a,p=a=>({header:"Cabecera",sidebar:"Barra lateral",footer:"Pie de página",content:"Contenido",profile:"Perfil",gallery:"Galería",hero:"Hero"})[a]||a,z=a=>({parks:"/parks","park-landing":"/parks",activities:"/activities","activity-detail":"/activities",instructors:"/instructors",concessions:"/concessions","tree-species":"/tree-species",volunteers:"/volunteers",home:"/"})[a]||"/";return q?e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Cargando espacios publicitarios..."})})}):e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Espacios Publicitarios"}),e.jsx("p",{className:"text-gray-600",children:"Gestión de espacios publicitarios organizados por páginas del sistema"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{href:"/admin/advertising/advertisements",children:e.jsxs(r,{variant:"outline",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Gestionar Anuncios"]})}),e.jsx(g,{href:"/admin/advertising/space-mappings",children:e.jsxs(r,{variant:"outline",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Ver Mapeos"]})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Buscar por nombre, descripción o anuncio...",value:l,onChange:a=>D(a.target.value),className:"pl-10"})]})}),e.jsxs(C,{value:o,onValueChange:I,children:[e.jsx(P,{className:"w-full md:w-48",children:e.jsx(k,{placeholder:"Filtrar por página"})}),e.jsxs(S,{children:[e.jsx(t,{value:"all",children:"Todas las páginas"}),e.jsx(t,{value:"parks",children:"Parques"}),e.jsx(t,{value:"park-landing",children:"Landing Pages"}),e.jsx(t,{value:"activities",children:"Actividades"}),e.jsx(t,{value:"instructors",children:"Instructores"}),e.jsx(t,{value:"concessions",children:"Concesiones"}),e.jsx(t,{value:"tree-species",children:"Especies Arbóreas"}),e.jsx(t,{value:"volunteers",children:"Voluntarios"}),e.jsx(t,{value:"home",children:"Página Principal"})]})]}),e.jsxs(C,{value:n,onValueChange:M,children:[e.jsx(P,{className:"w-full md:w-48",children:e.jsx(k,{placeholder:"Filtrar por estado"})}),e.jsxs(S,{children:[e.jsx(t,{value:"all",children:"Todos los estados"}),e.jsx(t,{value:"active",children:"Espacios activos"}),e.jsx(t,{value:"inactive",children:"Espacios inactivos"}),e.jsx(t,{value:"with_ad",children:"Con anuncio"}),e.jsx(t,{value:"without_ad",children:"Sin anuncio"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[Object.keys(h).length," páginas con espacios publicitarios"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:x==="grid"?"default":"outline",size:"sm",onClick:()=>j("grid"),children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(r,{variant:x==="list"?"default":"outline",size:"sm",onClick:()=>j("list"),children:e.jsx(J,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(h).map(([a,i])=>e.jsxs(U,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-600"}),$(a)]}),e.jsxs(W,{children:[i.length," espacios publicitarios configurados"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(g,{href:z(a),target:"_blank",children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Ver Página"]})})})]})}),e.jsx(ee,{children:x==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:s.space_active?"default":"secondary",children:p(s.position)}),e.jsx(d,{variant:s.placement_active?"default":"outline",children:s.placement_active?"Activo":"Inactivo"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",s.space_id]})]}),e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.space_name||`Espacio ${s.space_id}`}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:s.description}),s.ad_id?e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Anuncio Asignado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Título:"}),e.jsx("span",{className:"text-sm font-medium",children:s.ad_title})]}),s.image_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Imagen disponible"})]}),s.link_url&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Enlace configurado"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-3 w-3 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[new Date(s.start_date).toLocaleDateString()," - ",new Date(s.end_date).toLocaleDateString()]})]})]})]})}):e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Sin Anuncio Asignado"})]}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Este espacio está disponible para asignar anuncios"})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx(r,{variant:s.space_active?"outline":"default",size:"sm",onClick:()=>m.mutate({spaceId:s.space_id,isActive:s.space_active}),disabled:m.isPending,className:"flex items-center gap-2",children:s.space_active?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-3 w-3"}),"Desactivar"]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-3 w-3"}),"Activar"]})})})]},`${s.space_id}-${s.placement_id}`))}):e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.space_name||`Espacio ${s.space_id}`}),e.jsx("span",{className:"text-sm text-gray-600",children:p(s.position)})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.ad_id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:s.ad_title})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Sin anuncio asignado"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:s.space_active?"default":"secondary",children:p(s.position)}),e.jsx(d,{variant:s.placement_active?"default":"outline",children:s.placement_active?"Activo":"Inactivo"}),s.ad_id&&e.jsxs(d,{variant:"outline",children:[new Date(s.start_date).toLocaleDateString()," - ",new Date(s.end_date).toLocaleDateString()]}),e.jsx(r,{variant:s.space_active?"outline":"default",size:"sm",onClick:()=>m.mutate({spaceId:s.space_id,isActive:s.space_active}),disabled:m.isPending,className:"flex items-center gap-2",children:s.space_active?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-3 w-3"}),"Desactivar"]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-3 w-3"}),"Activar"]})})]})]},`${s.space_id}-${s.placement_id}`))})})]},a))}),Object.keys(h).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No se encontraron espacios publicitarios"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Ajusta los filtros o verifica que existan espacios configurados"})]})]})})};export{re as default};
