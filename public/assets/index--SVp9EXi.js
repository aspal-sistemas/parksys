import{a2 as h,R as M,j as e,aX as E,L as j,B as l,a5 as G,a6 as O,f as t,i as d,bp as P,bO as u,e as S,au as V,a4 as I,O as R,a7 as z,b1 as k,b2 as q,b3 as y,b4 as v,g as N,o,h as f,ab as b,w as B,x as J,y as F,z as U,I as H,J as $,b as Z,Z as X,bY as w,a3 as Y,U as A}from"./index-D5qLf1ib.js";import{C as K,G as Q}from"./gem-dXiyKzl3.js";const W=[{id:"super-admin",name:"Super Admin",level:10,description:"Acceso total al sistema",color:"bg-red-500",icon:K},{id:"director-general",name:"Director General",level:9,description:"Director general del sistema",color:"bg-purple-500",icon:Z},{id:"coordinador-parques",name:"Coord. Parques",level:8,description:"Coordinador de parques urbanos",color:"bg-green-500",icon:Q},{id:"coordinador-actividades",name:"Coord. Actividades",level:7,description:"Coordinador de actividades",color:"bg-blue-500",icon:X},{id:"admin-financiero",name:"Admin Financiero",level:6,description:"Administrador financiero",color:"bg-yellow-500",icon:w},{id:"operador-parque",name:"Operador",level:4,description:"Operador de parque",color:"bg-orange-500",icon:Y},{id:"consultor-auditor",name:"Consultor",level:1,description:"Consultor auditor externo",color:"bg-gray-500",icon:V}];function ae(){const[D,L]=h.useState(""),[m,T]=h.useState("grid"),[g,_]=h.useState(()=>{const s=localStorage.getItem("admin-roles-permission-matrix");return s?JSON.parse(s):{}});M.useEffect(()=>{const s=()=>{const i=localStorage.getItem("admin-roles-permission-matrix");i&&_(JSON.parse(i))};window.addEventListener("storage",s);const a=setInterval(()=>{const i=localStorage.getItem("admin-roles-permission-matrix");if(i){const r=JSON.parse(i);_(c=>JSON.stringify(c)!==JSON.stringify(r)?r:c)}},1e3);return()=>{window.removeEventListener("storage",s),clearInterval(a)}},[]);const n=[{id:"configuration",name:"Configuración",description:"Configuraciones generales del sistema",icon:e.jsx(P,{className:"w-6 h-6"}),color:"bg-purple-500",permissions:[{id:"view_notifications",name:"Ver Notificaciones",type:"read"},{id:"manage_notifications",name:"Gestionar Notificaciones",type:"write"},{id:"system_settings",name:"Configuraciones del Sistema",type:"admin"}]},{id:"management",name:"Gestión",description:"Dashboards y gestión operativa",icon:e.jsx(w,{className:"w-6 h-6"}),color:"bg-blue-500",permissions:[{id:"view_dashboards",name:"Ver Dashboards",type:"read"},{id:"manage_visitors",name:"Gestionar Visitantes",type:"write"},{id:"manage_parks",name:"Gestionar Parques",type:"write"},{id:"manage_trees",name:"Gestionar Arbolado",type:"write"},{id:"manage_activities",name:"Gestionar Actividades",type:"write"},{id:"manage_events",name:"Gestionar Eventos",type:"write"},{id:"manage_instructors",name:"Gestionar Instructores",type:"write"}]},{id:"operations",name:"Operaciones y Mantenimiento",description:"Activos, mantenimiento y voluntarios",icon:e.jsx(S,{className:"w-6 h-6"}),color:"bg-green-500",permissions:[{id:"view_assets",name:"Ver Activos",type:"read"},{id:"manage_assets",name:"Gestionar Activos",type:"write"},{id:"schedule_maintenance",name:"Programar Mantenimiento",type:"write"},{id:"manage_incidents",name:"Gestionar Incidencias",type:"write"},{id:"manage_volunteers",name:"Gestionar Voluntarios",type:"write"}]},{id:"finance",name:"Administración y Finanzas",description:"Gestión financiera y administrativa",icon:e.jsx(w,{className:"w-6 h-6"}),color:"bg-yellow-500",permissions:[{id:"view_finance_dashboard",name:"Ver Dashboard Financiero",type:"read"},{id:"manage_budgets",name:"Gestionar Presupuestos",type:"write"},{id:"view_reports",name:"Ver Reportes",type:"read"},{id:"manage_transactions",name:"Gestionar Transacciones",type:"admin"},{id:"manage_sponsors",name:"Gestionar Patrocinadores",type:"write"}]},{id:"marketing",name:"Marketing y Comunicaciones",description:"Comunicación y promoción",icon:e.jsx(A,{className:"w-6 h-6"}),color:"bg-orange-500",permissions:[{id:"manage_communications",name:"Gestionar Comunicaciones",type:"write"},{id:"manage_advertising",name:"Gestionar Publicidad",type:"write"},{id:"send_emails",name:"Enviar Emails",type:"write"},{id:"manage_campaigns",name:"Gestionar Campañas",type:"admin"}]},{id:"hr",name:"Recursos Humanos",description:"Gestión de personal",icon:e.jsx(A,{className:"w-6 h-6"}),color:"bg-teal-500",permissions:[{id:"view_employees",name:"Ver Empleados",type:"read"},{id:"manage_employees",name:"Gestionar Empleados",type:"write"},{id:"manage_payroll",name:"Gestionar Nómina",type:"admin"},{id:"manage_vacations",name:"Gestionar Vacaciones",type:"write"}]},{id:"security",name:"Seguridad",description:"Control de acceso y seguridad",icon:e.jsx(u,{className:"w-6 h-6"}),color:"bg-red-500",permissions:[{id:"view_users",name:"Ver Usuarios",type:"read"},{id:"manage_users",name:"Gestionar Usuarios",type:"admin"},{id:"manage_roles",name:"Gestionar Roles",type:"admin"},{id:"view_audit_logs",name:"Ver Logs de Auditoría",type:"read"},{id:"manage_permissions",name:"Gestionar Permisos",type:"admin"}]}],x=s=>{switch(s){case"read":return"bg-gray-100 text-gray-700";case"write":return"bg-blue-100 text-blue-700";case"admin":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},p=s=>{switch(s){case"read":return"Lectura";case"write":return"Escritura";case"admin":return"Admin";default:return"Desconocido"}};return e.jsx(E,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Permisos"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Administrar permisos por módulo y configurar matriz de roles"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{href:"/admin-roles/permissions/matrix",children:e.jsxs(l,{variant:"outline",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Matriz de Permisos"]})}),e.jsxs(l,{variant:"outline",onClick:()=>T(m==="grid"?"list":"grid"),children:[m==="grid"?e.jsx(O,{className:"w-4 h-4 mr-2"}):e.jsx(G,{className:"w-4 h-4 mr-2"}),m==="grid"?"Vista Lista":"Vista Grid"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(t,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Módulos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.length})]}),e.jsx(P,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(t,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Permisos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.reduce((s,a)=>s+a.permissions.length,0)})]}),e.jsx(u,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(t,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Permisos Admin"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.reduce((s,a)=>s+a.permissions.filter(i=>i.type==="admin").length,0)})]}),e.jsx(S,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(t,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Permisos Lectura"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.reduce((s,a)=>s+a.permissions.filter(i=>i.type==="read").length,0)})]}),e.jsx(V,{className:"h-8 w-8 text-gray-500"})]})})})]}),e.jsx(t,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(R,{placeholder:"Buscar módulos o permisos...",value:D,onChange:s=>L(s.target.value),className:"pl-10"})]}),e.jsxs(l,{variant:"outline",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Filtros"]})]})})}),e.jsxs(k,{defaultValue:"modules",className:"space-y-4",children:[e.jsxs(q,{children:[e.jsx(y,{value:"modules",children:"Por Módulos"}),e.jsx(y,{value:"permissions",children:"Por Permisos"}),e.jsx(y,{value:"roles",children:"Por Roles"})]}),e.jsx(v,{value:"modules",className:"space-y-4",children:e.jsx("div",{className:m==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:n.map(s=>e.jsxs(t,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(N,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.color} text-white`,children:s.icon}),e.jsxs(o,{variant:"secondary",children:[s.permissions.length," permisos"]})]}),e.jsx(f,{className:"text-lg",children:s.name}),e.jsx(b,{children:s.description})]}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-2",children:[s.permissions.slice(0,3).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:a.name}),e.jsx(o,{variant:"secondary",className:`text-xs ${x(a.type)}`,children:p(a.type)})]},a.id)),s.permissions.length>3&&e.jsx("div",{className:"text-center pt-2",children:e.jsxs(B,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(l,{variant:"ghost",size:"sm",children:["Ver todos (",s.permissions.length-3," más)"]})}),e.jsxs(F,{className:"max-w-2xl",children:[e.jsxs(U,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[s.icon,"Permisos de ",s.name]}),e.jsxs($,{children:["Lista completa de permisos disponibles para el módulo ",s.name]})]}),e.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:["read","write","admin"].map(a=>{const i=s.permissions.filter(r=>r.type===a);return i.length===0?null:e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(o,{className:x(a),children:p(a)}),"(",i.length," permisos)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:i.map(r=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["ID: ",r.id]})]},r.id))})]},a)})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(j,{href:"/admin-roles/permissions/matrix",children:e.jsx(l,{children:"Configurar en Matriz"})})})]})]})})]})})]},s.id))})}),e.jsx(v,{value:"permissions",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(N,{children:[e.jsx(f,{children:"Lista de Permisos"}),e.jsx(b,{children:"Todos los permisos disponibles organizados por tipo"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-6",children:["read","write","admin"].map(s=>e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(o,{className:x(s),children:p(s)}),"(",n.reduce((a,i)=>a+i.permissions.filter(r=>r.type===s).length,0)," permisos)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.flatMap(a=>a.permissions.filter(i=>i.type===s).map(i=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.name})]},i.id)))})]},s))})})]})}),e.jsx(v,{value:"roles",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(N,{children:[e.jsx(f,{children:"Permisos por Rol"}),e.jsx(b,{children:"Vista de permisos asignados a cada rol del sistema"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-6",children:W.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color} text-white`,children:e.jsx(s.icon,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Nivel ",s.level," • ",s.description]})]})]}),e.jsxs(o,{variant:"outline",children:[Object.values(g[s.id]||{}).filter(Boolean).length," permisos"]})]}),e.jsxs("div",{className:"space-y-3",children:[["read","write","admin"].map(a=>{const i=n.flatMap(r=>r.permissions.filter(c=>{var C;return c.type===a&&((C=g[s.id])==null?void 0:C[c.id])}));return i.length===0?null:e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(o,{className:x(a),children:p(a)}),"(",i.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:i.map(r=>e.jsx("div",{className:"text-xs bg-gray-50 px-2 py-1 rounded",children:r.name},r.id))})]},a)}),Object.values(g[s.id]||{}).filter(Boolean).length===0&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(u,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No hay permisos asignados"}),e.jsx(j,{href:"/admin-roles/permissions/matrix",children:e.jsx(l,{size:"sm",variant:"outline",className:"mt-2",children:"Configurar Permisos"})})]})]})]},s.id))})})]})})]})]})})}export{ae as default};
