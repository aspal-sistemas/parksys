import{az as P,u as D,j as e,aX as h,aw as F,ay as M,f as a,b0 as O,g as r,h as c,a$ as j,i as l,as as V,aZ as y,o as m,M as E}from"./index-D5qLf1ib.js";const v=o=>{if(o==null)return"N/A";const d=typeof o=="string"?parseFloat(o):o;return isNaN(d)?"N/A":new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)},S=()=>{const[o,d]=P(),{data:t,isLoading:b,isError:w}=D({queryKey:["/api/assets"]});if(b)return e.jsx(h,{children:e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-500 border-t-transparent"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando datos..."})]})})});if(w)return e.jsx(h,{children:e.jsx(F,{children:e.jsx(M,{children:"Error al cargar los datos de activos. Por favor, intenta de nuevo."})})});const u=(t==null?void 0:t.length)||0,C=(t==null?void 0:t.reduce((s,n)=>{const i=typeof n.acquisitionCost=="string"?parseFloat(n.acquisitionCost)||0:n.acquisitionCost||0;return s+i},0))||0,A=(t==null?void 0:t.filter(s=>s.status==="active").length)||0,N=(t==null?void 0:t.filter(s=>s.status==="maintenance").length)||0,f=(t==null?void 0:t.reduce((s,n)=>(s[n.condition]=(s[n.condition]||0)+1,s),{}))||{},p=(t==null?void 0:t.reduce((s,n)=>{const i=n.categoryName||"Sin categoría",q=typeof n.acquisitionCost=="string"?parseFloat(n.acquisitionCost)||0:n.acquisitionCost||0;return s[i]||(s[i]=0),s[i]+=q,s},{}))||{},g=(t==null?void 0:t.reduce((s,n)=>{const i=n.parkName||"Sin parque";return s[i]||(s[i]=0),s[i]+=1,s},{}))||{},x=Object.entries(g).sort(([,s],[,n])=>n-s)[0],k=Object.keys(g).length;return e.jsxs(h,{children:[e.jsx(a,{className:"p-4 bg-gray-50 mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Análisis y estadísticas de activos en parques"})]})})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total de Activos"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:u})})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Activos en Uso"}),e.jsx(j,{className:"h-4 w-4 text-green-600"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:A})})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Valor Total"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:v(C)})})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"En Mantenimiento"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-2xl font-bold",children:N})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mb-6",children:[e.jsxs(a,{children:[e.jsx(r,{children:e.jsx(c,{children:"Activos por Condición"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[Object.entries(f).map(([s,n])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:s}),e.jsx(m,{variant:"outline",children:n})]},s)),Object.keys(f).length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay datos disponibles"})]})})]}),e.jsxs(a,{children:[e.jsx(r,{children:e.jsx(c,{children:"Valor por Categoría"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[Object.entries(p).map(([s,n])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsx("span",{className:"font-medium",children:v(n)})]},s)),Object.keys(p).length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No hay datos disponibles"})]})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(a,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>d("/admin/assets/inventory"),children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(j,{className:"mr-2 h-5 w-5"}),"Inventario Completo"]})}),e.jsxs(l,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ver y gestionar el listado detallado de todos los activos"}),e.jsx("div",{className:"mt-2",children:e.jsxs(m,{variant:"outline",children:[u," activos"]})})]})]}),e.jsxs(a,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>d("/admin/assets/map"),children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(E,{className:"mr-2 h-5 w-5"}),"Activos por Parque"]})}),e.jsxs(l,{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distribución de activos en ",k," parques"]}),e.jsx("div",{className:"mt-2",children:e.jsx(m,{variant:"outline",children:x?`${x[0]}: ${x[1]} activos`:"Sin datos"})})]})]}),e.jsxs(a,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>d("/admin/assets/maintenance"),children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(y,{className:"mr-2 h-5 w-5"}),"Mantenimiento"]})}),e.jsxs(l,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Programar y gestionar el mantenimiento de activos"}),e.jsx("div",{className:"mt-2",children:e.jsxs(m,{variant:"outline",children:[N," en mantenimiento"]})})]})]})]})]})};export{S as default};
