import{Y as A,u as C,j as e,aI as d,x as P,B as o,cg as h,C as t,a as r,b as n,aj as k,c as l,M as R,aK as j,a9 as u,aS as q,a_ as B,a$ as D,b0 as T,aX as z,f as p}from"./index-Dzu3mJf5.js";function M(){const[f,N]=A.useState(0),{data:g,isLoading:v,error:y}=C({queryKey:["/api/amenities/dashboard",f]}),c=()=>{N(i=>i+1)};if(v)return e.jsx(d,{title:"Resumen Operativo de Amenidades",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando estadísticas..."})]})})});if(y)return e.jsx(d,{title:"Resumen Operativo de Amenidades",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:"Error al cargar los datos del resumen operativo"}),e.jsxs(o,{onClick:c,className:"mt-4",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Reintentar"]})]})})});const s=g,x=(()=>{if(!s)return[];const i=[];if(s.averageAmenitiesPerPark<2&&i.push("Los parques tienen pocas amenidades en promedio. Considere expandir la oferta."),s.mostPopularAmenities.length>0){const a=s.mostPopularAmenities[0];i.push(`"${a.name}" es la amenidad más popular con ${a.parksCount} parques.`)}return s.totalAmenities>s.totalParks*2&&i.push("Hay una buena variedad de amenidades disponibles en el sistema."),i})();return e.jsx(d,{title:"Resumen Operativo de Amenidades",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Resumen Operativo de Amenidades"}),e.jsx("p",{className:"text-gray-600",children:"Análisis y estadísticas de amenidades en parques"})]}),e.jsxs(o,{onClick:c,variant:"outline",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Actualizar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Total Amenidades"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalAmenities)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Amenidades registradas"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Total Parques"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalParks)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parques en el sistema"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Promedio por Parque"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.averageAmenitiesPerPark.toFixed(1))||"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Amenidades por parque"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Estado"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Activo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sistema operativo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Distribución de Amenidades"})}),e.jsx(l,{children:e.jsx(q,{width:"100%",height:250,children:e.jsxs(B,{children:[e.jsx(D,{data:(s==null?void 0:s.amenityDistribution)||[],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:((s==null?void 0:s.amenityDistribution)||[]).map((i,a)=>e.jsx(T,{fill:i.color},`cell-${a}`))}),e.jsx(z,{})]})})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Top 5 Amenidades Más Populares"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:((s==null?void 0:s.mostPopularAmenities)||[]).map((i,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(p,{variant:"secondary",children:a+1}),e.jsx("span",{className:"font-medium",children:i.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:i.parksCount}),e.jsxs("div",{className:"text-xs text-gray-500",children:[i.utilizationRate,"% uso"]})]})]},i.id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Amenidades por Parque"})}),e.jsx(l,{children:e.jsxs("div",{className:"h-80 overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:((s==null?void 0:s.utilizationByPark)||[]).map((i,a)=>{const m=Math.max(...((s==null?void 0:s.utilizationByPark)||[]).map(w=>w.amenitiesCount)),b=m>0?i.amenitiesCount/m*100:0;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 text-sm font-medium text-right text-gray-700 truncate",children:i.parkName}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"bg-blue-500 h-6 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${Math.max(b,5)}%`},children:e.jsx("span",{className:"text-white text-xs font-medium",children:i.amenitiesCount})})})})]},a)})}),((s==null?void 0:s.utilizationByPark)||[]).length===0&&e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No hay datos de parques disponibles"})]})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(n,{children:"Estado de Amenidades"})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:((s==null?void 0:s.statusDistribution)||[]).map(i=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"font-medium",children:i.status})]}),e.jsx(p,{variant:"outline",children:i.count})]},i.status))})})]})]}),x.length>0&&e.jsxs(t,{children:[e.jsx(r,{children:e.jsxs(n,{className:"flex items-center space-x-2",children:[e.jsx(j,{className:"h-5 w-5"}),e.jsx("span",{children:"Insights Automáticos"})]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:x.map((i,a)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(u,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsx("p",{className:"text-gray-700",children:i})]},a))})})]})]})})}export{M as default};
