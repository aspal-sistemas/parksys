import{a2 as C,u as P,j as e,aX as c,K as k,B as o,bQ as h,f as t,ar as j,g as r,h as l,i as n,M as q,aY as u,ah as p,b5 as R,bd as B,be as D,bf as T,ba as z,o as f}from"./index-D5qLf1ib.js";function M(){const[N,g]=C.useState(0),{data:v,isLoading:y,error:b}=P({queryKey:["/api/amenities/dashboard",N]}),d=()=>{g(a=>a+1)};if(y)return e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando estadísticas..."})]})})});if(b)return e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:"Error al cargar los datos del resumen operativo"}),e.jsxs(o,{onClick:d,className:"mt-4",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Reintentar"]})]})})});const s=v,x=(()=>{if(!s)return[];const a=[];if(s.averageAmenitiesPerPark<2&&a.push("Los parques tienen pocas amenidades en promedio. Considere expandir la oferta."),s.mostPopularAmenities.length>0){const i=s.mostPopularAmenities[0];a.push(`"${i.name}" es la amenidad más popular con ${i.parksCount} parques.`)}return s.totalAmenities>s.totalParks*2&&a.push("Hay una buena variedad de amenidades disponibles en el sistema."),a})();return e.jsx(c,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(t,{className:"p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard de Amenidades"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Análisis y estadísticas de amenidades en parques"})]}),e.jsxs(o,{onClick:d,variant:"outline",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Actualizar"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Amenidades"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalAmenities)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Amenidades registradas"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Parques"}),e.jsx(q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalParks)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Parques en el sistema"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Promedio por Parque"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.averageAmenitiesPerPark.toFixed(1))||"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Amenidades por parque"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Estado"}),e.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Activo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sistema operativo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{children:"Distribución de Amenidades"})}),e.jsx(n,{children:e.jsx(R,{width:"100%",height:250,children:e.jsxs(B,{children:[e.jsx(D,{data:(s==null?void 0:s.amenityDistribution)||[],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:((s==null?void 0:s.amenityDistribution)||[]).map((a,i)=>e.jsx(T,{fill:a.color},`cell-${i}`))}),e.jsx(z,{})]})})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{children:"Top 5 Amenidades Más Populares"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:((s==null?void 0:s.mostPopularAmenities)||[]).map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{variant:"secondary",children:i+1}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:a.parksCount}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a.utilizationRate,"% uso"]})]})]},a.id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{children:"Amenidades por Parque"})}),e.jsx(n,{children:e.jsxs("div",{className:"h-80 overflow-y-auto",children:[e.jsx("div",{className:"space-y-3",children:((s==null?void 0:s.utilizationByPark)||[]).map((a,i)=>{const m=Math.max(...((s==null?void 0:s.utilizationByPark)||[]).map(A=>A.amenitiesCount)),w=m>0?a.amenitiesCount/m*100:0;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 text-sm font-medium text-right text-gray-700 truncate",children:a.parkName}),e.jsx("div",{className:"flex-1 flex items-center space-x-2",children:e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:e.jsx("div",{className:"bg-blue-500 h-6 rounded-full flex items-center justify-end pr-2 transition-all duration-500",style:{width:`${Math.max(w,5)}%`},children:e.jsx("span",{className:"text-white text-xs font-medium",children:a.amenitiesCount})})})})]},i)})}),((s==null?void 0:s.utilizationByPark)||[]).length===0&&e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No hay datos de parques disponibles"})]})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{children:"Estado de Amenidades"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:((s==null?void 0:s.statusDistribution)||[]).map(a=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),e.jsx("span",{className:"font-medium",children:a.status})]}),e.jsx(f,{variant:"outline",children:a.count})]},a.status))})})]})]}),x.length>0&&e.jsxs(t,{children:[e.jsx(r,{children:e.jsxs(l,{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-5 w-5"}),e.jsx("span",{children:"Insights Automáticos"})]})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:x.map((a,i)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(p,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsx("p",{className:"text-gray-700",children:a})]},i))})})]})]})})}export{M as default};
