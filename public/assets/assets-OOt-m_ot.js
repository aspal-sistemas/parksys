import{a2 as j,u as v,j as e,aX as y,f as t,i as r,bZ as p,w as K,x as L,B as n,bh as f,y as G,z as H,I as Q,aR as X,F as m,d as w,au as b,D as S,Q as T,V as A,W as D,Y as C,_ as l,g as O,h as U,o as W,r as Y,X as Z,d8 as _,a1 as J,s as z}from"./index-D5qLf1ib.js";const ee=()=>{const[d,F]=j.useState("all"),[o,B]=j.useState("all"),[I,g]=j.useState(!1),{data:c}=v({queryKey:["/api/sponsors"],queryFn:()=>z("/api/sponsors",{})}),{data:h,isLoading:M}=v({queryKey:["/api/sponsor-assets"],queryFn:async()=>{try{return await z("/api/sponsor-assets",{})}catch(s){return console.error("Error cargando activos:",s),[]}},staleTime:5*60*1e3,gcTime:10*60*1e3}),P=s=>{switch(s){case"logo":return e.jsx(p,{className:"w-5 h-5"});case"banner":return e.jsx(p,{className:"w-5 h-5"});case"video":return e.jsx(_,{className:"w-5 h-5"});case"audio":return e.jsx(m,{className:"w-5 h-5"});case"brochure":return e.jsx(m,{className:"w-5 h-5"});default:return e.jsx(m,{className:"w-5 h-5"})}},V=s=>{switch(s){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},q=s=>{switch(s){case"approved":return"Aprobado";case"pending":return"Pendiente";case"rejected":return"Rechazado";default:return s}},i=(h==null?void 0:h.filter(s=>{const a=d==="all"||s.sponsorId===parseInt(d),x=o==="all"||s.assetType===o;return a&&x}))||[],R=i.filter(s=>s.approvalStatus==="approved").length,E=i.filter(s=>s.approvalStatus==="pending").length,k=i.reduce((s,a)=>s+(a.fileSize||0),0),u=s=>{if(s===0)return"0 Bytes";const a=1024,x=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,N)).toFixed(2))+" "+x[N]};return M?e.jsx(y,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},s))})]})}):e.jsx(y,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(t,{className:"bg-gray-50",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Activos Promocionales"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestiona todos los activos de marca de los patrocinadores"})]}),e.jsxs(K,{open:I,onOpenChange:g,children:[e.jsx(L,{asChild:!0,children:e.jsxs(n,{className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Subir Activo"]})}),e.jsxs(G,{className:"max-w-2xl",children:[e.jsx(H,{children:e.jsx(Q,{children:"Subir Nuevo Activo"})}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"w-16 h-16 mx-auto text-[#00a587] mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Funcionalidad de subida de activos en desarrollo"})]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(t,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Activos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),e.jsx(m,{className:"w-8 h-8 text-[#00a587]"})]})})}),e.jsx(t,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobados"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:R})]}),e.jsx(w,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(t,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:E})]}),e.jsx(b,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(t,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tamaño Total"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u(k)})]}),e.jsx(S,{className:"w-8 h-8 text-blue-500"})]})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(T,{value:d,onValueChange:F,children:[e.jsx(A,{className:"w-64",children:e.jsx(D,{placeholder:"Filtrar por patrocinador"})}),e.jsxs(C,{children:[e.jsx(l,{value:"all",children:"Todos los patrocinadores"}),c==null?void 0:c.map(s=>e.jsx(l,{value:s.id.toString(),children:s.name},s.id))]})]}),e.jsxs(T,{value:o,onValueChange:B,children:[e.jsx(A,{className:"w-48",children:e.jsx(D,{placeholder:"Tipo de activo"})}),e.jsxs(C,{children:[e.jsx(l,{value:"all",children:"Todos los tipos"}),e.jsx(l,{value:"logo",children:"Logo"}),e.jsx(l,{value:"banner",children:"Banner"}),e.jsx(l,{value:"video",children:"Video"}),e.jsx(l,{value:"audio",children:"Audio"}),e.jsx(l,{value:"brochure",children:"Brochure"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>{const a=c==null?void 0:c.find(x=>x.id===s.sponsorId);return e.jsxs(t,{className:"hover:shadow-md transition-shadow",children:[e.jsx(O,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[P(s.assetType),e.jsx(U,{className:"text-lg",children:s.assetName})]}),e.jsx(W,{className:V(s.approvalStatus),children:q(s.approvalStatus)})]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Patrocinador"}),e.jsx("p",{className:"font-medium",children:(a==null?void 0:a.name)||"Desconocido"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tipo"}),e.jsx("p",{className:"font-medium capitalize",children:s.assetType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tamaño"}),e.jsx("p",{className:"font-medium",children:u(s.fileSize||0)})]})]}),s.specifications&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Especificaciones"}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:s.specifications})]}),s.usageRights&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Derechos de uso"}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:s.usageRights})]}),s.expirationDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fecha de expiración"}),e.jsx("p",{className:"text-sm text-gray-700",children:Y(new Date(s.expirationDate),"dd/MM/yyyy",{locale:J})})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(b,{className:"w-4 h-4 mr-1"}),"Ver"]}),e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Descargar"]}),s.approvalStatus==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx(n,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(Z,{className:"w-4 h-4"})})]})]})]})})]},s.id)})}),i.length===0&&e.jsx(t,{children:e.jsxs(r,{className:"text-center py-12",children:[e.jsx(m,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No se encontraron activos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d!=="all"||o!=="all"?"Intenta ajustar los filtros de búsqueda":"Sube los primeros activos promocionales"}),d==="all"&&o==="all"&&e.jsxs(n,{onClick:()=>g(!0),className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Subir Primer Activo"]})]})})]})})};export{ee as default};
