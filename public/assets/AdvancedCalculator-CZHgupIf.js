import{a2 as j,j as e,aX as me,f as x,i as m,c$ as he,Q as V,V as Y,W as X,Y as q,_ as b,w as je,x as pe,B as A,bG as ue,y as ve,z as ge,I as Ce,J as fe,N as n,O as c,b1 as be,b2 as ye,b3 as N,b4 as P,g as p,h as u,ab as v,aY as Ne,as as Pe,d7 as Fe,o as D,b5 as H,bk as Te,b7 as J,b8 as U,b9 as Q,ba as W,bj as Z,bl as _,bc as I}from"./index-D5qLf1ib.js";import{P as Me}from"./progress-CD1SWYCP.js";import{T as Ae}from"./trending-down-Bn0HnEog.js";import{B as we}from"./BarChart-BX_xVycl.js";import{C as Se}from"./copy-Cc-ym0rW.js";const Ee=()=>{const[ee,se]=j.useState("calculator"),[w,k]=j.useState(""),[ae,S]=j.useState(!1),[ie,re]=j.useState(""),[g,te]=j.useState([{id:1,name:"Clase de Yoga Matutina",category:"Deportivo",data:{title:"Yoga Matutino",audience:"Adultos",location:"Área verde",duration:"60",minCapacity:"8",maxCapacity:"20",feePerPerson:"150",tutorCost:"800",materialsCost:"200",variableCosts:"50",indirectCosts:"300"}},{id:2,name:"Taller de Arte Infantil",category:"Cultural",data:{title:"Taller de Pintura",audience:"Niños",location:"Salón multiusos",duration:"90",minCapacity:"6",maxCapacity:"15",feePerPerson:"200",tutorCost:"1000",materialsCost:"400",variableCosts:"75",indirectCosts:"250"}},{id:3,name:"Clase de Aqua Aeróbicos",category:"Deportivo",data:{title:"Aqua Aeróbicos",audience:"Adultos mayores",location:"Alberca",duration:"45",minCapacity:"10",maxCapacity:"25",feePerPerson:"180",tutorCost:"900",materialsCost:"150",variableCosts:"40",indirectCosts:"400"}}]),[i,d]=j.useState({title:"",audience:"",location:"",duration:"",minCapacity:"",maxCapacity:"",feePerPerson:"",tutorCost:"",materialsCost:"",variableCosts:"",indirectCosts:""}),[h,G]=j.useState({currentPrice:150,minPrice:100,maxPrice:300,priceStep:25}),r=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s),R=s=>{const a=parseInt(s.minCapacity)||0,l=parseInt(s.maxCapacity)||0,o=parseFloat(s.feePerPerson)||0,C=parseFloat(s.tutorCost)||0,f=parseFloat(s.materialsCost)||0,y=parseFloat(s.variableCosts)||0,ce=parseFloat(s.indirectCosts)||0,F=a*o,T=l*o,M=C+f+ce,K=M+a*y,$=M+l*y,B=F-K,L=T-$,de=Math.ceil(M/(o-y)),oe=F>0?B/F*100:0,xe=T>0?L/T*100:0;return{minRevenue:F,maxRevenue:T,minTotalCosts:K,maxTotalCosts:$,minProfit:B,maxProfit:L,breakeven:de,minMargin:oe,maxMargin:xe,fixedCosts:M}},t=R(i),z=(()=>{const s=[];for(let a=h.minPrice;a<=h.maxPrice;a+=h.priceStep){const l=parseInt(i.maxCapacity)||20,o=l*a,C=t.fixedCosts+l*(parseFloat(i.variableCosts)||0),f=o-C,y=o>0?f/o*100:0;s.push({price:a,revenue:o,profit:f,margin:Math.round(y*100)/100,participants:l})}return s})(),E=g.map(s=>{const a=R(s.data);return{activity:s.name,revenue:a.maxRevenue,costs:a.maxTotalCosts,profit:a.maxProfit,margin:a.maxMargin,breakeven:a.breakeven}}),ne=[{scenario:"Pesimista",occupancy:60,price:parseFloat(i.feePerPerson)*.9,costs:t.fixedCosts*1.1,color:"#ef4444"},{scenario:"Realista",occupancy:80,price:parseFloat(i.feePerPerson),costs:t.fixedCosts,color:"#f59e0b"},{scenario:"Optimista",occupancy:95,price:parseFloat(i.feePerPerson)*1.1,costs:t.fixedCosts*.95,color:"#22c55e"}].map(s=>{const a=Math.round((parseInt(i.maxCapacity)||20)*(s.occupancy/100)),l=a*s.price,o=s.costs+a*(parseFloat(i.variableCosts)||0),C=l-o,f=l>0?C/l*100:0;return{...s,capacity:a,revenue:l,totalCosts:o,profit:C,margin:f}}),O=s=>{const a=g.find(l=>l.id===parseInt(s));a&&(d(a.data),re(""))},le=()=>{if(w.trim()){const s={id:g.length+1,name:w,category:"Personalizado",data:{...i}};te([...g,s]),k(""),S(!1)}};return e.jsx(me,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{className:"bg-gray-50",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-8 h-8 text-black"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calculadora Avanzada"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Herramienta para calcular rentabilidad y costos de actividades"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(V,{value:ie,onValueChange:O,children:[e.jsx(Y,{className:"w-48",children:e.jsx(X,{placeholder:"Cargar plantilla"})}),e.jsx(q,{children:g.map(s=>e.jsx(b,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsxs(je,{open:ae,onOpenChange:S,children:[e.jsx(pe,{asChild:!0,children:e.jsxs(A,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"Guardar como Plantilla"]})}),e.jsxs(ve,{children:[e.jsxs(ge,{children:[e.jsx(Ce,{children:"Guardar Plantilla"}),e.jsx(fe,{children:"Guarda la configuración actual como plantilla reutilizable"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateName",children:"Nombre de la plantilla"}),e.jsx(c,{id:"templateName",value:w,onChange:s=>k(s.target.value),placeholder:"Ej: Clase de Zumba Nocturna"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(A,{variant:"outline",onClick:()=>S(!1),children:"Cancelar"}),e.jsx(A,{onClick:le,children:"Guardar Plantilla"})]})]})]})]})]})]})})}),e.jsxs(be,{value:ee,onValueChange:se,className:"space-y-6",children:[e.jsxs(ye,{className:"grid w-full grid-cols-5",children:[e.jsx(N,{value:"calculator",children:"Calculadora"}),e.jsx(N,{value:"optimizer",children:"Optimizador"}),e.jsx(N,{value:"comparison",children:"Comparador"}),e.jsx(N,{value:"scenarios",children:"Escenarios"}),e.jsx(N,{value:"templates",children:"Plantillas"})]}),e.jsx(P,{value:"calculator",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Configuración de la Actividad"}),e.jsx(v,{children:"Ingresa los detalles básicos y costos"})]}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",children:"Título de la Actividad"}),e.jsx(c,{id:"title",value:i.title,onChange:s=>d({...i,title:s.target.value}),placeholder:"Ej: Clase de Yoga"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"audience",children:"Audiencia"}),e.jsxs(V,{value:i.audience,onValueChange:s=>d({...i,audience:s}),children:[e.jsx(Y,{children:e.jsx(X,{placeholder:"Seleccionar"})}),e.jsxs(q,{children:[e.jsx(b,{value:"Niños",children:"Niños"}),e.jsx(b,{value:"Jóvenes",children:"Jóvenes"}),e.jsx(b,{value:"Adultos",children:"Adultos"}),e.jsx(b,{value:"Adultos mayores",children:"Adultos mayores"}),e.jsx(b,{value:"Familias",children:"Familias"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"location",children:"Ubicación"}),e.jsx(c,{id:"location",value:i.location,onChange:s=>d({...i,location:s.target.value}),placeholder:"Ej: Área verde"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"duration",children:"Duración (min)"}),e.jsx(c,{id:"duration",type:"number",value:i.duration,onChange:s=>d({...i,duration:s.target.value}),placeholder:"60"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"minCapacity",children:"Capacidad Mínima"}),e.jsx(c,{id:"minCapacity",type:"number",value:i.minCapacity,onChange:s=>d({...i,minCapacity:s.target.value}),placeholder:"8"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"maxCapacity",children:"Capacidad Máxima"}),e.jsx(c,{id:"maxCapacity",type:"number",value:i.maxCapacity,onChange:s=>d({...i,maxCapacity:s.target.value}),placeholder:"20"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"feePerPerson",children:"Tarifa por Persona"}),e.jsx(c,{id:"feePerPerson",type:"number",value:i.feePerPerson,onChange:s=>d({...i,feePerPerson:s.target.value}),placeholder:"150"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"tutorCost",children:"Costo del Instructor"}),e.jsx(c,{id:"tutorCost",type:"number",value:i.tutorCost,onChange:s=>d({...i,tutorCost:s.target.value}),placeholder:"800"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"materialsCost",children:"Materiales"}),e.jsx(c,{id:"materialsCost",type:"number",value:i.materialsCost,onChange:s=>d({...i,materialsCost:s.target.value}),placeholder:"200"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"variableCosts",children:"Costos Variables (por persona)"}),e.jsx(c,{id:"variableCosts",type:"number",value:i.variableCosts,onChange:s=>d({...i,variableCosts:s.target.value}),placeholder:"50"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"indirectCosts",children:"Costos Indirectos"}),e.jsx(c,{id:"indirectCosts",type:"number",value:i.indirectCosts,onChange:s=>d({...i,indirectCosts:s.target.value}),placeholder:"300"})]})]})})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Análisis de Resultados"}),e.jsx(v,{children:"Métricas clave de rentabilidad"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-medium mb-1",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Ingresos Máximos"]}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:r(t.maxRevenue)})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800 font-medium mb-1",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Costos Máximos"]}),e.jsx("div",{className:"text-2xl font-bold text-red-900",children:r(t.maxTotalCosts)})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-800 font-medium mb-1",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Ganancia Máxima"]}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r(t.maxProfit)})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-800 font-medium mb-1",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Punto de Equilibrio"]}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[t.breakeven," personas"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Margen de Ganancia"}),e.jsxs("span",{children:[t.maxMargin.toFixed(1),"%"]})]}),e.jsx(Me,{value:Math.max(0,Math.min(100,t.maxMargin)),className:"h-3"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.maxMargin>=30?"Excelente rentabilidad":t.maxMargin>=15?"Rentabilidad moderada":"Rentabilidad baja"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Rango de Ganancia:"}),e.jsxs("span",{children:[r(t.minProfit)," - ",r(t.maxProfit)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Margen Mínimo:"}),e.jsxs("span",{children:[t.minMargin.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Costos Fijos:"}),e.jsx("span",{children:r(t.fixedCosts)})]})]})]})]})]})}),e.jsx(P,{value:"optimizer",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Optimizador de Precios"}),e.jsx(v,{children:"Encuentra el precio óptimo para maximizar ganancias"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"minPrice",children:"Precio Mínimo"}),e.jsx(c,{id:"minPrice",type:"number",value:h.minPrice,onChange:s=>G({...h,minPrice:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"maxPrice",children:"Precio Máximo"}),e.jsx(c,{id:"maxPrice",type:"number",value:h.maxPrice,onChange:s=>G({...h,maxPrice:Number(s.target.value)})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Recomendaciones de Precio"}),z.sort((s,a)=>a.profit-s.profit).slice(0,3).map((s,a)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:r(s.price)}),e.jsx(D,{variant:a===0?"default":"secondary",children:a===0?"Óptimo":`Top ${a+1}`})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Ganancia: ",r(s.profit)," | Margen: ",s.margin,"%"]})]},s.price))]})]})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Análisis de Sensibilidad"}),e.jsx(v,{children:"Impacto del precio en la rentabilidad"})]}),e.jsx(m,{children:e.jsx(H,{width:"100%",height:300,children:e.jsxs(Te,{data:z,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(U,{dataKey:"price",tickFormatter:s=>`$${s}`}),e.jsx(Q,{tickFormatter:s=>`$${(s/1e3).toFixed(0)}K`}),e.jsx(W,{formatter:(s,a)=>[r(Number(s)),a]}),e.jsx(Z,{}),e.jsx(_,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",name:"Ingresos"}),e.jsx(_,{type:"monotone",dataKey:"profit",stroke:"#82ca9d",name:"Ganancia"})]})})})]})]})}),e.jsx(P,{value:"comparison",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Comparador de Actividades"}),e.jsx(v,{children:"Compara la rentabilidad entre diferentes actividades"})]}),e.jsxs(m,{children:[e.jsx(H,{width:"100%",height:400,children:e.jsxs(we,{data:E,children:[e.jsx(J,{strokeDasharray:"3 3"}),e.jsx(U,{dataKey:"activity"}),e.jsx(Q,{tickFormatter:s=>`$${(s/1e3).toFixed(0)}K`}),e.jsx(W,{formatter:s=>r(Number(s))}),e.jsx(Z,{}),e.jsx(I,{dataKey:"revenue",fill:"#8884d8",name:"Ingresos"}),e.jsx(I,{dataKey:"costs",fill:"#ff7c7c",name:"Costos"}),e.jsx(I,{dataKey:"profit",fill:"#82ca9d",name:"Ganancia"})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Ranking de Rentabilidad"}),E.sort((s,a)=>a.margin-s.margin).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(D,{variant:"outline",children:["#",a+1]}),e.jsx("span",{className:"font-medium",children:s.activity})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.margin.toFixed(1),"% margen"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[r(s.profit)," ganancia"]})]})]},s.activity))]})]})]})}),e.jsx(P,{value:"scenarios",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Simulador de Escenarios"}),e.jsx(v,{children:"Analiza diferentes escenarios de ocupación y precios"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:ne.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-medium",children:s.scenario})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ocupación:"}),e.jsxs("span",{children:[s.occupancy,"% (",s.capacity," personas)"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Precio:"}),e.jsx("span",{children:r(s.price)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Ingresos:"}),e.jsx("span",{children:r(s.revenue)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Costos:"}),e.jsx("span",{children:r(s.totalCosts)})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Ganancia:"}),e.jsx("span",{className:s.profit>0?"text-green-600":"text-red-600",children:r(s.profit)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Margen:"}),e.jsxs("span",{children:[s.margin.toFixed(1),"%"]})]})]})]},s.scenario))})})]})}),e.jsx(P,{value:"templates",children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Gestión de Plantillas"}),e.jsx(v,{children:"Administra tus plantillas guardadas de actividades"})]}),e.jsx(m,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx(D,{variant:"outline",children:s.category})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{children:["Audiencia: ",s.data.audience]}),e.jsxs("div",{children:["Capacidad: ",s.data.minCapacity,"-",s.data.maxCapacity]}),e.jsxs("div",{children:["Precio: ",r(parseFloat(s.data.feePerPerson))]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(A,{size:"sm",variant:"outline",onClick:()=>O(s.id.toString()),className:"flex-1",children:[e.jsx(Se,{className:"h-3 w-3 mr-1"}),"Usar"]})})]},s.id))})})]})})]})]})})};export{Ee as default};
