import{d as w,u as D,j as e,aB as h,L as j,B as m,A as _,f as p,b3 as S,W as v,aH as T,aI as F,aJ as o,aK as d,C as l,a as r,b as c,h as E,c as n,U as A,ak as N,F as u,i as I,aC as R,a9 as L}from"./index-BBGHPKhn.js";const $={borrador:"bg-gray-100 text-gray-800",solicitado:"bg-blue-100 text-blue-800",en_revision:"bg-yellow-100 text-yellow-800",aprobado:"bg-green-100 text-green-800",rechazado:"bg-red-100 text-red-800",cancelado:"bg-gray-100 text-gray-800",realizado:"bg-purple-100 text-purple-800"},z={bajo_impacto:"bg-emerald-100 text-emerald-800",alto_impacto:"bg-orange-100 text-orange-800"};function B(){const x=w().id,{data:s,isLoading:b,error:f}=D({queryKey:[`/api/eventos-ambu/${x}`],queryFn:async()=>{const a=await fetch(`/api/eventos-ambu/${x}`);if(!a.ok)throw new Error("Error al cargar evento");return a.json()}}),y=a=>({evento_familiar:"Evento Familiar",sesion_fotografia:"Sesión Fotográfica",convivencia_escolar:"Convivencia Escolar",sendero_interpretativo:"Sendero Interpretativo",recorrido_educativo:"Recorrido Educativo",evento_masivo:"Evento Masivo",evento_comercial:"Evento Comercial",evento_cooperativo:"Evento Cooperativo",carrera_deportiva:"Carrera Deportiva",actividad_fisica_grupal:"Actividad Física Grupal",evento_corporativo:"Evento Corporativo"})[a]||a,C=a=>{switch(a){case"aprobado":return e.jsx(L,{className:"h-4 w-4"});case"rechazado":return e.jsx(R,{className:"h-4 w-4"});case"en_revision":return e.jsx(I,{className:"h-4 w-4"});default:return e.jsx(u,{className:"h-4 w-4"})}};return b?e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando detalles del evento..."})]})})}):f||!s?e.jsx(h,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600",children:"Error al cargar el evento"}),e.jsx(j,{href:"/admin/eventos-ambu",children:e.jsx(m,{className:"mt-4",children:"Volver al listado"})})]})}):e.jsx(h,{children:e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{href:"/admin/eventos-ambu",children:e.jsxs(m,{variant:"outline",size:"sm",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Volver"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.evento.titulo}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx(p,{className:z[s.evento.impactoTipo],children:s.evento.impactoTipo==="bajo_impacto"?"Bajo Impacto":"Alto Impacto"}),e.jsx(p,{className:$[s.evento.status],children:e.jsxs("div",{className:"flex items-center gap-1",children:[C(s.evento.status),s.evento.status.replace("_"," ").toUpperCase()]})}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",s.evento.id]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{href:`/admin/eventos-ambu/${x}/edit`,children:e.jsxs(m,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Editar"]})}),e.jsxs(m,{variant:"outline",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Exportar"]})]})]}),e.jsxs(T,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(o,{value:"general",children:"Información General"}),e.jsx(o,{value:"solicitante",children:"Solicitante"}),e.jsx(o,{value:"costos",children:"Costos"}),e.jsx(o,{value:"documentos",children:"Documentos"}),e.jsx(o,{value:"seguimiento",children:"Seguimiento"}),s.evento.impactoTipo==="alto_impacto"&&e.jsx(o,{value:"reuniones",children:"Reuniones"})]}),e.jsx(d,{value:"general",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Detalles del Evento"]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Categoría"}),e.jsx("p",{className:"text-sm",children:y(s.evento.categoria)})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-sm",children:s.evento.descripcion})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Fecha"}),e.jsx("p",{className:"text-sm",children:new Date(s.evento.fechaEvento).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Horario"}),e.jsxs("p",{className:"text-sm",children:[s.evento.horaInicio," - ",s.evento.horaFin]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Número de Asistentes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm",children:[s.evento.numeroAsistentes," personas"]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Fecha de Solicitud"}),e.jsx("p",{className:"text-sm",children:new Date(s.evento.createdAt).toLocaleDateString()})]})]})]}),s.evento.costoTotal>0&&e.jsxs(l,{children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Información Financiera"]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Costo Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",s.evento.costoTotal.toFixed(2)," MXN"]})]}),s.evento.impactoTipo==="alto_impacto"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Anticipo (50%)"}),e.jsxs("p",{className:"text-lg font-semibold text-orange-600",children:["$",(s.evento.costoTotal*.5).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Depósito (10%)"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["$",(s.evento.costoTotal*.1).toFixed(2)]})]})]}),e.jsx("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Nota:"})," Para eventos de alto impacto se requiere el pago del 50% de anticipo y 10% de depósito en garantía antes de la aprobación final."]})})]})]})]})]})}),e.jsx(d,{value:"solicitante",children:e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(c,{children:"Información del Solicitante"})}),e.jsx(n,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Datos Personales"}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Nombre Completo"}),e.jsx("p",{className:"text-sm",children:s.solicitud.nombreSolicitante})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),e.jsx("p",{className:"text-sm",children:s.solicitud.telefonoSolicitante})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm",children:s.solicitud.emailSolicitante})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Datos Institucionales"}),s.solicitud.nombreInstitucion&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Institución"}),e.jsx("p",{className:"text-sm",children:s.solicitud.nombreInstitucion})]}),s.solicitud.domicilioCalle&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Dirección"}),e.jsxs("p",{className:"text-sm",children:[s.solicitud.domicilioCalle," ",s.solicitud.domicilioNumero,e.jsx("br",{}),s.solicitud.domicilioColonia,", ",s.solicitud.municipio,e.jsx("br",{}),"CP: ",s.solicitud.domicilioCP]})]}),s.solicitud.rfc&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Datos Fiscales"}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"RFC:"})," ",s.solicitud.rfc,e.jsx("br",{}),e.jsx("strong",{children:"Razón Social:"})," ",s.solicitud.razonSocial]})]})]})]})})]})}),e.jsx(d,{value:"costos",children:e.jsxs(l,{children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Desglose de Costos"]})}),e.jsx(n,{children:s.costos&&s.costos.length>0?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Concepto"}),e.jsx("th",{className:"text-center py-2",children:"Cantidad"}),e.jsx("th",{className:"text-right py-2",children:"Precio Unitario"}),e.jsx("th",{className:"text-right py-2",children:"Subtotal"})]})}),e.jsx("tbody",{children:s.costos.map((a,i)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.concepto}),a.descripcion&&e.jsx("p",{className:"text-sm text-gray-600",children:a.descripcion})]})}),e.jsx("td",{className:"text-center py-2",children:a.cantidad}),e.jsxs("td",{className:"text-right py-2",children:["$",a.precioUnitario.toFixed(2)]}),e.jsxs("td",{className:"text-right py-2 font-semibold",children:["$",a.subtotal.toFixed(2)]})]},i))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t-2 font-bold",children:[e.jsx("td",{colSpan:3,className:"text-right py-2",children:"Total:"}),e.jsxs("td",{className:"text-right py-2 text-lg",children:["$",s.evento.costoTotal.toFixed(2)," MXN"]})]})})]})})}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay información de costos disponible"})})]})}),e.jsx(d,{value:"documentos",children:e.jsxs(l,{children:[e.jsx(r,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Documentos"]})}),e.jsx(n,{children:s.documentos&&s.documentos.length>0?e.jsx("div",{className:"space-y-3",children:s.documentos.map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.tipoDocumento}),e.jsx("p",{className:"text-sm text-gray-600",children:a.nombreArchivo})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:"outline",className:a.status==="validado"?"bg-green-50 text-green-700":a.status==="rechazado"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700",children:a.status}),e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(v,{className:"h-4 w-4"})})]})]},i))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No se han subido documentos"})})]})}),e.jsx(d,{value:"seguimiento",children:e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(c,{children:"Historial de Seguimiento"})}),e.jsx(n,{children:s.seguimiento&&s.seguimiento.length>0?e.jsx("div",{className:"space-y-4",children:s.seguimiento.map((a,i)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h4",{className:"font-medium",children:a.accion.replace("_"," ").toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(a.fechaAccion).toLocaleString()})]}),a.observaciones&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:a.observaciones}),a.responsable&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Responsable: ",a.responsable]})]},i))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay historial de seguimiento"})})]})}),s.evento.impactoTipo==="alto_impacto"&&e.jsx(d,{value:"reuniones",children:e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(c,{children:"Reuniones de Logística"})}),e.jsx(n,{children:s.reuniones&&s.reuniones.length>0?e.jsx("div",{className:"space-y-4",children:s.reuniones.map((a,i)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"font-medium",children:["Reunión ",new Date(a.fechaReunion).toLocaleDateString()]}),e.jsx("span",{className:"text-sm text-gray-500",children:a.horaReunion})]}),a.agenda&&e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Agenda"}),e.jsx("p",{className:"text-sm",children:a.agenda})]}),a.acuerdos&&e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{className:"text-sm font-medium text-gray-500",children:"Acuerdos"}),e.jsx("p",{className:"text-sm",children:a.acuerdos})]}),a.responsableReunion&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Responsable: ",a.responsableReunion]})]},i))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No se han programado reuniones de logística"})})]})})]})]})})}function t({children:g,className:x}){return e.jsx("label",{className:x,children:g})}export{B as default};
