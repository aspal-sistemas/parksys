import{Y as z,e as ue,a6 as pe,u as M,a8 as Z,a7 as W,j as e,aI as we,aO as Se,aP as Te,aQ as X,ax as De,bS as V,b_ as ee,aR as Y,Z as Ee,I as m,B as x,b2 as H,C as N,a as b,b as y,a3 as Pe,c as v,cA as L,bh as oe,bi as de,bj as S,bk as d,bl as xe,bm as r,ba as je,F as me,D as se,r as ae,t as ne,v as re,w as le,aa as ie,ab as l,ac as i,ad as c,ae as t,af as o,z as k,H as B,J as K,K as G,N as E,O as I,be as ce,bT as ge,bU as p,bV as fe,cX as Fe,p as Ae,aA as _e,aJ as Ne,S as ze,a9 as Le,f as g,ah as te}from"./index-VG22aPDC.js";import{H as Re}from"./Helmet-CoO02W0T.js";import{U as Oe}from"./user-round-MVuQ2f8O.js";import{H as Ie}from"./history-bKEChJ9K.js";import{C as qe}from"./circle-x-DVpQ1AkT.js";const he=ge({name:p().min(3,{message:"El nombre debe tener al menos 3 caracteres"}),type:fe(["persona_fisica","persona_moral"],{required_error:"Debes seleccionar un tipo de concesionario"}),rfc:p().min(10,{message:"El RFC debe tener al menos 10 caracteres"}).max(13,{message:"El RFC no debe exceder 13 caracteres"}),tax_address:p().min(5,{message:"La dirección fiscal es obligatoria"}),legal_representative:p().optional(),phone:p().optional(),email:p().email({message:"Debe ser un correo electrónico válido"}).optional(),notes:p().optional()}),Ve=ge({contractId:p().min(1,{message:"Debes seleccionar un contrato"}),concept:p().min(3,{message:"El concepto debe tener al menos 3 caracteres"}),amount:Fe().min(1,{message:"El monto debe ser mayor a 0"}),dueDate:p().min(1,{message:"La fecha de vencimiento es obligatoria"}),paymentDate:p().optional(),status:fe(["pending","paid","late"],{required_error:"Debes seleccionar un estado"}),notes:p().optional()}),Me=()=>{const[P,C]=z.useState(!1),{toast:w}=ue(),T=pe(),{data:n=[],isLoading:R}=M({queryKey:["/api/concession-payments"],enabled:!0}),{data:D=[]}=M({queryKey:["/api/concession-contracts"],enabled:!0}),h=W({resolver:te(Ve),defaultValues:{contractId:"",concept:"",amount:0,dueDate:"",paymentDate:"",status:"pending",notes:""}}),A=Z({mutationFn:async a=>{const j=await fetch("/api/concession-payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!j.ok)throw new Error("Error al crear el pago");return j.json()},onSuccess:()=>{w({title:"Pago creado",description:"El pago se ha registrado correctamente."}),C(!1),h.reset(),T.invalidateQueries({queryKey:["/api/concession-payments"]})},onError:a=>{w({title:"Error",description:a.message||"Error al crear el pago",variant:"destructive"})}}),Q=a=>{A.mutate({...a,amount:Number(a.amount)})};if(R)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(L,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Cargando información financiera..."})]});const _=a=>{switch(a){case"paid":return e.jsx(g,{className:"bg-green-100 text-green-800",children:"Pagado"});case"pending":return e.jsx(g,{className:"bg-yellow-100 text-yellow-800",children:"Pendiente"});case"late":return e.jsx(g,{className:"bg-red-100 text-red-800",children:"Atrasado"});default:return e.jsx(g,{children:a})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Gestión Financiera"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Administra los pagos y facturación de las concesiones"})]}),e.jsxs(se,{open:P,onOpenChange:C,children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(x,{className:"gap-2",children:[e.jsx(H,{size:16}),"Nuevo Pago"]})}),e.jsxs(ae,{className:"max-w-2xl",children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Nuevo Pago de Concesión"}),e.jsx(le,{children:"Registra un nuevo pago para una concesión existente"})]}),e.jsx(ie,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(Q),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{control:h.control,name:"contractId",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Contrato de Concesión"}),e.jsxs(k,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(t,{children:e.jsx(B,{children:e.jsx(K,{placeholder:"Selecciona un contrato"})})}),e.jsx(G,{children:Array.isArray(D)&&D.map(j=>{var q;return e.jsxs(E,{value:j.id.toString(),children:["Contrato #",j.id," - ",((q=j.concessionaire)==null?void 0:q.name)||"Sin concesionario"]},j.id)})})]}),e.jsx(o,{})]})}),e.jsx(l,{control:h.control,name:"status",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Estado"}),e.jsxs(k,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(t,{children:e.jsx(B,{children:e.jsx(K,{placeholder:"Selecciona el estado"})})}),e.jsxs(G,{children:[e.jsx(E,{value:"pending",children:"Pendiente"}),e.jsx(E,{value:"paid",children:"Pagado"}),e.jsx(E,{value:"late",children:"Atrasado"})]})]}),e.jsx(o,{})]})})]}),e.jsx(l,{control:h.control,name:"concept",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Concepto del Pago"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Ej: Renta mensual de enero 2025",...a})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(l,{control:h.control,name:"amount",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Monto ($)"}),e.jsx(t,{children:e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",...a,onChange:j=>a.onChange(parseFloat(j.target.value)||0)})}),e.jsx(o,{})]})}),e.jsx(l,{control:h.control,name:"dueDate",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Fecha de Vencimiento"}),e.jsx(t,{children:e.jsx(m,{type:"date",...a})}),e.jsx(o,{})]})})]}),e.jsx(l,{control:h.control,name:"paymentDate",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Fecha de Pago (Opcional)"}),e.jsx(t,{children:e.jsx(m,{type:"date",...a})}),e.jsx(_e,{children:"Solo completar si el pago ya fue realizado"}),e.jsx(o,{})]})}),e.jsx(l,{control:h.control,name:"notes",render:({field:a})=>e.jsxs(i,{children:[e.jsx(c,{children:"Notas (Opcional)"}),e.jsx(t,{children:e.jsx(I,{placeholder:"Información adicional sobre el pago...",className:"resize-none",rows:3,...a})}),e.jsx(o,{})]})}),e.jsxs(ce,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>C(!1),disabled:A.isPending,children:"Cancelar"}),e.jsxs(x,{type:"submit",disabled:A.isPending,className:"gap-2",children:[A.isPending?e.jsx(L,{className:"h-4 w-4 animate-spin"}):e.jsx(H,{className:"h-4 w-4"}),"Crear Pago"]})]})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Pagos Pendientes"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"12"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 desde el mes pasado"})]})]}),e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Ingresos Este Mes"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"$245,820"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+15% desde el mes pasado"})]})]}),e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Pagos Atrasados"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"3"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requieren atención"})]})]}),e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Morosidad"}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8.2%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"-2.1% desde el mes pasado"})]})]})]}),e.jsxs(N,{children:[e.jsx(b,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Historial de Pagos"]})}),e.jsx(v,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(S,{children:[e.jsx(d,{children:"Contrato"}),e.jsx(d,{children:"Concepto"}),e.jsx(d,{children:"Monto"}),e.jsx(d,{children:"Fecha Vencimiento"}),e.jsx(d,{children:"Fecha Pago"}),e.jsx(d,{children:"Estado"}),e.jsx(d,{children:"Acciones"})]})}),e.jsx(xe,{children:Array.isArray(n)&&n.length>0?n.map(a=>{var j;return e.jsxs(S,{children:[e.jsxs(r,{className:"font-medium",children:["Contrato #",a.contractId]}),e.jsx(r,{children:a.concept||"N/A"}),e.jsxs(r,{children:["$",((j=a.amount)==null?void 0:j.toLocaleString())||"0"]}),e.jsx(r,{children:a.dueDate?new Date(a.dueDate).toLocaleDateString():"N/A"}),e.jsx(r,{children:a.paymentDate?new Date(a.paymentDate).toLocaleDateString():"Pendiente"}),e.jsx(r,{children:_(a.status)}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(me,{className:"h-4 w-4"})})]})})]},a.id)}):e.jsx(S,{children:e.jsx(r,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No hay pagos registrados"})})})]})})})]})]})},He=()=>{const{data:P=[],isLoading:C}=M({queryKey:["/api/concession-evaluations"],enabled:!0});if(C)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(L,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Cargando evaluaciones..."})]});const w=n=>n>=8?"text-green-600":n>=6?"text-yellow-600":"text-red-600",T=n=>{switch(n){case"completed":return e.jsx(g,{className:"bg-green-100 text-green-800",children:"Completada"});case"in_progress":return e.jsx(g,{className:"bg-blue-100 text-blue-800",children:"En Progreso"});case"pending":return e.jsx(g,{className:"bg-yellow-100 text-yellow-800",children:"Pendiente"});default:return e.jsx(g,{children:n})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación y Cumplimiento"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitorea el cumplimiento y evalúa el desempeño de las concesiones"})]}),e.jsxs(x,{className:"gap-2",children:[e.jsx(H,{size:16}),"Nueva Evaluación"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Evaluaciones Pendientes"}),e.jsx(ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requieren atención"})]})]}),e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Promedio General"}),e.jsx(ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8.4"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+0.3 desde el trimestre pasado"})]})]}),e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Incidencias Activas"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"En proceso de resolución"})]})]}),e.jsxs(N,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Cumplimiento"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"94%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+5% desde el mes pasado"})]})]})]}),e.jsxs(N,{children:[e.jsx(b,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Historial de Evaluaciones"]})}),e.jsx(v,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(S,{children:[e.jsx(d,{children:"Contrato"}),e.jsx(d,{children:"Fecha"}),e.jsx(d,{children:"Sanitaria"}),e.jsx(d,{children:"Operativa"}),e.jsx(d,{children:"Técnica"}),e.jsx(d,{children:"Satisfacción"}),e.jsx(d,{children:"Promedio"}),e.jsx(d,{children:"Estado"}),e.jsx(d,{children:"Acciones"})]})}),e.jsx(xe,{children:Array.isArray(P)&&P.length>0?P.map(n=>e.jsxs(S,{children:[e.jsxs(r,{className:"font-medium",children:["Contrato #",n.contractId]}),e.jsx(r,{children:n.evaluationDate?new Date(n.evaluationDate).toLocaleDateString():"N/A"}),e.jsx(r,{children:e.jsx("span",{className:w(n.sanitaryScore||0),children:n.sanitaryScore||"N/A"})}),e.jsx(r,{children:e.jsx("span",{className:w(n.operationalScore||0),children:n.operationalScore||"N/A"})}),e.jsx(r,{children:e.jsx("span",{className:w(n.technicalScore||0),children:n.technicalScore||"N/A"})}),e.jsx(r,{children:e.jsx("span",{className:w(n.satisfactionScore||0),children:n.satisfactionScore||"N/A"})}),e.jsx(r,{children:e.jsx("span",{className:`font-semibold ${w(n.overallScore||0)}`,children:n.overallScore||"N/A"})}),e.jsx(r,{children:T(n.status)}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(me,{className:"h-4 w-4"})})]})})]},n.id)):e.jsx(S,{children:e.jsx(r,{colSpan:9,className:"text-center text-muted-foreground py-8",children:"No hay evaluaciones registradas"})})})]})})})]})]})};function Je(){const[P,C]=z.useState(!1),[w,T]=z.useState(!1),[n,R]=z.useState(null),[D,h]=z.useState(""),[A,Q]=z.useState("concessionaires"),{toast:_}=ue(),a=pe(),{data:j=[],isLoading:q}=M({queryKey:["/api/concessionaires"],enabled:!0}),J=Z({mutationFn:async s=>{const F=await fetch("/api/concessionaires",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!F.ok)throw new Error("Error al crear el concesionario");return F.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/concessionaires"]}),_({title:"Éxito",description:"Concesionario creado correctamente"}),C(!1),f.reset()},onError:s=>{_({title:"Error",description:"Hubo un problema al crear el concesionario",variant:"destructive"})}}),$=Z({mutationFn:async({id:s,data:F})=>{const O=await fetch(`/api/concessionaires/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!O.ok)throw new Error("Error al actualizar el concesionario");return O.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/concessionaires"]}),_({title:"Éxito",description:"Concesionario actualizado correctamente"}),T(!1),u.reset(),R(null)},onError:s=>{_({title:"Error",description:"Hubo un problema al actualizar el concesionario",variant:"destructive"})}}),f=W({resolver:te(he),defaultValues:{name:"",type:"persona_fisica",rfc:"",tax_address:"",legal_representative:"",phone:"",email:"",notes:""}}),u=W({resolver:te(he),defaultValues:{name:"",type:"persona_fisica",rfc:"",tax_address:"",legal_representative:"",phone:"",email:"",notes:""}}),be=s=>{J.mutate(s)},ye=s=>{n&&$.mutate({id:n.id,data:s})},ve=s=>{R(s),u.reset({name:s.name||"",type:s.type||"persona_fisica",rfc:s.rfc||"",tax_address:s.tax_address||"",legal_representative:s.legal_representative||"",phone:s.phone||"",email:s.email||"",notes:s.notes||""}),T(!0)},Ce=s=>{switch(s){case"active":return e.jsx(g,{className:"bg-green-100 text-green-800",children:"Activo"});case"inactive":return e.jsx(g,{className:"bg-red-100 text-red-800",children:"Inactivo"});case"suspended":return e.jsx(g,{className:"bg-yellow-100 text-yellow-800",children:"Suspendido"});default:return e.jsx(g,{children:s})}},U=D?j.filter(s=>{var F,O;return((F=s.name)==null?void 0:F.toLowerCase().includes(D.toLowerCase()))||((O=s.rfc)==null?void 0:O.toLowerCase().includes(D.toLowerCase()))}):j;return e.jsxs(we,{children:[e.jsxs(Re,{children:[e.jsx("title",{children:"Gestión de Concesionarios | ParquesMX"}),e.jsx("meta",{name:"description",content:"Gestión integral de concesionarios: datos, ubicaciones, finanzas y evaluaciones"})]}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestión de Concesionarios"}),e.jsx("p",{className:"text-muted-foreground",children:"Administra de forma integral todos los aspectos de los concesionarios"})]})}),e.jsxs(Se,{value:A,onValueChange:Q,className:"space-y-6",children:[e.jsxs(Te,{className:"grid w-full grid-cols-3",children:[e.jsxs(X,{value:"concessionaires",className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Concesionarios"]}),e.jsxs(X,{value:"payments",className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Gestión Financiera"]}),e.jsxs(X,{value:"evaluations",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Evaluaciones"]})]}),e.jsxs(Y,{value:"concessionaires",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:"Buscar concesionarios por nombre o RFC...",value:D,onChange:s=>h(s.target.value),className:"w-64"})]}),e.jsxs(x,{onClick:()=>C(!0),className:"gap-2",children:[e.jsx(H,{size:16}),"Nuevo Concesionario"]})]}),e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Concesionarios Registrados"]}),e.jsx(Pe,{children:"Lista de todos los concesionarios autorizados para operar en los parques"})]}),e.jsx(v,{children:q?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(L,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Cargando concesionarios..."})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(oe,{children:[e.jsx(de,{children:e.jsxs(S,{children:[e.jsx(d,{children:"Nombre"}),e.jsx(d,{children:"Tipo"}),e.jsx(d,{children:"RFC"}),e.jsx(d,{children:"Representante Legal"}),e.jsx(d,{children:"Contacto"}),e.jsx(d,{children:"Estado"}),e.jsx(d,{children:"Acciones"})]})}),e.jsx(xe,{children:Array.isArray(U)&&U.length>0?U.map(s=>e.jsxs(S,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.type==="persona_fisica"?"Persona Física":"Persona Moral"}),e.jsx(r,{children:s.rfc}),e.jsx(r,{children:s.legal_representative||"N/A"}),e.jsx(r,{children:e.jsxs("div",{className:"text-sm",children:[s.phone&&e.jsx("div",{children:s.phone}),s.email&&e.jsx("div",{className:"text-muted-foreground",children:s.email})]})}),e.jsx(r,{children:Ce(s.status||"active")}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>ve(s),children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(Ie,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx(S,{children:e.jsx(r,{colSpan:7,className:"text-center text-muted-foreground py-8",children:D?"No se encontraron concesionarios":"No hay concesionarios registrados"})})})]})})})]})]}),e.jsx(Y,{value:"payments",children:e.jsx(Me,{})}),e.jsx(Y,{value:"evaluations",children:e.jsx(He,{})})]}),e.jsx(se,{open:P,onOpenChange:C,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Crear Nuevo Concesionario"}),e.jsx(le,{children:"Ingresa la información básica del concesionario"})]}),e.jsx(ie,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(be),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{control:f.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Nombre *"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Nombre del concesionario",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:f.control,name:"type",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Tipo *"}),e.jsxs(k,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(t,{children:e.jsx(B,{children:e.jsx(K,{placeholder:"Selecciona el tipo"})})}),e.jsxs(G,{children:[e.jsx(E,{value:"persona_fisica",children:"Persona Física"}),e.jsx(E,{value:"persona_moral",children:"Persona Moral"})]})]}),e.jsx(o,{})]})}),e.jsx(l,{control:f.control,name:"rfc",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"RFC *"}),e.jsx(t,{children:e.jsx(m,{placeholder:"RFC del concesionario",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:f.control,name:"legal_representative",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Representante Legal"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Nombre del representante legal",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:f.control,name:"phone",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Teléfono"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Teléfono de contacto",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:f.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Email"}),e.jsx(t,{children:e.jsx(m,{placeholder:"correo@ejemplo.com",type:"email",...s})}),e.jsx(o,{})]})})]}),e.jsx(l,{control:f.control,name:"tax_address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Dirección Fiscal *"}),e.jsx(t,{children:e.jsx(I,{placeholder:"Dirección fiscal completa",className:"resize-none",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:f.control,name:"notes",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Notas"}),e.jsx(t,{children:e.jsx(I,{placeholder:"Notas adicionales...",className:"resize-none",...s})}),e.jsx(o,{})]})}),e.jsxs(ce,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),e.jsx(x,{type:"submit",disabled:J.isPending,children:J.isPending?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Creando..."]}):"Crear Concesionario"})]})]})})]})}),e.jsx(se,{open:w,onOpenChange:T,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsxs(ne,{children:[e.jsx(re,{children:"Editar Concesionario"}),e.jsx(le,{children:"Modifica la información del concesionario"})]}),e.jsx(ie,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(ye),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{control:u.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Nombre *"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Nombre del concesionario",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:u.control,name:"type",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Tipo *"}),e.jsxs(k,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(t,{children:e.jsx(B,{children:e.jsx(K,{placeholder:"Selecciona el tipo"})})}),e.jsxs(G,{children:[e.jsx(E,{value:"persona_fisica",children:"Persona Física"}),e.jsx(E,{value:"persona_moral",children:"Persona Moral"})]})]}),e.jsx(o,{})]})}),e.jsx(l,{control:u.control,name:"rfc",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"RFC *"}),e.jsx(t,{children:e.jsx(m,{placeholder:"RFC del concesionario",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:u.control,name:"legal_representative",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Representante Legal"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Nombre del representante legal",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:u.control,name:"phone",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Teléfono"}),e.jsx(t,{children:e.jsx(m,{placeholder:"Teléfono de contacto",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:u.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Email"}),e.jsx(t,{children:e.jsx(m,{placeholder:"correo@ejemplo.com",type:"email",...s})}),e.jsx(o,{})]})})]}),e.jsx(l,{control:u.control,name:"tax_address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Dirección Fiscal *"}),e.jsx(t,{children:e.jsx(I,{placeholder:"Dirección fiscal completa",className:"resize-none",...s})}),e.jsx(o,{})]})}),e.jsx(l,{control:u.control,name:"notes",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Notas"}),e.jsx(t,{children:e.jsx(I,{placeholder:"Notas adicionales...",className:"resize-none",...s})}),e.jsx(o,{})]})}),e.jsxs(ce,{children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>{T(!1),R(null)},children:"Cancelar"}),e.jsx(x,{type:"submit",disabled:$.isPending,children:$.isPending?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Actualizando..."]}):"Actualizar Concesionario"})]})]})})]})})]})]})}export{Je as default};
