import{a6 as E,Y as F,u as I,a8 as v,j as e,aI as L,B as f,bG as l,aj as w,cW as M,cg as q,c8 as z,a9 as C,ca as S,x as k,f as r,C as a,a as n,b as i,c as t,b6 as T,aK as P,c7 as p,a3 as N,c0 as K,ai as A}from"./index-Dzu3mJf5.js";import{T as Q}from"./trending-down-u1xYgWTi.js";import{L as B}from"./link-BhuCbKuM.js";import{W as D}from"./wallet-rTuTdXr7.js";function W(){const x=E();F.useState(!1);const{data:m,isLoading:j}=I({queryKey:["/api/accounting/integration/stats"],refetchInterval:3e4}),o=v({mutationFn:()=>A("/api/accounting/integration/sync",{method:"POST",body:JSON.stringify({})}),onSuccess:()=>{l({title:"Sincronizaci√≥n completada",description:"Todas las transacciones financieras han sido sincronizadas exitosamente"}),x.invalidateQueries({queryKey:["/api/accounting/integration/stats"]})},onError:g=>{l({title:"Error en sincronizaci√≥n",description:g.message||"No se pudo completar la sincronizaci√≥n",variant:"destructive"})}}),h=v({mutationFn:()=>A("/api/accounting/sync-financial-categories",{method:"POST",body:JSON.stringify({})}),onSuccess:()=>{l({title:"Categor√≠as sincronizadas",description:"Las categor√≠as financieras se han actualizado con las categor√≠as contables"}),x.invalidateQueries({queryKey:["/api/accounting/integration/stats"]})},onError:g=>{l({title:"Error sincronizando categor√≠as",description:g.message||"No se pudo sincronizar las categor√≠as",variant:"destructive"})}}),s=(m==null?void 0:m.stats)||{incomes:{total:0,synced:0},expenses:{total:0,synced:0},entries:{total:0}},d=s.incomes.total+s.expenses.total,u=s.incomes.synced+s.expenses.synced,c=d>0?u/d*100:0,y=s.incomes.total>0?s.incomes.synced/s.incomes.total*100:0,b=s.expenses.total>0?s.expenses.synced/s.expenses.total*100:0;return e.jsx(L,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Integraci√≥n Contable-Financiera"}),e.jsx("p",{className:"text-gray-600",children:"Sincronizaci√≥n autom√°tica entre m√≥dulos contables y financieros"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(f,{onClick:()=>{x.invalidateQueries({queryKey:["/api/accounting/integration/stats"]}),l({title:"Estado actualizado",description:"Verificando estado actual de la integraci√≥n"})},disabled:j,variant:"outline",children:[e.jsx(w,{className:`h-4 w-4 mr-2 ${j?"animate-spin":""}`}),j?"Verificando...":"Verificar Estado"]}),e.jsxs(f,{onClick:()=>h.mutate(),disabled:h.isPending,variant:"outline",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),h.isPending?"Sincronizando...":"Sincronizar Categor√≠as"]}),e.jsxs(f,{onClick:()=>o.mutate(),disabled:o.isPending,variant:"default",children:[e.jsx(q,{className:`h-4 w-4 mr-2 ${o.isPending?"animate-spin":""}`}),o.isPending?"Sincronizando...":"Sincronizar Transacciones"]})]})]}),e.jsxs(z,{className:"mb-6 border-green-200 bg-green-50",children:[e.jsx(C,{className:"h-4 w-4 text-green-600"}),e.jsxs(S,{className:"text-green-800",children:[e.jsx("strong",{children:"üîÑ Integraci√≥n Autom√°tica Activa:"})," Las transacciones contables se procesan autom√°ticamente al crearse, generando asientos contables y actualizando la matriz de flujo de efectivo en tiempo real."]})]}),e.jsxs(z,{className:c===100?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:c===100?"‚úÖ Todas las transacciones financieras est√°n sincronizadas con contabilidad":`‚ö†Ô∏è ${d-u} transacciones pendientes de sincronizaci√≥n`}),e.jsxs(r,{variant:c===100?"default":"secondary",children:[c.toFixed(1),"% sincronizado"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Total Transacciones"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.incomes.total," ingresos ‚Ä¢ ",s.expenses.total," gastos"]})]})]}),e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Transacciones Sincronizadas"}),e.jsx(C,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:u}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.incomes.synced," ingresos ‚Ä¢ ",s.expenses.synced," gastos"]})]})]}),e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Asientos Contables"}),e.jsx(T,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.entries.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Generados autom√°ticamente"})]})]}),e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Porcentaje de Sincronizaci√≥n"}),e.jsx(P,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(t,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[c.toFixed(1),"%"]}),e.jsx(p,{value:c,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2 text-green-600"}),"M√≥dulo de Ingresos"]}),e.jsx(N,{children:"Estado de sincronizaci√≥n de ingresos financieros"})]}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Transacciones totales"}),e.jsx(r,{variant:"outline",children:s.incomes.total})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Sincronizadas"}),e.jsx(r,{variant:"default",children:s.incomes.synced})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progreso de sincronizaci√≥n"}),e.jsxs("span",{children:[y.toFixed(1),"%"]})]}),e.jsx(p,{value:y,className:"h-2"})]})]})]}),e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 mr-2 text-red-600"}),"M√≥dulo de Gastos"]}),e.jsx(N,{children:"Estado de sincronizaci√≥n de gastos financieros"})]}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Transacciones totales"}),e.jsx(r,{variant:"outline",children:s.expenses.total})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Sincronizadas"}),e.jsx(r,{variant:"default",children:s.expenses.synced})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progreso de sincronizaci√≥n"}),e.jsxs("span",{children:[b.toFixed(1),"%"]})]}),e.jsx(p,{value:b,className:"h-2"})]})]})]})]}),e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center",children:[e.jsx(B,{className:"h-5 w-5 mr-2"}),"Flujo de Integraci√≥n"]}),e.jsx(N,{children:"Proceso autom√°tico de sincronizaci√≥n entre m√≥dulos"})]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"M√≥dulo Financiero"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Transacciones de ingresos y gastos"})]})]}),e.jsx(K,{className:"h-6 w-6 text-gray-400"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"M√≥dulo Contable"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Asientos contables autom√°ticos"})]})]})]}),e.jsx(r,{variant:"default",className:"bg-green-100 text-green-800",children:"Sincronizaci√≥n autom√°tica"})]})})]})]})})}export{W as default};
