import{az as k,l as I,ae as R,a2 as w,af as A,u as M,ag as O,j as e,U as V,f as z,g as B,h as L,ab as U,i as G,ai as H,B as g,X as Q,aR as E,aj as n,ak as o,al as i,am as t,O as d,an as l,$ as h,ao as J,aF as K,ad as a,ap as W,aq as X}from"./index-D5qLf1ib.js";const $=a.object({fullName:a.string().min(2,"El nombre completo debe tener al menos 2 caracteres"),email:a.string().email("Email inválido"),phoneNumber:a.string().min(10,"Teléfono debe tener al menos 10 dígitos"),birthDate:a.string(),address:a.string().min(5,"Dirección debe tener al menos 5 caracteres"),emergencyContact:a.string().min(2,"Nombre de contacto debe tener al menos 2 caracteres"),emergencyPhone:a.string().min(10,"Teléfono de emergencia debe tener al menos 10 dígitos"),occupation:a.string().min(2,"La ocupación es requerida"),skills:a.string().min(5,"Describe tus habilidades"),availability:a.string().min(1,"Describe tu disponibilidad"),interests:a.string().min(5,"Describe tus intereses"),previousExperience:a.string(),healthConditions:a.string(),additionalComments:a.string().optional(),termsAccepted:a.boolean().refine(p=>p===!0,"Debes aceptar los términos y condiciones")});function Z(){const[,p]=k(),{toast:u}=I(),D=R(),[v,N]=w.useState(null),[b,f]=w.useState(null),r=A({resolver:W($),defaultValues:{fullName:"",email:"",phoneNumber:"",birthDate:"",address:"",emergencyContact:"",emergencyPhone:"",occupation:"",skills:"",availability:"",interests:"",previousExperience:"",healthConditions:"",additionalComments:"",termsAccepted:!1}});M({queryKey:["/api/municipalities"]});const y=O({mutationFn:async s=>{if(v){const c=new FormData;Object.keys(s).forEach(m=>{const x=s[m];x!=null&&c.append(m,x.toString())}),c.append("profileImage",v);const j=await fetch("/api/volunteers/register",{method:"POST",body:c});if(!j.ok){const m=await j.text();throw new Error(m||"Error al registrar voluntario")}return j.json()}else return X("/api/volunteers/register",{method:"POST",data:s})},onSuccess:()=>{F()},onError:s=>{u({title:"Error",description:s.message||"Error al registrar voluntario",variant:"destructive"})}}),F=()=>{u({title:"¡Registro exitoso!",description:"Tu solicitud ha sido enviada. Te contactaremos pronto para confirmar tu registro."}),D.invalidateQueries({queryKey:["/api/volunteers"]}),p("/volunteers")},P=s=>{var x;const c=(x=s.target.files)==null?void 0:x[0];if(!c)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(c.type)){u({title:"Error",description:"Solo se permiten archivos JPG, PNG o WEBP",variant:"destructive"});return}if(c.size>5*1024*1024){u({title:"Error",description:"El archivo debe ser menor a 5MB",variant:"destructive"});return}N(c);const m=new FileReader;m.onload=S=>{var C;f((C=S.target)==null?void 0:C.result)},m.readAsDataURL(c)},T=()=>{N(null),f(null)},q=s=>{y.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(V,{className:"h-8 w-8 text-[#00a587] mr-2"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Registro de Voluntario"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Únete a nuestra comunidad de voluntarios y ayuda a mantener nuestros parques hermosos y funcionales"})]}),e.jsxs(z,{className:"shadow-lg",children:[e.jsxs(B,{className:"bg-gradient-to-r from-[#00a587] to-[#067f5f] text-white",children:[e.jsx(L,{className:"text-xl",children:"Información Personal"}),e.jsx(U,{className:"text-green-100",children:"Completa todos los campos para completar tu registro"})]}),e.jsx(G,{className:"p-6",children:e.jsx(H,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(q),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Fotografía (Opcional)"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[b?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"Vista previa",className:"w-32 h-32 rounded-full object-cover border-4 border-[#00a587]"}),e.jsx(g,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 rounded-full w-8 h-8 p-0",onClick:T,children:e.jsx(Q,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-100 border-4 border-dashed border-gray-300 flex items-center justify-center",children:e.jsx(E,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:e.jsx(g,{type:"button",variant:"outline",asChild:!0,children:e.jsxs("span",{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),b?"Cambiar Foto":"Subir Foto"]})})}),e.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",onChange:P,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG, PNG o WEBP. Máximo 5MB."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"fullName",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Nombre Completo"}),e.jsx(t,{children:e.jsx(d,{placeholder:"Tu nombre completo",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Email"}),e.jsx(t,{children:e.jsx(d,{type:"email",placeholder:"tu@email.com",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"phoneNumber",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Teléfono"}),e.jsx(t,{children:e.jsx(d,{placeholder:"3312345678",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"birthDate",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Fecha de Nacimiento"}),e.jsx(t,{children:e.jsx(d,{type:"date",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"occupation",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Ocupación"}),e.jsx(t,{children:e.jsx(d,{placeholder:"Tu ocupación actual",...s})}),e.jsx(l,{})]})})]}),e.jsx(n,{control:r.control,name:"address",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Dirección"}),e.jsx(t,{children:e.jsx(d,{placeholder:"Tu dirección completa",...s})}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"emergencyContact",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Nombre del Contacto"}),e.jsx(t,{children:e.jsx(d,{placeholder:"Nombre completo",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"emergencyPhone",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Teléfono del Contacto"}),e.jsx(t,{children:e.jsx(d,{placeholder:"3312345678",...s})}),e.jsx(l,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Habilidades y Experiencia"}),e.jsx(n,{control:r.control,name:"skills",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Habilidades"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Describe tus habilidades relevantes (jardinería, carpintería, educación, etc.)",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"interests",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Áreas de Interés"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Áreas donde te gustaría contribuir (mantenimiento, eventos, educación ambiental, etc.)",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"previousExperience",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Experiencia Previa como Voluntario"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Cuéntanos sobre tu experiencia previa como voluntario (opcional)",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"healthConditions",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Condiciones de Salud"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Menciona cualquier condición médica que debamos conocer (opcional)",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"additionalComments",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Comentarios Adicionales (Opcional)"}),e.jsx(t,{children:e.jsx(h,{placeholder:"¿Hay algo más que te gustaría que sepamos?",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Disponibilidad"}),e.jsx(n,{control:r.control,name:"availability",render:({field:s})=>e.jsxs(o,{children:[e.jsx(i,{children:"Disponibilidad"}),e.jsx(t,{children:e.jsx(h,{placeholder:"Describe tu disponibilidad horaria (ejemplo: Lunes a viernes por las tardes, fines de semana por las mañanas)",className:"min-h-[80px]",...s})}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Términos y Condiciones"}),e.jsx(n,{control:r.control,name:"termsAccepted",render:({field:s})=>e.jsxs(o,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(t,{children:e.jsx(J,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(i,{children:"Acepto los términos y condiciones del programa de voluntariado"}),e.jsx(K,{children:"Al marcar esta casilla, confirmo que he leído y acepto las condiciones para participar como voluntario en los parques urbanos."})]}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>p("/volunteers"),className:"flex-1",children:"Cancelar"}),e.jsx(g,{type:"submit",className:"flex-1 bg-[#00a587] hover:bg-[#067f5f]",disabled:y.isPending,children:y.isPending?"Registrando...":"Registrarme como Voluntario"})]})]})})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"¿Qué sigue?"}),e.jsx("p",{className:"text-gray-600",children:"Una vez que envíes tu solicitud, nuestro equipo la revisará y te contactaremos en un plazo de 3-5 días hábiles para confirmar tu registro y coordinar tu primera actividad."})]})})]})})}export{Z as default};
