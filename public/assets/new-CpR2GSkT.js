import{am as S,e as E,a6 as I,a7 as R,u as w,a8 as F,j as e,aI as P,B as h,A as T,C as k,a as q,b as D,M as L,a3 as A,c as M,aa as V,ab as n,ac as i,ad as c,ae as l,I as x,af as o,z as g,H as v,J as b,K as y,N as t,O as m,U as K,al as _,a5 as r,ah as U,ai as z}from"./index-Dzu3mJf5.js";const H=r.object({name:r.string().min(1,"El nombre es obligatorio"),description:r.string().min(1,"La descripción es obligatoria"),parkId:r.string().min(1,"Debe seleccionar un parque"),spaceType:r.string().min(1,"Debe seleccionar un tipo de espacio"),capacity:r.number().min(1,"La capacidad debe ser mayor a 0"),hourlyRate:r.number().min(0,"La tarifa debe ser mayor o igual a 0"),amenities:r.string().optional(),reservationRules:r.string().optional(),location:r.string().optional(),isActive:r.boolean().default(!0)});function Q(){const[,p]=S(),{toast:u}=E(),C=I(),a=R({resolver:U(H),defaultValues:{name:"",description:"",parkId:"",capacity:1,hourlyRate:0,amenities:"",reservationRules:"",location:"",isActive:!0}}),{data:N=[]}=w({queryKey:["/api/parks"]}),j=F({mutationFn:async s=>z("/api/reservable-spaces",{method:"POST",data:{...s,parkId:parseInt(s.parkId)}}),onSuccess:()=>{u({title:"Espacio creado",description:"El espacio reservable ha sido creado exitosamente"}),C.invalidateQueries({queryKey:["/api/reservable-spaces"]}),p("/admin/space-reservations/spaces")},onError:s=>{u({title:"Error",description:s.message||"Error al crear el espacio",variant:"destructive"})}}),f=s=>{j.mutate(s)};return e.jsx(P,{children:e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>p("/admin/space-reservations/spaces"),className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Volver"]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuevo Espacio Reservable"}),e.jsx("p",{className:"text-gray-600",children:"Crea un nuevo espacio que los ciudadanos pueden reservar para eventos"})]}),e.jsxs(k,{children:[e.jsxs(q,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-green-600"}),"Información del Espacio"]}),e.jsx(A,{children:"Define las características y reglas del nuevo espacio reservable"})]}),e.jsx(M,{children:e.jsx(V,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(f),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Nombre del Espacio"}),e.jsx(l,{children:e.jsx(x,{placeholder:"Ej: Kiosco Principal",...s})}),e.jsx(o,{})]})}),e.jsx(n,{control:a.control,name:"parkId",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Parque"}),e.jsxs(g,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(v,{children:e.jsx(b,{placeholder:"Seleccionar parque"})})}),e.jsx(y,{children:N.map(d=>e.jsx(t,{value:d.id.toString(),children:d.name},d.id))})]}),e.jsx(o,{})]})}),e.jsx(n,{control:a.control,name:"spaceType",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Tipo de Espacio"}),e.jsxs(g,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(l,{children:e.jsx(v,{children:e.jsx(b,{placeholder:"Selecciona el tipo de espacio"})})}),e.jsxs(y,{children:[e.jsx(t,{value:"kiosco",children:"Kiosco"}),e.jsx(t,{value:"area_juegos",children:"Área de Juegos"}),e.jsx(t,{value:"picnic",children:"Área de Picnic"}),e.jsx(t,{value:"jardin_eventos",children:"Jardín de Eventos"}),e.jsx(t,{value:"pabellon",children:"Pabellón"}),e.jsx(t,{value:"cancha_deportiva",children:"Cancha Deportiva"}),e.jsx(t,{value:"anfiteatro",children:"Anfiteatro"}),e.jsx(t,{value:"salon_usos_multiples",children:"Salón de Usos Múltiples"})]})]}),e.jsx(o,{})]})})]}),e.jsx(n,{control:a.control,name:"description",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Descripción"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Describe las características del espacio...",rows:3,...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(n,{control:a.control,name:"capacity",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Capacidad"]}),e.jsx(l,{children:e.jsx(x,{type:"number",placeholder:"50",...s,onChange:d=>s.onChange(parseInt(d.target.value)||0)})}),e.jsx(o,{})]})}),e.jsx(n,{control:a.control,name:"hourlyRate",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Tarifa por Hora ($)"]}),e.jsx(l,{children:e.jsx(x,{type:"number",step:"0.01",placeholder:"250.00",...s,onChange:d=>s.onChange(parseFloat(d.target.value)||0)})}),e.jsx(o,{})]})}),e.jsx(n,{control:a.control,name:"location",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Ubicación"}),e.jsx(l,{children:e.jsx(x,{placeholder:"Ej: Sector Norte",...s})}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(n,{control:a.control,name:"amenities",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Amenidades Incluidas"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Ej: Mesas, sillas, asador, toma de corriente...",rows:3,...s})}),e.jsx(o,{})]})}),e.jsx(n,{control:a.control,name:"reservationRules",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{children:"Reglas de Reservación"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Ej: Reservar con 24h de anticipación, máximo 4 horas...",rows:3,...s})}),e.jsx(o,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>p("/admin/space-reservations/spaces"),children:"Cancelar"}),e.jsx(h,{type:"submit",disabled:j.isPending,className:"bg-green-600 hover:bg-green-700",children:j.isPending?"Creando...":"Crear Espacio"})]})]})})})]})]})})}export{Q as default};
