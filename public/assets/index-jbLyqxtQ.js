import{u,l as A,j as e,aI as L,cA as k,C as i,a as l,b as r,c,aj as q,aJ as E,aO as R,aP as K,aQ as o,aR as m,aS as x,aU as j,aV as b,aW as f,aX as h,cz as g,aZ as p,a_ as M,a$ as O,b0 as B,X as $}from"./index-Dzu3mJf5.js";import{H}from"./Helmet-BWphdh6I.js";import{S as I}from"./sprout-6D_XRx4E.js";import{T as z}from"./tree-deciduous-CQzCbWaM.js";import{B as y}from"./BarChart-Bu_4ahC_.js";const d=["#16a34a","#22c55e","#4ade80","#86efac","#bbf7d0","#dcfce7"],N={Excelente:"#16a34a",Bueno:"#22c55e",Regular:"#facc15",Malo:"#f97316",Crítico:"#ef4444",Desconocido:"#94a3b8"},V=()=>{const{data:C,isLoading:w}=u({queryKey:["/api/trees/stats"],staleTime:6e4}),{data:v,isLoading:P}=u({queryKey:["/api/trees/distributions"],staleTime:6e4}),T={totalTrees:28,recentlyPlanted:5,criticalCondition:3,maintenancePending:7,averageHeight:8.3,totalSpecies:12},D={bySpecies:[{name:"Ahuehuete",count:8},{name:"Jacaranda",count:6},{name:"Tabachín",count:5},{name:"Laurel de la India",count:4},{name:"Palmera Washingtonia",count:3},{name:"Otros",count:2}],byCondition:[{name:"Excelente",count:9},{name:"Bueno",count:10},{name:"Regular",count:5},{name:"Malo",count:2},{name:"Crítico",count:1},{name:"Desconocido",count:1}],byPark:[{name:"Parque Metropolitano",count:12},{name:"Parque Agua Azul",count:8},{name:"Bosque Los Colomos",count:5},{name:"Parque Alcalde",count:3}]},t=C||T,n=v||D,S=A(new Date,"d 'de' MMMM 'de' yyyy",{locale:$});return e.jsxs(L,{children:[e.jsx(H,{children:e.jsx("title",{children:"Dashboard de Arbolado | Bosques Urbanos"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard de Arbolado"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Datos actualizados: ",S]})]}),w||P?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(k,{className:"h-8 w-8 animate-spin text-green-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total de Árboles"}),e.jsx(I,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalTrees}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.recentlyPlanted," plantados en los últimos 30 días"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Altura Promedio"}),e.jsx(q,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.averageHeight," m"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.totalSpecies," especies diferentes"]})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"En Estado Crítico"}),e.jsx(E,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.criticalCondition}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requieren atención inmediata"})]})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Mantenimiento Pendiente"}),e.jsx(z,{className:"h-4 w-4 text-amber-600"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.maintenancePending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Árboles con tareas programadas"})]})]})]}),e.jsxs(R,{defaultValue:"bySpecies",className:"w-full",children:[e.jsxs(K,{className:"grid w-full grid-cols-3",children:[e.jsx(o,{value:"bySpecies",children:"Por Especie"}),e.jsx(o,{value:"byCondition",children:"Por Estado"}),e.jsx(o,{value:"byPark",children:"Por Parque"})]}),e.jsxs(m,{value:"bySpecies",className:"p-4 bg-white rounded-md shadow mt-2",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Distribución por Especie"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(y,{data:n.bySpecies,margin:{top:5,right:30,left:20,bottom:60},children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"name",angle:-45,textAnchor:"end",height:70}),e.jsx(f,{}),e.jsx(h,{formatter:s=>[`${s} árboles`,"Cantidad"]}),e.jsx(g,{}),e.jsx(p,{dataKey:"count",name:"Cantidad",fill:"#16a34a"})]})})})]}),e.jsxs(m,{value:"byCondition",className:"p-4 bg-white rounded-md shadow mt-2",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Distribución por Estado"}),e.jsxs("div",{className:"h-80 w-full flex",children:[e.jsx("div",{className:"w-1/2",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(M,{children:[e.jsx(O,{data:n.byCondition,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"count",nameKey:"name",label:({name:s,percent:a})=>`${s}: ${(a*100).toFixed(0)}%`,children:n.byCondition.map((s,a)=>e.jsx(B,{fill:N[s.name]||d[a%d.length]},`cell-${a}`))}),e.jsx(h,{formatter:s=>[`${s} árboles`,"Cantidad"]})]})})}),e.jsx("div",{className:"w-1/2 flex items-center justify-center",children:e.jsx("div",{className:"space-y-2",children:n.byCondition.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm",style:{backgroundColor:N[s.name]||d[a%d.length]}}),e.jsxs("span",{children:[s.name,": ",s.count," árboles"]})]},a))})})]})]}),e.jsxs(m,{value:"byPark",className:"p-4 bg-white rounded-md shadow mt-2",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Distribución por Parque"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(y,{data:n.byPark,margin:{top:5,right:30,left:20,bottom:60},layout:"vertical",children:[e.jsx(j,{strokeDasharray:"3 3"}),e.jsx(b,{type:"number"}),e.jsx(f,{type:"category",dataKey:"name",width:150}),e.jsx(h,{formatter:s=>[`${s} árboles`,"Cantidad"]}),e.jsx(g,{}),e.jsx(p,{dataKey:"count",name:"Cantidad",fill:"#16a34a"})]})})})]})]})]})]})]})};export{V as default};
