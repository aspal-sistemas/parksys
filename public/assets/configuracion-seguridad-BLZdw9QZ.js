import{c as ie,j as e,f as r,g as m,h,U as M,i as d,aW as H,ar as O,n as te,Z as re,ab as v,ah as C,o as j,B as w,au as E,bE as le,e as R,a2 as P,a4 as ce,O as ne,bp as q,a_ as Q,bq as de,K as _,l as oe,ae as xe,u as me,ag as he,a5 as U,bF as k,bo as ue,bG as je,bH as ge,bI as pe,bJ as $,bK as B,bL as Ne,bM as D,ax as fe,aq as ve,b1 as J,b2 as V,b3 as N,b4 as f,aX as be,bN as we,F as ye,aZ as Ce}from"./index-D5qLf1ib.js";import{P as Se}from"./progress-CD1SWYCP.js";import{S as Pe}from"./server-OJsSRB_R.js";import{S}from"./RoleBadge-D5voYAx-.js";import{C as Ae}from"./gem-dXiyKzl3.js";import{D as F,S as G}from"./RoleGuard-BpTshTfO.js";import Te from"./Politicas-ClP-N7Av.js";import Me from"./NotificacionesAdmin-yeCI9nKc.js";import Re from"./Auditoria-Djt66j1l.js";import Le from"./Mantenimiento-D3J45le4.js";import"./send-Bxi1PaXf.js";import"./date-picker-BGQBE3iK.js";import"./cloud-C4d9J89w.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);function Ue(){const o={activeUsers:47,failedLogins:3,systemHealth:98,lastBackup:"2025-01-10 02:00:00",activeAlerts:2,systemUptime:99.9},p=[{id:1,user:"Ana García",action:"Modificó permisos de usuario",time:"10:30",severity:"medium",details:"Usuario: Carlos Ruiz"},{id:2,user:"Sistema",action:"Respaldo automático completado",time:"02:00",severity:"low",details:"Base de datos principal"},{id:3,user:"Luis Martínez",action:"Intento de acceso fallido",time:"09:15",severity:"high",details:"IP: 192.168.1.105"},{id:4,user:"María López",action:"Creó nuevo usuario",time:"08:45",severity:"low",details:"Usuario: Pedro Sánchez"}],u=[{id:1,type:"warning",title:"Espacio de respaldo bajo",description:"El espacio de almacenamiento de respaldos está al 85%",time:"1h ago"},{id:2,type:"info",title:"Actualización disponible",description:"Nueva versión del sistema disponible (v2.1.1)",time:"3h ago"}],b=l=>{switch(l){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-green-600 bg-green-50 border-green-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Usuarios Activos"}),e.jsx(M,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.activeUsers}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+3 desde ayer"})]})]}),e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Intentos Fallidos"}),e.jsx(H,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.failedLogins}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Últimas 24h"})]})]}),e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Salud del Sistema"}),e.jsx(O,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o.systemHealth,"%"]}),e.jsx(Se,{value:o.systemHealth,className:"mt-2"})]})]}),e.jsxs(r,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Tiempo Activo"}),e.jsx(te,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o.systemUptime,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Últimos 30 días"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-yellow-600"}),"Alertas del Sistema"]}),e.jsx(v,{children:"Notificaciones importantes que requieren atención"})]}),e.jsxs(d,{className:"space-y-4",children:[u.map(l=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:`p-1 rounded-full ${l.type==="warning"?"bg-yellow-100":"bg-blue-100"}`,children:l.type==="warning"?e.jsx(H,{className:"h-4 w-4 text-yellow-600"}):e.jsx(C,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:l.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l.time})]})]},l.id)),u.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Todo está funcionando correctamente"}),e.jsx("p",{className:"text-gray-500",children:"No hay alertas que requieran atención en este momento."})]})]})]}),e.jsxs(r,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-blue-600"}),"Actividad Reciente"]}),e.jsx(v,{children:"Eventos y acciones más recientes del sistema"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-4",children:p.map(l=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx(j,{variant:"outline",className:`${b(l.severity)} text-xs`,children:l.severity==="high"?"Alto":l.severity==="medium"?"Medio":"Bajo"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:l.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.time})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.user," - ",l.details]})]})]},l.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(w,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Ver toda la actividad"]})})]})]})]}),e.jsxs(r,{children:[e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-green-600"}),"Estado de Servicios"]}),e.jsx(v,{children:"Monitoreo en tiempo real de los servicios del sistema"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Base de Datos"})]}),e.jsx(j,{className:"bg-green-100 text-green-800",children:"Operativo"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Seguridad"})]}),e.jsx(j,{className:"bg-green-100 text-green-800",children:"Operativo"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Respaldos"})]}),e.jsx(j,{className:"bg-yellow-100 text-yellow-800",children:"Atención"})]})]})})]})]})}function Ee(){const[o,p]=P.useState("");P.useState(null);const u=[{roleId:"1",userCount:2,activeUsers:2},{roleId:"2",userCount:3,activeUsers:3},{roleId:"3",userCount:8,activeUsers:7},{roleId:"4",userCount:5,activeUsers:4},{roleId:"5",userCount:3,activeUsers:3},{roleId:"6",userCount:15,activeUsers:12},{roleId:"7",userCount:2,activeUsers:1}],b=S.filter(a=>o===""||a.displayName.toLowerCase().includes(o.toLowerCase())),l=a=>u.find(t=>t.roleId===a)||{userCount:0,activeUsers:0},A=a=>a<=2?"border-red-200 bg-red-50":a<=4?"border-orange-200 bg-orange-50":"border-green-200 bg-green-50",y=a=>({1:"Control total del sistema. Acceso a todas las funcionalidades y configuraciones críticas.",2:"Supervisión ejecutiva con acceso a reportes estratégicos y decisiones de alto nivel.",3:"Gestión operativa de parques, mantenimiento y coordinación de equipos de campo.",4:"Planificación y gestión de actividades recreativas, eventos y programas comunitarios.",5:"Administración financiera, presupuestos, contabilidad y reportes fiscales.",6:"Operación diaria de parques específicos, mantenimiento básico y atención ciudadana.",7:"Acceso de solo lectura para auditorías, consultoría y análisis de datos."})[a]||"Descripción no disponible";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(ne,{placeholder:"Buscar roles...",value:o,onChange:a=>p(a.target.value),className:"pl-10"})]}),e.jsxs(w,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Configurar Permisos"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Administrativos"}),e.jsx("p",{className:"text-2xl font-bold",children:u.filter(a=>{const t=S.find(g=>g.id===a.roleId);return((t==null?void 0:t.level)||0)<=2}).reduce((a,t)=>a+t.userCount,0)})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Coordinadores"}),e.jsx("p",{className:"text-2xl font-bold",children:u.filter(a=>{const t=S.find(z=>z.id===a.roleId),g=(t==null?void 0:t.level)||0;return g>2&&g<=4}).reduce((a,t)=>a+t.userCount,0)})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Operativos"}),e.jsx("p",{className:"text-2xl font-bold",children:u.filter(a=>{const t=S.find(g=>g.id===a.roleId);return((t==null?void 0:t.level)||0)>4}).reduce((a,t)=>a+t.userCount,0)})]})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:b.map(a=>{const t=l(a.id),g=a.icon;return e.jsxs(r,{className:`${A(a.level)} border-2`,children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-full ${a.level<=2?"bg-red-100":a.level<=4?"bg-orange-100":"bg-green-100"}`,children:e.jsx(g,{className:`h-6 w-6 ${a.level<=2?"text-red-700":a.level<=4?"text-orange-700":"text-green-700"}`})}),e.jsxs("div",{children:[e.jsx(h,{className:"text-lg",children:a.displayName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(j,{variant:"outline",className:"text-xs",children:["Nivel ",a.level]}),e.jsxs(j,{className:`text-xs ${t.userCount>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[t.userCount," usuarios"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{variant:"ghost",size:"sm",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(w,{variant:"ghost",size:"sm",children:e.jsx(de,{className:"h-4 w-4"})})]})]})}),e.jsxs(d,{children:[e.jsx(v,{className:"mb-4",children:y(a.id)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(M,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-lg font-bold",children:t.userCount})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Total usuarios"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(C,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-lg font-bold",children:t.activeUsers})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Activos"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Acceso administrativo"}),a.level<=2?e.jsx(C,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Gestión de usuarios"}),a.level<=3?e.jsx(C,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Operación de campo"}),a.level>=4?e.jsx(C,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-300"})]})]})]})]},a.id)})}),e.jsxs(r,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600"}),"Sistema Jerárquico de Roles"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("h3",{className:"font-medium text-red-900 mb-2",children:"Nivel Administrativo (1-2)"}),e.jsx("p",{className:"text-sm text-red-700",children:"Control total del sistema con acceso a configuraciones críticas y gestión de seguridad."})]}),e.jsxs("div",{className:"p-4 border border-orange-200 rounded-lg bg-orange-50",children:[e.jsx("h3",{className:"font-medium text-orange-900 mb-2",children:"Nivel Coordinación (3-4)"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Supervisión operativa con acceso a gestión de equipos y planificación estratégica."})]}),e.jsxs("div",{className:"p-4 border border-green-200 rounded-lg bg-green-50",children:[e.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"Nivel Operativo (5-7)"}),e.jsx("p",{className:"text-sm text-green-700",children:"Ejecución de tareas específicas con acceso limitado a funciones operativas diarias."})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Jerarquía de Permisos"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Los roles de nivel superior heredan automáticamente los permisos de los niveles inferiores, garantizando una estructura de seguridad consistente y escalable."})]})]})})]})})]})]})}function qe(){const{toast:o}=oe(),p=xe(),[u,b]=P.useState(F),[l,A]=P.useState(!1),{data:y,isLoading:a,error:t}=me({queryKey:["/api/permissions/matrix"],refetchOnWindowFocus:!1}),g=he({mutationFn:s=>ve("/api/permissions/matrix",{method:"PUT",body:JSON.stringify(s)}),onSuccess:()=>{A(!1),o({title:"Permisos guardados",description:"Los cambios en la matriz de permisos se han guardado exitosamente"}),p.invalidateQueries({queryKey:["/api/permissions/matrix"]})},onError:s=>{o({title:"Error al guardar",description:s.message||"No se pudieron guardar los permisos",variant:"destructive"})}});P.useEffect(()=>{y&&!l&&b(y)},[y,l]);const z=s=>{switch(s){case"read":return e.jsx(E,{className:"h-3 w-3"});case"write":return e.jsx(K,{className:"h-3 w-3"});case"admin":return e.jsx(q,{className:"h-3 w-3"})}},W=s=>{switch(s){case"read":return"text-blue-600 bg-blue-50";case"write":return"text-orange-600 bg-orange-50";case"admin":return"text-red-600 bg-red-50"}},Z=s=>{switch(s){case"read":return"Lectura";case"write":return"Escritura";case"admin":return"Admin"}},I=(s,i,n)=>{var x,c;return((c=(x=u[s])==null?void 0:x[i])==null?void 0:c.includes(n))||!1},X=(s,i,n)=>{b(x=>{const c={...x};c[s]||(c[s]={}),c[s][i]||(c[s][i]=[]);const T=[...c[s][i]];return T.includes(n)?(c[s][i]=T.filter(L=>L!==n),n==="admin"&&(c[s][i]=c[s][i].filter(L=>L!=="write")),n==="write"&&(c[s][i]=c[s][i].filter(L=>L!=="admin"))):(c[s][i]=[...T,n],n==="write"&&!T.includes("read")&&c[s][i].push("read"),n==="admin"&&(T.includes("read")||c[s][i].push("read"),T.includes("write")||c[s][i].push("write"))),A(!0),c})},Y=()=>{y?(b(y),A(!1),o({title:"Cambios descartados",description:"Se han restaurado los permisos desde el servidor"})):(b(F),A(!1),o({title:"Permisos restablecidos",description:"Se han restaurado los permisos por defecto"}))},ee=()=>{g.mutate(u)},se=s=>{const i=Object.keys(u),n=i.filter(x=>u[x][s]&&u[x][s].length>0).length;return{total:i.length,withAccess:n,percentage:Math.round(n/i.length*100)}},ae=s=>{const i=u[s]||{},n=G.length,x=G.filter(c=>i[c]&&i[c].length>0).length;return{total:n,accessible:x,percentage:Math.round(x/n*100)}};return a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{children:e.jsx(m,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-6 w-6 text-purple-600"}),"Matriz de Permisos del Sistema"]}),e.jsx(v,{children:"Cargando matriz de permisos..."})]})})})}),e.jsx(r,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Cargando permisos del sistema..."})]})})]}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{children:e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-6 w-6 text-purple-600"}),"Matriz de Permisos del Sistema"]}),e.jsx(v,{children:"Error al cargar la matriz de permisos"})]}),e.jsxs(w,{variant:"outline",onClick:()=>p.invalidateQueries({queryKey:["/api/permissions/matrix"]}),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Reintentar"]})]})})}),e.jsx(r,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(ue,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Error al cargar permisos"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No se pudo conectar con el servidor para obtener los permisos."}),e.jsxs(w,{onClick:()=>p.invalidateQueries({queryKey:["/api/permissions/matrix"]}),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Reintentar Carga"]})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{children:e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-6 w-6 text-purple-600"}),"Matriz de Permisos del Sistema"]}),e.jsx(v,{children:"Control granular de acceso a módulos por rol. Los cambios se aplican inmediatamente a todos los usuarios."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsxs(j,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(_,{className:"h-3 w-3 mr-1"}),"Cambios sin guardar"]}),e.jsxs(w,{variant:"outline",onClick:Y,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Restablecer"]}),e.jsxs(w,{onClick:ee,disabled:!l||g.isPending,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),g.isPending?"Guardando...":"Guardar Cambios"]})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("h3",{className:"font-medium",children:"Tipos de permisos:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{className:"text-blue-600 bg-blue-50",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Lectura"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ver información"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{className:"text-orange-600 bg-orange-50",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),"Escritura"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Modificar datos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{className:"text-red-600 bg-red-50",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),"Administrar"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Control total"})]})]})]})})}),e.jsx(r,{children:e.jsx(d,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ge,{children:[e.jsx(pe,{children:e.jsxs($,{className:"bg-gray-50",children:[e.jsx(B,{className:"w-48 font-semibold",children:"Módulo del Sistema"}),S.map(s=>e.jsx(B,{className:"text-center min-w-32",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium text-xs",children:s.name}),e.jsxs(j,{variant:"outline",className:"text-xs",children:["Nivel ",s.level]})]})},s.id)),e.jsx(B,{className:"w-24 text-center",children:"Estadísticas"})]})}),e.jsx(Ne,{children:G.map(s=>{const i=se(s);return e.jsxs($,{className:"hover:bg-gray-50",children:[e.jsx(D,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[i.withAccess,"/",i.total," roles con acceso"]})]})}),S.map(n=>e.jsx(D,{className:"text-center",children:e.jsx("div",{className:"flex flex-col gap-1",children:["read","write","admin"].map(x=>e.jsx("div",{className:"flex items-center justify-center",onClick:()=>X(n.id,s,x),children:e.jsxs(j,{className:`cursor-pointer transition-all text-xs px-2 py-1 ${I(n.id,s,x)?W(x):"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,children:[z(x),e.jsx("span",{className:"ml-1",children:Z(x)}),I(n.id,s,x)&&e.jsx(C,{className:"h-3 w-3 ml-1"})]})},x))})},n.id)),e.jsx(D,{className:"text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:"text-lg font-bold",children:[i.percentage,"%"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"acceso"})]})})]},s)})})]})})})}),e.jsxs(r,{children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600"}),"Resumen de Acceso por Rol"]})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:S.slice(0,4).map(s=>{const i=ae(s.id);return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(j,{variant:"outline",className:"text-xs",children:s.name})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[i.percentage,"%"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.accessible,"/",i.total," módulos"]})]}),e.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${i.percentage}%`}})})]},s.id)})})})]}),e.jsx(r,{className:"bg-blue-50 border-blue-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Consideraciones Importantes"}),e.jsxs("div",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsx("p",{children:"• Los permisos son jerárquicos: Admin incluye Write y Read automáticamente"}),e.jsx("p",{children:"• Los cambios se aplican inmediatamente a todos los usuarios con ese rol"}),e.jsx("p",{children:"• Se recomienda seguir el principio de menor privilegio necesario"}),e.jsx("p",{children:"• Todos los cambios quedan registrados en el log de auditoría"})]})]})]})})})]})}function ze(){const[o,p]=P.useState("usuarios");return e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsxs(m,{children:[e.jsxs(h,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(R,{className:"h-6 w-6"}),"Control de Acceso al Sistema"]}),e.jsx(v,{className:"text-blue-700",children:"Administración completa de usuarios, roles y permisos organizacionales. Gestiona el acceso a los 7 módulos del sistema con control jerárquico."})]})}),e.jsxs(J,{value:o,onValueChange:p,className:"space-y-6",children:[e.jsxs(V,{className:"grid w-full grid-cols-3",children:[e.jsxs(N,{value:"usuarios",className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Usuarios"]}),e.jsxs(N,{value:"roles",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Roles"]}),e.jsxs(N,{value:"permisos",className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Permisos"]})]}),e.jsx(f,{value:"usuarios",children:e.jsx("div",{className:"space-y-4",children:e.jsxs(r,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"Gestión de Usuarios"}),e.jsx(v,{children:"La gestión de usuarios se ha trasladado a una interfaz especializada."})]}),e.jsxs(d,{children:[e.jsx("p",{className:"text-center text-muted-foreground mb-4",children:"Accede al módulo completo de gestión de usuarios y roles desde el menú lateral."}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:"/admin/configuracion-seguridad/access/users",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:[e.jsx(M,{className:"h-4 w-4"}),"Ir a Gestión de Usuarios y Roles"]})})]})]})})}),e.jsx(f,{value:"roles",children:e.jsx(Ee,{})}),e.jsx(f,{value:"permisos",children:e.jsx(qe,{})})]})]})}function We(){const[o,p]=P.useState("panel");return e.jsx(be,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-10 h-10 text-blue-700"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"Configuración y Seguridad"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"Centro unificado de administración del sistema"})]})]})}),e.jsxs(J,{value:o,onValueChange:p,className:"space-y-6",children:[e.jsxs(V,{className:"grid w-full grid-cols-6 h-12",children:[e.jsxs(N,{value:"panel",className:"flex flex-col items-center gap-1 h-full",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Panel de Control"})]}),e.jsxs(N,{value:"acceso",className:"flex flex-col items-center gap-1 h-full",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Control de Acceso"})]}),e.jsxs(N,{value:"politicas",className:"flex flex-col items-center gap-1 h-full",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Políticas"})]}),e.jsxs(N,{value:"notificaciones",className:"flex flex-col items-center gap-1 h-full",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Notificaciones"})]}),e.jsxs(N,{value:"auditoria",className:"flex flex-col items-center gap-1 h-full",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Auditoría"})]}),e.jsxs(N,{value:"mantenimiento",className:"flex flex-col items-center gap-1 h-full",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Mantenimiento"})]})]}),e.jsx(f,{value:"panel",children:e.jsx(Ue,{})}),e.jsx(f,{value:"acceso",children:e.jsx(ze,{})}),e.jsx(f,{value:"politicas",children:e.jsx(Te,{})}),e.jsx(f,{value:"notificaciones",children:e.jsx(Me,{})}),e.jsx(f,{value:"auditoria",children:e.jsx(Re,{})}),e.jsx(f,{value:"mantenimiento",children:e.jsx(Le,{})})]})]})})}export{We as default};
