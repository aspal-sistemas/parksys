import{ad as d,a2 as h,l as Es,ae as Fs,u as pe,ag as A,af as J,j as e,aX as $e,b1 as qs,b2 as Ls,b3 as ve,b4 as Ne,a4 as ks,O as m,Q as P,V as C,W as E,Y as F,_ as o,w as I,x as Me,B as g,bh as Be,y as O,z,I as U,J as X,ai as Y,aj as t,ak as n,al as i,am as l,an as c,N as Re,aR as Ge,X as Ke,$,f as be,g as fe,a as H,h as ye,ab as we,o as L,i as Se,p as Qe,P as Je,as as Xe,au as Pe,bq as Ce,bn as Ye,aF as He,br as We,ah as _e,aY as Ds,m as Ts,dW as Vs,U as As,M as Is,s as q,ap as W}from"./index-D5qLf1ib.js";import{P as Ze}from"./progress-CD1SWYCP.js";import{T as Os}from"./trophy-D6ylo_Zs.js";const es=d.object({name:d.string().min(1,"El nombre es requerido"),category:d.string().min(1,"La categoría es requerida"),level:d.number().optional(),price:d.string().min(1,"El precio es requerido"),duration:d.number().min(1,"La duración es requerida"),benefits:d.union([d.array(d.string()),d.string()]).transform(k=>typeof k=="string"?k.split(",").map(M=>M.trim()).filter(M=>M):k).refine(k=>k.length>0,"Al menos un beneficio es requerido"),isActive:d.boolean().default(!0)}),ss=d.object({name:d.string().min(1,"El nombre es requerido"),type:d.string().min(1,"El tipo es requerido"),logo:d.string().optional(),representative:d.string().min(1,"El representante es requerido"),email:d.string().email("Email inválido"),phone:d.string().min(1,"El teléfono es requerido"),address:d.string().min(1,"La dirección es requerida"),status:d.string().min(1,"El estado es requerido"),packageName:d.string().min(1,"El nombre del paquete es requerido"),contractStart:d.string().min(1,"La fecha de inicio es requerida"),renewalProbability:d.number().min(0).max(100,"La probabilidad debe estar entre 0 y 100"),websiteUrl:d.string().url("URL inválida").optional().or(d.literal("")),notes:d.string().optional(),contractValue:d.number().optional(),contractEnd:d.string().optional(),eventsSponsored:d.number().optional()}),Bs=()=>{var ze,Ue;const[k,M]=h.useState("sponsors"),[_,as]=h.useState(""),[Z,rs]=h.useState("all"),[ee,ts]=h.useState("all"),[ns,se]=h.useState(!1),[is,ae]=h.useState(!1),[x,Ee]=h.useState(null),[ls,re]=h.useState(!1),[cs,R]=h.useState(!1),[b,Fe]=h.useState(null),[os,qe]=h.useState(!1),[ds,G]=h.useState(!1),[Le,te]=h.useState(null),[ke,ne]=h.useState(""),[De,K]=h.useState(null),[Te,B]=h.useState(""),[D,Q]=h.useState(!1),{toast:p}=Es(),T=Fs(),{data:f=[],isLoading:xs}=pe({queryKey:["/api/sponsorship-packages"],queryFn:()=>q("/api/sponsorship-packages")}),{data:ie=[],isLoading:hs}=pe({queryKey:["/api/sponsors"],queryFn:()=>q("/api/sponsors")}),{data:Ve=[],isLoading:ms}=pe({queryKey:["/api/sponsorship-campaigns"],queryFn:()=>q("/api/sponsorship-campaigns")}),le=A({mutationFn:s=>(console.log("Creating package with data:",s),q("/api/sponsorship-packages",{method:"POST",data:s})),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/sponsorship-packages"]}),p({title:"Éxito",description:"Paquete creado exitosamente"}),ae(!1),y.reset()},onError:s=>{console.error("Error creating package:",s),p({title:"Error",description:"Error al crear paquete",variant:"destructive"})}}),ce=A({mutationFn:s=>q("/api/sponsors",{method:"POST",data:s}),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/sponsors"]}),p({title:"Éxito",description:"Patrocinador creado exitosamente"}),se(!1),v.reset(),te(null),ne("")},onError:()=>{p({title:"Error",description:"Error al crear patrocinador",variant:"destructive"})}}),oe=A({mutationFn:({id:s,data:a})=>q(`/api/sponsors/${s}`,{method:"PUT",data:a}),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/sponsors"]}),p({title:"Éxito",description:"Patrocinador actualizado exitosamente"}),R(!1),re(!1),j.reset(),K(null),B("")},onError:()=>{p({title:"Error",description:"Error al actualizar patrocinador",variant:"destructive"})}}),js=A({mutationFn:s=>q(`/api/sponsors/${s}`,{method:"DELETE"}),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/sponsors"]}),p({title:"Éxito",description:"Patrocinador eliminado exitosamente"})},onError:()=>{p({title:"Error",description:"Error al eliminar patrocinador",variant:"destructive"})}}),de=A({mutationFn:({id:s,data:a})=>q(`/api/sponsorship-packages/${s}`,{method:"PUT",data:a}),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/sponsorship-packages"]}),p({title:"Éxito",description:"Paquete actualizado exitosamente"}),G(!1),w.reset()},onError:()=>{p({title:"Error",description:"Error al actualizar paquete",variant:"destructive"})}}),us=A({mutationFn:s=>q(`/api/sponsorship-packages/${s}`,{method:"DELETE"}),onSuccess:()=>{T.invalidateQueries({queryKey:["/api/sponsorship-packages"]}),p({title:"Éxito",description:"Paquete eliminado exitosamente"})},onError:()=>{p({title:"Error",description:"Error al eliminar paquete",variant:"destructive"})}}),y=J({resolver:W(es),defaultValues:{name:"",category:"",price:"",duration:12,benefits:"",isActive:!0}}),v=J({resolver:W(ss),defaultValues:{name:"",type:"",logo:"",representative:"",email:"",phone:"",address:"",status:"",packageName:"",contractStart:"",renewalProbability:0,websiteUrl:"",notes:"",contractValue:0,contractEnd:"",eventsSponsored:0}}),j=J({resolver:W(ss),defaultValues:{name:"",type:"",logo:"",representative:"",email:"",phone:"",address:"",status:"",packageName:"",contractStart:"",renewalProbability:0,websiteUrl:"",notes:"",contractValue:0,contractEnd:"",eventsSponsored:0}}),w=J({resolver:W(es),defaultValues:{name:"",category:"",price:"",duration:12,benefits:"",isActive:!0}}),xe=v.watch("packageName"),he=v.watch("contractStart");h.useEffect(()=>{if(xe&&f.length>0){const s=f.find(a=>a.name===xe);s&&v.setValue("contractValue",parseFloat(s.price))}},[xe,f]),h.useEffect(()=>{if(he){const s=new Date(he),a=new Date(s);a.setFullYear(s.getFullYear()+1),v.setValue("contractEnd",a.toISOString().split("T")[0])}},[he]);const me=j.watch("packageName"),je=j.watch("contractStart");h.useEffect(()=>{if(me&&f.length>0){const s=f.find(a=>a.name===me);s&&j.setValue("contractValue",parseFloat(s.price))}},[me,f]),h.useEffect(()=>{if(je){const s=new Date(je),a=new Date(s);a.setFullYear(s.getFullYear()+1),j.setValue("contractEnd",a.toISOString().split("T")[0])}},[je]);const Ae=async s=>{const a=new FormData;a.append("logo",s);const r=localStorage.getItem("token"),u=localStorage.getItem("user");let N="1",S="super_admin";if(u)try{const V=JSON.parse(u);N=V.id.toString(),S=V.role||"admin"}catch(V){console.error("Error parsing stored user:",V)}const Cs={Authorization:r?`Bearer ${r}`:"Bearer direct-token-1750522117022","X-User-Id":N,"X-User-Role":S},ge=await fetch("/api/upload/sponsor-logo",{method:"POST",headers:Cs,body:a,credentials:"include"});if(!ge.ok){const V=await ge.json().catch(()=>({message:"Error al subir el logo"}));throw new Error(V.message||"Error al subir el logo")}return(await ge.json()).filePath},gs=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];if(a){te(a);const u=new FileReader;u.onload=N=>{var S;ne((S=N.target)==null?void 0:S.result)},u.readAsDataURL(a)}},ps=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];if(a){K(a);const u=new FileReader;u.onload=N=>{var S;B((S=N.target)==null?void 0:S.result)},u.readAsDataURL(a)}},vs=()=>{te(null),ne("")},Ns=()=>{K(null),B("")},bs=async s=>{try{Q(!0);let a="";if(Le&&(a=await Ae(Le)),!s.packageName){p({title:"Error",description:"Debes seleccionar un nombre de paquete",variant:"destructive"});return}if(!s.contractValue||s.contractValue===0){p({title:"Error",description:"El valor del contrato no se calculó correctamente.",variant:"destructive"});return}const r=N=>N?new Date(N).toISOString().split("T")[0]:null,u={...s,category:s.type,logo:a,contractValue:Number(s.contractValue)||0,eventsSponsored:Number(s.eventsSponsored)||0,contractStart:r(s.contractStart),contractEnd:r(s.contractEnd),renewalProbability:Number(s.renewalProbability)||0};ce.mutate(u)}catch{p({title:"Error",description:"Error al procesar el logo",variant:"destructive"})}finally{Q(!1)}},fs=s=>{Ee(s);const a=r=>r?new Date(r).toISOString().split("T")[0]:"";j.reset({name:s.name,type:s.category,logo:s.logo||"",representative:s.representative||"",email:s.email||"",phone:s.phone||"",address:s.address||"",status:s.status||"",packageName:s.packageName,contractStart:a(s.contractStart),renewalProbability:s.renewalProbability||0,websiteUrl:s.websiteUrl||"",notes:s.notes||"",contractValue:parseFloat(s.contractValue||"0"),contractEnd:a(s.contractEnd),eventsSponsored:s.eventsSponsored||0}),s.logo?B(s.logo):B(""),K(null),R(!0)},ys=s=>{Fe(s),qe(!0)},ws=s=>{Fe(s),w.reset({name:s.name,category:s.category,price:s.price.toString(),duration:s.duration,benefits:Array.isArray(s.benefits)?s.benefits.join(", "):s.benefits||"",isActive:s.isActive||!0}),G(!0)},Ss=async s=>{if(b)try{const a=parseInt(s.category.replace("nivel","")),r={...s,level:a,price:parseFloat(s.price).toString()};console.log("Edit package data:",r),de.mutate({id:b.id,data:r})}catch(a){console.error("Error processing package edit:",a),p({title:"Error",description:"Error al procesar el paquete",variant:"destructive"})}},Ps=async s=>{if(x)try{Q(!0);let a=s.logo||"";if(De&&(a=await Ae(De)),!s.packageName){p({title:"Error",description:"Debes seleccionar un nombre de paquete",variant:"destructive"});return}if(!s.contractValue||s.contractValue===0){p({title:"Error",description:"El valor del contrato no se calculó correctamente.",variant:"destructive"});return}const r=N=>N?new Date(N).toISOString().split("T")[0]:null,u={...s,category:s.type,logo:a,contractValue:Number(s.contractValue)||0,eventsSponsored:Number(s.eventsSponsored)||0,contractStart:r(s.contractStart),contractEnd:r(s.contractEnd),renewalProbability:Number(s.renewalProbability)||0};oe.mutate({id:x.id,data:u})}catch{p({title:"Error",description:"Error al procesar el logo",variant:"destructive"})}finally{Q(!1)}},Ie=ie.filter(s=>{const a=s.name.toLowerCase().includes(_.toLowerCase())||(s.representative||"").toLowerCase().includes(_.toLowerCase()),r=Z==="all"||s.category===Z,u=ee==="all"||s.status===ee;return a&&r&&u}),Oe=s=>{const a=f.find(r=>r.name===s);return console.log(`🔍 Buscando paquete "${s}":`,a),a||null},ue=s=>s&&{activo:"bg-green-100 text-green-800",potencial:"bg-blue-100 text-blue-800",inactivo:"bg-red-100 text-red-800",renovacion:"bg-yellow-100 text-yellow-800"}[s]||"bg-gray-100 text-gray-800";return xs||hs||ms?e.jsx($e,{children:e.jsx("div",{className:"flex justify-center items-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00a587]"})})}):e.jsx($e,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Patrocinios"}),e.jsx("p",{className:"text-gray-600",children:"Administra patrocinadores, paquetes y campañas"})]})}),e.jsxs(qs,{value:k,onValueChange:M,className:"w-full",children:[e.jsxs(Ls,{className:"grid w-full grid-cols-3",children:[e.jsx(ve,{value:"sponsors",children:"Patrocinadores"}),e.jsx(ve,{value:"packages",children:"Paquetes"}),e.jsx(ve,{value:"campaigns",children:"Campañas"})]}),e.jsxs(Ne,{value:"sponsors",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(m,{placeholder:"Buscar patrocinadores...",value:_,onChange:s=>as(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(P,{value:Z,onValueChange:rs,children:[e.jsx(C,{className:"w-48",children:e.jsx(E,{placeholder:"Filtrar por categoría"})}),e.jsxs(F,{children:[e.jsx(o,{value:"all",children:"Todas las categorías"}),e.jsx(o,{value:"corporativo",children:"Corporativo"}),e.jsx(o,{value:"local",children:"Local"}),e.jsx(o,{value:"institucional",children:"Institucional"}),e.jsx(o,{value:"ong",children:"ONG"})]})]}),e.jsxs(P,{value:ee,onValueChange:ts,children:[e.jsx(C,{className:"w-48",children:e.jsx(E,{placeholder:"Filtrar por estado"})}),e.jsxs(F,{children:[e.jsx(o,{value:"all",children:"Todos los estados"}),e.jsx(o,{value:"activo",children:"Activo"}),e.jsx(o,{value:"potencial",children:"Potencial"}),e.jsx(o,{value:"inactivo",children:"Inactivo"}),e.jsx(o,{value:"renovacion",children:"Renovación"})]})]})]}),e.jsxs(I,{open:ns,onOpenChange:se,children:[e.jsx(Me,{asChild:!0,children:e.jsxs(g,{className:"bg-[#00a587] hover:bg-[#008f75]",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Nuevo Patrocinador"]})}),e.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(z,{children:[e.jsx(U,{children:"Crear Nuevo Patrocinador"}),e.jsx(X,{children:"Completa la información del nuevo patrocinador"})]}),e.jsx(Y,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(bs),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:v.control,name:"name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Nombre del Patrocinador"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Empresa ABC",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:v.control,name:"type",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Tipo"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona tipo"})})}),e.jsxs(F,{children:[e.jsx(o,{value:"corporativo",children:"Corporativo"}),e.jsx(o,{value:"local",children:"Local"}),e.jsx(o,{value:"institucional",children:"Institucional"}),e.jsx(o,{value:"ong",children:"ONG"})]})]}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Re,{children:"Logo del Patrocinador"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:gs,className:"hidden",id:"logo-upload"}),e.jsx("label",{htmlFor:"logo-upload",className:"cursor-pointer",children:e.jsx("div",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#00a587] transition-colors bg-green-50 hover:bg-green-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ge,{className:"mx-auto h-8 w-8 text-[#00a587] mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Haz clic para subir logo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG hasta 5MB"})]})})})]}),ke&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ke,alt:"Preview",className:"w-32 h-32 object-contain border border-gray-200 rounded-lg bg-white"}),e.jsx(g,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:vs,children:e.jsx(Ke,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:v.control,name:"representative",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Representante"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Juan Pérez",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:v.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Email"}),e.jsx(l,{children:e.jsx(m,{type:"email",placeholder:"contacto@empresa.com",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:v.control,name:"phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Teléfono"}),e.jsx(l,{children:e.jsx(m,{placeholder:"+52 33 1234 5678",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:v.control,name:"websiteUrl",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Sitio Web (Opcional)"}),e.jsx(l,{children:e.jsx(m,{placeholder:"https://empresa.com",...s})}),e.jsx(c,{})]})})]}),e.jsx(t,{control:v.control,name:"address",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Dirección"}),e.jsx(l,{children:e.jsx($,{placeholder:"Dirección completa",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:v.control,name:"status",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Estado"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona estado"})})}),e.jsxs(F,{children:[e.jsx(o,{value:"activo",children:"Activo"}),e.jsx(o,{value:"potencial",children:"Potencial"}),e.jsx(o,{value:"inactivo",children:"Inactivo"}),e.jsx(o,{value:"renovacion",children:"Renovación"})]})]}),e.jsx(c,{})]})}),e.jsx(t,{control:v.control,name:"packageName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Paquete de Patrocinio"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona paquete"})})}),e.jsx(F,{children:f.map(a=>e.jsx(o,{value:a.name,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["($",parseFloat(a.price).toLocaleString(),")"]})]})},a.id))})]}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:v.control,name:"contractStart",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Fecha de Inicio"}),e.jsx(l,{children:e.jsx(m,{type:"date",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:v.control,name:"renewalProbability",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Probabilidad de Renovación (%)"}),e.jsx(l,{children:e.jsx(m,{placeholder:"85",type:"number",min:"0",max:"100",...s,onChange:a=>s.onChange(parseInt(a.target.value)||0)})}),e.jsx(c,{})]})})]}),e.jsx(t,{control:v.control,name:"notes",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Notas (Opcional)"}),e.jsx(l,{children:e.jsx($,{placeholder:"Notas adicionales...",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>se(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",className:"bg-[#00a587] hover:bg-[#008f75]",disabled:ce.isPending||D,children:ce.isPending||D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),D?"Subiendo logo...":"Creando..."]}):"Crear Patrocinador"})]})]})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ie.map(s=>{var a;return e.jsxs(be,{className:"hover:shadow-md transition-shadow",children:[e.jsx(fe,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[s.logo?e.jsx("img",{src:s.logo,alt:`Logo de ${s.name}`,className:"w-12 h-12 object-contain border border-gray-200 rounded-lg p-1 bg-white shadow-sm flex-shrink-0",onError:r=>{var u;r.currentTarget.style.display="none",(u=r.currentTarget.nextElementSibling)==null||u.classList.remove("hidden")}}):null,s.logo&&e.jsx("div",{className:"hidden w-12 h-12 bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(H,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-lg",children:s.name}),e.jsx(we,{className:"text-sm text-gray-500",children:s.representative})]})]}),e.jsxs("div",{className:"flex flex-col space-y-1 items-end min-w-[120px]",children:[e.jsx(L,{className:"bg-emerald-100 text-emerald-800 text-xs whitespace-nowrap",children:((a=Oe(s.packageName))==null?void 0:a.name)||s.packageName||"Sin paquete"}),e.jsx(L,{className:`${ue(s.status)} text-xs whitespace-nowrap`,children:(s.status||"sin estado").charAt(0).toUpperCase()+(s.status||"sin estado").slice(1)})]})]})}),e.jsxs(Se,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),s.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),s.phone]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"$",parseFloat(s.contractValue).toLocaleString()]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Probabilidad de renovación"}),e.jsxs("span",{children:[s.renewalProbability,"%"]})]}),e.jsx(Ze,{value:s.renewalProbability,className:"h-2"})]})]}),e.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>{Ee(s),re(!0)},children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Ver"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>fs(s),children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"Editar"]})]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>{confirm("¿Estás seguro de que deseas eliminar este patrocinador?")&&js.mutate(s.id)},className:"hover:bg-red-50 hover:border-red-200 hover:text-red-600",children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Eliminar"]})]})]})]},s.id)})}),Ie.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Os,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron patrocinadores con los filtros aplicados"})]})]}),e.jsxs(Ne,{value:"packages",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Paquetes de Patrocinio"}),e.jsxs(I,{open:is,onOpenChange:ae,children:[e.jsx(Me,{asChild:!0,children:e.jsxs(g,{className:"bg-[#00a587] hover:bg-[#008f75]",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Nuevo Paquete"]})}),e.jsxs(O,{className:"max-w-2xl",children:[e.jsxs(z,{children:[e.jsx(U,{children:"Crear Nuevo Paquete"}),e.jsx(X,{children:"Define un nuevo paquete de patrocinio"})]}),e.jsx(Y,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(s=>{console.log("Form data received:",s),console.log("Form validation errors:",y.formState.errors);const a=parseInt(s.category.replace("nivel","")),r={...s,level:a,price:parseFloat(s.price).toString()};console.log("Submission data:",r),le.mutate(r)}),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:y.control,name:"name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Nombre del Paquete"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Paquete Oro",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:y.control,name:"category",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Categoría"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona categoría"})})}),e.jsx(F,{children:Array.from({length:10},(a,r)=>r+1).map(a=>e.jsx(o,{value:`nivel${a}`,children:e.jsxs("span",{children:["Nivel ",a]})},a))})]}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:y.control,name:"price",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Precio"}),e.jsx(l,{children:e.jsx(m,{type:"number",placeholder:"50000",...s,onChange:a=>s.onChange(a.target.value)})}),e.jsx(c,{})]})}),e.jsx(t,{control:y.control,name:"duration",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Duración (meses)"}),e.jsx(l,{children:e.jsx(m,{type:"number",placeholder:"12",...s,onChange:a=>s.onChange(parseInt(a.target.value)||0)})}),e.jsx(c,{})]})})]}),e.jsx(t,{control:y.control,name:"benefits",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Beneficios (separados por comas)"}),e.jsx(l,{children:e.jsx($,{placeholder:"Logo en eventos, Stand exclusivo, Menciones en redes sociales",value:typeof s.value=="string"?s.value:Array.isArray(s.value)?s.value.join(", "):"",onChange:a=>{s.onChange(a.target.value)}})}),e.jsx(c,{})]})}),e.jsx(t,{control:y.control,name:"isActive",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{className:"text-base",children:"Paquete Activo"}),e.jsx(He,{children:"El paquete estará disponible para los patrocinadores"})]}),e.jsx(l,{children:e.jsx(We,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>ae(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",className:"bg-[#00a587] hover:bg-[#008f75]",disabled:le.isPending,children:le.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando..."]}):"Crear Paquete"})]})]})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(s=>{var a,r;return e.jsxs(be,{className:"hover:shadow-md transition-shadow",children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"text-lg",children:s.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(L,{variant:s.isActive?"default":"secondary",children:s.isActive?"Activo":"Inactivo"}),e.jsx(we,{children:e.jsx("span",{className:"text-sm text-gray-500",children:s.category})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#00a587]",children:["$",parseFloat(s.price).toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.duration," meses"]})]})]})}),e.jsx(Se,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Beneficios:"}),e.jsxs("div",{className:"space-y-1",children:[(a=s.benefits)==null?void 0:a.slice(0,3).map((u,N)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(_e,{className:"h-3 w-3 mr-2 text-green-500"}),u]},N)),((r=s.benefits)==null?void 0:r.length)>3&&e.jsxs("p",{className:"text-sm text-gray-500",children:["+",s.benefits.length-3," más..."]})]})]}),e.jsx("div",{className:"flex justify-end items-center pt-3 border-t",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>ys(s),children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Ver"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>ws(s),children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"Editar"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>{confirm("¿Estás seguro de que deseas eliminar este paquete?")&&us.mutate(s.id)},className:"hover:bg-red-50 hover:border-red-200 hover:text-red-600",children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Eliminar"]})]})})]})})]},s.id)})})]}),e.jsxs(Ne,{value:"campaigns",className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ve.map(s=>{var a;return e.jsxs(be,{className:"hover:shadow-md transition-shadow",children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"text-lg",children:s.name}),e.jsxs(we,{children:[s.startDate," - ",s.endDate]})]}),e.jsx(L,{className:ue(s.status),children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})}),e.jsx(Se,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Presupuesto: $",parseFloat(s.budget).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),s.sponsorsCount," patrocinadores"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Ingresos: $",parseFloat(s.revenue).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),((a=s.events)==null?void 0:a.length)||0," eventos"]}),e.jsx("div",{className:"flex justify-between items-center pt-3 border-t",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(g,{size:"sm",variant:"outline",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Ver"]}),e.jsxs(g,{size:"sm",variant:"outline",children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"Editar"]})]})})]})})]},s.id)})}),Ve.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Vs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No hay campañas de patrocinio disponibles"})]})]})]}),e.jsx(I,{open:ls,onOpenChange:re,children:e.jsxs(O,{className:"max-w-2xl",children:[e.jsx(z,{children:e.jsx(U,{children:"Detalles del Patrocinador"})}),x&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:x.name}),e.jsx("p",{className:"text-gray-600",children:x.type}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx(L,{className:"bg-emerald-100 text-emerald-800",children:((ze=Oe(x.packageName))==null?void 0:ze.name)||x.packageName}),e.jsx(L,{className:ue(x.status),children:x.status||"Sin estado"})]})]}),e.jsx("div",{className:"flex justify-center items-start",children:x.logo?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:x.logo,alt:`Logo de ${x.name}`,className:"w-24 h-24 object-contain border border-gray-200 rounded-lg p-2 bg-white shadow-sm",onError:s=>{var a;s.currentTarget.style.display="none",(a=s.currentTarget.nextElementSibling)==null||a.classList.remove("hidden")}}),e.jsxs("div",{className:"hidden text-center p-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Logo no disponible"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 border border-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Sin logo"})]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-[#00a587]",children:["$",parseFloat(x.contractValue).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.contractStart?(()=>{const s=new Date(x.contractStart);return isNaN(s.getTime())?"Fecha inválida":s.toLocaleDateString("es-MX")})():"No definida"," - ",x.contractEnd?(()=>{const s=new Date(x.contractEnd);return isNaN(s.getTime())?"Fecha inválida":s.toLocaleDateString("es-MX")})():"No definida"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Información de Contacto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),x.representative]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),x.email]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),x.phone]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),x.address]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Estadísticas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Eventos patrocinados:"}),e.jsx("span",{className:"text-sm font-medium",children:x.eventsSponsored})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Prob. renovación:"}),e.jsxs("span",{className:"text-sm font-medium",children:[x.renewalProbability,"%"]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Ze,{value:x.renewalProbability,className:"h-2"})})]})]})]}),x.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Notas"}),e.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:x.notes})]})]})]})}),e.jsx(I,{open:cs,onOpenChange:R,children:e.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(z,{children:[e.jsx(U,{children:"Editar Patrocinador"}),e.jsx(X,{children:"Actualiza la información del patrocinador"})]}),e.jsx(Y,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(Ps),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:j.control,name:"name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Nombre del Patrocinador"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Empresa ABC",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:j.control,name:"type",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Tipo"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona tipo"})})}),e.jsxs(F,{children:[e.jsx(o,{value:"corporativo",children:"Corporativo"}),e.jsx(o,{value:"local",children:"Local"}),e.jsx(o,{value:"institucional",children:"Institucional"}),e.jsx(o,{value:"ong",children:"ONG"})]})]}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Re,{children:"Logo del Patrocinador"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ps,className:"hidden",id:"edit-logo-upload"}),e.jsx("label",{htmlFor:"edit-logo-upload",className:"cursor-pointer",children:e.jsx("div",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#00a587] transition-colors bg-green-50 hover:bg-green-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ge,{className:"mx-auto h-8 w-8 text-[#00a587] mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Haz clic para cambiar logo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG hasta 5MB"})]})})})]}),Te&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Te,alt:"Preview",className:"w-32 h-32 object-contain border border-gray-200 rounded-lg bg-white"}),e.jsx(g,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:Ns,children:e.jsx(Ke,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:j.control,name:"representative",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Representante"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Juan Pérez",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:j.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Email"}),e.jsx(l,{children:e.jsx(m,{type:"email",placeholder:"contacto@empresa.com",...s})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:j.control,name:"phone",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Teléfono"}),e.jsx(l,{children:e.jsx(m,{placeholder:"+52 33 1234 5678",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:j.control,name:"websiteUrl",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Sitio Web (Opcional)"}),e.jsx(l,{children:e.jsx(m,{placeholder:"https://empresa.com",...s})}),e.jsx(c,{})]})})]}),e.jsx(t,{control:j.control,name:"address",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Dirección"}),e.jsx(l,{children:e.jsx($,{placeholder:"Dirección completa",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:j.control,name:"status",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Estado"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona estado"})})}),e.jsxs(F,{children:[e.jsx(o,{value:"activo",children:"Activo"}),e.jsx(o,{value:"potencial",children:"Potencial"}),e.jsx(o,{value:"inactivo",children:"Inactivo"}),e.jsx(o,{value:"renovacion",children:"Renovación"})]})]}),e.jsx(c,{})]})}),e.jsx(t,{control:j.control,name:"packageName",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Paquete de Patrocinio"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona paquete"})})}),e.jsx(F,{children:f.map(a=>e.jsx(o,{value:a.name,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["($",parseFloat(a.price).toLocaleString(),")"]})]})},a.id))})]}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:j.control,name:"contractStart",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Fecha de Inicio"}),e.jsx(l,{children:e.jsx(m,{type:"date",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:j.control,name:"renewalProbability",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Probabilidad de Renovación (%)"}),e.jsx(l,{children:e.jsx(m,{placeholder:"85",type:"number",min:"0",max:"100",...s,onChange:a=>s.onChange(parseInt(a.target.value)||0)})}),e.jsx(c,{})]})})]}),e.jsx(t,{control:j.control,name:"notes",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Notas (Opcional)"}),e.jsx(l,{children:e.jsx($,{placeholder:"Notas adicionales...",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>R(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",className:"bg-[#00a587] hover:bg-[#008f75]",disabled:oe.isPending||D,children:oe.isPending||D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),D?"Subiendo logo...":"Actualizando..."]}):"Guardar cambios"})]})]})})]})}),e.jsx(I,{open:os,onOpenChange:qe,children:e.jsxs(O,{className:"max-w-2xl",children:[e.jsx(z,{children:e.jsx(U,{children:"Detalles del Paquete"})}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:b.name}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx(L,{className:"bg-slate-100 text-slate-800",children:b.category}),e.jsx(L,{variant:b.isActive?"default":"secondary",children:b.isActive?"Activo":"Inactivo"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-[#00a587]",children:["$",parseFloat(b.price).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Duración: ",b.duration," meses"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Beneficios Incluidos"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:(Ue=b.benefits)==null?void 0:Ue.map((s,a)=>e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(_e,{className:"h-4 w-4 mr-3 text-green-500 flex-shrink-0"}),e.jsx("span",{children:s})]},a))})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Estadísticas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Patrocinadores activos:"}),e.jsx("div",{className:"text-lg font-semibold",children:ie.filter(s=>s.packageCategory===b.category).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ingresos generados:"}),e.jsxs("div",{className:"text-lg font-semibold text-[#00a587]",children:["$",ie.filter(s=>s.packageCategory===b.category).reduce((s,a)=>s+parseFloat(a.contractValue),0).toLocaleString()]})]})]})]})]})]})}),e.jsx(I,{open:ds,onOpenChange:G,children:e.jsxs(O,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(z,{children:[e.jsx(U,{children:"Editar Paquete"}),e.jsx(X,{children:"Actualiza la información del paquete de patrocinio"})]}),e.jsx(Y,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(Ss),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:w.control,name:"name",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Nombre del Paquete"}),e.jsx(l,{children:e.jsx(m,{placeholder:"Paquete Premium",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:w.control,name:"category",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Categoría"}),e.jsxs(P,{onValueChange:s.onChange,value:s.value,children:[e.jsx(l,{children:e.jsx(C,{children:e.jsx(E,{placeholder:"Selecciona categoría"})})}),e.jsx(F,{children:Array.from({length:10},(a,r)=>r+1).map(a=>e.jsx(o,{value:`nivel${a}`,children:e.jsxs("span",{children:["Nivel ",a]})},a))})]}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:w.control,name:"price",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Precio ($)"}),e.jsx(l,{children:e.jsx(m,{placeholder:"25000",...s})}),e.jsx(c,{})]})}),e.jsx(t,{control:w.control,name:"duration",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Duración (meses)"}),e.jsx(l,{children:e.jsx(m,{type:"number",placeholder:"12",...s,onChange:a=>s.onChange(parseInt(a.target.value)||0)})}),e.jsx(c,{})]})})]}),e.jsx(t,{control:w.control,name:"benefits",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Beneficios (separados por comas)"}),e.jsx(l,{children:e.jsx($,{placeholder:"Logo en eventos, Stand exclusivo, Menciones en redes sociales",value:typeof s.value=="string"?s.value:Array.isArray(s.value)?s.value.join(", "):"",onChange:a=>{s.onChange(a.target.value)}})}),e.jsx(c,{})]})}),e.jsx(t,{control:w.control,name:"isActive",render:({field:s})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{className:"text-base",children:"Paquete Activo"}),e.jsx(He,{children:"El paquete estará disponible para los patrocinadores"})]}),e.jsx(l,{children:e.jsx(We,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>G(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",className:"bg-[#00a587] hover:bg-[#008f75]",disabled:de.isPending,children:de.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Actualizando..."]}):"Guardar cambios"})]})]})})]})})]})})};export{Bs as default};
