import{a2 as u,l as k,ae as z,u as L,ag as d,j as e,aX as h,f as g,b0 as P,w as j,x as Q,B as l,bh as p,y as v,z as C,I as N,g as K,h as M,bn as O,i as $,av as f,o as I,N as m,O as b,$ as A,aq as x}from"./index-D5qLf1ib.js";import{P as H}from"./pen-DCU0qVnc.js";const R=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16"];function E({category:s,onSave:n,onCancel:c}){const[r,i]=u.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",color:(s==null?void 0:s.color)||"#3B82F6"}),o=t=>{t.preventDefault(),r.name.trim()&&n(r)};return e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nombre de la categoría"}),e.jsx(b,{id:"name",value:r.name,onChange:t=>i({...r,name:t.target.value}),placeholder:"Ej: Culturales, Deportivos...",required:!0})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Descripción (opcional)"}),e.jsx(A,{id:"description",value:r.description,onChange:t=>i({...r,description:t.target.value}),placeholder:"Descripción de la categoría...",rows:3})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Color de la categoría"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:"w-8 h-8 rounded border-2 border-gray-300",style:{backgroundColor:r.color}}),e.jsx(b,{type:"color",value:r.color,onChange:t=>i({...r,color:t.target.value}),className:"w-16 h-8 p-1 border rounded"})]}),e.jsx("div",{className:"grid grid-cols-8 gap-1 mt-2",children:R.map(t=>e.jsx("button",{type:"button",className:"w-6 h-6 rounded border hover:scale-110 transition-transform",style:{backgroundColor:t},onClick:()=>i({...r,color:t})},t))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{type:"button",variant:"outline",onClick:c,children:"Cancelar"}),e.jsxs(l,{type:"submit",children:[s?"Actualizar":"Crear"," Categoría"]})]})]})}function X(){const[s,n]=u.useState(null),[c,r]=u.useState(!1),{toast:i}=k(),o=z(),{data:t=[],isLoading:y}=L({queryKey:["/api/event-categories"]}),w=d({mutationFn:async a=>x("/api/event-categories",{method:"POST",data:a}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/event-categories"]}),r(!1),i({title:"Categoría creada",description:"La categoría de evento se ha creado exitosamente."})},onError:a=>{i({title:"Error",description:a.message||"Error al crear la categoría",variant:"destructive"})}}),D=d({mutationFn:async({id:a,data:B})=>x(`/api/event-categories/${a}`,{method:"PUT",data:B}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/event-categories"]}),n(null),i({title:"Categoría actualizada",description:"La categoría de evento se ha actualizado exitosamente."})},onError:a=>{i({title:"Error",description:a.message||"Error al actualizar la categoría",variant:"destructive"})}}),F=d({mutationFn:async a=>x(`/api/event-categories/${a}`,{method:"DELETE"}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/event-categories"]}),i({title:"Categoría eliminada",description:"La categoría de evento se ha eliminado exitosamente."})},onError:a=>{i({title:"Error",description:a.message||"Error al eliminar la categoría",variant:"destructive"})}}),S=a=>{w.mutate(a)},T=a=>{s&&D.mutate({id:s.id,data:a})},q=a=>{confirm(`¿Estás seguro de que deseas eliminar la categoría "${a.name}"?`)&&F.mutate(a.id)};return y?e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando categorías..."})]})})}):e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{className:"p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categorías de Eventos"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestiona las categorías para clasificar eventos"})]}),e.jsxs(j,{open:c,onOpenChange:r,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(l,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Nueva Categoría"]})}),e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(N,{children:"Crear Nueva Categoría"})}),e.jsx(E,{onSave:S,onCancel:()=>r(!1)})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(a=>e.jsxs(g,{className:"relative",children:[e.jsx(K,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.color}}),e.jsx(M,{className:"text-lg",children:a.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n(a),children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>q(a),className:"text-red-600 hover:text-red-700",children:e.jsx(O,{className:"h-4 w-4"})})]})]})}),e.jsxs($,{children:[a.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(f,{className:"h-3 w-3"}),e.jsxs("span",{children:["ID: ",a.id]})]}),e.jsx(I,{variant:"outline",className:"mt-2",style:{borderColor:a.color,color:a.color},children:a.name})]})]},a.id))}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Crea la primera categoría para eventos"}),e.jsxs(l,{onClick:()=>r(!0),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Crear Primera Categoría"]})]}),e.jsx(j,{open:!!s,onOpenChange:a=>!a&&n(null),children:e.jsxs(v,{children:[e.jsx(C,{children:e.jsx(N,{children:"Editar Categoría"})}),s&&e.jsx(E,{category:s,onSave:T,onCancel:()=>n(null)})]})})]})})}export{X as default};
