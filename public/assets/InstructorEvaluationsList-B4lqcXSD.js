import{a2 as u,u as n,j as e,B as v,f as x,g as m,t as y,M as p,n as f,i as o,o as d,h as b,b as g}from"./index-D5qLf1ib.js";import{M as h}from"./message-circle-jTu33GDb.js";const l=({rating:s,size:a="w-4 h-4"})=>e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(i=>e.jsx(g,{className:`${a} ${i<=s?"text-yellow-400 fill-current":"text-gray-300"}`},i))}),w=({evaluation:s})=>{const a=i=>new Date(i).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(x,{className:"mb-4",children:[e.jsx(m,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.evaluatorName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.evaluatorCity&&e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-3 h-3"}),e.jsx("span",{children:s.evaluatorCity})]}),e.jsx(f,{className:"w-3 h-3 ml-2"}),e.jsx("span",{children:a(s.createdAt)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{rating:s.overallRating}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.overallRating,"/5"]})]})]})}),e.jsxs(o,{children:[s.attendedActivity&&e.jsx("div",{className:"mb-3",children:e.jsx(d,{variant:"outline",className:"text-xs",children:s.attendedActivity})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Conocimiento"}),e.jsx(l,{rating:s.knowledgeRating,size:"w-3 h-3"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Paciencia"}),e.jsx(l,{rating:s.patienceRating,size:"w-3 h-3"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Claridad"}),e.jsx(l,{rating:s.clarityRating,size:"w-3 h-3"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Puntualidad"}),e.jsx(l,{rating:s.punctualityRating,size:"w-3 h-3"})]})]}),s.comments&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:['"',s.comments,'"']})]})}),s.wouldRecommend!==void 0&&e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(d,{variant:s.wouldRecommend?"default":"secondary",className:s.wouldRecommend?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600",children:s.wouldRecommend?"✓ Recomendado":"✗ No recomendado"})})]})]})},C=({stats:s})=>e.jsxs(x,{className:"mb-6",children:[e.jsx(m,{children:e.jsx(b,{className:"text-lg text-gray-900",children:"Resumen de Evaluaciones"})}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.totalEvaluations}),e.jsx("div",{className:"text-sm text-gray-600",children:"Evaluaciones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:s.averageRating.toFixed(1)}),e.jsx(g,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Promedio"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.recommendationRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recomendación"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.recommendCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recomiendan"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Promedio por categoría"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Conocimiento"}),e.jsx("span",{className:"font-medium",children:s.averageKnowledge.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paciencia"}),e.jsx("span",{className:"font-medium",children:s.averagePatience.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Claridad"}),e.jsx("span",{className:"font-medium",children:s.averageClarity.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Puntualidad"}),e.jsx("span",{className:"font-medium",children:s.averagePunctuality.toFixed(1)})]})]})]})]})]});function P({instructorId:s}){const[a,i]=u.useState(!1),{data:c}=n({queryKey:[`/api/public/instructors/${s}/evaluation-stats`]}),{data:t,isLoading:j}=n({queryKey:[`/api/public/instructors/${s}/evaluations`]});if(j)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-100 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse"})]});if(!t||t.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sin evaluaciones públicas"}),e.jsx("p",{className:"text-gray-600",children:"Este instructor aún no tiene evaluaciones aprobadas de ciudadanos."})]});const N=a?t:t.slice(0,3);return e.jsxs("div",{className:"space-y-6",children:[c&&e.jsx(C,{stats:c}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Evaluaciones de Ciudadanos (",t.length,")"]}),e.jsx("div",{className:"space-y-4",children:N.map(r=>e.jsx(w,{evaluation:r},r.id))}),t.length>3&&e.jsx("div",{className:"text-center mt-6",children:e.jsx(v,{variant:"outline",onClick:()=>i(!a),className:"text-green-600 border-green-200 hover:bg-green-50",children:a?"Mostrar menos evaluaciones":`Ver todas las evaluaciones (${t.length})`})})]})]})}export{P as I};
