import{c as F,a2 as c,l as O,ae as B,ag as Q,u as R,j as e,aX as C,f as P,i as _,M as g,L as j,B as r,bZ as H,a4 as K,O as U,Q as k,V as A,W as S,Y as E,_ as t,a5 as W,a6 as X,g as Y,h as Z,ab as J,au as ee,o as p,aq as se}from"./index-D5qLf1ib.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=F("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=F("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),te=()=>{const[x,v]=c.useState("grid"),[n,q]=c.useState(""),[o,$]=c.useState("all"),[l,I]=c.useState("all"),{toast:f}=O(),V=B(),d=Q({mutationFn:async({space:a,isActive:i})=>se(`/api/advertising-management/spaces/${a.id}`,{method:"PUT",data:{name:a.name,description:a.description,page_type:a.page_type,position:a.position,is_active:!i}}),onSuccess:a=>{V.invalidateQueries({queryKey:["/api/advertising-management/spaces"]}),f({title:"Espacio actualizado",description:`El espacio ha sido ${a.is_active?"activado":"desactivado"} correctamente.`})},onError:a=>{f({title:"Error",description:"No se pudo actualizar el espacio. Intenta nuevamente.",variant:"destructive"}),console.error("Error toggling space:",a)}}),{data:m,isLoading:z,error:ae}=R({queryKey:["/api/advertising-management/spaces"],queryFn:async()=>{const a=await fetch("/api/advertising-management/spaces");if(!a.ok)throw new Error(`Error al obtener espacios publicitarios: ${a.status}`);return a.json()}}),h=c.useMemo(()=>!m||!Array.isArray(m)?{}:m.filter(i=>{var y,b,w;const s=n===""||((y=i.name)==null?void 0:y.toLowerCase().includes(n.toLowerCase()))||((b=i.description)==null?void 0:b.toLowerCase().includes(n.toLowerCase()))||((w=i.category)==null?void 0:w.toLowerCase().includes(n.toLowerCase())),u=o==="all"||i.page_type===o,G=l==="all"||l==="active"&&i.is_active||l==="inactive"&&!i.is_active;return s&&u&&G}).reduce((i,s)=>(i[s.page_type]||(i[s.page_type]=[]),i[s.page_type].push(s),i),{}),[m,n,o,l]),D=a=>({parks:"Parques","park-landing":"Landing Pages de Parques",activities:"Actividades","activity-detail":"Detalles de Actividades",instructors:"Instructores",concessions:"Concesiones","tree-species":"Especies Arbóreas",volunteers:"Voluntarios",home:"Página Principal"})[a]||a,N=a=>({header:"Cabecera",sidebar:"Barra lateral",footer:"Pie de página",content:"Contenido",profile:"Perfil",gallery:"Galería",hero:"Hero"})[a]||a,T=a=>({parks:"/parks","park-landing":"/parks",activities:"/activities","activity-detail":"/activities",instructors:"/instructors",concessions:"/concessions","tree-species":"/tree-species",volunteers:"/volunteers",home:"/"})[a]||"/";return z?e.jsx(C,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Cargando espacios publicitarios..."})})}):e.jsx(C,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{className:"bg-gray-50",children:e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Espacios Publicitarios"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestión de espacios publicitarios organizados por páginas del sistema"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{href:"/admin/advertising/advertisements",children:e.jsxs(r,{className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Gestionar Anuncios"]})}),e.jsx(j,{href:"/admin/advertising/space-mappings",children:e.jsxs(r,{className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Ver Mapeos"]})})]})]})})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(U,{placeholder:"Buscar por nombre, descripción o anuncio...",value:n,onChange:a=>q(a.target.value),className:"pl-10"})]})}),e.jsxs(k,{value:o,onValueChange:$,children:[e.jsx(A,{className:"w-full md:w-48",children:e.jsx(S,{placeholder:"Filtrar por página"})}),e.jsxs(E,{children:[e.jsx(t,{value:"all",children:"Todas las páginas"}),e.jsx(t,{value:"parks",children:"Parques"}),e.jsx(t,{value:"park-landing",children:"Landing Pages"}),e.jsx(t,{value:"activities",children:"Actividades"}),e.jsx(t,{value:"instructors",children:"Instructores"}),e.jsx(t,{value:"concessions",children:"Concesiones"}),e.jsx(t,{value:"tree-species",children:"Especies Arbóreas"}),e.jsx(t,{value:"volunteers",children:"Voluntarios"}),e.jsx(t,{value:"home",children:"Página Principal"})]})]}),e.jsxs(k,{value:l,onValueChange:I,children:[e.jsx(A,{className:"w-full md:w-48",children:e.jsx(S,{placeholder:"Filtrar por estado"})}),e.jsxs(E,{children:[e.jsx(t,{value:"all",children:"Todos los estados"}),e.jsx(t,{value:"active",children:"Espacios activos"}),e.jsx(t,{value:"inactive",children:"Espacios inactivos"}),e.jsx(t,{value:"with_ad",children:"Con anuncio"}),e.jsx(t,{value:"without_ad",children:"Sin anuncio"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[Object.keys(h).length," páginas con espacios publicitarios"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:x==="grid"?"default":"outline",size:"sm",onClick:()=>v("grid"),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(r,{variant:x==="list"?"default":"outline",size:"sm",onClick:()=>v("list"),children:e.jsx(X,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(h).map(([a,i])=>e.jsxs(P,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-blue-600"}),D(a)]}),e.jsxs(J,{children:[i.length," espacios publicitarios configurados"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(j,{href:T(a),target:"_blank",children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Ver Página"]})})})]})}),e.jsx(_,{children:x==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i&&Array.isArray(i)?i.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:s.is_active?"default":"secondary",children:N(s.position)}),e.jsx(p,{variant:"outline",children:s.category||"General"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]}),e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.name||`Espacio ${s.id}`}),s.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Dimensiones:"}),e.jsx("span",{className:"text-sm",children:s.dimensions})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Formatos:"}),e.jsx("span",{className:"text-sm",children:s.allowed_formats&&Array.isArray(s.allowed_formats)?s.allowed_formats.map(u=>u.split("/")[1]).join(", "):"No especificado"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Espacio Publicitario Configurado"})]}),e.jsx("p",{className:"text-xs text-blue-700",children:"Este espacio está listo para mostrar anuncios"})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx(r,{variant:s.is_active?"outline":"default",size:"sm",onClick:()=>d.mutate({space:s,isActive:s.is_active}),disabled:d.isPending,className:"flex items-center gap-2",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-3 w-3"}),"Desactivar"]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-3 w-3"}),"Activar"]})})})]},`${s.id}-${s.page_type}-${s.position}`)):e.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No hay espacios disponibles"})}):e.jsx("div",{className:"space-y-4",children:i&&Array.isArray(i)?i.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name||`Espacio ${s.id}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:[N(s.position)," - ",s.dimensions]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:s.category||"General"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:s.is_active?"default":"secondary",children:s.is_active?"Activo":"Inactivo"}),e.jsx(r,{variant:s.is_active?"outline":"default",size:"sm",onClick:()=>d.mutate({space:s,isActive:s.is_active}),disabled:d.isPending,className:"flex items-center gap-2",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-3 w-3"}),"Desactivar"]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-3 w-3"}),"Activar"]})})]})]},`${s.id}-${s.page_type}-${s.position}-list`)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay espacios disponibles"})})})]},a))}),Object.keys(h).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No se encontraron espacios publicitarios"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Ajusta los filtros o verifica que existan espacios configurados"})]})]})})};export{te as default};
