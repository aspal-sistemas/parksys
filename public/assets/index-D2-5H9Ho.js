import{aD as z,Y as j,e as H,u as C,a8 as q,j as e,aI as g,C as K,a as $,b as G,a4 as v,a3 as J,B as d,cg as S,h as O,c as Q,Z as Y,I as Z,z as U,H as W,J as X,K as ee,N as i,bh as se,bi as ae,bj as N,bk as r,bl as te,bm as t,f as re,cr as P,cs as le,ct as ne,cu as ie,cv as ce,cw as de,cx as oe,ai as xe,cy as me}from"./index-VG22aPDC.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=z("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),je=()=>{const[l,T]=j.useState(""),[o,L]=j.useState("all"),[n,x]=j.useState(1),m=10,{toast:p}=H(),{data:k=[],isLoading:D,isError:I,refetch:b}=C({queryKey:["/api/volunteers/recognitions/all"]}),h=q({mutationFn:async()=>await xe("POST","/api/admin/seed/recognitions"),onSuccess:()=>{p({title:"Datos de muestra cargados",description:"Los reconocimientos de muestra se han cargado correctamente"}),b()},onError:s=>{console.error("Error al cargar datos de muestra:",s),p({title:"Error",description:"No se pudieron cargar los datos de muestra. Intente nuevamente.",variant:"destructive"})}}),{data:f=[]}=C({queryKey:["/api/volunteers"]}),y=k.filter(s=>{if(!s||!s.recognition_type||!s.reason)return!1;const a=f.find(M=>M.id===s.volunteer_id),u=a?a.fullName:`Voluntario ID: ${s.volunteer_id}`,B=l===""||u.toLowerCase().includes(l.toLowerCase())||s.recognition_type.toLowerCase().includes(l.toLowerCase())||s.reason.toLowerCase().includes(l.toLowerCase()),F=o==="all"||s.recognition_type===o;return B&&F}),w=y.slice((n-1)*m,n*m),c=Math.ceil(y.length/m),_=s=>{const a=f.find(u=>u.id===s);return a?a.fullName:`Voluntario ID: ${s}`},R=s=>`Administrador ID: ${s}`,E=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),V=s=>{switch(s.toLowerCase()){case"diploma":return e.jsx(v,{className:"h-5 w-5 text-blue-500"});case"medal":return e.jsx(me,{className:"h-5 w-5 text-yellow-500"});case"certificate":return e.jsx(P,{className:"h-5 w-5 text-green-500"});case"level-upgrade":return e.jsx(he,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(v,{className:"h-5 w-5 text-gray-500"})}},A=s=>{if(!s)return"bg-gray-200 text-gray-800";switch(s.toLowerCase()){case"bronze":return"bg-amber-700 text-white";case"silver":return"bg-gray-400 text-white";case"gold":return"bg-yellow-500 text-white";case"platinum":return"bg-blue-600 text-white";default:return"bg-gray-200 text-gray-800"}};return D?e.jsx(g,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):I?e.jsx(g,{children:e.jsx("div",{className:"p-4 bg-red-50 text-red-500 rounded-md",children:"Error al cargar los reconocimientos. Por favor, intente nuevamente."})}):e.jsx(g,{children:e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs(K,{className:"border-0 shadow-md",children:[e.jsx($,{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(G,{className:"text-2xl font-bold flex items-center",children:[e.jsx(v,{className:"mr-2 h-6 w-6"}),"Reconocimientos de Voluntarios"]}),e.jsx(J,{className:"text-gray-100 mt-1",children:"GestiÃ³n de reconocimientos otorgados a voluntarios"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:()=>h.mutate(),variant:"secondary",className:"bg-green-600 text-white hover:bg-green-700",disabled:h.isPending,children:h.isPending?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-b-0 border-r-0 border-white rounded-full"}),"Cargando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Cargar datos de muestra"]})}),e.jsxs(d,{variant:"default",className:"bg-white text-blue-700 hover:bg-gray-100",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Nuevo Reconocimiento"]})]})]})}),e.jsxs(Q,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(Z,{type:"search",placeholder:"Buscar reconocimiento...",className:"pl-8",value:l,onChange:s=>T(s.target.value)})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(U,{value:o,onValueChange:L,children:[e.jsx(W,{children:e.jsx(X,{placeholder:"Filtrar por tipo"})}),e.jsxs(ee,{children:[e.jsx(i,{value:"all",children:"Todos los tipos"}),e.jsx(i,{value:"diploma",children:"Diplomas"}),e.jsx(i,{value:"medal",children:"Medallas"}),e.jsx(i,{value:"certificate",children:"Certificados"}),e.jsx(i,{value:"level-upgrade",children:"Ascensos de nivel"})]})]})}),e.jsx("div",{children:e.jsxs(d,{onClick:()=>b(),variant:"outline",className:"w-full md:w-auto",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Actualizar"]})})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(se,{children:[e.jsx(ae,{className:"bg-gray-100",children:e.jsxs(N,{children:[e.jsx(r,{className:"w-16",children:"ID"}),e.jsx(r,{children:"Voluntario"}),e.jsx(r,{children:"Tipo"}),e.jsx(r,{children:"Nivel"}),e.jsx(r,{children:"Motivo"}),e.jsx(r,{children:"Fecha"}),e.jsx(r,{className:"text-right",children:"Acciones"})]})}),e.jsx(te,{children:w.length===0?e.jsx(N,{children:e.jsx(t,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No se encontraron reconocimientos"})}):w.map(s=>e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:s.id}),e.jsxs(t,{children:[e.jsx("div",{className:"font-medium",children:_(s.volunteer_id)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.volunteer_id]})]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[V(s.recognition_type),e.jsx("span",{children:s.recognition_type})]})}),e.jsx(t,{children:s.level?e.jsx(re,{className:A(s.level),children:s.level}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(t,{children:e.jsx("div",{className:"max-w-xs truncate",title:s.reason,children:s.reason})}),e.jsxs(t,{children:[e.jsx("div",{className:"text-sm",children:E(s.issued_at)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Por: ",R(s.issued_by_id)]})]}),e.jsx(t,{className:"text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:e.jsxs(d,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Editar"})]})})})]},s.id))})]})}),c>1&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(le,{children:e.jsxs(ne,{children:[e.jsx(ie,{onClick:()=>x(s=>Math.max(1,s-1)),disabled:n===1}),[...Array(c)].map((s,a)=>e.jsx(ce,{children:e.jsx(de,{onClick:()=>x(a+1),isActive:n===a+1,children:a+1})},a+1)),e.jsx(oe,{onClick:()=>x(s=>Math.min(c,s+1)),disabled:n===c})]})})})]})]})})})};export{je as default};
