import{e as Fs,a6 as Es,Y as c,u as K,a8 as ee,j as e,aB as Ls,B as n,aW as _e,C as m,a as N,b as f,U as Be,c as h,ak as Ms,h as xe,F as Is,aH as As,aI as Os,aJ as me,aK as he,a3 as ue,ba as Ke,bb as Qe,bc as je,bd as w,be as Ue,bf as C,b0 as qs,Z as $s,I as V,z as u,H as j,J as p,K as g,N as l,aj as Ye,f as E,b5 as Vs,b3 as Je,b4 as Ge,aD as We,aL as ks,aT as zs,aU as Rs,aV as Xs,aQ as Hs,D as k,r as z,t as R,v as X,w as H,y as d,m as _s,ah as se}from"./index-BBGHPKhn.js";import{P as Ze}from"./play-BgZqiqGv.js";import{H as es}from"./history-BhGxxa0b.js";function Ys(){const{toast:y}=Fs(),Q=Es(),[ss,as]=c.useState("periods"),[L,we]=c.useState(""),[ae,Ce]=c.useState(null),[ls,U]=c.useState(!1),[ts,Y]=c.useState(!1),[rs,le]=c.useState(!1),[ns,te]=c.useState(!1),[i,De]=c.useState(null),[is,re]=c.useState(!1),[_,Pe]=c.useState(null),[cs,Te]=c.useState(!1),[P,ds]=c.useState(null),[J,Fe]=c.useState(""),[G,Ee]=c.useState(""),[W,os]=c.useState(""),[xs,ne]=c.useState(!1),[r,ms]=c.useState(null),[D,ie]=c.useState(1),[M,Le]=c.useState(""),[I,Me]=c.useState(""),[A,Ie]=c.useState(""),pe=10,{data:T=[],isLoading:hs}=K({queryKey:["/api/hr/employees"],select:s=>s.filter(a=>a.status==="active")}),{data:B=[],isLoading:us}=K({queryKey:["/api/hr/payroll-concepts"]}),{data:Ae=[],isLoading:js}=K({queryKey:["/api/hr/employees",P,"payroll-history",J,G,W],queryFn:async()=>{if(!P)return[];const s=new URLSearchParams;J&&J!=="all"&&s.append("year",J),G&&G!=="all"&&s.append("month",G),W&&W!=="all"&&s.append("period",W);const a=s.toString(),t=`/api/hr/employees/${P}/payroll-history${a?`?${a}`:""}`;return(await fetch(t)).json()},enabled:!!P}),{data:v,isLoading:Bs}=K({queryKey:["/api/hr/employees",P,"payroll-summary"],queryFn:async()=>P?(await fetch(`/api/hr/employees/${P}/payroll-summary`)).json():null,enabled:!!P}),{data:ce=[],isLoading:ps}=K({queryKey:["/api/hr/payroll-periods"]});K({queryKey:["/api/hr/payroll-details",r==null?void 0:r.id],enabled:!!(r!=null&&r.id)});const ge=ee({mutationFn:async s=>se("/api/hr/payroll-periods",{method:"POST",data:s}),onSuccess:()=>{Q.invalidateQueries({queryKey:["/api/hr/payroll-periods"]}),U(!1),y({title:"Período creado",description:"El período de nómina se ha creado exitosamente"})},onError:s=>{y({title:"Error",description:"No se pudo crear el período de nómina",variant:"destructive"})}}),Ne=ee({mutationFn:async s=>se("/api/hr/payroll-periods/process",{method:"POST",data:s}),onSuccess:s=>{var a;Q.invalidateQueries({queryKey:["/api/hr/payroll-periods"]}),Y(!1),y({title:"Nómina procesada",description:`Se procesaron ${((a=s==null?void 0:s.processedEmployees)==null?void 0:a.length)||0} empleados exitosamente`})},onError:s=>{y({title:"Error",description:"No se pudo procesar la nómina",variant:"destructive"})}}),fe=ee({mutationFn:async s=>se("/api/hr/payroll-concepts",{method:"POST",data:s}),onSuccess:()=>{Q.invalidateQueries({queryKey:["/api/hr/payroll-concepts"]}),le(!1),y({title:"Concepto creado",description:"El concepto de nómina se ha creado exitosamente"})},onError:s=>{y({title:"Error",description:"No se pudo crear el concepto de nómina",variant:"destructive"})}}),ye=ee({mutationFn:async({id:s,data:a})=>se(`/api/hr/payroll-concepts/${s}`,{method:"PUT",data:a}),onSuccess:()=>{Q.invalidateQueries({queryKey:["/api/hr/payroll-concepts"]}),te(!1),De(null),y({title:"Concepto actualizado",description:"El concepto de nómina se ha actualizado exitosamente"})},onError:s=>{y({title:"Error",description:"No se pudo actualizar el concepto de nómina",variant:"destructive"})}}),ve=ee({mutationFn:async s=>se(`/api/hr/payroll-concepts/${s}`,{method:"DELETE"}),onSuccess:()=>{Q.invalidateQueries({queryKey:["/api/hr/payroll-concepts"]}),re(!1),Pe(null),y({title:"Concepto eliminado",description:"El concepto de nómina se ha eliminado exitosamente"})},onError:s=>{y({title:"Error",description:"No se pudo eliminar el concepto de nómina",variant:"destructive"})}}),gs=Array.from(new Set(T.map(s=>s.department))),Ns=Array.from(new Set(T.map(s=>s.position))),Oe=T.filter(s=>{const a=s.fullName.toLowerCase().includes(L.toLowerCase())||s.email.toLowerCase().includes(L.toLowerCase())||s.department.toLowerCase().includes(L.toLowerCase())||s.position.toLowerCase().includes(L.toLowerCase()),t=!M||M==="ALL_DEPARTMENTS"||s.department===M,o=!I||I==="ALL_POSITIONS"||s.position===I,x=!A||A==="ALL_STATUS"||s.status===A;return a&&t&&o&&x}),be=Oe.length,O=Math.ceil(be/pe),Se=(D-1)*pe,qe=Se+pe,fs=Oe.slice(Se,qe);c.useEffect(()=>{ie(1)},[L,M,I,A]);const $e=["#00a587","#067f5f","#bcd256","#8498a5","#22c55e"],Z=T.length,Ve=ce.find(s=>{const a=new Date,t=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;return s.period===t}),ys=Ve?parseFloat(Ve.totalAmount||"0"):0,vs=s=>{const a={draft:{color:"bg-gray-100 text-gray-800",label:"Borrador"},processing:{color:"bg-blue-100 text-blue-800",label:"Procesando"},calculated:{color:"bg-yellow-100 text-yellow-800",label:"Calculado"},approved:{color:"bg-green-100 text-green-800",label:"Aprobado"},paid:{color:"bg-[#00a587]/20 text-[#00a587]",label:"Pagado"}},t=a[s]||a.draft;return e.jsx(E,{className:t.color,children:t.label})},bs=s=>{s.preventDefault();const a=new FormData(s.currentTarget),t=a.get("periodType"),o=parseInt(a.get("year")),x=parseInt(a.get("month")),de=a.get("quincena"),q=[],oe=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];if(t==="quincenal"){if(de==="both"||de==="1"){const b=new Date(o,x-1,1),F=new Date(o,x-1,15),S=new Date(o,x-1,15);q.push({name:`${oe[x-1]} ${o} - 1ra Quincena`,startDate:b.toISOString().split("T")[0],endDate:F.toISOString().split("T")[0],payDate:S.toISOString().split("T")[0],periodType:"quincenal",status:"draft"})}if(de==="both"||de==="2"){const b=new Date(o,x-1,16),F=new Date(o,x,0),S=new Date(o,x,0);q.push({name:`${oe[x-1]} ${o} - 2da Quincena`,startDate:b.toISOString().split("T")[0],endDate:F.toISOString().split("T")[0],payDate:S.toISOString().split("T")[0],periodType:"quincenal",status:"draft"})}}else if(t==="mensual"){const b=new Date(o,x-1,1),F=new Date(o,x,0),S=new Date(o,x,0);q.push({name:`${oe[x-1]} ${o} - Mensual`,startDate:b.toISOString().split("T")[0],endDate:F.toISOString().split("T")[0],payDate:S.toISOString().split("T")[0],periodType:"mensual",status:"draft"})}else if(t==="semanal"){const b=new Date(o,x-1,1),F=new Date(o,x,0);let S=new Date(b),He=1;for(;S<=F;){const $=new Date(S);$.setDate(S.getDate()+6),$>F&&$.setTime(F.getTime()),q.push({name:`${oe[x-1]} ${o} - Semana ${He}`,startDate:S.toISOString().split("T")[0],endDate:$.toISOString().split("T")[0],payDate:$.toISOString().split("T")[0],periodType:"semanal",status:"draft"}),S=new Date($),S.setDate($.getDate()+1),He++}}let Re=0;const Xe=b=>{if(b>=q.length){y({title:"Períodos creados exitosamente",description:`Se crearon ${Re} período(s) de nómina`}),U(!1);return}ge.mutate(q[b],{onSuccess:()=>{Re++,Xe(b+1)},onError:()=>{y({title:"Error",description:`Error al crear el período ${q[b].name}`,variant:"destructive"})}})};Xe(0)},Ss=s=>{const a=T.map(t=>({id:t.id,fullName:t.fullName,salary:parseFloat(t.salary),department:t.department}));Ne.mutate({period:s.period,employees:a})},ws=s=>{s.preventDefault();const a=new FormData(s.currentTarget),t={code:a.get("code"),name:a.get("name"),type:a.get("type"),category:a.get("category"),isFixed:a.get("isFixed")==="true",formula:a.get("formula")||null,isActive:!0,expenseCategoryId:22,sortOrder:B.length+1};fe.mutate(t)},Cs=s=>{ms(s),ne(!0)},ke=s=>{De(s),te(!0)},ze=s=>{Pe(s),re(!0)},Ds=()=>{_&&ve.mutate(_.id)},Ps=s=>{ds(s),Fe(""),Ee(""),Te(!0)},Ts=s=>{if(s.preventDefault(),!i)return;const a=new FormData(s.currentTarget),t={code:a.get("code"),name:a.get("name"),type:a.get("type"),category:a.get("category"),isFixed:a.get("isFixed")==="true",formula:a.get("formula")||null,isActive:!0,expenseCategoryId:i.expenseCategoryId,sortOrder:i.sortOrder};ye.mutate({id:i.id,data:t})};return e.jsx(Ls,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Nómina"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema integral de nómina con integración automática a finanzas"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs(n,{onClick:()=>U(!0),className:"bg-[#00a587] hover:bg-[#067f5f] text-white",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Nuevo Período"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Empleados Activos"}),e.jsx(Be,{className:"h-4 w-4 text-[#00a587]"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-[#00a587]",children:Z}),e.jsx("p",{className:"text-xs text-gray-600",children:"Personal en nómina"})]})]}),e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Nómina Mensual"}),e.jsx(Ms,{className:"h-4 w-4 text-[#00a587]"})]}),e.jsxs(h,{children:[e.jsxs("div",{className:"text-2xl font-bold text-[#00a587]",children:["$",ys.toLocaleString("es-MX")]}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total mes actual"})]})]}),e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Períodos"}),e.jsx(xe,{className:"h-4 w-4 text-[#00a587]"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-[#00a587]",children:ce.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Períodos registrados"})]})]}),e.jsxs(m,{children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Conceptos"}),e.jsx(Is,{className:"h-4 w-4 text-[#00a587]"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold text-[#00a587]",children:B.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Conceptos configurados"})]})]})]}),e.jsxs(As,{value:ss,onValueChange:as,className:"space-y-6",children:[e.jsxs(Os,{className:"grid w-full grid-cols-4",children:[e.jsx(me,{value:"periods",children:"Períodos"}),e.jsx(me,{value:"employees",children:"Empleados"}),e.jsx(me,{value:"concepts",children:"Conceptos"}),e.jsx(me,{value:"reports",children:"Reportes"})]}),e.jsx(he,{value:"periods",children:e.jsxs(m,{children:[e.jsxs(N,{className:"bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-t-lg",children:[e.jsxs(f,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#00a587] to-[#067f5f] rounded-lg",children:e.jsx(xe,{className:"h-6 w-6 text-white"})}),"Períodos de Nómina"]}),e.jsx(ue,{className:"text-gray-700",children:"Gestión de períodos de pago y procesamiento de nómina"})]}),e.jsx(h,{className:"p-6",children:ps?e.jsx("div",{className:"text-center py-8",children:"Cargando períodos..."}):e.jsx("div",{className:"space-y-4",children:ce.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium",children:"No hay períodos registrados"}),e.jsx("p",{className:"text-sm",children:"Crea tu primer período de nómina para comenzar"})]}):e.jsxs(Ke,{children:[e.jsx(Qe,{children:e.jsxs(je,{children:[e.jsx(w,{children:"Período"}),e.jsx(w,{children:"Fechas"}),e.jsx(w,{children:"Estado"}),e.jsx(w,{children:"Empleados"}),e.jsx(w,{children:"Total"}),e.jsx(w,{children:"Acciones"})]})}),e.jsx(Ue,{children:ce.map(s=>e.jsxs(je,{children:[e.jsx(C,{className:"font-medium",children:s.period}),e.jsxs(C,{children:[new Date(s.startDate).toLocaleDateString("es-MX")," - ",new Date(s.endDate).toLocaleDateString("es-MX")]}),e.jsx(C,{children:vs(s.status)}),e.jsx(C,{children:s.employeesCount||0}),e.jsxs(C,{children:["$",parseFloat(s.totalAmount||"0").toLocaleString("es-MX")]}),e.jsx(C,{children:e.jsxs("div",{className:"flex gap-2",children:[s.status==="draft"&&e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>{Ce(s),Y(!0)},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Procesar"]}),e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>Cs(s),children:[e.jsx(qs,{className:"h-4 w-4 mr-1"}),"Ver"]})]})})]},s.id))})]})})})]})}),e.jsx(he,{value:"employees",children:e.jsxs(m,{children:[e.jsxs(N,{className:"bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-t-lg",children:[e.jsxs(f,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#00a587] to-[#067f5f] rounded-lg",children:e.jsx(Be,{className:"h-6 w-6 text-white"})}),"Empleados en Nómina"]}),e.jsx(ue,{className:"text-gray-700",children:"Personal activo incluido en el procesamiento de nómina"})]}),e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx($s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(V,{placeholder:"Buscar empleados...",value:L,onChange:s=>we(s.target.value),className:"pl-10"})]}),e.jsxs(u,{value:M,onValueChange:Le,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Filtrar por departamento"})}),e.jsxs(g,{children:[e.jsx(l,{value:"ALL_DEPARTMENTS",children:"Todos los departamentos"}),gs.map(s=>e.jsx(l,{value:s,children:s},s))]})]}),e.jsxs(u,{value:I,onValueChange:Me,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Filtrar por posición"})}),e.jsxs(g,{children:[e.jsx(l,{value:"ALL_POSITIONS",children:"Todas las posiciones"}),Ns.map(s=>e.jsx(l,{value:s,children:s},s))]})]}),e.jsxs(u,{value:A,onValueChange:Ie,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Filtrar por estado"})}),e.jsxs(g,{children:[e.jsx(l,{value:"ALL_STATUS",children:"Todos los estados"}),e.jsx(l,{value:"active",children:"Activo"}),e.jsx(l,{value:"inactive",children:"Inactivo"}),e.jsx(l,{value:"suspended",children:"Suspendido"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{children:["Mostrando ",Se+1,"-",Math.min(qe,be)," de ",be," empleados"]}),(L||M&&M!=="ALL_DEPARTMENTS"||I&&I!=="ALL_POSITIONS"||A&&A!=="ALL_STATUS")&&e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{we(""),Le("ALL_DEPARTMENTS"),Me("ALL_POSITIONS"),Ie("ALL_STATUS")},children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Limpiar filtros"]})]})]}),hs?e.jsx("div",{className:"text-center py-8",children:"Cargando empleados..."}):e.jsxs("div",{children:[e.jsxs(Ke,{children:[e.jsx(Qe,{children:e.jsxs(je,{children:[e.jsx(w,{children:"Empleado"}),e.jsx(w,{children:"Departamento"}),e.jsx(w,{children:"Posición"}),e.jsx(w,{children:"Salario Base"}),e.jsx(w,{children:"Estado"}),e.jsx(w,{children:"Acciones"})]})}),e.jsx(Ue,{children:fs.map(s=>e.jsxs(je,{children:[e.jsx(C,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.fullName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})}),e.jsx(C,{children:s.department}),e.jsx(C,{children:s.position}),e.jsxs(C,{children:["$",parseFloat(s.salary).toLocaleString("es-MX")]}),e.jsx(C,{children:e.jsx(E,{className:s.status==="active"?"bg-green-100 text-green-800":s.status==="inactive"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:s.status==="active"?"Activo":s.status==="inactive"?"Inactivo":"Suspendido"})}),e.jsx(C,{children:e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>Ps(s.id),className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Ver Ficha"]})})]},s.id))})]}),O>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Página ",D," de ",O]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>ie(D-1),disabled:D===1,children:"Anterior"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,O)},(s,a)=>{let t;return O<=5||D<=3?t=a+1:D>=O-2?t=O-4+a:t=D-2+a,e.jsx(n,{variant:D===t?"default":"outline",size:"sm",onClick:()=>ie(t),className:D===t?"bg-[#00a587] hover:bg-[#067f5f]":"",children:t},t)})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>ie(D+1),disabled:D===O,children:"Siguiente"})]})]})]})]})]})}),e.jsx(he,{value:"concepts",children:e.jsxs(m,{children:[e.jsx(N,{className:"bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(f,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#00a587] to-[#067f5f] rounded-lg",children:e.jsx(Vs,{className:"h-6 w-6 text-white"})}),"Conceptos de Nómina"]}),e.jsx(ue,{className:"text-gray-700",children:"Configuración de salarios, deducciones y prestaciones"})]}),e.jsxs(n,{onClick:()=>le(!0),className:"bg-[#00a587] hover:bg-[#067f5f] text-white",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Nuevo Concepto"]})]})}),e.jsx(h,{className:"p-6",children:us?e.jsx("div",{className:"text-center py-8",children:"Cargando conceptos..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#00a587]",children:"Conceptos de Ingresos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.filter(s=>s.type==="income").map(s=>e.jsx(m,{className:"border-l-4 border-l-green-500",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(E,{className:"bg-green-100 text-green-800",children:s.code}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",children:s.category}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>ke(s),className:"h-6 w-6 p-0",children:e.jsx(Je,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>ze(s),className:"h-6 w-6 p-0 text-red-600 hover:text-red-800",children:e.jsx(Ge,{className:"h-3 w-3"})})]})]})]}),e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.isFixed?"Monto fijo":"Calculado"}),s.formula&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Fórmula: ",s.formula]})]})},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:"Conceptos de Deducciones"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.filter(s=>s.type==="deduction").map(s=>e.jsx(m,{className:"border-l-4 border-l-red-500",children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(E,{className:"bg-red-100 text-red-800",children:s.code}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",children:s.category}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>ke(s),className:"h-6 w-6 p-0",children:e.jsx(Je,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:"ghost",onClick:()=>ze(s),className:"h-6 w-6 p-0 text-red-600 hover:text-red-800",children:e.jsx(Ge,{className:"h-3 w-3"})})]})]})]}),e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.isFixed?"Monto fijo":"Calculado"}),s.formula&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Fórmula: ",s.formula]})]})},s.id))})]})]})})]})}),e.jsx(he,{value:"reports",children:e.jsxs(m,{children:[e.jsxs(N,{className:"bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-t-lg",children:[e.jsxs(f,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#00a587] to-[#067f5f] rounded-lg",children:e.jsx(We,{className:"h-6 w-6 text-white"})}),"Reportes y Análisis"]}),e.jsx(ue,{className:"text-gray-700",children:"Análisis de costos de nómina y tendencias de personal"})]}),e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Distribución de Nómina por Departamento"})}),e.jsx(h,{children:e.jsx("div",{className:"h-64",children:e.jsx(ks,{width:"100%",height:"100%",children:e.jsxs(zs,{children:[e.jsx(Rs,{data:Object.entries(T.reduce((s,a)=>(s[a.department]=(s[a.department]||0)+parseFloat(a.salary),s),{})).map(([s,a])=>({name:s,value:a})),cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s} ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:Object.entries(T.reduce((s,a)=>(s[a.department]=(s[a.department]||0)+parseFloat(a.salary),s),{})).map((s,a)=>e.jsx(Xs,{fill:$e[a%$e.length]},`cell-${a}`))}),e.jsx(Hs,{formatter:s=>`$${Number(s).toLocaleString("es-MX")}`})]})})})})]}),e.jsxs(m,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Resumen de Personal"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Empleados"}),e.jsx("span",{className:"text-lg font-bold text-[#00a587]",children:Z})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Nómina Total"}),e.jsxs("span",{className:"text-lg font-bold text-[#00a587]",children:["$",T.reduce((s,a)=>s+parseFloat(a.salary),0).toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Promedio Salarial"}),e.jsxs("span",{className:"text-lg font-bold text-[#00a587]",children:["$",Z>0?Math.round(T.reduce((s,a)=>s+parseFloat(a.salary),0)/Z).toLocaleString("es-MX"):0]})]})]})})]})]})})]})})]}),e.jsx(k,{open:ls,onOpenChange:U,children:e.jsxs(z,{className:"max-w-md",children:[e.jsxs(R,{children:[e.jsx(X,{children:"Crear Nuevo Período de Nómina"}),e.jsx(H,{children:"Genera automáticamente períodos de nómina quincenales o mensuales"})]}),e.jsxs("form",{onSubmit:bs,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"periodType",children:"Tipo de Período"}),e.jsxs(u,{name:"periodType",defaultValue:"quincenal",required:!0,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Selecciona el tipo"})}),e.jsxs(g,{children:[e.jsx(l,{value:"quincenal",children:"Quincenal (1ra y 2da quincena)"}),e.jsx(l,{value:"mensual",children:"Mensual"}),e.jsx(l,{value:"semanal",children:"Semanal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"year",children:"Año"}),e.jsxs(u,{name:"year",defaultValue:new Date().getFullYear().toString(),required:!0,children:[e.jsx(j,{children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(l,{value:(new Date().getFullYear()-1).toString(),children:new Date().getFullYear()-1}),e.jsx(l,{value:new Date().getFullYear().toString(),children:new Date().getFullYear()}),e.jsx(l,{value:(new Date().getFullYear()+1).toString(),children:new Date().getFullYear()+1})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"month",children:"Mes"}),e.jsxs(u,{name:"month",defaultValue:(new Date().getMonth()+1).toString().padStart(2,"0"),required:!0,children:[e.jsx(j,{children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(l,{value:"01",children:"Enero"}),e.jsx(l,{value:"02",children:"Febrero"}),e.jsx(l,{value:"03",children:"Marzo"}),e.jsx(l,{value:"04",children:"Abril"}),e.jsx(l,{value:"05",children:"Mayo"}),e.jsx(l,{value:"06",children:"Junio"}),e.jsx(l,{value:"07",children:"Julio"}),e.jsx(l,{value:"08",children:"Agosto"}),e.jsx(l,{value:"09",children:"Septiembre"}),e.jsx(l,{value:"10",children:"Octubre"}),e.jsx(l,{value:"11",children:"Noviembre"}),e.jsx(l,{value:"12",children:"Diciembre"})]})]})]}),e.jsxs("div",{id:"quincenaOptions",className:"space-y-2",children:[e.jsx(d,{htmlFor:"quincena",children:"Quincena (solo para períodos quincenales)"}),e.jsxs(u,{name:"quincena",defaultValue:"both",children:[e.jsx(j,{children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(l,{value:"both",children:"Ambas quincenas (1ra y 2da)"}),e.jsx(l,{value:"1",children:"Primera quincena (1-15)"}),e.jsx(l,{value:"2",children:"Segunda quincena (16-fin de mes)"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Períodos que se crearán:"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("div",{children:"• Los períodos se generan automáticamente con fechas correctas"}),e.jsx("div",{children:"• Quincenal: 1-15 y 16-último día del mes"}),e.jsx("div",{children:"• Mensual: Todo el mes completo"}),e.jsx("div",{children:"• Fechas de pago: Último día laboral del período"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>U(!1),children:"Cancelar"}),e.jsx(n,{type:"submit",className:"bg-[#00a587] hover:bg-[#067f5f]",disabled:ge.isPending,children:ge.isPending?"Creando...":"Crear Período(s)"})]})]})]})}),e.jsx(k,{open:ts,onOpenChange:Y,children:e.jsxs(z,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(X,{children:"Procesar Nómina"}),e.jsx(H,{children:ae&&`Se procesará la nómina para el período ${ae.period} con ${Z} empleados activos`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Resumen del Procesamiento"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Se calcularán automáticamente los salarios base"}),e.jsx("li",{children:"• Se aplicarán las deducciones de IMSS (2.375%) e ISR"}),e.jsx("li",{children:"• Se generará automáticamente el registro en Finanzas"}),e.jsx("li",{children:"• El proceso no se puede deshacer una vez iniciado"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>Y(!1),children:"Cancelar"}),e.jsx(n,{onClick:()=>ae&&Ss(ae),className:"bg-[#00a587] hover:bg-[#067f5f]",disabled:Ne.isPending,children:Ne.isPending?"Procesando...":"Procesar Nómina"})]})]})]})}),e.jsx(k,{open:ns,onOpenChange:te,children:e.jsxs(z,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(X,{children:"Editar Concepto de Nómina"}),e.jsx(H,{children:"Modifica la configuración del concepto de nómina"})]}),e.jsxs("form",{onSubmit:Ts,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-code",children:"Código *"}),e.jsx(V,{id:"edit-code",name:"code",defaultValue:(i==null?void 0:i.code)||"",required:!0,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-name",children:"Nombre *"}),e.jsx(V,{id:"edit-name",name:"name",defaultValue:(i==null?void 0:i.name)||"",required:!0,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-type",children:"Tipo *"}),e.jsxs(u,{name:"type",defaultValue:(i==null?void 0:i.type)||"",required:!0,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Selecciona el tipo"})}),e.jsxs(g,{children:[e.jsx(l,{value:"income",children:"Ingreso"}),e.jsx(l,{value:"deduction",children:"Deducción"}),e.jsx(l,{value:"benefit",children:"Prestación"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-category",children:"Categoría *"}),e.jsxs(u,{name:"category",defaultValue:(i==null?void 0:i.category)||"",required:!0,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Selecciona la categoría"})}),e.jsxs(g,{children:[e.jsx(l,{value:"salary",children:"Salario"}),e.jsx(l,{value:"overtime",children:"Tiempo Extra"}),e.jsx(l,{value:"bonus",children:"Bonificación"}),e.jsx(l,{value:"tax",children:"Impuesto"}),e.jsx(l,{value:"insurance",children:"Seguro"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-isFixed",children:"Tipo de Cálculo"}),e.jsxs(u,{name:"isFixed",defaultValue:i!=null&&i.isFixed?"true":"false",children:[e.jsx(j,{children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(l,{value:"true",children:"Monto Fijo"}),e.jsx(l,{value:"false",children:"Calculado por Fórmula"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-formula",children:"Fórmula (opcional)"}),e.jsx(V,{id:"edit-formula",name:"formula",defaultValue:(i==null?void 0:i.formula)||"",placeholder:"Ej: salary * 0.15 o 500",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Para conceptos calculados. Puedes usar: salary, hours, días_trabajados"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>te(!1),children:"Cancelar"}),e.jsx(n,{type:"submit",className:"bg-[#00a587] hover:bg-[#067f5f]",disabled:ye.isPending,children:ye.isPending?"Actualizando...":"Actualizar Concepto"})]})]})]})}),e.jsx(k,{open:rs,onOpenChange:le,children:e.jsxs(z,{className:"max-w-2xl",children:[e.jsxs(R,{children:[e.jsx(X,{children:"Crear Nuevo Concepto de Nómina"}),e.jsx(H,{children:"Configura un nuevo concepto para usar en el procesamiento de nómina"})]}),e.jsxs("form",{onSubmit:ws,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"code",children:"Código *"}),e.jsx(V,{id:"code",name:"code",placeholder:"Ej: PRIMA_VAC",required:!0,className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Código único para identificar el concepto"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Nombre *"}),e.jsx(V,{id:"name",name:"name",placeholder:"Ej: Prima Vacacional",required:!0,className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",children:"Tipo *"}),e.jsxs(u,{name:"type",required:!0,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Selecciona el tipo"})}),e.jsxs(g,{children:[e.jsx(l,{value:"income",children:"Ingreso"}),e.jsx(l,{value:"deduction",children:"Deducción"}),e.jsx(l,{value:"benefit",children:"Prestación"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"category",children:"Categoría *"}),e.jsxs(u,{name:"category",required:!0,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Selecciona la categoría"})}),e.jsxs(g,{children:[e.jsx(l,{value:"salary",children:"Salario"}),e.jsx(l,{value:"overtime",children:"Tiempo Extra"}),e.jsx(l,{value:"bonus",children:"Bonificación"}),e.jsx(l,{value:"tax",children:"Impuesto"}),e.jsx(l,{value:"insurance",children:"Seguro"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"isFixed",children:"Tipo de Cálculo"}),e.jsxs(u,{name:"isFixed",defaultValue:"true",children:[e.jsx(j,{children:e.jsx(p,{})}),e.jsxs(g,{children:[e.jsx(l,{value:"true",children:"Monto Fijo"}),e.jsx(l,{value:"false",children:"Calculado por Fórmula"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"formula",children:"Fórmula (opcional)"}),e.jsx(V,{id:"formula",name:"formula",placeholder:"Ej: salary * 0.15 o 500",className:"w-full"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Para conceptos calculados. Puedes usar: salary, hours, días_trabajados"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Ejemplos de Conceptos"}),e.jsxs("div",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Aguinaldo:"})," Tipo: Ingreso, Categoría: Bonificación, Fórmula: salary * 0.5"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Prima Vacacional:"})," Tipo: Ingreso, Categoría: Bonificación, Fórmula: salary * 0.25"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vales de Despensa:"})," Tipo: Prestación, Monto Fijo: 1000"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>le(!1),children:"Cancelar"}),e.jsx(n,{type:"submit",className:"bg-[#00a587] hover:bg-[#067f5f]",disabled:fe.isPending,children:fe.isPending?"Creando...":"Crear Concepto"})]})]})]})}),e.jsx(k,{open:is,onOpenChange:re,children:e.jsxs(z,{className:"max-w-md",children:[e.jsxs(R,{children:[e.jsx(X,{children:"Eliminar Concepto de Nómina"}),e.jsx(H,{children:"¿Estás seguro de que deseas eliminar este concepto?"})]}),_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border-l-4 border-l-red-500",children:[e.jsx("h4",{className:"font-medium text-red-900",children:_.name}),e.jsxs("p",{className:"text-sm text-red-800",children:["Código: ",_.code]}),e.jsxs("p",{className:"text-sm text-red-800",children:["Tipo: ",_.type==="income"?"Ingreso":"Deducción"]})]}),e.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"⚠️ Esta acción no se puede deshacer. El concepto será eliminado permanentemente."})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{variant:"outline",onClick:()=>re(!1),children:"Cancelar"}),e.jsx(n,{variant:"destructive",onClick:Ds,disabled:ve.isPending,children:ve.isPending?"Eliminando...":"Eliminar"})]})]})]})}),e.jsx(k,{open:xs,onOpenChange:ne,children:e.jsxs(z,{className:"max-w-4xl",children:[e.jsxs(R,{children:[e.jsx(X,{children:"Detalles del Período de Nómina"}),e.jsx(H,{children:r&&`Información detallada del período ${r.period}`})]}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Período"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.period})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Estado"}),e.jsx(E,{className:r.status==="paid"?"bg-green-100 text-green-800":r.status==="calculated"?"bg-blue-100 text-blue-800":r.status==="draft"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800",children:r.status==="paid"?"Pagado":r.status==="calculated"?"Calculado":r.status==="draft"?"Borrador":r.status})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-purple-900",children:"Empleados"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.employeesCount||0})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-orange-900",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",r.totalAmount?parseFloat(r.totalAmount).toLocaleString("es-MX"):"0"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Fecha de Inicio"}),e.jsx("p",{className:"text-sm font-medium",children:r.startDate?new Date(r.startDate).toLocaleDateString("es-MX"):"No definida"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Fecha de Fin"}),e.jsx("p",{className:"text-sm font-medium",children:r.endDate?new Date(r.endDate).toLocaleDateString("es-MX"):"No definida"})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Procesado el"}),e.jsx("p",{className:"text-sm font-medium",children:r.processedAt?new Date(r.processedAt).toLocaleDateString("es-MX"):"No procesado"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Conceptos Aplicados"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-green-600 mb-2",children:"Ingresos"}),e.jsx("div",{className:"space-y-1 text-sm",children:B.filter(s=>s.type==="income").map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"font-medium",children:s.code})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-600 mb-2",children:"Deducciones"}),e.jsx("div",{className:"space-y-1 text-sm",children:B.filter(s=>s.type==="deduction").map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"font-medium",children:s.code})]},s.id))})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{variant:"outline",onClick:()=>ne(!1),children:"Cerrar"}),r.status==="draft"&&e.jsxs(n,{onClick:()=>{Ce(r),ne(!1),Y(!0)},className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Procesar Nómina"]})]})]})]})}),e.jsx(k,{open:cs,onOpenChange:Te,children:e.jsxs(z,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsxs(X,{className:"text-2xl text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#00a587] to-[#067f5f] rounded-lg",children:e.jsx(es,{className:"h-6 w-6 text-white"})}),"Ficha de Empleado - Historial de Pagos"]}),e.jsx(H,{children:"Consulta información personal, estadísticas de nómina y historial detallado de pagos del empleado."})]}),P&&v&&v.employee&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(N,{className:"bg-gradient-to-r from-[#00a587]/10 to-[#bcd256]/10 rounded-t-lg",children:e.jsxs(f,{className:"text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5"}),"Información Personal"]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Nombre Completo"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:v.employee.fullName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:v.employee.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Departamento"}),e.jsx("p",{className:"text-gray-900",children:v.employee.department})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Posición"}),e.jsx("p",{className:"text-gray-900",children:v.employee.position})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Salario Base"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["$",parseFloat(v.employee.salary).toLocaleString("es-MX")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fecha de Contratación"}),e.jsx("p",{className:"text-gray-900",children:new Date(v.employee.hireDate).toLocaleDateString("es-MX")})]})]})})]}),e.jsxs(m,{children:[e.jsx(N,{className:"bg-gradient-to-r from-[#bcd256]/10 to-[#8498a5]/10 rounded-t-lg",children:e.jsxs(f,{className:"text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Resumen Estadístico"]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Períodos Totales"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:v.statistics.totalPeriods})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Ingresos Totales"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",v.statistics.totalIncome.toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Deducciones Totales"}),e.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["$",v.statistics.totalDeductions.toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Pago Neto Promedio"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:["$",v.statistics.averageMonthlyPay.toLocaleString("es-MX")]})]})]})})]}),e.jsxs(m,{children:[e.jsx(N,{children:e.jsxs(f,{className:"text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(Ye,{className:"h-5 w-5"}),"Filtrar Historial"]})}),e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{htmlFor:"filterYear",children:"Año"}),e.jsxs(u,{value:J,onValueChange:Fe,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Todos los años"})}),e.jsxs(g,{children:[e.jsx(l,{value:"all",children:"Todos los años"}),e.jsx(l,{value:"2024",children:"2024"}),e.jsx(l,{value:"2025",children:"2025"})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{htmlFor:"filterMonth",children:"Mes"}),e.jsxs(u,{value:G,onValueChange:Ee,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Todos los meses"})}),e.jsxs(g,{children:[e.jsx(l,{value:"all",children:"Todos los meses"}),e.jsx(l,{value:"01",children:"Enero"}),e.jsx(l,{value:"02",children:"Febrero"}),e.jsx(l,{value:"03",children:"Marzo"}),e.jsx(l,{value:"04",children:"Abril"}),e.jsx(l,{value:"05",children:"Mayo"}),e.jsx(l,{value:"06",children:"Junio"}),e.jsx(l,{value:"07",children:"Julio"}),e.jsx(l,{value:"08",children:"Agosto"}),e.jsx(l,{value:"09",children:"Septiembre"}),e.jsx(l,{value:"10",children:"Octubre"}),e.jsx(l,{value:"11",children:"Noviembre"}),e.jsx(l,{value:"12",children:"Diciembre"})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(d,{htmlFor:"filterPeriod",children:"Quincena"}),e.jsxs(u,{value:W,onValueChange:os,children:[e.jsx(j,{children:e.jsx(p,{placeholder:"Todas las quincenas"})}),e.jsxs(g,{children:[e.jsx(l,{value:"all",children:"Todas las quincenas"}),e.jsx(l,{value:"1",children:"Primera quincena (1-15)"}),e.jsx(l,{value:"2",children:"Segunda quincena (16-31)"})]})]})]})]})})]}),e.jsxs(m,{children:[e.jsx(N,{className:"bg-gradient-to-r from-[#067f5f]/10 to-[#00a587]/10 rounded-t-lg",children:e.jsxs(f,{className:"text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),"Historial de Pagos"]})}),e.jsx(h,{className:"p-4",children:js?e.jsx("div",{className:"text-center py-8",children:"Cargando historial..."}):Ae.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay registros de pagos para los filtros seleccionados"}):e.jsx("div",{className:"space-y-4",children:Ae.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Período: ",s.period]}),e.jsx(E,{variant:"outline",className:s.status==="paid"?"bg-green-50 text-green-700":s.status==="approved"?"bg-blue-50 text-blue-700":"bg-yellow-50 text-yellow-700",children:s.status==="paid"?"Pagado":s.status==="approved"?"Aprobado":"Procesando"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("p",{className:"text-sm text-green-600",children:"Ingresos"}),e.jsxs("p",{className:"font-semibold text-green-700",children:["$",s.totalIncome.toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[e.jsx("p",{className:"text-sm text-red-600",children:"Deducciones"}),e.jsxs("p",{className:"font-semibold text-red-700",children:["$",s.totalDeductions.toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("p",{className:"text-sm text-blue-600",children:"Neto"}),e.jsxs("p",{className:"font-semibold text-blue-700",children:["$",s.netPay.toLocaleString("es-MX")]})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Detalles:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:s.details.map(a=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:a.conceptType==="income"?"text-green-600":"text-red-600",children:a.conceptName}),e.jsxs("span",{className:a.conceptType==="income"?"text-green-700 font-medium":"text-red-700 font-medium",children:["$",parseFloat(a.amount).toLocaleString("es-MX")]})]},a.id))})]})]},s.period))})})]})]})]})})]})})}export{Ys as default};
