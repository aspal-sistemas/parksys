import{Y as g,u as c,j as e,aB as u,aD as B,ak as S,ai as $,a$ as M,z as N,H as p,J as y,K as v,N as d,C as r,c as t,a as n,b as i,a3 as x,aL as f,aM as P,aN as R,aO as q,aP as k,aQ as b,dk as O,aR as w,a_ as L,aT as V,aU as U,aV as Y,a9 as z,f as h,aC as D}from"./index-BBGHPKhn.js";import{T as X}from"./trending-down-_xwArPfc.js";import{A as G,a as H}from"./arrow-up-right-BXNV1YVo.js";const W=()=>{const[j,C]=g.useState(2025),[A,E]=g.useState("monthly"),{data:a,isLoading:I}=c({queryKey:["/api/financial-dashboard/3"]});if(c({queryKey:["/api/cash-flow/3",j]}),c({queryKey:["/api/actual-incomes"]}),c({queryKey:["/api/actual-expenses"]}),c({queryKey:["/api/income-categories"]}),c({queryKey:["/api/expense-categories"]}),I)return e.jsx(u,{children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando dashboard financiero..."})]})});const o=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s),F=[{month:"Ene",ingresos:145e3,egresos:98e3,anterior:12e4},{month:"Feb",ingresos:167e3,egresos:112e3,anterior:135e3},{month:"Mar",ingresos:189e3,egresos:125e3,anterior:155e3},{month:"Abr",ingresos:203e3,egresos:134e3,anterior:178e3},{month:"May",ingresos:225e3,egresos:145e3,anterior:195e3},{month:"Jun",ingresos:248e3,egresos:156e3,anterior:21e4}],m=[{name:"Actividades",value:45,amount:112e3,color:"#3B82F6"},{name:"Concesiones",value:30,amount:75e3,color:"#10B981"},{name:"Patrocinios",value:15,amount:37500,color:"#F59E0B"},{name:"Estacionamiento",value:7,amount:17500,color:"#8B5CF6"},{name:"Otros",value:3,amount:7500,color:"#EF4444"}],K=[{title:"Ingresos Totales",value:o((a==null?void 0:a.totalIncome)||25e4),change:"+12.5%",trend:"up",icon:B,color:"text-green-600",bgColor:"bg-green-100"},{title:"Egresos Totales",value:o((a==null?void 0:a.totalExpenses)||156e3),change:"+5.2%",trend:"up",icon:X,color:"text-red-600",bgColor:"bg-red-100"},{title:"Utilidad Neta",value:o(((a==null?void 0:a.totalIncome)||25e4)-((a==null?void 0:a.totalExpenses)||156e3)),change:"+23.1%",trend:"up",icon:S,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Margen Operativo",value:`${((((a==null?void 0:a.totalIncome)||25e4)-((a==null?void 0:a.totalExpenses)||156e3))/((a==null?void 0:a.totalIncome)||25e4)*100).toFixed(1)}%`,change:"+8.7%",trend:"up",icon:$,color:"text-purple-600",bgColor:"bg-purple-100"}];return e.jsx(u,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(M,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Financiero"}),e.jsx("p",{className:"text-gray-600",children:"Analytics avanzado y resumen ejecutivo"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{value:j.toString(),onValueChange:s=>C(Number(s)),children:[e.jsx(p,{className:"w-32",children:e.jsx(y,{})}),e.jsxs(v,{children:[e.jsx(d,{value:"2024",children:"2024"}),e.jsx(d,{value:"2025",children:"2025"}),e.jsx(d,{value:"2026",children:"2026"})]})]}),e.jsxs(N,{value:A,onValueChange:E,children:[e.jsx(p,{className:"w-32",children:e.jsx(y,{})}),e.jsxs(v,{children:[e.jsx(d,{value:"monthly",children:"Mensual"}),e.jsx(d,{value:"quarterly",children:"Trimestral"}),e.jsx(d,{value:"yearly",children:"Anual"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:K.map((s,l)=>{const T=s.icon;return e.jsx(r,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(t,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.bgColor}`,children:e.jsx(T,{className:`h-6 w-6 ${s.color}`})}),e.jsxs("div",{className:"flex items-center gap-1",children:[s.trend==="up"?e.jsx(G,{className:"h-4 w-4 text-green-600"}):e.jsx(H,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:`text-sm font-medium ${s.trend==="up"?"text-green-600":"text-red-600"}`,children:s.change})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.value})]})]})},l)})}),e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Tendencia de Ingresos vs Egresos"}),e.jsx(x,{children:"Comparativo mensual con año anterior"})]}),e.jsx(t,{children:e.jsx(f,{width:"100%",height:300,children:e.jsxs(P,{data:F,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(q,{dataKey:"month"}),e.jsx(k,{tickFormatter:s=>`$${(s/1e3).toFixed(0)}K`}),e.jsx(b,{formatter:(s,l)=>[o(Number(s)),l==="ingresos"?"Ingresos":l==="egresos"?"Egresos":"Año Anterior"]}),e.jsx(O,{}),e.jsx(w,{type:"monotone",dataKey:"ingresos",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.3,name:"Ingresos 2025"}),e.jsx(w,{type:"monotone",dataKey:"egresos",stackId:"2",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.3,name:"Egresos 2025"}),e.jsx(L,{type:"monotone",dataKey:"anterior",stroke:"#6B7280",strokeDasharray:"5 5",name:"Ingresos 2024"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Distribución de Ingresos"}),e.jsx(x,{children:"Fuentes principales de ingresos del mes"})]}),e.jsx(t,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(f,{width:"100%",height:200,children:e.jsxs(V,{children:[e.jsx(U,{data:m,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:s,value:l})=>`${s}: ${l}%`,children:m.map((s,l)=>e.jsx(Y,{fill:s.color},`cell-${l}`))}),e.jsx(b,{formatter:(s,l)=>[`${s}%`,l]})]})}),e.jsx("div",{className:"space-y-3",children:m.map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-bold",children:o(s.amount)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.value,"%"]})]})]},l))})]})})]}),e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Distribución de Egresos"}),e.jsx(x,{children:"Principales categorías de gastos del mes"})]}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Actividades"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"45%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"45%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Concesiones"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"30%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"30%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Patrocinios"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"15%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"15%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Otros"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"10%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"10%"})]})]})]})})]}),e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsx(i,{children:"Distribución de Egresos"}),e.jsx(x,{children:"Principales categorías de gastos"})]}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Personal y Nómina"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"50%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"50%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Mantenimiento"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"25%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Seguridad"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:"15%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"15%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Gastos Operativos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-pink-500 h-2 rounded-full",style:{width:"10%"}})}),e.jsx("span",{className:"text-sm text-gray-600",children:"10%"})]})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-green-600"}),"Estado Financiero"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Liquidez"}),e.jsx(h,{variant:"default",className:"bg-green-100 text-green-800",children:"Buena"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Rentabilidad"}),e.jsx(h,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Estable"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Crecimiento"}),e.jsx(h,{variant:"default",className:"bg-green-100 text-green-800",children:"Positivo"})]})]})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-yellow-600"}),"Alertas"]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsx("p",{className:"text-yellow-800",children:"Presupuesto de mantenimiento al 85%"})}),e.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded",children:e.jsx("p",{className:"text-blue-800",children:"Ingresos por concesiones en crecimiento"})})]})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Acciones Rápidas"})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full text-left p-2 text-sm bg-gray-50 hover:bg-gray-100 rounded transition-colors",children:"📊 Ver reporte mensual"}),e.jsx("button",{className:"w-full text-left p-2 text-sm bg-gray-50 hover:bg-gray-100 rounded transition-colors",children:"💰 Registrar nuevo ingreso"}),e.jsx("button",{className:"w-full text-left p-2 text-sm bg-gray-50 hover:bg-gray-100 rounded transition-colors",children:"📋 Revisar presupuesto"}),e.jsx("button",{className:"w-full text-left p-2 text-sm bg-gray-50 hover:bg-gray-100 rounded transition-colors",children:"🧮 Usar calculadora"})]})})]})]})]})})};export{W as default};
