import{a2 as g,u as E,j as e,aX as L,f as o,i as d,B as n,M as f,o as c,a4 as I,O as q,Q as z,V,W as R,Y as F,_ as k,a5 as O,a6 as Q,g as _,h as $,ab as G,L as H,au as K,m as W,bp as S}from"./index-D5qLf1ib.js";const Y=()=>{const[x,v]=g.useState("grid"),[m,N]=g.useState(""),[h,b]=g.useState("all"),{data:u,isLoading:A,error:B}=E({queryKey:["/api/advertising-management/space-mappings"]}),l=(u==null?void 0:u.data)||[];if(B)return e.jsx(L,{children:e.jsx(o,{children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:"Error al cargar los mapeos de espacios publicitarios"}),e.jsx(n,{onClick:()=>window.location.reload(),children:"Reintentar"})]})})});if(A)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});const j=s=>({homepage:"Página Principal",parks:"Parques","park-landing":"Landing Pages de Parques",activities:"Actividades","activity-detail":"Detalles de Actividad",concessions:"Concesiones",instructors:"Instructores","instructor-profile":"Perfil de Instructor",volunteers:"Voluntarios","tree-species":"Especies Arbóreas"})[s]||s,p=s=>({header:"Cabecera",sidebar:"Barra Lateral",footer:"Pie de Página",hero:"Área Principal",banner:"Banner"})[s]||s,y=s=>({hide:"Ocultar",placeholder:"Mostrar Placeholder",alternative:"Contenido Alternativo"})[s]||s,D=s=>({homepage:"/",parks:"/parks","park-landing":"/parque/bosque-los-colomos-5",activities:"/activities","activity-detail":"/activities",concessions:"/concessions",instructors:"/instructors","instructor-profile":"/instructor/87",volunteers:"/volunteers","tree-species":"/tree-species"})[s]||"/",M=Array.from(new Set(l==null?void 0:l.map(s=>s.pageType)))||[],w=(l==null?void 0:l.filter(s=>{if(!s||!s.pageType||!s.position)return!1;const i=!m||(()=>{var r;const t=m.toLowerCase();return(((r=s.space)==null?void 0:r.name)||"").toLowerCase().includes(t)||(s.pageType||"").toLowerCase().includes(t)||(s.position||"").toLowerCase().includes(t)||(s.fallbackBehavior||"").toLowerCase().includes(t)||j(s.pageType||"").toLowerCase().includes(t)||p(s.position||"").toLowerCase().includes(t)})(),a=h==="all"||s.pageType===h;return i&&a}))||[],T=w.reduce((s,i)=>(s[i.pageType]||(s[i.pageType]=[]),s[i.pageType].push(i),s),{});return e.jsx(L,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{className:"bg-gray-50",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mapeos de Espacios Publicitarios"}),e.jsx("p",{className:"text-gray-600",children:"Configuración de espacios publicitarios por página"})]})]}),e.jsxs(c,{variant:"outline",className:"text-lg px-3 py-1",children:[l.length," mapeos totales"]})]})})}),e.jsx(o,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Buscar espacios"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(q,{placeholder:"Buscar por nombre, página, posición...",value:m,onChange:s=>N(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"w-full md:w-48",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Filtrar por página"}),e.jsxs(z,{value:h,onValueChange:b,children:[e.jsx(V,{children:e.jsx(R,{placeholder:"Todas las páginas"})}),e.jsxs(F,{children:[e.jsx(k,{value:"all",children:"Todas las páginas"}),M.map(s=>e.jsx(k,{value:s,children:j(s)},s))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:x==="grid"?"default":"outline",size:"sm",onClick:()=>v("grid"),children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(n,{variant:x==="list"?"default":"outline",size:"sm",onClick:()=>v("list"),children:e.jsx(Q,{className:"h-4 w-4"})})]})]})})}),Object.entries(T).map(([s,i])=>e.jsxs(o,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-blue-600"}),j(s)]}),e.jsxs(G,{children:[i.length," espacios publicitarios configurados"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(H,{href:D(s),target:"_blank",children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Ver Página"]})})})]})}),e.jsx(d,{children:x==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(a=>{var t,r,C,P;return e.jsxs("div",{className:"border rounded-lg p-4 bg-white hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(c,{variant:a.isActive?"default":"secondary",children:p(a.position)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",a.spaceId]})]}),e.jsx("h3",{className:"font-semibold text-sm mb-2",children:((t=a.space)==null?void 0:t.name)||`Espacio ${a.spaceId}`}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Dimensiones:"}),e.jsx("span",{children:((r=a.space)==null?void 0:r.dimensions)||"No especificadas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Prioridad:"}),e.jsx(c,{variant:"outline",className:"text-xs",children:a.priority})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Comportamiento:"}),e.jsx("span",{children:y(a.fallbackBehavior)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Responsivo:"}),e.jsx(c,{variant:(C=a.layoutConfig)!=null&&C.responsive?"default":"secondary",className:"text-xs",children:(P=a.layoutConfig)!=null&&P.responsive?"Sí":"No"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-3 w-3 text-gray-500"}),e.jsxs("span",{children:["Actualizado: ",a.updatedAt?new Date(a.updatedAt).toLocaleDateString():"No disponible"]})]})]}),e.jsx("div",{className:"mt-3 flex gap-2",children:e.jsxs(n,{variant:"outline",size:"sm",className:"text-xs h-8",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"Configurar"]})})]},a.id)})}):e.jsx("div",{className:"space-y-3",children:i.map(a=>{var t,r;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:((t=a.space)==null?void 0:t.name)||`Espacio ${a.spaceId}`}),e.jsx(c,{variant:a.isActive?"default":"secondary",children:p(a.position)}),e.jsxs(c,{variant:"outline",className:"text-xs",children:["Prioridad ",a.priority]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Dimensiones: ",((r=a.space)==null?void 0:r.dimensions)||"No especificadas"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Comportamiento: ",y(a.fallbackBehavior)]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Actualizado: ",a.updatedAt?new Date(a.updatedAt).toLocaleDateString():"No disponible"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Configurar"]})})]},a.id)})})})]},s)),w.length===0&&e.jsx(o,{children:e.jsxs(d,{className:"p-12 text-center",children:[e.jsx(f,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No se encontraron mapeos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No hay espacios publicitarios que coincidan con los filtros seleccionados."}),e.jsx(n,{variant:"outline",onClick:()=>{N(""),b("all")},children:"Limpiar filtros"})]})})]})})};export{Y as default};
