import{al as F,Y as B,u as g,j as e,aB as y,B as w,aq as G,W as M,C as j,a as p,b as u,F as R,c as f,h as q,I as V,aH as k,aI as X,aJ as T,aK as S}from"./index-BBGHPKhn.js";function z(){const[,C]=F(),[c,I]=B.useState(new Date().toISOString().split("T")[0]),{data:K,isLoading:A}=g({queryKey:["/api/accounting/balance-sheet",c],enabled:!0}),{data:U,isLoading:E}=g({queryKey:["/api/accounting/income-statement",c],enabled:!0}),L=()=>{C("/admin/accounting/dashboard")},O=()=>{console.log("Exportando estados financieros a PDF...")},n=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(s),l={assets:{current:[{name:"Caja General",balance:15e4},{name:"Banco Santander",balance:28e4},{name:"Cuentas por Cobrar",balance:75e3},{name:"Inventario",balance:12e4}],fixed:[{name:"Edificios",balance:12e5},{name:"Equipo de Oficina",balance:85e3},{name:"Vehículos",balance:32e4},{name:"Depreciación Acumulada",balance:-18e4}]},liabilities:{current:[{name:"Cuentas por Pagar",balance:95e3},{name:"Impuestos por Pagar",balance:45e3},{name:"Nómina por Pagar",balance:65e3}],longTerm:[{name:"Préstamos Bancarios",balance:45e4},{name:"Obligaciones Laborales",balance:85e3}]},equity:[{name:"Capital Social",balance:8e5},{name:"Utilidades Retenidas",balance:225e3},{name:"Utilidad del Ejercicio",balance:85e3}]},i={revenue:[{name:"Ingresos por Servicios",amount:65e4},{name:"Ingresos por Concesiones",amount:18e4},{name:"Ingresos por Eventos",amount:95e3}],expenses:{operating:[{name:"Sueldos y Salarios",amount:35e4},{name:"Servicios Públicos",amount:65e3},{name:"Mantenimiento",amount:45e3},{name:"Materiales y Suministros",amount:85e3}],administrative:[{name:"Gastos de Oficina",amount:25e3},{name:"Seguros",amount:18e3},{name:"Depreciación",amount:35e3}]}},N=l.assets.current.reduce((s,a)=>s+a.balance,0),b=l.assets.fixed.reduce((s,a)=>s+a.balance,0),m=N+b,P=l.liabilities.current.reduce((s,a)=>s+a.balance,0),D=l.liabilities.longTerm.reduce((s,a)=>s+a.balance,0),r=P+D,d=l.equity.reduce((s,a)=>s+a.balance,0),t=i.revenue.reduce((s,a)=>s+a.amount,0),o=i.expenses.operating.reduce((s,a)=>s+a.amount,0),v=i.expenses.administrative.reduce((s,a)=>s+a.amount,0),x=o+v,h=t-x;return A||E?e.jsx(y,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 w-64 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-96 bg-gray-200 rounded animate-pulse"})]})}),e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},s))})]})}):e.jsx(y,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:L,className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Regresar"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Estados Financieros"}),e.jsx("p",{className:"text-gray-600",children:"Balance General y Estado de Resultados"})]})]}),e.jsxs(w,{onClick:O,className:"flex items-center space-x-2 bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{children:"Exportar PDF"})]})]}),e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),"Configuración del Reporte"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecciona la fecha de corte para generar los estados financieros"})]}),e.jsx(f,{children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex-1 max-w-xs",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Fecha de Corte"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(V,{type:"date",value:c,onChange:s=>I(s.target.value),className:"pl-9"})]})]})})})]}),e.jsxs(k,{defaultValue:"balance-sheet",className:"w-full",children:[e.jsxs(X,{className:"grid w-full grid-cols-2",children:[e.jsx(T,{value:"balance-sheet",children:"Balance General"}),e.jsx(T,{value:"income-statement",children:"Estado de Resultados"})]}),e.jsx(S,{value:"balance-sheet",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Balance General"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Al ",new Date(c).toLocaleDateString("es-MX")]})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#00a587] mb-4",children:"ACTIVOS"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Activos Circulantes"}),e.jsxs("div",{className:"space-y-1",children:[l.assets.current.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.balance)})]},a)),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Activos Circulantes"}),e.jsx("span",{className:"font-mono",children:n(N)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Activos Fijos"}),e.jsxs("div",{className:"space-y-1",children:[l.assets.fixed.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.balance)})]},a)),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Activos Fijos"}),e.jsx("span",{className:"font-mono",children:n(b)})]})]})]}),e.jsxs("div",{className:"flex justify-between border-t-2 pt-2 font-bold text-lg",children:[e.jsx("span",{children:"TOTAL ACTIVOS"}),e.jsx("span",{className:"font-mono",children:n(m)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#00a587] mb-4",children:"PASIVOS Y PATRIMONIO"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Pasivos"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium mb-1",children:"Pasivos Circulantes"}),e.jsx("div",{className:"space-y-1",children:l.liabilities.current.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.balance)})]},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium mb-1",children:"Pasivos a Largo Plazo"}),e.jsx("div",{className:"space-y-1",children:l.liabilities.longTerm.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.balance)})]},a))})]}),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Pasivos"}),e.jsx("span",{className:"font-mono",children:n(r)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Patrimonio"}),e.jsxs("div",{className:"space-y-1",children:[l.equity.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.balance)})]},a)),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Patrimonio"}),e.jsx("span",{className:"font-mono",children:n(d)})]})]})]}),e.jsxs("div",{className:"flex justify-between border-t-2 pt-2 font-bold text-lg",children:[e.jsx("span",{children:"TOTAL PASIVOS + PATRIMONIO"}),e.jsx("span",{className:"font-mono",children:n(r+d)})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Validación de Equilibrio:"}),e.jsx("span",{className:`font-mono ${m===r+d?"text-green-600":"text-red-600"}`,children:m===r+d?"Balance cuadrado correctamente":`Diferencia: ${n(Math.abs(m-(r+d)))}`})]})})]})]})}),e.jsx(S,{value:"income-statement",className:"space-y-4",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Estado de Resultados"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Del 1 de enero al ",new Date(c).toLocaleDateString("es-MX")]})]}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#00a587] mb-4",children:"INGRESOS"}),e.jsxs("div",{className:"space-y-1",children:[i.revenue.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.amount)})]},a)),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Ingresos"}),e.jsx("span",{className:"font-mono",children:n(t)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-[#00a587] mb-4",children:"GASTOS"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Gastos Operativos"}),e.jsxs("div",{className:"space-y-1",children:[i.expenses.operating.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.amount)})]},a)),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Gastos Operativos"}),e.jsx("span",{className:"font-mono",children:n(o)})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Gastos Administrativos"}),e.jsxs("div",{className:"space-y-1",children:[i.expenses.administrative.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"pl-4",children:s.name}),e.jsx("span",{className:"font-mono",children:n(s.amount)})]},a)),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Gastos Administrativos"}),e.jsx("span",{className:"font-mono",children:n(v)})]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-1 font-medium",children:[e.jsx("span",{children:"Total Gastos"}),e.jsx("span",{className:"font-mono",children:n(x)})]})]}),e.jsx("div",{className:"border-t-2 pt-4",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"UTILIDAD NETA"}),e.jsx("span",{className:`font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:n(h)})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Análisis de Rentabilidad"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Margen Bruto:"}),e.jsxs("div",{className:"font-mono",children:[((t-o)/t*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Margen Operativo:"}),e.jsxs("div",{className:"font-mono",children:[((t-x)/t*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Margen Neto:"}),e.jsxs("div",{className:"font-mono",children:[(h/t*100).toFixed(2),"%"]})]})]})]})]})})]})})]})]})})}export{z as default};
