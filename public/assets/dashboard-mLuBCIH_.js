import{u as d,j as e,aB as f,l as x,C as l,c as r,U as v,F as b,ak as P,S as F,a as o,b as m,a4 as T,f as u,h as w,cY as q,B as h,aD as A,X as j,s as p}from"./index-BBGHPKhn.js";const L=()=>{const{data:a,isLoading:M}=d({queryKey:["/api/sponsorship-dashboard"],queryFn:()=>p("/api/sponsorship-dashboard",{})}),{data:c}=d({queryKey:["/api/sponsors"],queryFn:()=>p("/api/sponsors",{})}),{data:g}=d({queryKey:["/api/sponsorship-contracts"],queryFn:()=>p("/api/sponsorship-contracts",{})}),{data:i}=d({queryKey:["/api/sponsorship-campaigns"],queryFn:()=>p("/api/sponsorship-campaigns",{})}),C=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"planificacion":return"bg-blue-100 text-blue-800";case"completada":return"bg-purple-100 text-purple-800";case"cancelada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=s=>{switch(s){case"active":return"Activo";case"planificacion":return"Planificación";case"completada":return"Completada";case"cancelada":return"Cancelada";default:return s}},N=(c==null?void 0:c.slice(0,5).map(s=>({...s,value:parseFloat(s.contractValue||"0")})).sort((s,t)=>t.value-s.value))||[],y=(g==null?void 0:g.filter(s=>{const t=new Date(s.endDate),n=new Date;return n.setMonth(n.getMonth()+3),t<=n&&s.status==="active"}))||[];return M?e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},s))})]})}):e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard de Patrocinios"}),e.jsx("p",{className:"text-gray-600",children:"Resumen general del sistema de patrocinios"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Última actualización: ",x(new Date,"dd/MM/yyyy HH:mm",{locale:j})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Patrocinadores"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(a==null?void 0:a.totalSponsors)||0})]}),e.jsx(v,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Contratos Activos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(a==null?void 0:a.activeContracts)||0})]}),e.jsx(b,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ingresos Totales"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["$",((a==null?void 0:a.totalRevenue)||0).toLocaleString("es-MX")]})]}),e.jsx(P,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Satisfacción Promedio"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[(a==null?void 0:a.avgSatisfaction)||0,"/10"]})]}),e.jsx(F,{className:"w-8 h-8 text-yellow-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Top Patrocinadores"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[N.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${t===0?"bg-yellow-500":t===1?"bg-gray-400":t===2?"bg-amber-600":"bg-gray-300"}`,children:t+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.category})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["$",s.value.toLocaleString("es-MX")]}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.level})]})]},s.id)),N.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay patrocinadores disponibles"})]})})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"Próximas Renovaciones"]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-4",children:[y.map(s=>{const t=c==null?void 0:c.find(D=>D.id===s.sponsorId),n=Math.ceil((new Date(s.endDate).getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:(t==null?void 0:t.name)||"Patrocinador Desconocido"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Vence el ",x(new Date(s.endDate),"dd/MM/yyyy",{locale:j})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-orange-600",children:[n," días"]}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.autoRenewal?"Auto-renovación":"Manual"})]})]},s.id)}),y.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay renovaciones próximas"})]})})]})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"Campañas Activas"]})}),e.jsxs(r,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(i==null?void 0:i.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx(u,{className:C(s.status),children:S(s.status)})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Presupuesto:"}),e.jsxs("span",{className:"font-medium",children:["$",parseFloat(s.budget||"0").toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Patrocinadores:"}),e.jsx("span",{className:"font-medium",children:s.sponsorsCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ingresos:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["$",parseFloat(s.revenue||"0").toLocaleString("es-MX")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Periodo:"}),e.jsxs("span",{className:"font-medium",children:[x(new Date(s.startDate),"dd/MM",{locale:j})," - ",x(new Date(s.endDate),"dd/MM",{locale:j})]})]})]})]},s.id)))||[]}),(!i||i.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay campañas registradas"})]})]}),e.jsxs(l,{children:[e.jsx(o,{children:e.jsx(m,{children:"Acciones Rápidas"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(h,{variant:"outline",className:"flex flex-col items-center gap-2 h-20",children:[e.jsx(v,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Nuevo Patrocinador"})]}),e.jsxs(h,{variant:"outline",className:"flex flex-col items-center gap-2 h-20",children:[e.jsx(b,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Crear Contrato"})]}),e.jsxs(h,{variant:"outline",className:"flex flex-col items-center gap-2 h-20",children:[e.jsx(w,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Nuevo Evento"})]}),e.jsxs(h,{variant:"outline",className:"flex flex-col items-center gap-2 h-20",children:[e.jsx(A,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Ver Métricas"})]})]})})]})]})})};export{L as default};
