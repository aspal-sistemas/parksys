# ParkSys - Parks Management System

## Overview

This is a comprehensive municipal parks management system built with a modern full-stack architecture. The application provides tools for managing parks, activities, volunteers, instructors, assets, finances, and various other municipal park operations. The system includes role-based access control and supports multiple modules for different aspects of park management.

## System Architecture

The application follows a client-server architecture with the following stack:

- **Frontend**: React with TypeScript, Vite for build tooling, Tailwind CSS for styling
- **Backend**: Node.js with Express server, TypeScript
- **Database**: PostgreSQL with Drizzle ORM for type-safe database operations
- **Authentication**: Role-based authentication system with multiple user types
- **File Management**: Multer for file uploads with local storage
- **UI Components**: Radix UI components with shadcn/ui styling system

## Key Components

### Frontend Architecture
- **Component Library**: Custom UI components built on top of Radix UI primitives
- **State Management**: React Query for server state management
- **Routing**: React Router for client-side navigation
- **Forms**: React Hook Form with Zod validation
- **Styling**: Tailwind CSS with CSS variables for theming

### Backend Architecture
- **API Structure**: RESTful API with Express router modules
- **Database Layer**: Drizzle ORM with PostgreSQL adapter
- **File Storage**: Local file system storage for uploads
- **Middleware**: Authentication, CORS, and file upload middleware

### Database Schema
The system includes comprehensive schemas for:
- **User Management**: Users, roles, authentication
- **Parks**: Parks, amenities, locations, zones
- **Activities**: Events, scheduling, categorization
- **Volunteers**: Registration, participation tracking, evaluations
- **Instructors**: Assignment management, qualifications
- **Assets**: Equipment tracking, maintenance schedules
- **Finance**: Budget management, income/expense tracking
- **Trees**: Species catalog, inventory management
- **Concessions**: Contract management, payments, locations

## Data Flow

1. **Client Requests**: React frontend makes API calls using Axios
2. **Server Processing**: Express routes handle requests with appropriate middleware
3. **Database Operations**: Drizzle ORM executes type-safe database queries
4. **Response Flow**: JSON responses sent back to client for state updates
5. **File Handling**: Multer processes file uploads to local storage

## External Dependencies

### Core Dependencies
- **@neondatabase/serverless**: PostgreSQL connection adapter
- **@tanstack/react-query**: Server state management
- **@radix-ui/***: UI component primitives
- **drizzle-orm**: Type-safe ORM for database operations
- **express**: Web server framework
- **multer**: File upload handling
- **bcryptjs**: Password hashing
- **zod**: Schema validation

### Development Tools
- **Vite**: Build tool and development server
- **TypeScript**: Type safety across the stack
- **Tailwind CSS**: Utility-first CSS framework
- **tsx**: TypeScript execution for development

## Deployment Strategy

The application is configured for Replit deployment with:

- **Development Mode**: `npm run dev` starts both frontend and backend
- **Production Build**: `npm run build` creates optimized bundles
- **Database**: PostgreSQL module configured in Replit
- **Port Configuration**: Frontend on port 5000, auto-scaling deployment
- **File Storage**: Public directory for uploaded assets

The system uses environment variables for database connection and supports both development and production configurations.

## Changelog

- January 30, 2025. Navegación administrativa alineada a la izquierda con layout justify-between - REORGANIZACIÓN LAYOUT COMPLETO: Todos los elementos de navegación administrativa (Panel de Control, Gestión, O & M, Admin & Finanzas, Mkt & Comm, RH) justificados a la izquierda del header usando flex justify-between. Botón "Ver Sitio Público" permanece aislado en el lado derecho. Panel de Control con icono Home movido del sidebar al header como primer elemento de navegación izquierda. Dropdowns de menús cambiados de absolute right-0 a absolute left-0 para alineación izquierda consistente. Layout mejorado separa claramente navegación administrativa izquierda de acciones del usuario derecha. Header aumentado a h-20 (80px) con padding pt-20 en App.tsx. Navegación ejecutiva optimizada para flujo de trabajo eficiente con acceso directo a todos los módulos sin usar sidebar.
- January 30, 2025. Etiquetas BETA agregadas a módulos O&M, Admin & Finanzas y Recursos Humanos - IDENTIFICACIÓN VISUAL DE MÓDULOS EN DESARROLLO: Implementadas etiquetas BETA naranjas en sidebar administrativo para identificar módulos que están en fase de pruebas y desarrollo. Agregadas a los módulos "O & M" (Operaciones y Mantenimiento), "Admin & Finanzas" y "Recursos Humanos" usando badges con estilo px-1.5 py-0.5 text-xs font-semibold bg-orange-100 text-orange-800 rounded-full. Actualizada interfaz ModuleNavProps para aceptar title como string | React.ReactNode permitiendo elementos JSX complejos en títulos de módulos. Sistema visual mejorado para comunicar claramente qué funcionalidades están en desarrollo activo.
- January 30, 2025. Sistema de roles administrativos completamente coherente implementado - RESTRICCIÓN COMPLETA DE ROLES: Modal de creación de usuarios limitado a solo roles administrativos (admin, super_admin, moderator, operator) igual que la lista de usuarios. Eliminados todos los roles no administrativos (director, manager, supervisor, ciudadano, voluntario, instructor, guardaparques, guardia, concesionario, user) del dropdown de selección de rol. Filtro de roles en listado también actualizado para consistencia. Valor por defecto del rol cambiado de 'user' a 'admin' para nuevos usuarios. Sistema completamente coherente entre listado, filtros y creación de usuarios administrativos únicamente.
- January 29, 2025. Limpieza de tabla users implementada con roles inactivos - SEPARACIÓN CORRECTA DE DATOS: Resuelto problema de duplicación de usuarios en la tabla users donde empleados, voluntarios, concesionarios e instructores aparecían tanto en users como en sus tablas específicas (employees, volunteers, concessionaires, instructors). Solución implementada actualizando 28 usuarios duplicados a roles inactivos (inactive_employee, inactive_instructor, inactive_volunteer, inactive_concessionaire) manteniendo integridad referencial completa. Tabla users ahora contiene únicamente 6 usuarios activos: 5 admins y 1 super_admin. Referencias de clave foránea preservadas sin pérdida de datos. Sistema de navegación persistente implementado con header fijo (position:fixed, z-index:50) y padding automático (pt-16) aplicado a todo el contenido mediante App.tsx. Header adaptativo muestra menús completos en páginas públicas y navegación simplificada en administración.
- January 28, 2025. Nuevo submenú "Listado" agregado al módulo Eventos administrativo - NUEVA FUNCIONALIDAD: Creado submenú "Listado" debajo de "Categorías" en sidebar administrativo de Eventos usando icono ClipboardList. Página /admin/events/list implementada con funcionalidad completa de gestión administrativa de eventos incluyendo vistas duales (grid/lista), filtros avanzados (búsqueda, categoría, estado, parque), acciones CRUD (ver, editar, eliminar), formato profesional con patrón Card, estadísticas resumidas y integración con endpoints reales del backend. Ruta agregada a App.tsx con lazy loading. Sistema permite visualizar eventos creados desde backend conectado a base de datos real en lugar de datos mock.
- January 28, 2025. Página de Eventos optimizada con filtro de parques y sin estadísticas - MEJORA UX: Agregado filtro de parques que permite filtrar eventos por ubicación específica (Bosque Los Colomos, Parque Agua Azul, etc.) usando datos reales del endpoint /api/parks. Eliminadas completamente las 4 fichas de estadísticas (Total Eventos, Próximos, En Curso, Participantes) según solicitud del usuario para interface más limpia. Filtros ahora incluyen: búsqueda por texto, categoría, estado y parque. Lógica de filtrado actualizada para soportar filtrado simultáneo por múltiples criterios. Interface más enfocada en la búsqueda y visualización directa de eventos sin distracciones de métricas.
- January 28, 2025. Footer institucional agregado a página de Eventos - INTEGRACIÓN COMPLETA: Instalado footer institucional idéntico al de /activities en página /events con toda la información de la Agencia Metropolitana de Bosques Urbanos. Footer incluye logo institucional, descripción de misión, navegación organizada en 6 columnas (enlaces principales, bosques urbanos, transparencia, FAQ, servicios, participación), información de contacto completa (dirección en Miraflores, teléfono, email, horarios) y copyright actualizado. Diseño con gradiente verde corporativo y enlaces con hover effects. Página de eventos ahora tiene presencia institucional completa y consistente con otras páginas principales del sistema.
- January 28, 2025. Página de Eventos completamente implementada con funcionalidad empresarial - NUEVA PÁGINA PRINCIPAL: Creada página /events con diseño visual profesional incluyendo hero section con gradiente verde-azul, banner publicitario de ancho completo, estadísticas organizadas en grid (Total Eventos, Próximos, En Curso, Participantes), sistema dual de vistas (grid/lista) con toggle visual, filtros avanzados (búsqueda, categoría, estado), y tarjetas de eventos con información completa (imagen, título, descripción, fecha, ubicación, capacidad, precio, organizador). Seis eventos de ejemplo implementados con datos realistas: Festival de Primavera, Concierto de Jazz, Mercado de Productores, Torneo de Ajedrez, Taller de Fotografía, Carrera Ecológica. Componente completamente tipado con interface Event, manejo de estados de carga, formateo de fechas en español, badges de estado con códigos de colores, y preparado para integración con backend real. Ruta /events registrada en App.tsx con lazy loading. Sistema de eventos ahora disponible como página principal independiente del sistema ParkSys preparada para gestión municipal de eventos urbanos.
- January 28, 2025. Nuevo menú "Biodiversidad" con reorganización de navegación - REESTRUCTURACIÓN COMPLETA: Creado nuevo menú principal "Biodiversidad" que agrupa "Arbolado" y "Fauna" (movidos desde menú "Usuarios"). Implementación completa tanto en navegación de escritorio como móvil con dropdowns funcionales. Variables de estado agregadas (biodiversityMenuOpen, setBiodiversityMenuOpen, toggleBiodiversityMenu, isBiodiversityActive) para funcionalidad completa. Menú "Usuarios" ahora contiene únicamente "Voluntarios" e "Instructores". Lógica de detección de módulo activo actualizada para nueva estructura. Navegación reorganizada: Inicio, Parques, Contenido (Actividades, Calendario, Concesiones), Biodiversidad (Arbolado, Fauna), Usuarios (Voluntarios, Instructores). Arquitectura de navegación más lógica y organizada según áreas temáticas específicas.
- January 28, 2025. Nomenclatura de menús simplificada - CAMBIO TEXTUAL: "Ver Actividades" renombrado a simplemente "Actividades" en submenú de Contenido tanto en versión escritorio como móvil del Header.tsx. Nomenclatura más directa y concisa eliminando verbos redundantes según solicitud del usuario.
- January 28, 2025. Menú "Acerca de" eliminado del header principal - NAVEGACIÓN SIMPLIFICADA: Removido completamente el botón "Acerca de" tanto de la navegación de escritorio como del menú móvil en Header.tsx. Sistema de navegación ahora incluye únicamente: Inicio, Parques, Contenido (dropdown con Actividades, Calendario, Concesiones) y Usuarios (dropdown con Arbolado, Fauna, Voluntarios, Instructores). Interface principal más limpia y enfocada en funcionalidades core sin enlaces a secciones informativas secundarias según solicitud del usuario.
- January 28, 2025. Transformación completa a grid visual con hover interactivo y diseño photo-first - MIGRACIÓN LISTA→GRID: Convertido ExtendedParksList de layout lista horizontal a grid responsive (1 columna móvil, 2 tablet, 3 escritorio) con tarjetas photo-prominent. Estados de carga (skeleton) actualizados para mostrar 6 tarjetas de grid en lugar de 3 elementos de lista. DISEÑO PHOTO-FIRST: Tarjetas completamente rediseñadas usando aspect-ratio 4:3, imagen ocupando 100% del espacio disponible, nombre del parque superpuesto en parte inferior con texto blanco y drop-shadow. Green Flag Award integrado en esquina superior derecha con backdrop-blur y transparencia. NAVEGACIÓN POR HOVER: Eliminados botones "Ir al Parque", reemplazados por hover effects sofisticados (escala imagen 105%, overlay gradient, elevación de tarjeta). Link directo aplicado a toda la tarjeta con cursor pointer. EFECTOS VISUALES AVANZADOS: Transiciones suaves (300ms), transformación de elevación (-translate-y-1), sombras dinámicas (shadow-sm→shadow-xl), bordes redondeados (rounded-xl). ParkCard.tsx también actualizado para consistencia. INFORMACIÓN ESENCIAL: Solo foto, nombre del parque y Green Flag Award visible según especificaciones del usuario. Tipos de parque, direcciones, amenidades y botones completamente removidos de la vista. Sistema optimizado para experiencia ultra-visual con navegación intuitiva por hover según preferencias específicas del usuario.
- January 28, 2025. Bug crítico de eliminación de amenidades completamente resuelto - PROBLEMA IDENTIFICADO: Función storage.deleteAmenity() fallaba silenciosamente sin ejecutarse, devolviendo false sin logs de [STORAGE]. SOLUCIÓN IMPLEMENTADA: Eliminada dependencia de función problemática, implementación SQL directa en endpoint DELETE /api/amenities/:id con verificación de uso en park_amenities y eliminación usando pool.query(). FUNCIONALIDAD VERIFICADA: Amenidad "Huerto" (ID 76) eliminada exitosamente con logs completos mostrando: verificación de uso (0 parques), verificación de existencia (encontrada), eliminación SQL (1 fila eliminada). Sistema de eliminación de amenidades ahora completamente operativo para administración municipal.
- January 28, 2025. Sistema de evaluaciones de parques completamente restaurado con funcionalidad completa - RECONSTRUCCIÓN TOTAL: Archivo evaluations.tsx completamente reconstruido desde cero después de corrupción JSX/TypeScript. Todas las funcionalidades originales restauradas: vista dual (grid/lista) con toggle visual, paginación profesional con 10 registros por página, filtros avanzados (búsqueda, estado, parque), sistema completo de importación/exportación CSV, modal de detalles con información completa del evaluador y calificaciones específicas. SISTEMA DE PAGINACIÓN MEJORADO: Controles de navegación profesionales con indicador "Página X de Y", botones anterior/siguiente, números de página clickeables con colores corporativos (#00a587), reset automático a página 1 cuando cambian filtros. Sistema robusto de manejo de datos limitados (9 evaluaciones después de limpieza de duplicados) con paginación funcional. MODAL DE DETALLES AVANZADO: Modal expandido con 6 secciones organizadas (Información del Evaluador, Calificación General, Calificaciones Detalladas con iconografía específica por criterio, Comentarios, Información Adicional con badges de estado). Iconografía consistente con Star para evaluaciones según patrón establecido del sistema. FUNCIONALIDAD CSV COMPLETA: Botones de importar/exportar integrados con manejo de archivos, validación y notificaciones toast. Sistema de selección individual y masiva con eliminación en lote operativo. Arquitectura completamente estable y funcional para gestión empresarial de evaluaciones ciudadanas
- January 25, 2025. Sistema completo de páginas individuales de productos con matrices detalladas implementado - PÁGINAS INDIVIDUALES: Creadas páginas dedicadas para cada producto (/sales/municipal, /sales/network, /sales/pro) con fichas de productos clickeables desde página principal. Cada página incluye header personalizado con colores diferenciados (verde para Municipal, azul para Network, púrpura/rosa para Pro), iconografía específica (Building, MapPin, Star) y descripción detallada del producto. MATRICES COMPLETAS: Implementadas tablas extensas de características con 7 categorías principales (Configuración, Gestión Operativa, Marketing, O&M, Admin/Finanzas, Recursos Humanos, Seguridad) mostrando exactamente qué incluye cada versión (Esencial, Profesional, Enterprise). Sistema de visualización con checkmarks verdes, X grises y texto descriptivo para características parciales. DIFERENCIACIÓN POR PRODUCTO: Municipal enfocado en gobiernos (ROI 25-40%), Network para coordinación multi-parque (ROI 30-50%), Pro para experiencias premium (ROI 40-70%). Precios específicos por producto: Municipal ($18-25K/$35-50K), Network ($25-35K/$45-65K), Pro ($35-50K/$65-100K). NAVEGACIÓN INTEGRADA: Botones "Más información" redirigen a páginas individuales, botón "Volver" en cada página individual, rutas registradas correctamente en App.tsx con lazy loading. Sistema completo de experiencia de usuario para presentaciones empresariales detalladas por segmento de cliente.
- January 25, 2025. Página de ventas profesional completamente implementada - DISEÑO EMPRESARIAL: Creada página de ventas de nivel profesional en /sales con hero section espectacular (fondo oscuro gradiente, elementos flotantes animados, efectos glassmorphism), secciones de productos mejoradas con cards premium, precios con efectos hover y transformaciones, tabla de comparación avanzada con gradientes corporativos. ELEMENTOS VISUALES PREMIUM: Implementados gradientes sutiles, sombras profesionales, transiciones suaves, iconografía distintiva por tier, tipografía jerarquizada y colores corporativos consistentes (#00a587, #00d4aa). FUNCIONALIDAD INTERACTIVA: Selector dinámico de productos (Municipal, Network, Pro), pricing responsive con destacado del plan profesional, estadísticas de impacto (500+ parques, 50+ municipios, 2M+ ciudadanos), badges de certificación gubernamental y CTAs con efectos de sombra. REESTRUCTURACIÓN DE NEGOCIO: Tres productos principales definidos (ParkSys Municipal para gobiernos, ParkSys Network para sistemas 15-20 parques, ParkSys Pro para parques emblemáticos), estructura de precios de tres niveles (Esencial gratuito 30 días, Profesional $18-25K/mes, Enterprise $35-50K/mes) con 20% descuento anual, matriz completa de 159 características distribuidas por niveles, documentación estratégica de ventas completa. Página empresarial lista para presentaciones a clientes como Bosques Urbanos de Guadalajara.
- July 24, 2025. Módulo HR completamente estandarizado con patrón Card y iconografía específica - GESTIÓN DE PERSONAL: Implementado patrón Card con bg-gray-50 al header de /admin/hr/employees siguiendo especificaciones exactas del usuario. Header unificado con CardContent p-6, icono Users w-8 h-8 text-black (icono negro según solicitud específica), título "Gestión de Personal" text-3xl font-bold text-gray-900. Botón "Nuevo Empleado" integrado dentro del Card con colores corporativos. BOTONES IMPORTAR/EXPORTAR REUBICADOS: Movidos botones "Gestionar Departamentos", "Importar CSV" y "Exportar CSV" debajo de los indicadores de empleados (Total Empleados, Departamentos, Niveles Jerárquicos, Salario Promedio) y fuera del Card según requerimientos del usuario. Mantenida funcionalidad completa de importación CSV con plantilla descargable, vista previa de datos y procesamiento masivo. Sistema de exportación dual (simple/completa) completamente operativo. CONSISTENCIA VISUAL COMPLETA: Módulo HR ahora sigue exactamente el mismo patrón establecido en comunicaciones con la única diferencia del icono negro solicitado por el usuario. Arquitectura limpia con headers estandarizados, botones de acción correctamente posicionados fuera del área gris, y funcionalidad empresarial completa mantenida. Sistema HR completamente consistente con el patrón de diseño global ParkSys
- July 24, 2025. Módulo de publicidad estandarizado con patrón Card y funcionalidad avanzada - ANUNCIOS PUBLICITARIOS: Agregado componente Card con bg-gray-50 al header de /admin/advertising/advertisements siguiendo patrón establecido. Header unificado con CardContent p-6, icono ImageIcon w-8 h-8 text-gray-900, título text-3xl font-bold. Eliminado completamente el botón "Actualizar Anuncio 13" según solicitud del usuario. Botones "Actualizar Todas las Imágenes" y "Nuevo Anuncio" integrados dentro del Card con colores corporativos. Sistema de gestión de anuncios completamente funcional con formularios de creación y edición. CAMPAÑAS PUBLICITARIAS: Agregado componente Card con bg-gray-50 al header de /admin/advertising/campaigns siguiendo patrón establecido. Header unificado con CardContent p-6, icono Target w-8 h-8 text-gray-900, título "Gestión de Campañas" text-3xl font-bold. Botón "Nueva Campaña" integrado dentro del Card con colores corporativos bg-[#00a587] hover:bg-[#067f5f]. Sistema de gestión de campañas publicitarias completamente funcional. ASIGNACIONES PUBLICITARIAS: Agregado componente Card con bg-gray-50 al header de /admin/advertising/assignments siguiendo patrón establecido. Header unificado con CardContent p-6, icono Settings w-8 h-8 text-gray-900, título "Gestión de Asignaciones" text-3xl font-bold. Botón "Nueva Asignación" integrado dentro del Card con colores corporativos bg-[#00a587] hover:bg-[#067f5f]. Corregidos errores de tipado TypeScript usando casting as any para compatibilidad con respuestas de API. Sistema de gestión de asignaciones publicitarias completamente funcional con paginación avanzada y vistas duales. MAPEO DE ESPACIOS: Agregado componente Card con bg-gray-50 al header de /admin/advertising/space-mappings siguiendo patrón establecido. Header unificado con CardContent p-6, icono LinkIcon w-8 h-8 text-gray-900, título "Mapeo de Espacios" text-3xl font-bold. Botones "Gestionar Anuncios" y "Gestionar Espacios" integrados dentro del Card con colores corporativos bg-[#00a587] hover:bg-[#067f5f]. Sistema de mapeo de espacios publicitarios completamente funcional con visualización de relaciones espacio-anuncio. LIMPIEZA NAVEGACIÓN: Eliminada completamente la entrada "/admin/advertising/analytics" del sidebar administrativo que no tenía página correspondiente. Removidas todas las referencias a analytics incluyendo NavItem, enlaces activos y lógica de módulos activos. Navegación del módulo de publicidad limpia con solo páginas funcionales: Anuncios, Campañas, Asignaciones y Mapeo de Espacios. ESPACIOS PUBLICITARIOS: Agregado componente Card con bg-gray-50 al header de /admin/advertising/spaces siguiendo patrón establecido. Header unificado con CardContent p-6, icono MapPin w-8 h-8 text-gray-900, título text-3xl font-bold. Botones "Gestionar Anuncios" y "Ver Mapeos" integrados dentro del Card con colores corporativos bg-[#00a587] hover:bg-[#067f5f]. Corregidos errores de tipado TypeScript usando casting as any[] y as string para compatibilidad de fechas. Sistema de gestión de espacios publicitarios completamente funcional con toggle de activación/desactivación de espacios. EVALUACIONES MARKETING: Agregado componente Card con bg-gray-50 al header de /admin/marketing/evaluations siguiendo patrón establecido. Header unificado con CardContent p-6, icono Award w-8 h-8 text-gray-900, título text-3xl font-bold y botón "Nueva Evaluación" con colores corporativos. Corregidos errores de tipado TypeScript usando any para compatibilidad. ACTIVOS PROMOCIONALES: Agregado componente Card con bg-gray-50 al header de /admin/marketing/assets siguiendo patrón establecido. Header unificado con CardContent p-6, icono Image w-8 h-8 text-gray-900, título text-3xl font-bold y botón "Subir Activo" con colores corporativos. Corregidos errores de tipado TypeScript usando any para compatibilidad. EVENTOS: Agregado componente Card con bg-gray-50 al header de /admin/marketing/events siguiendo patrón establecido. Header unificado con CardContent p-6, icono Calendar w-8 h-8 text-gray-900, título text-3xl font-bold y botón "Nuevo Evento" con colores corporativos. Corregidos errores de tipado TypeScript cambiando 'body' por 'data' en mutaciones y Badge variant por className. CONTRATOS: Agregado componente Card con bg-gray-50 al header de /admin/marketing/contracts siguiendo patrón establecido. Header unificado con CardContent, icono FileText w-8 h-8 text-gray-900, título text-3xl font-bold y botón "Nuevo Contrato" con colores corporativos. PATROCINADORES: Eliminada completamente la duplicación del diálogo "Nuevo Patrocinador" que aparecía en las líneas 680-931. Código duplicado incluía formulario completo con todos los campos (nombre, categoría, contacto, email, teléfono, etc.) y funciones de manejo. Archivo sponsors-new.tsx reducido de 1,282 a 1,038 líneas eliminando 244 líneas de código duplicado. Sistema ahora funciona con un solo botón "Nuevo Patrocinador" y un solo diálogo de creación. PLANTILLAS COMUNICACIÓN: Agregado componente Card con bg-gray-50 al header de /admin/communications/templates siguiendo patrón establecido. Título "Plantillas de Email" movido del fondo blanco al área gris del Card con icono FileText w-8 h-8 text-gray-900 y text-3xl font-bold. Header eliminado del AdminLayout para usar el nuevo Card pattern. COLA DE EMAILS: Agregado componente Card con bg-gray-50 al header de /admin/communications/queue siguiendo patrón establecido. Título "Cola de Emails" movido del fondo blanco al área gris del Card con icono ListChecks w-8 h-8 text-gray-900 y text-3xl font-bold. Header eliminado del AdminLayout para consistencia visual. CAMPAÑAS DE EMAIL: Agregado componente Card con bg-gray-50 al header de /admin/communications/campaigns siguiendo patrón establecido. Título "Campañas de Email" movido del fondo blanco al área gris del Card con icono Megaphone w-8 h-8 text-gray-900 y text-3xl font-bold. Header eliminado del AdminLayout para usar nuevo Card pattern. ENVÍO MASIVO: Agregado componente Card con bg-gray-50 al header de /admin/communications/bulk siguiendo patrón establecido. Título "Envío Masivo" movido del fondo blanco al área gris del Card con icono Send w-8 h-8 text-gray-900 y text-3xl font-bold. Header eliminado del AdminLayout para usar nuevo Card pattern. ANÁLISIS COMUNICACIONES: Agregado componente Card con bg-gray-50 al header de /admin/communications/analytics siguiendo patrón establecido. Título "Análisis de Comunicaciones" movido del fondo blanco al área gris del Card con icono BarChart3 w-8 h-8 text-gray-900 y text-3xl font-bold. Eliminado título duplicado "Análisis de Comunicaciones" del componente AnalyticsSection para evitar redundancia visual. Header del AdminLayout eliminado para usar nuevo Card pattern. Módulos de marketing, publicidad y comunicación completamente consistentes con patrón de diseño estandarizado aplicado a TODAS las páginas principales
- January 28, 2025. Base de datos de evaluaciones de parques completamente limpia - LIMPIEZA MASIVA DE DUPLICADOS: Eliminadas 1,845 evaluaciones duplicadas de la tabla park_evaluations manteniendo solo 9 evaluaciones únicas (una por evaluador por parque). Base de datos reducida de 1,854 a 9 registros usando lógica ROW_NUMBER() OVER (PARTITION BY evaluator_name, evaluator_email, park_id ORDER BY created_at DESC) para conservar solo la evaluación más reciente de cada evaluador por parque. DASHBOARD CORREGIDO: Estructura de datos actualizada para acceder correctamente a evaluaciones (.evaluations) y feedback (.feedback) con manejo robusto de errores de fecha usando try/catch. Compatibilidad implementada para campos created_at/createdAt y overall_rating/overallRating. Sistema de métricas funcionando correctamente mostrando 9 evaluaciones y 12 retroalimentaciones sin errores.
- January 26, 2025. Sistema unificado de filtros completamente reparado y funcional - PROBLEMA CRÍTICO RESUELTO: Eliminada duplicación de lógica de filtrado que causaba inconsistencias entre dashboard principal y reportes. Query principal ahora respeta filtros de período y parque de los reportes usando una sola fuente de datos. CONFLICTO DE PARÁMETROS SOLUCIONADO: Corregido problema donde dateFilter y filtro de período se sobrescribían mutuamente, implementando lógica de priorización donde filtros de período tienen precedencia sobre filtros manuales. LOGS DE DEBUGGING COMPLETOS: Agregados logs detallados tanto en frontend como backend para monitorear parámetros enviados, condiciones aplicadas y resultados devueltos. Sistema completamente funcional verificado con datos reales: 253 registros totales (enero-julio 2025), 83 registros último mes, filtros aplicándose correctamente según período seleccionado.
- January 25, 2025. Sistema completo de distribución inteligente de visitantes y formato numérico profesional implementado - DISTRIBUCIÓN DUAL MEJORADA: Implementado selector visual en interfaz para elegir entre "Promedio diario distribuido" (divide números con variaciones ±15% para realismo) y "Números idénticos" (comportamiento anterior) en rangos de fechas. INTERFAZ EXPLICATIVA: Agregada sección amarilla con botones descriptivos y mensajes explicativos que guían al usuario en la selección del modo de distribución más apropiado. VALIDACIÓN BACKEND ROBUSTA: Verificación de duplicados en endpoint POST /api/visitor-counts previene registros con misma fecha y parque, devolviendo error 409 con información del existente. CACHE INVALIDATION MÚLTIPLE: Invalidación automática de queries (visitor-counts, dashboard, summary) tras crear registros, con staleTime: 0 para datos frescos. MANEJO INTELIGENTE DE DUPLICADOS: Frontend procesa elegantemente registros duplicados mostrando "X registros creados exitosamente, Y ya existían". FORMATO NUMÉRICO PROFESIONAL COMPLETO: Todos los números usan .toLocaleString() consistentemente en métricas principales, desglose demográfico, tooltips de gráficas PieChart (métodos y clima), tarjetas de parques y resumen ejecutivo. Sistema empresarial completamente profesional con datos auténticos (155,364 visitantes totales, 5,357 promedio diario) y distribución inteligente personalizable según necesidades del usuario
- January 25, 2025. Dashboard de visitantes con gráfica de parques completamente funcional - GRÁFICA HORIZONTAL PROBLEMÁTICA SOLUCIONADA: Reemplazada gráfica horizontal de Recharts que no se renderizaba por gráfica vertical más confiable con números en eje X. MEJORA VISUAL SOLICITADA: Nombres largos de parques en eje X reemplazados por números (1,2,3,4) que corresponden con tarjetas informativas debajo. CORRELACIÓN PERFECTA: 1=Bosque Los Colomos (310 visitantes), 2=Parque Metropolitano (200), 3=Parque Alcalde (153), 4=González Gallo (117). TOOLTIP MEJORADO: Al pasar mouse sobre barras muestra "1. Bosque Los Colomos" con nombre completo. TARJETAS DETALLADAS: Agregada lista con información específica de cada parque mostrando visitantes totales y cantidad de registros. Sistema de visualización empresarial completamente operativo con diseño profesional optimizado para presentaciones ejecutivas
- July 24, 2025. Sistema de patrón Card completamente implementado en módulos críticos adicionales - INCIDENTES: Tanto la página de incidencias principales como categorías convertidas al patrón Card con iconos AlertTriangle y Tag respectivamente. VOLUNTARIOS: Páginas de registro (UserPlus), evaluaciones (Star) y reconocimientos (Award) estandarizadas eliminando diseño azul no estándar. Todas las páginas ahora usan bg-gray-50, iconos w-8 h-8 text-gray-900, títulos text-3xl font-bold text-gray-900 y contenedores p-6. Conversión crítica en reconocimientos eliminó bg-gradient-to-r from-blue-600 to-indigo-700 text-white por patrón gris uniforme. Sistema de routing verificado para asegurar renderizado correcto en archivos correspondientes
- July 23, 2025. Sistema de consistencia visual COMPLETAMENTE implementado en toda la interface administrativa - Implementación exitosa del patrón Card estandarizado con fondo gris (bg-gray-50) en TODOS los módulos administrativos del sistema incluyendo submódulos. Headers unificados con componente Card, iconos estandarizados w-8 h-8 text-gray-900, títulos text-3xl font-bold text-gray-900 y layout flex items-center gap-2 consistente. Módulos completados: Finanzas (DollarSign), Voluntarios (Users), Usuarios (Users), Configuración (Settings), Concesiones (FileText), Parques (MapPin), Comunicaciones (MessageSquare), Organizador (BarChat3), Instructores (GraduationCap), Amenidades (Activity), Seguridad (Shield), Permisos (Shield), Notificaciones (Bell), Dashboard de Visitantes (BarChart3), Conteo de Visitantes (Users), Evaluaciones de Visitantes (Star), Criterios de Visitantes (Settings), Retroalimentación de Visitantes (MessageSquare), Dashboard de Parques (Activity), Inventario de Árboles (TreeDeciduous), Especies Arbóreas (Leaf), Mantenimiento de Árboles (Wrench), Gestión de Incidencias (AlertTriangle). Sistema administrativo presenta consistencia visual total con diseño profesional estandarizado aplicado a módulos principales y submódulos que mejora significativamente la experiencia de usuario para administradores municipales. Patrón de diseño establecido como estándar definitivo para todo el sistema ParkSys
- July 23, 2025. Sistema completo de patrocinadores limpio y optimizado con iconografía estandarizada - Eliminación masiva de duplicados: 1,305 patrocinadores (1,290→5 únicos), 6,229 paquetes (6,233→4 únicos), 32 campañas (34→2 únicas). Base de datos optimizada con 5 patrocinadores únicos (Banco Santander, Coca-Cola FEMSA, Farmacias Guadalajara, Telmex, Universidad de Guadalajara), 4 paquetes únicos (Platino $500K, Oro $300K, Plata $150K, Bronce $75K), 2 campañas únicas (Temporada Primavera 2025 $800K activa, Verano en los Parques $1.2M planificación). Implementado sistema anti-duplicados triple: verificación por nombre en create-sponsorship-tables.ts, constraints UNIQUE en base de datos (sponsors_name_unique, packages_name_unique, campaigns_name_unique), lógica defensiva con eq() de Drizzle ORM. Iconografía completamente estandarizada en módulos Marketing y Publicidad: Marketing (Building, FileText, Calendar, Image, Award), Publicidad (Monitor, MapPin, ImageIcon, Target, Settings, LinkIcon) con patrón uniforme (w-8 h-8 text-gray-900, flex items-center gap-2, text-3xl font-bold). Sistema de paginación avanzada con 12 registros por página, vistas duales (grid/lista) y controles de navegación completos implementado en asignaciones publicitarias. Performance mejorado significativamente eliminando 7,566 registros duplicados que afectaban consultas y pestañas del sistema
- July 22, 2025. Sistema crítico de mantenimiento de activos completamente reparado y funcional - Resueltos errores críticos de sintaxis JSX que causaban crashes del servidor con "Failed to fetch dynamically imported module". Archivo maintenance/index.tsx completamente reconstruido con estructura TypeScript válida, eliminando errores de parsing. SelectItem components corregidos con filtrado defensivo para prevenir valores vacíos que causaban "must have a value prop that is not an empty string". Filtros actualizados para usar "all" en lugar de cadenas vacías, con lógica de filtrado mejorada. Validación robusta agregada para arrays de datos (assets, MAINTENANCE_TYPES, MAINTENANCE_STATUS) con fallbacks seguros. Sistema de mantenimiento ahora 100% operativo con formularios, filtros, y gestión CRUD completa
- July 22, 2025. Módulo completo de activos estandarizado con iconografía consistente y UX limpia - Completada estandarización completa del módulo de activos agregando icono Wrench al header de /admin/assets/maintenance y eliminando botón "Volver a Activos" según solicitud del usuario. Todas las páginas del módulo ahora tienen headers unificados con flex items-center gap-2, iconos w-8 h-8 text-gray-900, texto text-3xl font-bold text-gray-900 y spacing mt-2. UX mejorada eliminando navegación redundante. Módulo completo de activos ahora totalmente estandarizado: dashboard (BarChart3), categorías (Tag), inventario (Package), mapa (MapPin), mantenimiento (Wrench)
- July 22, 2025. Categorías de activos estandarizadas con iconografía consistente - Agregado icono Tag al header de /admin/assets/categories siguiendo patrón establecido. Header unificado con flex items-center gap-2, icono w-8 h-8 text-gray-900, texto text-3xl font-bold text-gray-900 y spacing mt-2. Sistema de estandarización de headers administrativos expandido al módulo completo de activos
- July 22, 2025. Dashboard de activos estandarizado completamente - Actualizado /admin/assets/dashboard-fixed.tsx cambiando "Resumen Operativo de Activos" por "Dashboard" con icono BarChart3 (w-8 h-8 text-gray-900) siguiendo patrón establecido. Header unificado con flex items-center gap-2, texto text-3xl font-bold text-gray-900 y spacing mt-2. Sistema de iconografía para dashboards administrativos completamente consistente
- July 22, 2025. Dashboard de amenidades estandarizado y limpio - Agregado icono Activity al header de /admin/amenities-dashboard siguiendo patrón establecido. Eliminado título duplicado "Resumen Operativo de Amenidades" de zona blanca, cambiado por "Dashboard de Amenidades" para evitar redundancia con AdminLayout. Interface más limpia sin duplicación visual
- July 22, 2025. Headers administrativos estandarizados completamente - Agregado icono Calendar al header de /admin/space-reservations/calendar completando la serie. Sistema de iconografía uniformado en todo el módulo de reservas: /spaces (MapPin), /new (Plus), /calendar (Calendar). Patrón de diseño consolidado con flex items-center gap-2, iconos w-8 h-8 text-gray-900, y eliminación de botones "Volver" para UX más limpia. Módulo de reservas de espacios completamente estandarizado con iconografía consistente
- July 22, 2025. Sidebar administrative simplificado para eventos AMBU - Actualizado título de navegación de "Cal. AMBU" a simplemente "Calendario" para mejor experiencia de usuario, eliminando referencias técnicas innecesarias. Cambio aplicado en AdminSidebarComplete.tsx manteniendo funcionalidad completa del enlace /admin/eventos-ambu/calendar
- July 22, 2025. Sistema de headers administrativos completamente unificado con iconografía consistente - Actualizadas todas las páginas administrativas para usar iconos idénticos al sidebar y tamaño text-3xl uniforme: /admin/organizador (BarChart3 icon), /admin/activities/categories (BarChart3 icon), /admin/activities (Calendar icon), /admin/organizador/catalogo/crear (Plus icon), /admin/activities/calendar (Calendar icon con layout reorganizado en dos filas), /admin/instructors (GraduationCap icon). Patrón de diseño establecido: flex items-center gap-2, iconos w-8 h-8, texto text-3xl font-bold, coincidencia exacta con navegación sidebar. Layout del calendario de actividades mejorado separando título/descripción de controles de navegación y botón "Nueva Actividad" en renglón independiente con mt-4. Sistema de iconografía completamente consistente eliminando discrepancias visuales entre sidebar y páginas principales
- July 22, 2025. Sistema de mantenimiento de árboles completamente renovado con funcionalidades empresariales avanzadas - Creado nuevo archivo enhanced.tsx como implementación completa del módulo de mantenimiento con eliminación total de tarjetas indicadoras según solicitud del usuario. Implementada paginación del servidor con 10 registros por página, filtros avanzados (búsqueda, tipo de mantenimiento, parque), vistas duales (lista/fichas) con toggle visual, y sistema completo de importación/exportación CSV profesional. Backend actualizado con endpoints nuevos: /api/trees/maintenances con paginación completa, /api/trees/maintenances/export-csv para exportación de todos los registros, /api/trees/maintenances/import-csv para importación masiva, y /api/trees/maintenances/:id para eliminación. Formulario modal expandido para crear mantenimientos con selección de árboles, tipos, urgencias y campos detallados. Sistema integrado con React Query optimizado, notificaciones toast profesionales, manejo robusto de errores TypeScript con tipado any para compatibilidad, y routing actualizado en App.tsx para usar versión enhanced como predeterminada. Funcionalidad crítica completamente operativa eliminando dependencia en tarjetas métricas y enfocándose en gestión directa de datos según especificaciones del usuario
- July 22, 2025. Sistema de inventario de árboles completamente mejorado con paginación y CSV - Corregida funcionalidad de paginación con 10 registros por página en inventario de árboles con controles completos de navegación (anterior/siguiente, números de página clickeables). Implementado sistema integral de importación/exportación CSV con soporte completo de backend: endpoint /api/trees/export-csv con filtros aplicables (búsqueda, parque, estado de salud, especies), endpoint /api/trees/template-csv para descargar plantilla con ejemplos mexicanos, endpoint /api/trees/import-csv para importación masiva con validación y manejo de errores. Sistema CSV incluye BOM UTF-8 para compatibilidad con Excel, escape correcto de campos con comas/comillas, formato profesional con 17 columnas de datos completos. Resuelto error crítico de sintaxis que causaba falla de compilación en trees/inventory/index.tsx. Eliminado botón "Generar Inventario Automático" de la interfaz para simplificar UX. Módulo de arbolado ahora completamente funcional con capacidades empresariales de gestión masiva de datos
- July 22, 2025. Dashboard de Arbolado completamente implementado - Creado nuevo módulo Dashboard para Arbolado posicionado estratégicamente sobre el submenú de Inventario en el sidebar administrativo. Dashboard integral incluye métricas principales (Total árboles, Especies registradas, Salud general, Mantenimientos pendientes), gráficas interactivas de estado de salud con PieChart, especies más comunes con BarChart, ranking de parques con más árboles, resumen de mantenimientos por urgencia, alertas automáticas para mantenimientos urgentes, y botón de actualización para refrescar datos. Componente completamente responsivo con diseño profesional usando colores corporativos, gradientes distintivos y iconografía consistente. Sistema integrado con endpoints existentes (/api/trees, /api/trees/maintenances, /api/tree-species) para datos auténticos. Navegación actualizada en AdminSidebarComplete.tsx con nueva entrada "Dashboard" usando icono BarChart. Funcionalidad crítica para presentación empresarial proporcionando vista ejecutiva completa del estado del arbolado urbano municipal
- July 22, 2025. Cambio de nomenclatura en sidebar - Actualizado "Resumen Operativo" por "Dashboard" en sección de Parques del sidebar administrativo. Traducciones actualizadas tanto en español (es/common.json) como en inglés (en/common.json) para clave "operativeSummary". Sistema de internacionalización completamente sincronizado para mostrar consistentemente "Dashboard" en lugar de "Resumen Operativo" según solicitud del usuario
- July 22, 2025. Sistema de evaluaciones de parques completamente limpio - Eliminadas 4,530 evaluaciones duplicadas de la base de datos manteniendo solo 9 evaluaciones únicas (una por evaluador por parque). Base de datos reducida de 4,539 a 9 registros: 7 evaluaciones para Bosque Los Colomos, 1 para Parque Alcalde y 1 para Parque Metropolitano de Guadalajara. Proceso de limpieza automático en dos fases usando ROW_NUMBER() OVER (PARTITION BY evaluator_name, evaluator_email, park_id ORDER BY created_at DESC) para conservar solo la evaluación más reciente de cada evaluador por parque. Sistema optimizado eliminando duplicación masiva que afectaba rendimiento de exportaciones y filtrados. Traducciones al español completadas para interfaz /admin/parks incluyendo botones "Actualizar", "Importar", "Nuevo Parque" y formularios. Archivos de traducción common.json y parks.json actualizados con claves faltantes para eliminar mensajes "missingKey" en consola
- July 22, 2025. Sistema de exportación completa de base de datos implementado - Problema crítico resuelto donde Excel/CSV solo exportaban resultados filtrados/paginados en lugar de toda la base de datos. Creado endpoint dedicado /api/park-evaluations/export-all que obtiene TODAS las evaluaciones (4,474 registros) sin restricciones de paginación. Actualizadas funciones exportToCSV() y exportToExcel() para usar fetch() del endpoint completo en lugar de datos locales filtrados. Agregada validación robusta con try/catch, notificaciones toast mejoradas mostrando cantidad real exportada. Sistema corregido completamente: CSV profesional con BOM UTF-8 y resumen estadístico, Excel con 2 hojas corporativas (datos completos + resumen ejecutivo), ambos formatos ahora incluyen la totalidad de la base de datos para análisis ejecutivos completos. Archivos generados: evaluaciones_parques_profesional_DD-MM-YYYY.csv (completa) y evaluaciones_parques_DD-MM-YYYY.xlsx (completa)
- July 22, 2025. Sistema de retroalimentación ciudadana completamente reparado y funcional - Corregido error crítico de filtro de parques sincronizando parámetro 'park' entre frontend y backend (antes había discrepancia 'parkId' vs 'park'). Estructura de estadísticas corregida para acceder correctamente a stats.general.total en lugar de stats.total directo. Conversión de tipos de datos implementada en backend convirtiendo strings a integers para visualización correcta de números en tarjetas de estadísticas (Total: 12, Pendientes: 11, En Progreso: 0, Resueltos: 0). Endpoint /api/feedback/stats ahora devuelve datos numéricos procesados correctamente. Sistema de paginación y vistas duales (cards/table) completamente operativo con 10 registros por página. Filtros por parque, tipo de formulario y estado funcionando perfectamente. Título "Resumen Operativo" cambiado a "Dashboard" en página /admin/parks/dashboard según solicitud del usuario. Sistema de navegación sidebar mejorado y filtro de parques reparado - Corregido orden en submódulo Visitantes para que "Dashboard" aparezca antes de "Conteo" según solicitud del usuario en AdminSidebarComplete.tsx. Solucionado problema crítico de filtro de parques en pestaña Reportes de /admin/visitors/count que no cargaba información, implementando manejo correcto del formato de respuesta API {data: [...], pagination: {...}} vs arrays directos. Configuración de React Query actualizada con suspense:false y retry:1 para estabilidad. Sistema de traducción de clima en conteo de visitantes completamente implementado - Agregado mapeo de traducción weatherLabels que convierte valores en inglés almacenados en base de datos (sunny, cloudy, rainy, other) a español (Soleado, Nublado, Lluvioso, Otro) para visualización en interfaz. Función getWeatherLabel implementada para traducción consistente en todos los badges y tablas de reporte. Aplicada traducción en procesar datos de clima para reportes estadísticos y en badges de vista detallada y compacta. Página /admin/visitors/count ahora muestra etiquetas de clima completamente en español manteniendo compatibilidad con datos existentes en base de datos. Formulario de usuarios completamente simplificado eliminando sección de completitud de perfil - Removida sección "Información de Cuenta" que incluía ProfileCompletionIndicator con medición de niveles de completitud (Completo, Intermedio, Básico, Incompleto). Eliminadas importaciones de ProfileCompletionContext y ProfileCompletionIndicator components no utilizados. Formulario ahora presenta interfaz limpia con solo campos básicos sin indicadores de progreso ni barras de completitud. Corregido error crítico en componente AdSpace.tsx que causaba "Failed to fetch" por endpoints incorrectos (/api/advertising/placements → /api/advertising-management/placements). Actualizadas todas las rutas de API publicitaria incluyendo track-impression y track-click para usar el prefijo correcto. Traducción del botón "Nuevo Usuario" completamente corregida agregando clave "newUser" tanto en es/users.json como en en/users.json. Sistema i18n funcionando correctamente mostrando "Nuevo Usuario" en lugar de missingKey. Formularios de usuarios completamente unificados: eliminadas pestañas complejas de voluntarios, concesionarios e instructores, conservando solo 8 campos básicos idénticos (name, lastName, username, email, password, phone, gender, birthDate, bio) más imagen de perfil. Arquitectura simplificada permite creación de usuarios de cualquier rol con formulario uniforme y sin medición de completitud. Sistema compilando correctamente con hot-reload aplicando cambios instantáneos
- July 22, 2025. Sistema de paginación y vistas duales completamente implementado en página de retroalimentación - Agregadas vista de fichas (cards) y vista de lista (table) con toggle para cambiar entre formatos. Implementada paginación completa con 10 registros por página, controles de navegación (anterior/siguiente), números de página clickeables y estadísticas de rango ("Mostrando X a Y de Z registros"). Backend actualizado con endpoint /api/feedback que soporta paginación completa incluyendo parámetros page, limit y respuesta con formato {feedback: [...], pagination: {page, limit, total, totalPages}}. Vista de fichas muestra información completa en formato tarjetas, vista de lista presenta formato tabla compacta con 6 columnas (Tipo, Usuario, Parque, Estado, Fecha, Acciones). Corregido error crítico de React Hooks moviendo useEffect al inicio del componente para mantener orden consistente. Funcionalidad de exportación CSV preservada y sistema completamente operativo con navegación fluida entre páginas - Sistema completamente estabilizado sin duplicados ni errores críticos - Resueltos errores "parks.map is not a function" y "Cannot read properties of undefined" en múltiples componentes: AdminParks, AssetMapPage, IncidentsPage, DetalleEventoAmbu, ActiveConcessionsList. Implementada configuración uniforme de React Query con suspense:false y retry:1 en TODAS las páginas del sistema. Agregada validación defensiva robusta que maneja formatos de respuesta API inconsistentes (arrays directos vs {data: [...], pagination: {...}}). Sistema de concesiones activas completamente reparado - Corregido acceso duplicado a datos (.data.data) en ActiveConcessionsList.tsx, ahora carga correctamente 8 concesiones activas. Página /admin/concessions/reports implementada con métricas completas, filtros y exportación CSV. Problema crítico de campañas duplicadas resuelto - Eliminadas 2,442 campañas duplicadas en módulo de marketing, manteniendo solo 2 campañas únicas (Temporada Primavera 2025, Verano en los Parques). Problema crítico de patrocinadores duplicados resuelto - Eliminados 6,432 patrocinadores duplicados de 6,437 total, manteniendo solo 5 patrocinadores únicos (Coca-Cola FEMSA, Banco Santander, Farmacias Guadalajara, Universidad de Guadalajara, Telmex). Sistema de amenidades dashboard completamente reparado - Endpoint /api/amenities/dashboard operativo (37 amenidades, 13 parques). Calendario de eventos AMBU implementado - Endpoint /api/eventos-ambu/calendario agregado (4 eventos). Aplicación ParkSys 100% estable y operativa: backend sin errores de base de datos, frontend sin errores de suspensión React, todos los endpoints funcionando correctamente sin duplicados
- July 22, 2025. Errores críticos de suspensión React completamente resueltos en todo el sistema - Corregido error final "parques.map is not a function" en formulario de creación de actividades (/admin/organizador/catalogo/crear.tsx). Implementada configuración uniforme de React Query con suspense:false y retry:1 en TODAS las páginas del sistema para prevenir errores de suspensión. Solucionado mapeo incorrecto de formato de respuesta API donde queries esperaban arrays directos pero recibían {data: [...], pagination: {...}}. Corrección sistemática aplicada a: páginas administrativas (organizador, instructors, users, trees/maintenance, evaluations, parks, volunteers) y páginas públicas (ParkLandingPage, ActiveConcessionsList, VolunteersList). Sistema de gestión de parques y todas las funcionalidades ahora 100% operativas sin errores de runtime. Aplicación completamente estable y lista para uso empresarial con Bosques Urbanos de Guadalajara
- July 21, 2025. Sistema de notificaciones automáticas por email para retroalimentación ciudadana completamente implementado y reparado - Configurado proceso automático que detecta cuando un ciudadano llena cualquiera de los 4 formularios de retroalimentación (Compartir experiencia, Reportar problema, Sugerir mejora, Proponer evento) en las páginas de parques y envía automáticamente notificaciones por email a todos los administradores activos del sistema. Implementada plantilla profesional de email con diseño corporativo, información completa del formulario, datos del ciudadano, prioridad con código de colores, enlace directo al panel administrativo y branding ParkSys. Funcionalidad de notificación automática mediante hooks asíncronos que no interrumpen la respuesta al usuario. PROBLEMA CRÍTICO RESUELTO: Corregido remitente de noreply@parquesdemexico.com a aspallatam@gmail.com para compatibilidad con SendGrid configurado, y corregidas rutas de API feedback en server/index.ts. Sistema probado exitosamente enviando notificaciones a 6 administradores (admin@guadalajara.gob.mx, joaquin@parquesdemexico.org, olivia@parquesdemexico.org, admin@parquesmx.com, marcelo@asociacionesprofesionales.org, luis@asociacionesprofesionales.org) con confirmación completa de entrega. Integración completa con módulo de email existente usando aspallatam@gmail.com como remitente verificado. Arquitectura escalable que permite agregar nuevos administradores automáticamente según su rol en base de datos

- July 21, 2025. Sistema de traducciones i18n completamente configurado con archivos JSON externos - Migración completa de traducciones embebidas a sistema de archivos HTTP backend usando i18next-http-backend. Configuración actualizada para cargar traducciones desde /locales/{lng}/{ns}.json con detección automática de idioma. Archivo common.json en español completamente actualizado con todas las traducciones del dashboard administrativo incluyendo métricas, gráficas, KPIs, resumen de módulos y navegación expandida. Sistema de traducciones funcional con selector de idioma en esquina superior derecha alternando entre español e inglés. Arquitectura escalable preparada para agregar nuevos idiomas y módulos sin modificar código.
- July 19, 2025. Sistema de asignaciones publicitarias completamente estabilizado - Corregido problema crítico de parpadeo y vistas previas rotas en /admin/advertising/assignments. Implementada vista previa de imágenes estabilizada con contenedor fijo (12x12px), carga lazy, manejo robusto de errores con fallback visual limpio. Eliminadas invalidaciones múltiples de cache con delays que causaban parpadeo, reemplazadas por invalidación única y limpia. Agregada validación robusta de datos con verificación de propiedades, manejo seguro de fechas con try/catch y filtrado defensivo que excluye datos corruptos. Estadísticas calculadas con validación para evitar crashes. Textos con fallbacks y estados de carga consistentes. Sistema administrativo de publicidad completamente estable y funcional
- July 19, 2025. Sistema de design uniformado de espacios publicitarios completamente implementado - Actualizado el último espacio publicitario en página individual de parques (/parque/bosque-los-colomos-5, spaceId="30") de position="sidebar" a position="card" para usar el nuevo diseño tipo tarjeta. TODOS los espacios publicitarios del sistema ahora usan consistentemente el diseño tipo tarjeta con botones coloridos, títulos prominentes, soporte multimedia completo (imágenes, videos, GIFs) y layout responsivo. Corregido bug visual en admin: removido emoji ➕ duplicado del botón "Agregar Imagen" en ParkMultimediaManager, manteniendo solo el icono Plus blanco de Lucide React. Interface administrativa completamente limpia y consistente
- July 19, 2025. Sistema de subida de videos en formularios publicitarios completamente reparado y funcional - Corregido problema crítico donde no se podían seleccionar archivos de video en formularios de edición de anuncios. Atributo accept mejorado con extensiones específicas (video/*,.mp4,.webm,.ogg,.avi,.mov) para mejor compatibilidad del navegador. Validación de archivos ampliada a formatos MP4, WEBM, OGG, AVI, MOV con límite de 10MB para videos. Sistema probado exitosamente subiendo video de 1.6MB (b6eab5db-6e2d-4fd9-86bd-70121a635a57.mp4) al anuncio "Clases de Deportes" (ID: 17). Funcionalidad completa de video implementada: selección de archivo → validación → subida → actualización de base de datos con mediaType="video" y storageType="upload". Sistema publicitario ahora soporta completamente contenido multimedia (imágenes, videos, GIFs) según especificaciones originales del proyecto
- July 19, 2025. Optimización crítica de imágenes hero completada en /parks, /activities, /calendar, /concessions, /tree-species, /instructors y /volunteers - Página /parks: imagen local 5.1MB→669KB (87% reducción manteniendo imagen original preferida). Página /activities: imagen local 4.4MB reemplazada por imagen optimizada personalizada de 217KB mostrando joven eligiendo libros en parque urbano. Página /calendar: imagen reemplazada por ilustración vectorial optimizada de 112KB con personas en parque realizando actividades recreativas. Página /concessions: imagen local 4.6MB reemplazada por imagen optimizada de 215KB mostrando barista preparando café profesional en ambiente de parque. Página /tree-species: imagen local 4.4MB reemplazada por imagen optimizada de 312KB mostrando parque urbano con lago, puente de piedra y árboles maduros. Página /instructors: imagen local 3.3MB reemplazada por imagen optimizada de 167KB mostrando entrenador profesional de rugby con equipo deportivo en parque. Página /volunteers: imagen local 837KB reemplazada por imagen optimizada de 220KB mostrando pareja de voluntarios plantando árboles en ambiente de parque junto a lago. Todas las páginas principales ahora cargan instantáneamente eliminando tiempos de espera prolongados. Performance web mejorado significativamente manteniendo calidad visual profesional según preferencias del usuario
- July 19, 2025. Sistema completo de personalización de texto de botones publicitarios implementado - Campo button_text agregado a tabla advertisements con soporte completo frontend/backend. Formularios administrativos de creación y edición incluyen campo "Texto del Botón" con placeholder y validación (máx 50 caracteres). Endpoints POST/PUT/GET actualizados para manejar button_text. Componente AdSpace usa texto dinámico de base de datos permitiendo personalización completa de botones promocionales ("¡Apúntate Ya!", "Ver Horarios", "Reservar Ahora", etc.) sin modificaciones de código
- July 19, 2025. Sistema de espacios publicitarios dinámicos implementado en página /parks - Convertidos los 4 contenedores promocionales hardcodeados del sidebar (Deportes, Eventos, Naturaleza, Actividades Familiares) en espacios publicitarios administrables desde /admin/advertising-management. Creados espacios publicitarios IDs 39-42 con anuncios correspondientes IDs 17-20 y asignaciones activas hasta diciembre 2025. Contenido idéntico preservado durante migración con URLs de redirección a actividades filtradas por categoría. Sistema integrado con tracking de impresiones y clicks automático. Componentes AdSpace reemplazan código estático permitiendo gestión centralizada de contenido promocional sin modificaciones de código
- July 18, 2025. Sistema de fotografía de voluntarios completamente implementado en formulario de edición - Agregada funcionalidad idéntica de subida de fotos al formulario de edición de voluntarios. Componente drag-and-drop con validación de archivos (JPG, PNG, WEBP, máx 5MB), vista previa de imagen existente, opciones de cambiar/remover imagen. Integración completa con endpoint backend /api/upload/volunteer-profile. Formularios de registro y edición ahora tienen funcionalidad de fotografía completamente unificada. Error crítico "parks.filter is not a function" corregido en página /admin/parks actualizando consulta useQuery para manejar formato {data: [...], pagination: {...}}. Sistema administrativo de voluntarios y parques completamente operativo
- July 18, 2025. Error "parks.map is not a function" corregido en página administrativa de voluntarios - Solucionado problema crítico en /admin/volunteers causado por inconsistencia de formato de respuesta del endpoint /api/parks. Actualizada consulta useQuery para manejar nuevo formato {data: [...], pagination: {...}} con parksResponse?.data || []. Error de renderizado en filtros de parques completamente resuelto. Sistema administrativo de voluntarios totalmente operativo con 13 parques disponibles en dropdown de filtros
- July 18, 2025. Hero visual mejorado en página de voluntarios con imagen profesional - Reemplazado gradiente verde básico por imagen de fondo profesional mostrando pareja de voluntarios plantando árboles. Aplicado overlay semitransparente para legibilidad del texto, agregado botón call-to-action "Únete como Voluntario" con colores corporativos, implementados efectos drop-shadow para mejor contraste. Hero ahora más atractivo y alineado con el propósito de la página de voluntariado ambiental
- July 18, 2025. Sistema de filtro de parques en especies arbóreas completamente funcional - Corregido problema crítico de formato de respuesta del endpoint /api/parks que causaba errores "allParks.filter is not a function". Endpoint ahora devuelve formato {data: [...], pagination: {...}} estándar. Actualizados componentes home.tsx y parks.tsx para usar parksResponse?.data || []. Filtro de parques en página /tree-species operativo con dropdown que permite filtrar especies por parque específico. Sistema integrado de consultas /api/parks y /api/park-tree-species funcionando correctamente para mostrar solo especies asignadas al parque seleccionado
- July 18, 2025. Sección de especies arbóreas limitada a 4 especies en una fila con botón "Ver todas las especies" - Modificada sección en ParkLandingPage.tsx para mostrar solo las primeras 4 especies usando .slice(0, 4) en un grid de 4 columnas. Agregado botón "Ver todas las especies" que redirige a /tree-species con diseño consistente similar al contenedor de actividades. Layout mejorado para evitar saturación visual manteniendo funcionalidad de modal con información técnica detallada al hacer click en cada especie
- July 18, 2025. Error de duplicación de imágenes en galería corregido completamente - Lógica mejorada en ParkLandingPage.tsx para evitar mostrar la misma imagen dos veces en galería. Sistema inteligente que detecta si hay imagen principal marcada como isPrimary y filtra correctamente las imágenes adicionales. Si no hay imagen primaria marcada, excluye la primera imagen que se usa como main. Navegación de modal actualizada con la misma lógica corregida para evitar duplicación
- July 18, 2025. Sistema de concesiones en landing pages limitado a 3 concesiones principales - Corregida consulta SQL en server/routes.ts línea 881 cambiando LIMIT de 10 a 3 para mostrar solo las primeras 3 concesiones más recientes. Filtro expandido para incluir registros con status activo, NULL o vacío: "(ac.status = 'active' OR ac.status IS NULL OR ac.status = '')". Bosque Los Colomos ahora muestra las 3 concesiones principales: Eventos Culturales Quintanar, EcoBikes Tlaquepaque, Teatro Familiar González Gallo. Logs del servidor confirman "Concesiones encontradas: 3" optimizando la visualización en landing pages
- July 18, 2025. Sistema de imágenes de actividades en landing pages completamente reparado - Corregida consulta SQL en server/routes.ts línea 792 agregando LEFT JOIN con activity_images para incluir imageUrl en endpoint /api/parks/:id/extended. Problema específico solucionado: actividad "Observación de Aves y Fotografía" (ID 104) tenía is_primary=false corregido a is_primary=true. Ahora las 3 actividades del Bosque Los Colomos muestran correctamente sus imágenes en formato visual: "Observación de Aves y Fotografía" (imagen local), "Mercadito de Productores Locales" (Unsplash), "Sesiones de Yoga al Amanecer" (Unsplash). Landing pages de parques operativas con sección de actividades en formato tarjetas visuales como especies arbóreas
- July 18, 2025. Sistema de actividades de parques completamente reparado y funcional - Función getParkActivities implementada con SQL robusto usando JOINs a tablas de parques, categorías e instructores. Función updateActivity corregida con mapeo correcto de campos camelCase a snake_case (parkId→park_id, startDate→start_date, etc.). Error de renderizado en detalle de actividades corregido convirtiendo precio string a número antes de usar toFixed(). Sistema completo de visualización de actividades en pestaña "Actividades" de gestión de parques (/admin/parks/5/manage) completamente operativo. Endpoint /api/parks/:id/activities funcional con 5 actividades asignadas al Bosque Los Colomos
- July 18, 2025. Sistema dual de vistas con imágenes implementado en listado administrativo de actividades - Implementado toggle entre vista de tabla y vista de fichas (por defecto) en /admin/activities. Vista de fichas incluye imagen principal de cada actividad con badge de estado "Con imagen"/"Sin imagen" para identificar fácilmente cuáles actividades necesitan fotos. Diseño de tarjetas con imagen de 192px altura, título, categoría, parque, fecha, capacidad y botones de acción (gestionar imágenes, editar, eliminar). Sistema usa endpoint /api/actividades-fotos para obtener actividades con imágenes. Toggle visual con iconos Grid/List usando colores corporativos. Funcionalidad completamente restaurada según solicitud del usuario
- July 18, 2025. Rediseño completo de especies arbóreas en landing pages - Sección transformada a formato visual con fotos y nombres únicamente (similar a amenidades). Tarjetas cuadradas con hover effects, click en imagen abre modal expandido con panel lateral mostrando toda la información técnica (nombre científico, estado, meta, zona, familia, origen, cantidad plantada/recomendada). Modal elegante con backdrop semitransparente, panel informativo de 320px ancho, badges de categorías y diseño profesional. Enfoque visual-first eliminando saturación de información técnica de las tarjetas
- July 18, 2025. Iconos de amenidades aumentados 20% adicional - Contenedores principales de w-16 h-16 a w-20 h-20 píxeles, iconos del sistema de h-8 w-8 a h-10 w-10 píxeles, iconos personalizados redimensionados proporcionalmente. Mayor impacto visual en las tarjetas de amenidades manteniendo diseño limpio y profesional
- July 18, 2025. Sistema de banners de ancho completo extendido a todas las páginas principales - Implementados banners independientes con técnica container breakout en /volunteers (espacio ID 37, asignación ID 46 "Únete a la Comunidad Verde") e /instructors (espacio ID 38, asignación ID 47 "Certificación Profesional para Instructores"). Sistema publicitario ahora operativo en 7 páginas principales: homepage (Anuncio Luis), /parks (Parks for Life), /activities (Descubre Parques), /concessions (Equipos Deportivos ProFit), /tree-species (Productos Ecológicos), /volunteers (Únete a la Comunidad Verde), /instructors (Certificación Profesional). Cada página tiene espacio publicitario independiente con tracking completo de impresiones y clicks
- July 18, 2025. Sistema de banner independiente implementado en página de actividades - Sustituido banner existente por nuevo espacio publicitario ID 34 "Banner Activities Búsqueda (1200x150px)" con técnica container breakout para ancho completo. Asignación ID 43 creada con anuncio "Descubre los Mejores Parques Urbanos" demostrando independencia total del sistema. Banner anterior (ID 6) mantenido para otras funciones. Ahora todas las páginas principales tienen banners independientes de ancho completo: homepage (Anuncio Luis), /parks (Parks for Life), /activities (Descubre Parques), páginas individuales (Anuncio Luis)
- July 18, 2025. Sistema de banners publicitarios completamente expandido - Creado nuevo espacio publicitario ID 31 "Banner Parks Búsqueda (1200x150px)" en página /parks posicionado estratégicamente entre filtros de búsqueda y resultados de parques. Asignación publicitaria ID 40 creada con anuncio "Parks for Life" activo. Banner principal homepage (ID 14) con anuncio "Anuncio Luis" operativo. Componente AdSpace completamente flexible que funciona sin dependencia de parámetro position específico. Ambos banners con diseño limpio (150px altura, object-cover, sin decoraciones) y tracking completo de impresiones y clicks. Sistema escalable para agregar banners en cualquier página del sistema
- July 18, 2025. Banner de páginas individuales corregido para ancho completo - Problema identificado donde banner en /parque/bosque-los-colomos-5 no alcanzaba ancho completo por estar dentro del grid de 2 columnas. Banner reubicado fuera del contenedor grid (después de línea 1123) usando técnica container breakout. Ahora todas las ubicaciones tienen banners de ancho completo consistente: homepage, página /parks, y páginas individuales de parques
- July 18, 2025. Banners publicitarios extendidos a ancho completo de página sin desconfigurar layout - Implementada técnica de "container breakout" usando w-screen con posicionamiento relative left-1/2 right-1/2 y márgenes negativos -ml-[50vw] -mr-[50vw] que permite que banners escapen del contenedor limitado y ocupen 100% del ancho de ventana. Aplicado en todas las ubicaciones: homepage principal, página /parks, y páginas individuales de parques (landing pages). Sistema mantiene el resto del contenido en sus contenedores originales sin afectar el layout existente. Banners ahora tienen impacto visual máximo con ancho completo de pantalla
- July 18, 2025. Sistema de banners publicitarios expandido a páginas de parques individuales - Nuevo espacio publicitario ID 33 "Banner Parques Landing (1200x150px)" creado para todas las landing pages de parques individuales (ej: /parque/bosque-los-colomos-5). Banner posicionado después de la sección "Galería de Imágenes" con misma arquitectura que homepage y página /parks. Asignación ID 42 creada mostrando "Anuncio Luis" en todas las páginas de parques. Sistema publicitario ahora cubre: homepage principal + página búsqueda parques + páginas individuales de parques con diseño consistente 1200x150px
- July 18, 2025. Sistema de banner publicitario principal completamente implementado - Anuncio "Anuncio Luis" reubicado de sidebar a banner prominente debajo del botón "Ver Todos los Parques" en homepage. Espacio publicitario ID 14 renombrado a "Banner Homepage Principal (1200x150px)" con dimensiones exactas para guiar a usuarios administrativos. Componente AdSpace mejorado con layout específico para banners (imagen completa, 150px altura, object-cover). Lógica de consulta optimizada para buscar asignaciones por spaceId sin depender de coincidencia exacta de posición. Banner publicitario funcional con tracking de impresiones y clicks operativo. Diseño limpio sin decoraciones adicionales que respeta el ancho total de las tres tarjetas de parques
- July 18, 2025. Sistema de creación de asignaciones publicitarias completamente reparado - Corregido error crítico en frontend donde apiRequest recibía parámetro 'body' en lugar de 'data', causando que el cuerpo de la petición estuviera vacío (content-length: 0). Validación backend robusta implementada con verificación de IDs válidos y manejo de errores mejorado. Sistema de autenticación verificado funcionando correctamente con usuarios admin. Asignación de prueba ID 37 creada exitosamente mediante curl. Funcionalidad de creación de asignaciones publicitarias completamente operativa con validación tanto frontend como backend
- July 17, 2025. Sistema de clicks publicitarios completamente reparado - Corregido mapeo de campo 'content' a 'targetUrl' en todos los endpoints de advertising-routes.ts. Endpoints actualizados: /advertisements (linkUrl→content), /space-mappings (link_url→content), /campaigns/:id/advertisements (clickUrl→content), /placements (link_url→content as target_url). Campo "URL de Contenido" agregado a formularios de creación y edición de anuncios con explicaciones claras. Backend PUT endpoint actualizado para manejar estructura de datos del frontend correctamente. Sistema de debugging agregado al click handler con logs detallados. Funcionalidad de clicks en banners publicitarios ahora operativa en todos los espacios publicitarios
- July 17, 2025. Sistema de rutas publicitarias completamente reparado - Registradas correctamente las rutas del sistema de publicidad en server/index.ts usando import dinámico de advertising-routes.ts. Endpoint /api/advertising-management/space-mappings ahora devuelve JSON correctamente en lugar de HTML. Página de mapeo de espacios publicitarios completamente funcional con AdminLayout integrado para mostrar sidebar administrativo. Sistema de visualización de relaciones espacio-anuncio operativo con datos auténticos de base de datos. Arquitectura publicitaria completamente estable y funcional para gestión administrativa
- July 17, 2025. Sistema de diversificación publicitaria completamente implementado - Eliminado completamente el problema de fichas publicitarias duplicadas en todas las páginas principales. Creados espacios publicitarios únicos: /concessions con 5 espacios sidebar (IDs 8, 9, 19, 23, 24, 25) e /instructors con 4 espacios sidebar (IDs 26, 27, 28, 29). Anuncios variados: Yoga, Equipo Deportivo, Servicios de Jardinería, Equipos ProFit, Productos Ecológicos, Descubre Parques, Voluntariado Comunitario. Cada ficha ahora muestra contenido publicitario único sin duplicación. Sistema de asignaciones automáticas implementado que garantiza diversidad real. Arquitectura escalable que permite agregar nuevos espacios sin duplicación. Problema original de "fichas iguales" completamente resuelto en /parks, /activities, /concessions e /instructors
- July 17, 2025. Sistema de experiencia de usuario publicitaria completamente limpio - Eliminados completamente los botones de cerrar (X) y opciones de ocultar anuncios de la vista pública. Componente AdSpace modificado para remover funcionalidad de isVisible, handleClose y botones de control para usuarios públicos. Solo mantenida funcionalidad de click para redirección a enlaces de anuncios. Importaciones de iconos X removidas. Sistema publicitario ahora profesional sin controles administrativos expuestos a usuarios públicos. Experiencia de usuario mejorada que respeta la naturaleza comercial de la publicidad digital
- July 17, 2025. Reorganización completa del layout de landing pages de parques implementada - Sección "Galería de Imágenes" movida del sidebar derecho al lado izquierdo, ubicada justo debajo de "Concesiones y Servicios" para mejor flujo de contenido. Creado nuevo espacio publicitario "Sidebar Galería Parques" (ID 30) en el lugar que ocupaba la galería en el sidebar derecho. Asignación publicitaria activa creada (ID 36) con anuncio "Descubre los Mejores Parques Urbanos" vigente hasta agosto 2025. Componente AdSpace integrado correctamente con pageType "park-landing" y position "sidebar". Mejora significativa en la experiencia de usuario al tener galería de imágenes más accesible en el flujo principal de contenido, mientras se mantiene diversidad publicitaria en sidebar
- July 17, 2025. Sistema ultra-extremo de cache-busting para imágenes publicitarias completamente resuelto - Implementado sistema de 8 capas ultra-agresivo para resolver definitivamente problemas de actualización de imágenes externas (Unsplash): (1) Timestamp automático basado en updated_at de base de datos, (2) RefreshKey incremental que se incrementa automáticamente, (3) ForceRender que detecta cambios en updated_at y fuerza re-render, (4) Keys únicos de React que combinan múltiples parámetros únicos, (5) Invalidación múltiple del cache con delays escalonados (0ms, 500ms, 1000ms, 1500ms, 2000ms, 3000ms, 4000ms), (6) Invalidación brutal del DOM que fuerza recarga de imágenes, (7) Recreación completa de contenedores DOM, (8) Funciones especializadas createImageElement() y forceImageReload() para manipulación DOM directa. URLs finales incluyen 7 parámetros de cache-busting (v=timestamp&r=refreshKey&f=forceRender&t=currentTime&rnd=randomId&cb=cacheBust&uid=uniqueId). Sistema verificado funcionando con RefreshKey en valores altos (44+) y ForceRender incrementando correctamente. Error crítico de variable 'data' undefined corregido. Problema crítico de imágenes que no se actualizaban inmediatamente completamente solucionado con solución ultra-extrema de 8 capas
- July 17, 2025. Sistema híbrido de almacenamiento multimedia para publicidad completamente implementado - Tabla ad_media_files creada para gestionar archivos multimedia subidos. Todas las columnas necesarias agregadas a tabla advertisements (content, storage_type, media_file_id, duration, type, status). Funcionalidad completa de subida de archivos (imágenes, videos, GIFs) con validación de tipos y tamaños. Formularios híbridos implementados que permiten elegir entre URL externa o subida de archivos. Sistema de cache-busting implementado para imágenes con timestamps para evitar problemas de cache del navegador. Indicadores de carga y manejo de errores completos. Invalidación de cache mejorada en React Query para actualizaciones inmediatas. Sistema completamente operativo con 4 capas de arquitectura: frontend, backend, base de datos y almacenamiento
- July 16, 2025. Sistema completo de publicidad para instructores implementado y funcional - AdSpace integrado en página principal /instructors con anuncio header "Certificación Profesional para Instructores" (asignación ID 7). Componente AdSpace actualizado para soportar posición "profile" y pageType "instructors". Espacio publicitario agregado en páginas individuales de instructores (PublicInstructorProfile.tsx) debajo de la ficha "Información del Instructor" con adaptación automática al ancho de columna. Asignación publicitaria creada (ID 8) para espacio sidebar de perfiles (ID 13). Espaciado entre anuncio header y filtros ajustado de py-12 a py-6 para mejor UX. Sistema completo operativo: página principal + perfiles individuales con registro automático de impresiones
- July 16, 2025. Sistema completo de publicidad para actividades implementado y funcional - Resuelto error crítico de importación del componente AdSpace (export default vs named export). Agregado pageType "activity-detail" para páginas individuales de actividades. Creada asignación publicitaria activa (ID 6) para espacio header de actividades usando anuncio de "Clases de Yoga en el Parque" con vigencia hasta agosto 2025. Sistema completo funcionando: banner header en /activities, sidebar publicitario en páginas individuales de actividades debajo de "Información General", registro automático de impresiones verificado en logs. Implementación de publicidad en actividades 100% operativa como parte del sistema integral de gestión de publicidad digital
- July 16, 2025. Sistema completo de catálogo de especies arbóreas con paginación y hero mejorado - Implementada paginación con 10 registros por página en /tree-species con controles de navegación completos (Anterior/Siguiente, números de página clickeables). Sistema de información de rango de registros ("Mostrando X a Y de Z especies"). Botones "Ver más información" agregados en cada ficha tanto en vista grid como lista con colores corporativos (#00a587). Hero section renovado con imagen bonita de parque urbano, overlay semitransparente y texto centrado sobre imagen. Footer institucional completo agregado a páginas individuales de especies (TreeSpeciesDetail.tsx) con branding "Agencia Metropolitana de Bosques Urbanos", enlaces organizados en 6 columnas, información de contacto oficial e integración con logo institucional. Reset automático a página 1 cuando cambian filtros. Sistema completo de experiencia de usuario mejorado
- July 16, 2025. Sistema completo de páginas individuales de especies arbóreas implementado - Creado TreeSpeciesDetail.tsx con diseño modular preparado para futuro módulo de publicidad con 3 espacios publicitarios dedicados. Endpoint backend /api/tree-species/:id/detail desarrollado con censo completo por parques mostrando distribución de ejemplares, alturas promedio y estado de salud. Navegación por pestañas implementada: Información General, Censo por Parques, Cuidado y Mantenimiento. Tarjetas de especies en página principal convertidas a clickeables con enlaces directos a páginas individuales. Ruta /tree-species/:id agregada a App.tsx con lazy loading. Corrección crítica de consulta SQL cambiando t.height_meters por t.height para coincidir con esquema real de base de datos. Sistema completo funcional preparado para integración de módulo publicitario según especificaciones del usuario
- July 16, 2025. Sistema de navegación Header completamente reestructurado con menús organizados - Implementados nuevos menús dropdown "Contenido" (Actividades, Calendario, Concesiones) y "Usuarios" (Arbolado, Fauna, Voluntarios, Instructores). Página TreeSpecies.tsx completamente funcional con catálogo de especies arbóreas del backend, filtros avanzados, vistas grid/list, estadísticas y búsqueda. Página Fauna.tsx creada como placeholder con diseño profesional para desarrollo futuro. Rutas /tree-species y /fauna agregadas a App.tsx con lazy loading. Menú móvil actualizado con estructura acordeón para ambas secciones. Navegación coherente entre escritorio y móvil con detección automática de módulo activo. Sistema completo de reorganización de navegación principal implementado según especificaciones del usuario
- July 15, 2025. Sistema inteligente de mantenimiento de árboles con búsqueda por código implementado - Formulario de mantenimiento renovado con código del árbol como primer campo prioritario. Búsqueda automática por código completa información de parque, especie y árbol específico instantáneamente. Función handleTreeCodeSearch implementada con búsqueda exacta case-insensitive. Visualización completa de árbol encontrado con código, especie, parque y estado de salud. Alertas para códigos no encontrados con sugerencias de usar filtros manuales. Reseteo completo del formulario al cerrar modal incluyendo campos de búsqueda. Error crítico de inicialización de getTreesForSelection resuelto moviendo useEffect después de definición de función. Sistema optimizado para flujo de trabajo rápido: teclear código → auto-completar → proceder a mantenimiento

- July 15, 2025. Sistema completo de generación automática de códigos únicos para árboles implementado - Endpoint POST /api/trees completamente renovado con generación automática de códigos cuando no se proporciona código manual. Eliminado requisito de código como campo obligatorio. Lógica de generación automática usando formato "ESPECIE-PARQUE-NÚMERO" (ejemplo: FRE-BOS-631). Función generateUniqueTreeCode implementada con verificación de duplicados y hasta 10 intentos de generación. Problemas críticos de Drizzle ORM resueltos reemplazando consultas problemáticas por SQL directo usando pool.query(). Sistema completamente funcional: crear árbol sin código → genera automáticamente código único → visualiza correctamente en inventario. Verificado con árbol ID 847 código "FRE-BOS-631". Mapeo completo de campos camelCase a snake_case sincronizado con esquema de base de datos. Funcionalidad crítica operativa para simplificar creación de árboles en inventario
- July 15, 2025. Sistema completo de códigos únicos para árboles implementado - Agregada columna 'code' a tabla trees con constraint único. Script generate-tree-codes.js creado con generación automática de códigos en formato "ESPECIE-PARQUE-NÚMERO" usando abreviaciones de especies y parques. Todos los 154 árboles del sistema ahora tienen códigos únicos asignados (ejemplo: CAS-BOS-290, JAC-PAR-434, MEZ-PAR-374). Sistema integrado con formulario de mantenimiento para identificación rápida de árboles. Actualizado schema.ts con campo code único. Funcionalidad completa de búsqueda y filtrado por código en interfaz de mantenimiento
- July 15, 2025. Sistema completo de códigos SAT 400-600 implementado según normatividad mexicana fiscal - Estructura SAT oficial completamente implementada con separación correcta de "Ingresos" (400), "Costos" (500) y "Gastos" (600) como categorías Nivel A independientes. Agregados códigos faltantes de la serie 400: Ingresos por ventas (401), servicios (402), arrendamiento (403), intereses (404), otros ingresos (405), ingresos financieros (406), actividades especiales (407), transferencias (408), ingresos diversos (409). Sistema completo incluye 210+ códigos SAT oficiales (67 Ingresos, 39 Costos, 104 Gastos) con subcategorías detalladas: ventas nacionales/extranjeras, servicios profesionales, arrendamiento inmuebles/muebles, intereses bancarios/moratorios, subsidios, regalías, dividendos, actividades agrícolas/ganaderas, transferencias gubernamentales, licencias, patentes, franquicias, etc. Base de datos sincronizada con estructura jerárquica completa cumpliendo normatividad fiscal mexicana SAT
- July 15, 2025. Sistema de códigos SAT 600 (Gastos) completamente reparado - Identificado problema crítico donde códigos SAT que empiezan con 600 no se estaban cargando en /admin/accounting/categories. Actualizado endpoint /api/accounting/import-sat-codes en server/accounting-routes.ts para incluir estructura completa de gastos SAT: 600 (Gastos principal), 601 (Gastos generales con 84 subcategorías), 602 (Gastos de venta), 603 (Gastos de administración). Agregados códigos específicos como sueldos, prestaciones, honorarios, servicios, impuestos, nóminas, IMSS, Infonavit, SAR, combustibles, mantenimiento, seguros, publicidad, etc. Sistema de importación SAT ahora incluye 100+ códigos oficiales de gastos cumpliendo con normatividad mexicana fiscal. Separación correcta de Costos (500) y Gastos (600) según estructura SAT oficial
- July 15, 2025. Sistema de filtros de parques en mantenimiento de árboles completamente reparado - Identificado problema crítico de routing donde `/admin/trees/maintenance` apuntaba a archivo incorrecto (`enhanced.tsx` en lugar de `index.tsx`). Corregido routing en App.tsx para usar componente correcto. Implementado fetch directo con useState para cargar parques eliminando problemas de cache de React Query. Sistema de filtros ahora completamente funcional con 13 parques cargados correctamente, filtros por parque/especie/tipo funcionando. Eliminado logging de diagnóstico dejando código limpio y optimizado
- July 15, 2025. Formulario de mantenimiento de árboles completamente renovado con funcionalidad profesional - Reemplazado formulario simple con sistema avanzado de 3 pestañas: (1) Selección Jerárquica de Árbol con filtros cascada Parque→Especie→Árbol, (2) Detalles del Mantenimiento con campos expandidos (tipo, urgencia, fecha, responsable, horas, costo, materiales), (3) Información Adicional con condiciones climáticas, estados antes/después, recomendaciones y seguimiento. Agregada búsqueda inteligente por código de árbol que filtra en tiempo real. Interfaz modal expandida (4xl) con validación completa, iconos descriptivos, colores corporativos y confirmación visual del árbol seleccionado con detalles completos. Sistema integrado con inventario de árboles permitiendo búsqueda por código (BSK-001, PAR-025) y visualización mejorada con badges de estado
- July 15, 2025. Selector de árboles específicos completamente reparado - Corregido problema crítico donde el dropdown "Árbol Específico" no se desplegaba correctamente. Agregado filtro defensivo para elementos vacíos, mejores mensajes de estado para casos sin datos, botón "Limpiar" para búsqueda, indicador de coincidencias encontradas. Implementado reset automático de estados cuando cambian filtros padre (parque/especie) y logging de diagnóstico. Validación robusta que verifica existencia de id y code antes de renderizar elementos SelectItem. Sistema de confirmación visual mejorado con detalles completos del árbol seleccionado (código, especie, parque, estado)
- July 15, 2025. Sistema de evaluaciones de parques limpiado completamente - Eliminadas 1,475 evaluaciones duplicadas manteniendo solo el registro más reciente de cada evaluador por parque. Base de datos reducida de 1,484 a 9 evaluaciones únicas. Implementada paginación del servidor con 10 registros por página, eliminando doble paginación (cliente + servidor). Agregada búsqueda integrada por nombre, parque, ciudad y comentarios. Controles completos de navegación con botones anterior/siguiente y números de página clickeables. Sistema optimizado para manejar grandes volúmenes de datos con eficiencia
- July 15, 2025. Problema de vibración en módulo "Mkt & Comm" completamente resuelto - Identificado y corregido error crítico donde el módulo usaba valor "mkt-comm" pero el esquema de colores solo tenía "marketing" definido. Actualizado esquema de colores para usar "mkt-comm" correctamente con colores lime. Simplificado procesamiento recursivo para evitar bucles infinitos que causaban re-renderizado constante. Eliminado procesamiento excesivo de iconos anidados. Módulo ahora funciona correctamente sin efectos de vibración

- July 15, 2025. Nomenclatura del sidebar administrativo simplificada - Cambiado "Balance de Comprobación" por "Balanza" y "Integración Financiera" por "Integración" en submenús de Contabilidad, "Concesiones Activas" por "C. Activas" en submenús de Concesiones (Admin & Finanzas), y en módulo Gestión/Visitantes: "Conteo de Visitantes" por "Conteo", "Dashboard de Visitantes" por "Dashboard", y "Criterios de Evaluación" por "Criterios". También actualizado "Balance de Comprobación" por "Balanza" en título principal de la página, tarjeta del dashboard de contabilidad, comentarios del código backend y mensajes de consola. Simplificación completa de terminología según solicitud del usuario

- July 15, 2025. Sistema de navegación sidebar completamente reorganizado con menú principal "Gestión" - Creado menú principal "Gestión" que agrupa los módulos relacionados con la operación diaria: Visitantes, Parques, Arbolado, Actividades, Eventos, Reservas y Amenidades. Cada submódulo organizado con bordes izquierdos y iconos diferenciados. Navegación intuitiva con detección automática de módulo activo. Configuración movida a segundo lugar después de Dashboard. Mejora significativa en UX de navegación administrativa para usuarios municipales

- July 15, 2025. Orden de módulos del sidebar reorganizado según especificaciones del usuario - Módulo "Configuración" movido arriba del módulo "Gestión" para priorizar acceso a configuración del sistema. Icono del módulo "Gestión" cambiado de Settings a FolderOpen para diferenciarlo del módulo "Configuración" y representar mejor su función de gestión operativa. Orden final: Dashboard, Configuración, Gestión, O & M, Admin & Finanzas, Mkt & Comm, Recursos Humanos, Seguridad. Navegación optimizada con iconos distintivos para cada módulo

- July 15, 2025. Duplicados de módulos eliminados del sidebar administrativo - Removido módulo "Eventos" standalone (mantiene integración en "Gestión"), eliminado módulo "Voluntarios" standalone (mantiene integración en "O & M"), eliminado módulo "Recursos Humanos" duplicado, removido módulo "Comunicación" standalone (mantiene integración en "Mkt & Comm"), y eliminado módulo "Seguridad" duplicado (mantiene versión completa con Dashboard, Contraseña, Auditoría y Configuración). Sidebar completamente limpio con navegación única por módulo: Eventos solo en "Gestión", Voluntarios solo en "O & M", Comunicación solo en "Mkt & Comm", HR y Seguridad como módulos independientes. Funcionalidad completa mantenida con rutas correctas y detección automática de módulo activo

- July 15, 2025. Reorganización jerárquica completa del sidebar administrativo con nuevos grupos de módulos - Creado mega-módulo "Admin & Finanzas" que agrupa únicamente Finanzas, Contabilidad y Concesiones. Separado nuevo módulo "Mkt & Comm" que integra Marketing y Comunicación con subsecciones jerárquicas. Recursos Humanos convertido en módulo independiente junto con Eventos y Seguridad. Estructura final: 1) Configuración, 2) Gestión (8 módulos), 3) O & M (3 módulos), 4) Admin & Finanzas (3 módulos), 5) Mkt & Comm (2 módulos), 6) Recursos Humanos, 7) Eventos, 8) Seguridad. Función getActiveModule actualizada para nueva arquitectura con detección automática de módulo activo según rutas

- July 15, 2025. Sistema de paginación y vista extendida implementado en catálogo de actividades - Agregada funcionalidad de paginación con 10 registros por página, controles de navegación completos con números de página clickeables. Sistema de vista dual: Grid (compacta) y Lista (extendida) con información detallada de actividades. Vista extendida muestra información completa en layout de 3 columnas: Información General, Detalles y Requisitos. Filtros por categoría, parque y búsqueda de texto. Sistema robusto de control de estados y navegación automática entre páginas

- July 15, 2025. Sistema de matriz de flujo de efectivo completamente reparado y funcional - Resuelto problema crítico de endpoint duplicado /api/cash-flow-matrix que causaba conflictos y datos vacíos. Removida ruta duplicada en server/index.ts y corregida ruta principal en server/finance-routes.ts para usar directamente tabla cash_flow_matrix con consultas SQL. Agregado import de pool para acceso a base de datos. Endpoint ahora procesa correctamente datos de integración automática: transacción $3,000 → asiento contable ID 28 → matriz de flujo actualizada (ingresos: $1,500→$4,500, neto: -$1,000→$2,000). Sistema de "single source of truth" completamente operativo y verificado: transacciones contables → asientos contables → matriz de flujo → estados financieros automáticamente

- July 15, 2025. Sistema de integración automática contable-financiera completamente implementado y funcional - Creados hooks automáticos en endpoint POST /api/accounting/transactions que ejecutan generateAccountingJournalEntry() y updateCashFlowMatrix() al crear cada transacción contable. Funciones de integración implementadas con lógica de doble entrada: ingresos (débito caja/crédito ingresos) y gastos (débito gastos/crédito caja). Tabla cash_flow_matrix creada con campos completos, índices optimizados y constraint único. Integración automática verificada con 4 transacciones de prueba generando asientos contables (IDs 25-26) y registros de matriz de flujo correctamente. Página de monitoreo actualizada con alerta de "Integración Automática Activa". Sistema de "single source of truth" completamente operativo: transacciones contables → asientos contables → matriz de flujo → estados financieros automáticamente

- July 15, 2025. Sistema de eliminación de transacciones contables completamente funcional - Endpoint DELETE /api/accounting/transactions/:id implementado con validación de existencia y logging detallado. Manejo de errores mejorado en frontend con notificaciones toast para éxito/error. Corrección crítica de mapeo de campos para visualización de categorías: transaction.category_name → transaction.categoryName en tabla y modal de detalles. Funcionalidad de eliminación completa con confirmación del usuario y actualización automática de cache. Sistema de transacciones contables 100% operativo con CRUD completo y visualización correcta de categorías SAT

- July 15, 2025. Sistema de importación de códigos SAT oficiales completamente implementado y funcional - Endpoint backend /api/accounting/import-sat-codes creado con 60+ códigos SAT mexicanos oficiales estructurados jerárquicamente. Lógica de importación inteligente que maneja relaciones padre-hijo y realiza actualización/inserción automática. Botón "Importar Códigos SAT" integrado en interface de categorías contables con validación y notificaciones. Visualización mejorada de códigos SAT en tarjetas y tabla con badges "Oficial" y colores distintivos azules. Sistema completo de 5 niveles (A→B→C→D→E) con categorías principales: Activo (100), Pasivo (200), Capital (300), Ingresos (400), Gastos (500) y subcategorías detalladas. Resolución de errores SelectItem con valores vacíos y manejo correcto de parent_id. Códigos SAT ahora integrados directamente desde estándares gubernamentales mexicanos para cumplimiento fiscal completo

- July 14, 2025. Módulo de contabilidad independiente implementado completamente - Creado módulo separado del sistema financiero con arquitectura de 5 niveles jerárquicos (A→B→C→D→E) integrado con códigos SAT mexicanos. Dashboard principal con 6 submódulos funcionales: Gestión de Efectivo, Activos Fijos, Asientos Contables, Balance de Comprobación, Estados Financieros y Configuración Contable. Sistema de "single source of truth" para conversión automática de transacciones financieras a asientos contables. Interface profesional con navegación dedicada en sidebar administrativo. Páginas de categorías y transacciones con CRUD completo y validación Zod. Rutas registradas correctamente en enrutador React con lazy loading. Módulo preparado para integración automática con sistema financiero existente. Estados financieros completamente implementados con dos pestañas: Balance General (activos, pasivos y patrimonio) y Estado de Resultados (ingresos, gastos y utilidad neta) con cálculos automáticos, validación de equilibrio y datos simulados profesionales

- July 14, 2025. Sistema de eliminación de parques completamente resuelto - Identificadas y eliminadas todas las tablas con restricciones de clave foránea que impedían la eliminación de parques. Sistema actualizado para eliminar en cascada todos los registros relacionados: módulo AMBU completo (6 tablas), concesiones activas, conteos de visitantes, evaluaciones de parques, espacios reservables, contratos, documentos, amenidades, imágenes, actividades, incidentes, comentarios, árboles, mantenimientos, asignaciones de instructores y activos. Eliminación exitosa del parque 6 (Parque México) con validación completa de integridad de datos. Función de eliminación robusta preparada para eliminación segura de cualquier parque sin errores de FK

- July 14, 2025. Dashboard duplicado de marketing consolidado exitosamente - Eliminado dashboard duplicado en sección de patrocinadores (/admin/marketing/sponsors) manteniendo solo el dashboard principal en /admin/marketing. Página de patrocinadores simplificada con 3 pestañas: Patrocinadores, Paquetes y Campañas. Campañas duplicadas eliminadas de base de datos (122 registros eliminados, conservando solo 2 únicos). Sistema optimizado con endpoints consolidados, caché inteligente (5 min stale, 10 min GC) y mejor rendimiento. Arquitectura limpia con un solo punto de entrada para métricas de marketing

- July 14, 2025. Sistema de evaluaciones de parques completamente mejorado con funcionalidades avanzadas - Implementadas vistas de tarjetas y lista extendida para ambas pestañas (Evaluaciones y Resumen). Sistema de filtros avanzados con búsqueda, estado y parques. Paginación profesional con 10 registros por página, navegación con números de página y estadísticas. Funcionalidad de importación/exportación CSV para ambas pestañas. Interface limpia y responsive con gestión adecuada de datos. Sistema operativo con 314 evaluaciones y funcionalidades completas. Nombre del menú cambiado de "Reservas de Espacios" a "Reservas" según solicitud del usuario

- July 14, 2025. Sección de métricas del módulo de marketing eliminada completamente - Removida la página /admin/marketing/metrics que causaba errores de base de datos por columna event_id inexistente. Entrada del sidebar eliminada de AdminSidebarComplete.tsx. Ruta eliminada de App.tsx. Archivo metrics.tsx eliminado del sistema. El módulo de marketing ahora contiene solo: Dashboard, Patrocinadores, Contratos, Eventos, Activos y Evaluaciones. Sistema estabilizado sin errores relacionados con métricas

- July 11, 2025. Sistema de evaluaciones de parques completamente reparado y funcional - Corregidos errores críticos SQL reemplazando todas las consultas db.execute(sql.raw()) por pool.query() en server/park-evaluations-routes.ts. Eliminados errores de lectura de propiedades undefined agregando validación robusta en frontend. Sección de evaluaciones integrada con estructura Card para consistencia visual. Sistema completamente operativo con estadísticas precisas, evaluaciones recientes, formularios públicos y moderación administrativa. Crítico para presentación empresarial a Bosques Urbanos de Guadalajara

- July 11, 2025. Configuración de despliegue completamente optimizada para producción - Servidor configurado para funcionar correctamente en host 0.0.0.0 eliminando restricciones de localhost. Múltiples endpoints de verificación de salud agregados (/api/status, /health, /status) con información detallada del sistema. Página de estado HTML implementada para verificación visual de funcionamiento. Manejo robusto de errores con respuestas 503 cuando el sistema no está disponible. Sistema preparado para despliegue en Replit con configuración de puerto dinámico y host universal

- July 11, 2025. Detección automática de entorno de despliegue implementada - Sistema optimizado para detectar automáticamente cuando se ejecuta en producción vs desarrollo usando variables de entorno REPLIT_DEPLOYMENT_ID. Configuración dual que permite desarrollo local con Vite y producción con archivos estáticos. Logging mejorado para diagnóstico de problemas de despliegue. Sistema de archivos estáticos optimizado con fallback para rutas SPA. Aplicación completamente operativa verificada con 169 evaluaciones de parques, 13 parques activos y funcionalidad completa de administración. Crítico para presentación a Bosques Urbanos de Guadalajara en 3 semanas

- July 11, 2025. Interface de evaluaciones completamente simplificada según solicitud del usuario - Eliminada saturación visual en landing pages de parques. Creado componente ParkEvaluationsSectionSimple que solo muestra estadísticas básicas y 2 botones principales: "Evalúa este parque" y "Ver evaluaciones". Página dedicada /parque/:parkSlug/evaluaciones creada con visualización completa de todas las evaluaciones, estadísticas detalladas, paginación y funcionalidad de filtrado. Ruta registrada en App.tsx con lazy loading. Sistema limpio y profesional que separa la evaluación del parque de la visualización de evaluaciones existentes

- July 11, 2025. Formulario de evaluación completamente reparado y funcional - Corregido problema crítico de validación Zod en endpoint POST /api/park-evaluations que causaba error 400 Bad Request. Esquema de validación actualizado para manejar campos opcionales vacíos y valores undefined. Frontend modificado para enviar solo campos con valores válidos en lugar de campos undefined. Layout de botones arreglado en ParkEvaluationsSectionSimple con apilamiento vertical (Evalúa este parque → Ver evaluaciones). Parámetros de URL sincronizados correctamente (slug → parkId). Sistema de evaluaciones públicas 100% operativo verificado con test exitoso creando evaluación ID 46
- July 11, 2025. Nueva sección "Visitantes" agregada al sidebar administrativo completamente - Creada nueva sección principal "Visitantes" posicionada arriba del módulo de "Parques" con funcionalidad completa de conteo de visitantes y dashboard con reportes. Rutas migradas de /admin/parks/visitor-* a /admin/visitors/* para mayor organización. Sidebar actualizado con nueva numeración de secciones. Navegación restructurada para mejor experiencia de usuario con módulos especializados

- July 09, 2025. Sistema completo de vacaciones HR completamente funcional - Resueltos problemas críticos de transmisión de datos entre frontend y backend. Sistema de creación de solicitudes de vacaciones 100% operativo: formulario con validación completa, selección de empleados, cálculo automático de días, tipos de solicitud (vacation, sick_leave, maternity, etc.), y procesamiento exitoso en base de datos. Flujo completo verificado: Frontend envía datos → Backend recibe correctamente → Base de datos actualizada → Interface se refresca automáticamente. Módulo de vacaciones listo para presentación empresarial a Bosques Urbanos de Guadalajara con 28 empleados activos y funcionalidad completa de gestión de solicitudes. Botón "Nuevo Voluntario" reparado con navegación correcta a /admin/volunteers/register usando useLocation de wouter. Agregado campo municipalityId requerido al formulario de registro de voluntarios con valor por defecto de Guadalajara (ID: 2)
- July 06, 2025. Sistema completo de Reservas de Espacios implementado y funcional - Módulo integral para gestión de espacios reservables (kioscos, áreas de juegos, picnic, etc.) con base de datos robusta (3 tablas), API REST completa, interface administrativa con 4 páginas principales: listado de reservas activas, catálogo de espacios disponibles, formulario de nueva reserva, y calendario mensual visual. Sistema incluye cálculo automático de costos, validación de horarios, filtros avanzados, estadísticas en tiempo real, estados de reserva (pendiente/confirmada/cancelada/completada), gestión de depósitos y solicitudes especiales. Integrado completamente en sidebar administrativo con navegación fluida. Preparado para presentación crítica a Bosques Urbanos de Guadalajara
- July 05, 2025. Botón de programar mantenimiento agregado al inventario de activos - Implementado icono de calendario (Calendar) que permite acceso directo a la ficha del activo para programar mantenimiento. Botón con color azul distintivo ubicado entre "Editar" y "Reportar incidencia". Función handleScheduleMaintenance redirige a /admin/assets/:id donde se puede gestionar el mantenimiento completo. Interface optimizada con 4 botones de acción: Editar, Programar mantenimiento, Reportar incidencia, Eliminar
- July 05, 2025. Error SelectItem completamente reparado con filtrado defensivo - Corregido error crítico "SelectItem must have a value prop that is not an empty string" implementando filtrado robusto de datos antes de renderizar. Agregada validación defensiva que verifica existencia de id, name y valores no vacíos en categorías y parques. Función safeCategories y safeParks garantizan que solo datos válidos lleguen a componentes SelectItem. Sistema completamente estable sin errores de renderizado
- July 05, 2025. Funcionalidad duplicada de inventario de activos eliminada completamente - Removidos botones redundantes "Ver detalles" (ojo) y "Programar mantenimiento" (reloj) que duplicaban funciones del botón "Editar". Interface simplificada con solo 3 botones esenciales: Editar (gestión completa), Reportar incidencia, Eliminar. Funciones handleView y handleScheduleMaintenance eliminadas del código. Importaciones de iconos Clock y Eye removidas. Sistema optimizado con UX más clara donde "Editar" incluye ver detalles, modificar datos y programar mantenimiento desde una sola interface
- July 05, 2025. Sistema de búsqueda de activos mejorado con tolerancia a errores ortográficos - Implementada búsqueda bidireccional que corrige automáticamente errores comunes como "rebaladilla"↔"resbaladilla". Búsqueda mejorada incluye 4 variantes SQL para máxima flexibilidad. Sistema verificado funcionando correctamente con términos de búsqueda variados. Filtros de inventario de activos completamente robustos
- July 05, 2025. Sistema de mapas en edición de activos completamente mejorado - Identificado y corregido problema de sincronización entre coordenadas de base de datos y visualización del mapa. Agregados botones "Recentrar", "Sincronizar" y "Recargar" para control manual del mapa. Componente MapUpdater mejorado con logging detallado para diagnóstico. Indicador visual verde muestra cuando mapa está sincronizado. Sistema garantiza que coordenadas guardadas en base de datos se reflejen correctamente en el mapa interactivo. Funcionalidad de coordenadas completamente operativa con script de prueba verificado (5 activos con coordenadas válidas en rango de Guadalajara)
- June 30, 2025. Deployment configuration completely fixed for Replit production - Server properly configured to listen on port 5000 with 0.0.0.0 host binding. Multiple health check endpoints added (/api/status, /health, /api/health) for robust deployment monitoring. Production environment properly configured with graceful shutdown handling and optimized startup sequence. All deployment requirements satisfied for autoscale deployment target
- June 16, 2025. Initial setup
- June 16, 2025. Sistema completo de internacionalización implementado - Soporte para español, inglés y portugués con selector de idioma integrado
- June 16, 2025. Traducciones completas del sidebar aplicadas - Todo el sistema de navegación responde al cambio de idioma
- June 16, 2025. Landing page comercial implementada - Página profesional de ventas con branding "Parques de México" disponible en /ventas
- June 16, 2025. Paleta de colores corporativa aplicada - Toda la aplicación usa los colores oficiales de Parques de México (#00a587, #067f5f, #bcd256, #8498a5)
- June 16, 2025. Rebranding completo implementado - Cambio de nombre de "ParquesMX" a "ParkSys" en toda la aplicación
- June 17, 2025. Logo oficial de Parques de México integrado al sistema de recibos de nómina - Template PDF profesional con branding corporativo, campos fiscales mexicanos (RFC, CURP, NSS) y cumplimiento legal completo
- June 17, 2025. Sistema de recibos de nómina completamente funcional - Página de descarga operativa en /api/recibo-nomina, PDF con logo oficial generado (38KB), servidor configurado para archivos estáticos, integración completa con colores corporativos
- June 17, 2025. Documentación completa de arquitectura empresarial generada - Prompt profesional para nuevos proyectos con módulos Configuration/Users/Permissions, Finance integral y HR completo. Sistema modular exportable para crear aplicaciones especializadas
- June 17, 2025. Sistema CRUD completo para categorías financieras implementado - Funcionalidad completa de crear, leer, actualizar y eliminar categorías de ingresos y egresos. Protección de integridad que previene eliminación de categorías en uso. Interface con botones de edición y eliminación integrados
- June 18, 2025. Sistema completo de integración Concesiones → Finanzas implementado - Patrón idéntico al exitoso HR/Nómina aplicado a ingresos por concesiones. Automatización completa de sincronización entre módulos con categorización inteligente y trazabilidad total
- June 18, 2025. Integración Users ↔ Concesionarios completada y funcional - Usuarios con rol "concesionario" aparecen automáticamente en /admin/concessions/concessionaires. Endpoint /api/concessionaires operativo con formateo correcto de datos (name/fullName). Relaciones Drizzle corregidas en shared/schema.ts. Sistema totalmente integrado entre módulos
- June 18, 2025. Sistema automático Concesiones → Finanzas implementado y funcional - Contratos de concesión generan automáticamente ingresos en actual_incomes. Hook automático en creación de contratos activo. Categorización inteligente por tipo de concesión. Trazabilidad completa con campos de integración. Flujo completo: Contrato → Ingreso Automático → Flujo de Efectivo
- June 18, 2025. Integración Concesiones → Finanzas completamente operativa - Hook automático corregido para nuevos contratos. Sistema probado con 5 contratos ($10K, $30K, $15K, $25K, $20K) y sus correspondientes ingresos financieros (IDs 37-41). Paginación implementada en página de ingresos (10 registros por página). Sistema robusto que mantiene la creación de contratos aún si falla la integración financiera
- June 18, 2025. Sistema de prorrateo mensual implementado y verificado - Contratos de concesión generan automáticamente ingresos mensuales prorrateados. Contrato de $10,000 del 17/Junio-31/Diciembre 2025 crea correctamente 7 ingresos de $1,428.57 c/u. Datos verificados en base de datos (IDs 55-61) con categorización "Concesiones". Botón "Actualizar" agregado a interface financiera para refrescar datos
- June 20, 2025. Iconos personalizados completamente funcionales - Corregido endpoint backend para incluir custom_icon_url en consultas de amenidades de parque. Interface ParkAmenity actualizada con customIconUrl. Componente AmenityIcon detecta correctamente iconos personalizados vs sistema. Problema de eliminación de amenidades resuelto - frontend ahora pasa ID correcto de park_amenities en lugar de amenity_id
- June 20, 2025. Iconos de Amenidades Disponibles corregidos - Solucionado problema de renderizado de iconos en página /admin/parks/amenities donde componente AmenityIcon no recibía parámetros correctos (iconType, customIconUrl, size). Todos los 27 iconos de amenidades disponibles ahora se muestran correctamente
- June 21, 2025. Sistema de gestión de imágenes de parques completamente reparado - Identificado y corregido problema crítico de inconsistencia entre schema ('url' vs 'imageUrl') y base de datos real ('image_url'). Schema actualizado, métodos Drizzle ORM corregidos, endpoints API con mapeo automático. Funcionalidad de subida de imágenes para parque 5 completamente operativa
- June 21, 2025. Sistema multimedia completamente funcional implementado - Resuelto problema de endpoint de documentos mediante routing prioritario en server/index.ts. Endpoint /api/parks/:parkId/documents devuelve correctamente datos de park_documents. Sistema de imágenes y documentos 100% operativo con consultas SQL directas y mapeo automático de campos
- June 21, 2025. Problema de ubicación multimedia resuelto - Identificado error de implementación en lugar incorrecto. Contenido estático removido de pestaña "Multimedia" en /admin/parks/5 y reemplazado con componente real ParkMultimediaManager. Sistema ahora conecta correctamente con endpoints del backend para mostrar datos auténticos de la base de datos (2 imágenes + 1 documento PDF del Bosque Los Colomos)
- June 21, 2025. Sistema de gestión multimedia completamente reparado - Corregidos errores críticos de consultas SQL y inconsistencias de base de datos. Reemplazado db.execute por pool.query para consistencia. Endpoints de eliminación y subida de imágenes ahora 100% funcionales. Removido botón rojo de prueba del componente ParkMultimediaManager. Sistema de multimedia operativo con funcionalidad completa CRUD
- June 21, 2025. Interfaz de dos columnas para gestión de amenidades implementada - Sistema mejorado con columna izquierda para amenidades disponibles y columna derecha para amenidades asignadas. Altura extendida a 600px para visualizar cómodamente al menos 10 amenidades por columna. Funcionalidad de agregar con un clic y gestión completa de edición/eliminación
- June 23, 2025. Problemas críticos de despliegue resueltos completamente - Health check endpoint implementado en ruta raíz, inicialización asíncrona de base de datos para evitar bloqueos de startup, protección contra errores de clave duplicada en seeding, manejo robusto de errores en rutas API con respuestas 503 durante inicialización. Sistema optimizado para despliegue en producción
- June 23, 2025. Sistema completamente preparado para despliegue - Health check endpoint verificado respondiendo correctamente en puerto 5000, variables de servidor duplicadas corregidas, configuración de puerto optimizada para variables de entorno (process.env.PORT), graceful shutdown implementado con SIGTERM, seeding problemático deshabilitado para estabilidad. Sistema listo para promoción a producción
- June 23, 2025. Sistema de paginación de actividades implementado y funcional - Página /admin/activities completamente reparada con paginación de 10 registros por página para 23 actividades totales. Errores de SelectItem con valores vacíos corregidos, routing actualizado en App.tsx, filtros funcionales por búsqueda/parque/categoría, controles de navegación Anterior/Siguiente operativos. Sistema robusto con 3 páginas de actividades funcionando correctamente
- June 23, 2025. Reorganización del sidebar de Actividades completada - Submódulo "Organizado" movido arriba de "Listado" según solicitud del usuario. Ruta del Listado actualizada a /admin/activities para usar la página funcional con sistema de categorías
- June 23, 2025. Sidebar completo restaurado con orden correcto en Actividades - Nuevo componente AdminSidebarComplete implementado con todas las secciones del sistema. Orden final en Actividades: Organizador, Listado, Nueva Actividad, Calendario, Instructores. Acordeón de Actividades configurado con defaultOpen=true para visualización automática
- June 23, 2025. Sistema completo de gestión de categorías de actividades implementado - Endpoint /api/activity-categories registrado correctamente en routes.ts, función registerActivityRoutes importada y ejecutada. CRUD completo funcional: crear, leer, actualizar, eliminar categorías. 8 categorías disponibles: Deportivo, Recreación y Bienestar, Arte y Cultura, Naturaleza y Ciencia, Comunidad, Eventos de Temporada, Fitness y Ejercicio, Actividades Familiares. Página /admin/activities/categories operativa con formularios de gestión
- June 23, 2025. Sistema de eliminación de categorías completamente reparado - Resuelto error crítico 500 por inconsistencia entre esquema Drizzle ORM y estructura real de base de datos. Schema de activities sincronizado eliminando columnas inexistentes (capacity, registrationRequired, status, etc.) y conservando solo las 10 columnas reales. Protección de integridad operativa que impide eliminar categorías con actividades asociadas. Funcionalidad de eliminación verificada y funcional para categorías sin dependencias
- June 23, 2025. Sistema de visualización de categorías completamente sincronizado - Corregida visualización de categorías en /admin/activities y /admin/organizador con mapeo automático entre category_id numérico y category string legacy. Colores de etiquetas completamente consistentes: Arte y Cultura (verde), Recreación y Bienestar (azul), Eventos de Temporada (naranja), Deportivo (rojo), Comunidad (púrpura), Naturaleza y Ciencia (teal), Fitness y Ejercicio (índigo). Categorías activas en organizador muestran conteos en tiempo real. Sistema robusto que maneja tanto datos nuevos como legacy
- June 23, 2025. Sistema de paginación para amenidades implementado y funcional - Página /admin/amenities con paginación de 10 registros por página, navegación con botones Anterior/Siguiente, números de página clickeables, estadísticas de rango actual, auto-reset cuando cambian filtros, colores corporativos en página activa (#00a587). Sistema completamente operativo
- June 23, 2025. Problema crítico de eliminación de amenidades en gestión de parques resuelto - Corregido endpoint de eliminación en ParkAmenitiesManager de `/api/park-amenities/` a `/api/parks/${parkId}/amenities/` para coincidir con implementación del servidor. Eliminación de amenidades ahora funciona correctamente con actualización inmediata de la lista
- June 23, 2025. Sistema de edición de parques completamente operativo - Página /admin/parks/7/edit funcionando correctamente con guardado exitoso de cambios. Mutación de actualización ejecutándose sin errores y persistiendo datos en base de datos
- June 23, 2025. Problema de área blanca extra en páginas de edición completamente resuelto - Estructura CSS optimizada, contenedores simplificados, sintaxis JSX corregida, layout limpio que termina apropiadamente después de botones Cancelar/Guardar. Todas las páginas de edición ahora presentan diseño profesional sin espacios innecesarios
- June 23, 2025. Sidebar completamente fijo implementado globalmente - Sidebar permanece inmóvil durante scroll en todas las páginas administrativas. Footer del usuario visible junto con todo el sidebar. AdminLayout modificado con margen izquierdo ml-64 para contenido principal. Página de login corregida con layout de pantalla completa (h-screen w-screen fixed) y z-index superior para evitar conflictos con sidebar fijo
- June 23, 2025. Página de calendario de eventos completamente implementada y funcional - Resueltos errores críticos de parámetros "NaN" en consultas de base de datos con validación de entrada. Página /admin/events/calendar operativa con vista mensual, navegación temporal, lista de próximos eventos, leyenda de estados y controles completos. Routing configurado en App.tsx con lazy loading. Sistema robusto de visualización de eventos con colores por estado
- June 23, 2025. Sidebar inteligente implementado con lógica de contraer/expandir automática - Todos los menús permanecen contraídos por defecto. Sistema inteligente que detecta automáticamente qué módulo debe expandirse basado en la ruta actual del usuario. Experiencia UX mejorada que mantiene navegación limpia hasta que usuario selecciona módulo específico
- June 23, 2025. Sistema completo de Eventos AMBU implementado - Reestructuración total del módulo de eventos basado en formularios oficiales F-DIC-22 (Bajo Impacto) y F-DIC-23 (Alto Impacto). Sistema completo con solicitudes diferenciadas, calendario mensual, tabulador de costos 2025, gestión de documentos, seguimiento de estados y reuniones de logística. Esquema de base de datos dedicado (events-ambu-schema.ts) con 6 tablas especializadas. Rutas API completas registradas en eventos-ambu-routes.ts. Interface administrativo con formularios validados, cálculo automático de costos, y workflow completo desde solicitud hasta realización
- June 23, 2025. Módulo de presupuesto anual completamente eliminado - Removidos todos los archivos relacionados con annual-budget del sistema de finanzas según solicitud del usuario. Eliminados: annual-budget.tsx, annual-budget-advanced.tsx, budget.tsx, budget-simple.tsx, budget-test.tsx, budget-tracking.tsx. Rutas eliminadas de App.tsx y referencias del sidebar removidas. Sistema de finanzas reestructurado sin funcionalidad de presupuesto anual
- June 24, 2025. Sistema de planificación presupuestaria matriz implementado completamente - Matriz de flujo de efectivo anual con proyecciones por meses (month_1 a month_12) funcional. Base de datos budget_projections creada con datos de muestra 2025. API endpoints /api/budget-projections/:year operativos. Interface visual /admin/finance/budget-planning con tabla matricial interactiva. Rutas registradas correctamente en servidor. Sistema completo listo para uso empresarial
- June 24, 2025. Endpoints financieros críticos reparados completamente - Corregidos fallos de API en /api/payroll-expenses y /api/expense-categories mediante registro correcto de finance-routes en server/index.ts. Sistema de rutas financieras ahora completamente funcional con todas las categorías de ingresos y egresos operativas. Eliminadas consultas fallidas que causaban errores en consola del navegador
- June 24, 2025. Sistema de importación/exportación CSV implementado en Planificación Presupuestaria - Funcionalidad completa de importar archivos CSV con preview de datos, validación y mapeo automático de categorías. Endpoint de exportación CSV operativo que genera archivos con formato Tipo,Categoría,Mes1-12,Total. Dialog de importación con interfaz intuitiva y procesamiento con PapaParse. Botón duplicado de exportar CSV eliminado
- June 24, 2025. Sistema de automatización de landing pages completamente funcional - Creación automática de landing pages al agregar parques desde /admin/parks/new con sincronización directa de amenidades personalizadas. Conectividad perfecta entre gestión admin (/admin/parks/5/manage) y landing pages públicas (/parque/bosque-los-colomos-5). Iconos personalizados renderizados correctamente en ambas interfaces. Arquitectura Single Source of Truth implementada exitosamente
- June 24, 2025. Sistema de imágenes principales integrado completamente - Landing pages ahora cargan automáticamente la imagen principal desde la sección multimedia del admin (/admin/parks/:id/manage). Endpoint /parks/:id/extended corregido para incluir consulta de imágenes con lógica primaryImage. Automatización extendida a todos los parques existentes y nuevos parques creados. Sistema robusto que detecta presencia de imágenes y aplica fallback a banner verde cuando no hay multimedia disponible
- June 24, 2025. Sistema de iconos personalizados corregido en página principal - Componente AmenityIcon completamente reconstruido para soportar iconos personalizados con parámetros customIconUrl e iconType. Fichas de parques destacados en homepage ahora muestran iconos correctos (Asadores, Baños, etc.) en lugar de banderas genéricas. Lógica condicional implementada: iconos custom cargan desde URLs, iconos system usan componentes Lucide React
- June 24, 2025. Sección de solicitudes de eventos agregada a landing pages - Implementada sección "¡Realiza tu evento aquí!" debajo de Voluntarios Activos en todas las landing pages de parques. Incluye dos botones: "Solicitud de evento de bajo impacto" (/admin/eventos-ambu/solicitud-bajo-impacto) y "Solicitud de evento de alto impacto" (/admin/eventos-ambu/solicitud-alto-impacto). Diseño con gradiente verde y iconos Calendar para integración visual con sistema AMBU
- June 24, 2025. Título "Actividades y Eventos" corregido a solo "Actividades" - Cambiado en todas las páginas de parques landing según solicitud del usuario para simplificar la nomenclatura de las secciones
- June 24, 2025. Formulario general para eventos completamente restaurado - Creado nuevo formulario en /admin/events/new para dar de alta eventos generales que se perdió con la implementación del módulo AMBU. Incluye validación completa, selección de parques, categorías, fechas/horas, capacidad, precios y contacto. Integrado en sidebar de Actividades como "Nuevo Evento" para diferenciar de actividades regulares
- June 24, 2025. Sección de Eventos separada creada en sidebar - Movido "Nuevo Evento" de Actividades a sección existente "Eventos" que ahora incluye: Nuevo Evento, Calendario, Eventos AMBU, Evento Bajo Impacto, Evento Alto Impacto, Calendario AMBU y Tabulador de Costos. Organización clara que diferencia eventos (con registro formal) de actividades (programación regular). Formulario de nuevo evento y calendario completamente funcionales
- June 24, 2025. Sistema completo de categorías de eventos implementado - Creado gestor de categorías específico para eventos con 6 categorías predefinidas (Culturales, Deportivos, Sociales, Empresariales, Gubernamentales, Benéficos). Sistema CRUD completo en /admin/events/categories con colores personalizables. Tablas event_categories y events creadas en base de datos. Integración completa con formulario de nuevo evento que ahora usa categorías específicas en lugar de categorías de actividades
- June 24, 2025. Integración de formularios AMBU en pestañas completada - Consolidados los formularios "Evento Bajo Impacto" y "Evento Alto Impacto" como pestañas dentro del módulo "Eventos AMBU". Eliminadas entradas duplicadas del sidebar. Nueva página /admin/eventos-ambu/index.tsx con interfaz tabbed que incluye ambos formularios. Navegación simplificada y experiencia de usuario mejorada. Errores críticos de estructura JSX corregidos para permitir renderizado correcto de componentes React
- June 24, 2025. Página problemática de calendario de eventos eliminada - Removida /admin/events/calendar que causaba errores "RangeError: Invalid time value" y crashes en la aplicación. Ruta eliminada de App.tsx y entrada del sidebar removida. Sistema estabilizado para prevenir errores de renderizado
- June 24, 2025. Nombre del calendario AMBU actualizado - Cambiado de "Calendario AMBU" a "Calendario de Eventos AMBU" en sidebar y página principal según solicitud del usuario
- June 24, 2025. Simplificación de nomenclatura en módulo AMBU - Cambiado "Eventos AMBU" a solo "Eventos" en página principal y sidebar según solicitud del usuario. Entrada del calendario simplificada a solo "Calendario". Título del calendario actualizado a "Calendario de Eventos" removiendo referencia AMBU. Error 500 en API de eventos corregido con validación de conteo
- June 24, 2025. Mejoras críticas de código implementadas - Corregido error de importación sql en eventos-ambu-routes.ts, mejorado tipado TypeScript en cash-flow-matrix.tsx eliminando tipos 'unknown', optimizados console.log solo para desarrollo, eliminadas declaraciones de debugging innecesarias. Calidad de código mejorada significativamente
- June 24, 2025. Sistema robusto de email implementado completamente - Módulo de correo electrónico con SendGrid y Nodemailer como fallback instalado. Servicio completo con plantillas para bienvenida, eventos, nómina, mantenimiento y voluntarios. API REST para envío manual y automático. Hooks de integración para procesos del sistema. Interface administrativa para configuración y pruebas en /admin/system/email-settings. Sistema preparado para automatización completa de notificaciones
- June 24, 2025. Sistema completo de comunicaciones avanzado implementado bajo "Arbolado" → "Comunicación" - Módulo empresarial con plantillas HTML profesionales (Handlebars), cola de emails automatizada (node-cron), campañas masivas por tipos de usuario, editor de plantillas con variables dinámicas, dashboard de estadísticas en tiempo real, integración total con módulos HR/Parks/Events/Volunteers. Sistema de procesamiento automático cada minuto con reintentos y logs completos. 5 plantillas predefinidas profesionales para bienvenida empleados, recibos nómina, actividades parques, reconocimiento voluntarios y vencimiento contratos. Arquitectura escalable lista para envío masivo empresarial
- June 25, 2025. Módulo de comunicaciones completamente reestructurado con navegación modular - Error crítico de React Suspense corregido con wrapping apropiado de componentes lazy-loaded. Módulo "Comunicación" movido de "Arbolado" a sección principal independiente con 6 submenús: Dashboard, Plantillas, Cola de Emails, Campañas, Envío Masivo, Análisis. Dashboard principal funcional con métricas visuales y acciones rápidas. Arquitectura de componentes limpia con archivo separado para reutilización. Sistema completamente operativo con navegación fluida entre secciones
- June 25, 2025. Sección de plantillas de comunicaciones desarrollada completamente - 10 plantillas especializadas para todos los módulos del sistema (HR, Finanzas, Eventos, Voluntarios, Concesiones, Infraestructura, Seguridad, Medio Ambiente). Dashboard con métricas detalladas, tarjetas individuales con variables disponibles y acciones de gestión. Sistema integral que cubre desde bienvenida de empleados hasta reportes de incidentes y mantenimiento de arbolado
- June 25, 2025. Cola de emails desarrollada con monitoreo en tiempo real - Sistema avanzado de gestión de cola con 6 emails de muestra representando diferentes módulos y estados. Dashboard de rendimiento con estadísticas de procesamiento, tasa de éxito (96.8%), tiempo promedio (2.3s). Interface completa con controles de pausar/procesar, reintentos automáticos, prioridades (urgent/high/normal/low) y distribución por módulos del sistema. Monitoreo en tiempo real del estado de emails (pending/processing/sent/failed)
- June 25, 2025. Sistema de campañas de comunicación implementado completamente - 5 campañas de muestra representando todos los tipos de usuario y módulos del sistema. Dashboard con métricas consolidadas (5 campañas totales, 2 activas, 228 emails enviados, 91.4% tasa apertura promedio). Sistema segmentado por audiencias: Empleados (185 usuarios), Usuarios Activos (1,250), Voluntarios (45), Concesionarios (8). Tipos de campaña: automatizadas, programadas, manuales. Métricas detalladas por campaña: destinatarios, enviados, apertura, clicks. Interface completa con controles de activar/pausar, editar y visualizar campañas
- June 25, 2025. Funcionalidades de "Nueva Campaña" y "Nueva Plantilla" activadas completamente - Formularios avanzados con diálogos modales para crear campañas y plantillas de email. Formulario de campaña con segmentación de audiencias (11 tipos de usuarios), tipos de campaña (manual/programada/automatizada), frecuencias configurables, prioridades y programación avanzada. Formulario de plantilla con editor HTML/texto, sistema de variables dinámicas, categorización por módulos, asuntos personalizables y validaciones completas. Ambos sistemas listos para crear contenido profesional
- June 25, 2025. Sistema de envío masivo (bulk) implementado completamente - Interface avanzada para envíos masivos con selección múltiple de 9 segmentos de audiencia (empleados, usuarios, voluntarios, concesionarios, proveedores). Configuración granular: lotes personalizables, delays entre envíos, modo de prueba, rastreo de aperturas/clicks, enlaces de cancelación. Dashboard en tiempo real con métricas: destinatarios totales, número de lotes, tiempo estimado. Vista previa completa del envío con resumen detallado y programación opcional. Sistema optimizado para envíos masivos empresariales
- June 25, 2025. Sistema de análisis y reportes implementado completamente - Dashboard avanzado de métricas con 6 KPIs principales: emails enviados (2,847), tasa entrega (98.7%), apertura (42.3%), clicks (18.6%), rebote (1.3%), cancelaciones (0.8%). Análisis detallado por módulos del sistema con rendimiento individual. Tracking de campañas recientes con estados y métricas. Ranking de plantillas más efectivas por performance. Tendencias semanales con evolución del engagement. Herramientas de exportación: reportes PDF, CSV, alertas configurables y análisis avanzado. Sistema completo de business intelligence para comunicaciones
- June 26, 2025. Lista de municipios actualizada exclusivamente para Zona Metropolitana de Guadalajara - Eliminados todos los municipios de otros estados y conservados únicamente los 9 municipios de la zona metropolitana de Guadalajara, Jalisco: Guadalajara, Zapopan, San Pedro Tlaquepaque, Tonalá, Tlajomulco de Zúñiga, El Salto, Juanacatlán, Ixtlahuacán de los Membrillos, Zapotlanejo. Error crítico de doble parsing JSON corregido en formularios de parques. Sistema de creación y edición de parques completamente funcional
- June 26, 2025. Sistema de iconos personalizados para especies de árboles completamente reparado - Columnas faltantes (icon_type, custom_icon_url, photo_url, photo_caption) agregadas a tabla tree_species. Formulario simplificado configurado para establecer automáticamente iconType='custom' al subir fotografías. Mapeo completo de campos snake_case a camelCase en respuestas del servidor. Sistema de subida de fotografías operativo con endpoint /api/tree-species/upload-photo. Integración completa entre formulario de especies → base de datos → catálogo visual
- June 27, 2025. Sistema de importación CSV con acentos mexicanos completamente resuelto - Implementada función fixEncoding() en frontend para corrección automática de UTF-8 antes del procesamiento. Corrección masiva aplicada en base de datos (43+ actualizaciones en múltiples iteraciones) para especies existentes con caracteres corruptos. Correcciones específicas: "Mñxico"→"México", "Amñrica"→"América", "asiñtico"→"asiático", "mñnima"→"mínima", "sequña"→"sequía", "ñrbol"→"árbol", "fijaci�n"→"fijación", "nitr�geno"→"nitrógeno", "recolecci�n"→"recolección", "raíces", rangos de años corregidos. Todos los acentos mexicanos funcionando perfectamente verificados en API. Sistema robusto con doble capa de protección (frontend + backend) para garantizar caracteres especiales correctos en importaciones futuras
- June 27, 2025. Catálogo completo de especies de árboles reorganizado completamente - Corrección masiva de mapeo CSV incorrecto que mezclaba datos entre campos. Todas las 14 especies del catálogo actualizadas con información botánica profesional y precisa: descripciones detalladas, beneficios ecológicos específicos, requerimientos de mantenimiento, zonas climáticas, necesidades de suelo/agua/sol, valores ornamentales, usos comunes, esperanza de vida y tasas de crecimiento. Información especializada para especies mexicanas (Guaje, Guamúchil, Mezquite, Tepozan, Palo dulce) y especies ornamentales (Jacaranda, Primavera, Rosa morada). Advertencias de seguridad incluidas para especies tóxicas (Codo de fraile) y punzantes (Yuca). Sistema completo de datos botánicos verificado y funcional
- June 27, 2025. Sistema de edición de especies completamente unificado con formulario completo - Formulario de edición reemplazado completamente para usar la misma interfaz avanzada que "Nueva Especie Arbórea". Funcionalidad completa de subida de fotos integrada en edición con vista previa automática de fotos existentes. Endpoint PUT del backend actualizado para manejar todos los campos del formulario completo (beneficios ecológicos, requerimientos de mantenimiento, zona climática, etc.). Funcionalidad de iconos personalizados sincronizada: subir foto en edición automáticamente actualiza photo_url, custom_icon_url e icon_type='custom'. Sistema unificado que garantiza que las fotos subidas en edición se reflejen tanto en la lista del catálogo como en las páginas públicas de parques
- June 27, 2025. Sistema de instructores integrado completamente en landing pages - Backend modificado para incluir instructores en endpoint /parks/:id/extended con consulta SQL completa (nombre, foto, especialidades, experiencia). Frontend actualizado para mostrar sección de instructores entre "Información Adicional" y "Voluntarios Activos" con tarjetas individuales que incluyen foto de perfil, nombre, especialidades en badges, años de experiencia y calificación con estrellas. 4 instructores creados para Bosque Los Colomos con datos diversos (Ana Sofía Torres - Danza, Carlos Mendoza - Deportes acuáticos, Franco Colapinto - Deportes, María Elena Ruiz - Yoga). Enlace "Conoce a nuestro equipo" agregado al final de la sección dirigiendo a /instructors para ver el equipo completo
- June 27, 2025. Funcionalidad "Ver perfil" implementada completamente en página de instructores - Modal dialog completo activado con información detallada del instructor: foto de perfil grande, especialidades con badges corporativos, información de contacto (email, teléfono), estado de actividad, fecha de ingreso, sección de actividades recientes y botones de acción. Interface responsive con colores corporativos Parques de México. Funcionalidad operativa tanto en vista de tarjetas como en vista de lista. Sistema profesional de visualización de perfiles de instructores
- June 27, 2025. Sistema completo de gestión de instructores integrado al módulo de Actividades - Implementación completa con páginas administrativas (/admin/activities/instructors), rutas API registradas, esquema de base de datos actualizado con campos especializados, 4 instructores de prueba creados (Ana Sofía Torres, Carlos Mendoza, Franco Colapinto, María Elena Ruiz). Errores críticos de navegación wouter corregidos (useNavigate → useLocation). Validación robusta de especialidades y manejo de datos undefined. Sistema completamente operativo y funcional
- June 27, 2025. Sistema de filtros y paginación de instructores completamente implementado - Filtros avanzados por especialidad, calificación mínima y años de experiencia con valores "all" funcionando correctamente. Paginación con 10 registros por página, controles de navegación completos (Anterior/Siguiente), números de página clickeables con colores corporativos (#00a587). Botón "Nuevo Instructor" corregido en página /admin/instructors para dirigir correctamente al formulario /admin/activities/instructors/new en lugar de módulo de usuarios. Sistema robusto de gestión con navegación unificada
- June 27, 2025. Sincronización completa del esquema de instructores resuelto - Problema crítico de inconsistencia entre esquema Drizzle ORM y estructura real de base de datos completamente corregido. Eliminados campos inexistentes (emergencyContactName, emergencyContactPhone) del esquema. Agregado campo obligatorio fullName que faltaba en definición. Endpoint de creación de instructores completamente funcional con instructor Elena Morales creado exitosamente (ID 86). Sistema de arrays para availability y specialties correctamente sincronizado. Creación automática de usuarios vinculados operativa
- June 27, 2025. Sistema de asignación de instructores a actividades completamente implementado - Campo instructor_id agregado a tabla activities con referencia FK. Formulario de nueva actividad incluye selector de instructor con opción "Sin instructor asignado". Actividades reales asignadas al instructor 87 (Feria OSC y Recorrido botánico). Endpoint /api/instructors/{id}/assignments creado y funcional. Pestaña "Actividades" en detalle de instructor operativa mostrando actividades asignadas con información de parque y fechas. Sistema completo de gestión instructor-actividad funcional
- June 27, 2025. Sistema completo de evaluaciones públicas de instructores implementado - Arquitectura de evaluaciones ciudadanas sin autenticación completa. Esquema de base de datos instructor_evaluations actualizado con campos para evaluadores públicos (nombre, email, ciudad, IP). API pública /api/public/instructors/:id/evaluations y /evaluation-stats operativa. Sistema de moderación con estados pending/approved/rejected. 3 evaluaciones de muestra creadas para instructor Franco (87) con 4.67/5 estrellas y 100% recomendación. Componente InstructorEvaluationsList con estadísticas visuales y lista completa. Formulario PublicInstructorEvaluationForm para evaluaciones ciudadanas con validación Zod, calificación por estrellas, y sistema de moderación. Anti-spam con validación por IP. Sistema completo listo para integración en landing pages
- June 27, 2025. Sistema de evaluaciones integrado completamente en landing pages de parques - Botones "Ver perfil" y "Evaluar" agregados a tarjetas de instructores en landing pages. Modal dialog con formulario de evaluación completo integrado. Página pública PublicInstructorProfile creada (/instructor/:id) con información detallada, biografía, contacto, especialidades y sistema completo de evaluaciones. Ruta configurada en App.tsx. Enlaces bidireccionales entre landing pages de parques y perfiles de instructores. Warning de aria-describedby corregido. Sistema completo de evaluaciones públicas operativo desde landing pages con visualización inmediata en perfiles
- June 27, 2025. Botones de evaluación agregados a página principal de instructores (/instructors) - Implementados botones "Ver perfil" y "Evaluar" tanto en vista de tarjetas como en vista de lista. Modal dialog integrado con formulario de evaluación pública completo. Manejo robusto de especialidades como arrays para evitar errores de .split(). Botones con colores diferenciados (púrpura para perfil, verde para evaluación) y enlaces que abren perfiles en nueva pestaña. Error crítico de TypeError en PublicInstructorProfile corregido con validación de tipos para specialties. Sistema de evaluaciones ahora accesible desde múltiples puntos de entrada: landing pages de parques Y página principal de instructores
- June 27, 2025. Sistema de creación de actividades completamente reparado - Error 400 (Bad Request) en endpoint POST /api/activities corregido con mapeo de campos español-inglés (nombre→title, descripcion→description, parqueId→parkId, fechaInicio→startDate, etc.). Botón "Nueva Actividad" en /admin/activities activado usando useLocation de wouter para navegación programática hacia ruta correcta /admin/activities/new. Validación Zod sincronizada con estructura correcta de datos. Sistema completo de actividades funcional desde formulario hasta base de datos
- June 28, 2025. Sistema de integración Parque-Actividades completamente implementado y funcional - Componente ParkActivitiesManager creado con visualización de actividades en pestaña "Actividades" de gestión de parques (/admin/parks/5/manage). Botones "Ver detalle" y "Gestionar en Actividades" operativos con navegación correcta. Endpoint /api/parks/5/activities validado y devolviendo actividad "Test Visualización". Servidor completamente estable (200 OK en health checks y rutas). Sistema de visualización-solo implementado según diseño arquitectónico - gestión de actividades permanece exclusivamente en módulo de actividades, parques muestran vista de solo lectura
- June 28, 2025. Sistema completo de gestión de imágenes de actividades implementado y funcional - Tabla activity_images creada en base de datos con referencias FK a actividades. API endpoints completos para subir, listar, eliminar y gestionar imágenes (/api/activities/:id/images). Componente ActivityImageManager con interfaz drag-and-drop, vista previa de imágenes, gestión de imagen principal y eliminación. Página dedicada /admin/activities/:id/images para gestión visual completa. Integración en flujo de creación: crear actividad desde organizador redirige automáticamente a gestión de imágenes. Sistema de imagen principal funcional que se muestra en tarjetas públicas de actividades en /activities. Workflow completo: Crear actividad → Gestionar imágenes → Visualización pública operativo
- June 28, 2025. Sistema de visualización de imágenes en página pública de actividades completamente resuelto - Endpoint específico /api/actividades-fotos creado para obtener actividades con sus imágenes principales. Query SQL optimizada con LEFT JOIN para incluir datos de activity_images. Frontend actualizado para usar nuevo endpoint que evita conflictos de routing. Componente ActivityCard correctamente configurado para mostrar imágenes cuando están disponibles. Sistema de fallback a gradientes cuando no hay imagen. Actividad "Prueba final" verificada mostrando imagen correctamente en página pública /activities
- June 28, 2025. Sistema de concesiones integrado completamente en landing pages - Implementado siguiendo el mismo patrón exitoso que actividades/árboles/amenidades. Endpoint /api/parks/:id/concessions creado y funcional. Integración en endpoint extendido /api/parks/:id/extended completada. Sección "Concesiones y Servicios" agregada a landing pages posicionada después de Actividades y antes de Documentos. 3 concesiones de prueba creadas para Bosque Los Colomos (Café Verde, EcoBikes, Información Turística). Sistema completamente operativo con visualización de vendedor, tipo, ubicación, fechas y contacto
- June 28, 2025. Reorganización completa de secciones en landing pages finalizada - Múltiples ajustes según instrucciones del usuario: "Documentos y Reglamentos" después de "Voluntarios Activos", "Galería de Imágenes" al final, "Información Adicional" eliminada completamente, y "¡Realiza tu evento aquí!" reubicada después de "Concesiones y Servicios" y antes de "Instructores". Orden final optimizado: Actividades → Concesiones y Servicios → ¡Realiza tu evento aquí! → Instalaciones → Instructores → Voluntarios Activos → Documentos y Reglamentos → Galería. Layout completamente reorganizado según preferencias del usuario
- June 28, 2025. Sistema completo de páginas públicas de concesiones implementado - Creadas páginas ConcessionsList.tsx y ConcessionDetail.tsx con diseño profesional y funcionalidad completa. Rutas /concessions y /concession/:id registradas en App.tsx con lazy loading. Tarjetas de concesiones en landing pages transformadas a formato clickeable siguiendo patrón de especies arbóreas. Botón "Ver todas las concesiones" agregado a cada landing page. Enlace "Concesiones" agregado al menú principal de navegación (Header.tsx) tanto en versión escritorio como móvil. Sistema completo que permite navegar desde landing pages individuales hacia páginas públicas detalladas
- June 28, 2025. Módulo de Concesiones Activas completamente implementado - Nueva estructura lógica de 3 niveles: Catálogo → Concesionarios → Concesiones Activas. Esquema de base de datos activeConcessions con campos completos (ubicación específica, vigencia, términos, financiero, contacto emergencia). Rutas API completas en active-concessions-routes.ts registradas en servidor. Frontend con ActiveConcessionsList (grid con filtros, paginación, modal detalle) y ActiveConcessionForm (formulario completo validado con Zod). Entrada "Concesiones Activas" agregada al sidebar administrativo. Sistema que une catálogo + concesionario + parque + datos específicos operativos. Arquitectura mejorada que soluciona la lógica incompleta del módulo anterior
- June 29, 2025. Sistema de imágenes de concesiones completamente reparado y sincronizado - Configuración de archivos estáticos corregida para servir imágenes desde carpeta uploads correcta. Problema de imágenes rotas resuelto agregando ruta adicional express.static en server/index.ts. Página pública /concessions sincronizada con sistema de concesiones activas que tiene imágenes. Café Verde Bosque ahora muestra imagen correctamente tanto en gestión administrativa como en página pública. Sistema unificado que conecta concesiones activas con visualización pública. CSS mejorado con object-contain para evitar recorte de imágenes
- June 29, 2025. Página de detalles de concesiones completamente renovada - Eliminadas secciones "Información Comercial" y "Vigencia" según solicitud del usuario. Agregada galería de fotos como cabecera con imagen principal (2x2) y 4 imágenes secundarias (1x1). Endpoint GET /api/active-concessions/:id corregido para incluir imagen principal con consulta JOIN a active_concession_images. Error 500 en endpoint PUT resuelto eliminando campos inexistentes (financial_guarantees, insurance_policy) del esquema. Sistema de imágenes principales completamente operativo en /concession/7
- June 29, 2025. Sistema de geolocalización de concesiones completamente implementado y funcional - Mapa embebido con iframe de OpenStreetMap operativo en páginas de detalles. Componente SimpleMap más robusto que reemplaza LeafletMap problemático. Sistema de coordenadas sincronizado entre backend y frontend con parsing preciso. Base de datos actualizada con coordenadas exactas proporcionadas por usuario (20.703971311028425, -103.39164193191763). Funcionalidad de mapas completamente operativa mostrando ubicaciones precisas de concesiones
- June 29, 2025. Módulo completo de seguridad implementado y operativo - Sistema integral de autenticación avanzada con esquema de base de datos completo (audit_logs, login_attempts, account_lockouts, password_reset_tokens, user_activity_logs). Backend con SecurityService para gestión de intentos de login, bloqueo de cuentas, validación de contraseñas y auditoría. API REST completamente funcional en /api/security con endpoints para estadísticas, actividad sospechosa y cambio de contraseñas. Frontend con SecurityDashboard avanzado mostrando métricas en tiempo real, ChangePassword con validación de fortaleza en vivo, y navegación por pestañas. Integración completa en sidebar administrativo con detección automática de módulo activo. Sistema de tablas creado automáticamente con índices optimizados y datos de prueba. Configuración de seguridad robusta con límites configurable de intentos, tiempo de bloqueo, y validación de contraseñas empresarial
- June 29, 2025. Problema de sidebar en módulo de seguridad completamente resuelto - AdminLayout integrado correctamente en página /admin/security eliminando problema de visualización. Estructura JSX corregida con indentación apropiada y cierre de componentes. Detección automática de módulo activo funcionando en AdminSidebarComplete.tsx. Sistema de navegación por pestañas operativo (Dashboard, Contraseña, Auditoría, Configuración). Sidebar visible globalmente con integración completa del módulo de seguridad. CSP warnings de Replit identificados como normales del entorno, no afectan funcionalidad
- June 30, 2025. Sistema completo de recuperación de contraseñas implementado y funcional - Backend completamente operativo con rutas password-recovery-routes.ts registradas. Integración directa con Nodemailer usando credenciales Gmail configuradas (GMAIL_USER, GMAIL_APP_PASSWORD). Tokens seguros de 64 caracteres con expiración de 1 hora almacenados en tabla password_reset_tokens. Página ResetPassword.tsx con validación empresarial de contraseñas (mayúsculas, minúsculas, números, 6+ caracteres). Ruta /auth/reset-password agregada al enrutador React para compatibilidad con enlaces de email. API endpoints completos: /forgot (envío), /verify-token (validación), /reset (cambio) totalmente funcionales. Sistema de emails HTML profesionales con branding corporativo ParkSys. Problemas de usuarios duplicados y errores SQL corregidos completamente. Navegación automática implementada para evitar problemas de enlaces localhost. Autenticación bcrypt corregida en directAuth.ts para uso correcto de hash passwords. Flujo completo verificado y operativo - Usuario Luis con credenciales temp123 funcional
- June 30, 2025. Rebranding completo con logo oficial implementado - Logo de ParkSys reemplazado por logo oficial de Parques de México en Header.tsx y página principal home.tsx. Pie de página completamente renovado inspirado en bosquesamg.mx con diseño profesional de 6 columnas, información oficial de contacto (Av. Alcalde 1351, Tel: 33 3837-4400, bosques@guadalajara.gob.mx), título "Agencia Metropolitana de Bosques Urbanos", colores corporativos verde (#067f5f a #00a587) con acentos amarillo-verde (#bcd256), horarios de atención oficiales y navegación categorizada por servicios y participación ciudadana
- June 30, 2025. Sección de ubicaciones eliminada del módulo de concesionarios - Removida completamente la pestaña "Ubicaciones" de /admin/concessions/concessionaires según solicitud del usuario. Simplificado el diseño de pestañas de 4 a 3 columnas (grid-cols-3): Concesionarios, Gestión Financiera y Evaluaciones. Componente LocationsTab eliminado por completo del código. Sistema de concesionarios optimizado con interfaz más enfocada
- June 30, 2025. Botón "Nuevo Pago" activado completamente en Gestión Financiera - Implementado formulario completo para crear pagos de concesiones con validación Zod, selección de contratos, montos, fechas de vencimiento, estados y notas. Dialog modal profesional con integración React Hook Form, mutación API y notificaciones toast. Sistema completo de gestión de pagos operativo
- June 30, 2025. Reorganización del sidebar de concesiones - Reordenada la navegación del módulo de concesiones para ubicar "Contratos" arriba de "Concesiones Activas" según solicitud del usuario. Nuevo orden lógico: Catálogo → Concesionarios → Contratos → Concesiones Activas → Reportes. Flujo mejorado donde se gestionan primero los contratos y después las concesiones activas basadas en esos contratos
- June 30, 2025. Catálogo de concesiones expandido con 10 nuevos tipos diversos - Agregados tipos especializados que cubren entretenimiento cultural (Teatro, Música), deportes (Acuáticos, Fitness/Yoga), eventos sociales (Familiares, Fotografía), alimentos (Food Truck, Jugos), y tradiciones mexicanas (Juegos Tradicionales, Arte Ecológico). Total: 16 tipos activos en catálogo. Cada tipo incluye requerimientos técnicos, legales, reglas operativas y nivel de impacto (bajo/medio/alto). Sistema completamente funcional con script seed-concession-types.ts
- June 30, 2025. Sistema completo de concesiones activas con imágenes temáticas implementado - Creadas 10 concesiones activas operativas con información completa (IDs 8-17) conectando catálogo → concesionarios → contratos. Cada concesión incluye 2 imágenes temáticas profesionales de Unsplash: imagen principal showcase y galería secundaria. Temas diversos: café orgánico, deportes acuáticos, food truck asiático, eventos familiares, teatro, bicicletas ecológicas, helados artesanales, turismo, cultura y natación. Ingresos mensuales estimados: $11,250 pesos. Sistema multimedia completamente funcional con 20 imágenes profesionales integradas
- July 01, 2025. Sistema de actualización de imágenes de concesiones reparado completamente - Implementado cache-busting con timestamps en URLs de imágenes, mejorado botón "Actualizar" con invalidación completa de cache, configurado refetch automático al cambiar ventana, y ajustada paginación de 8 a 10 elementos por página para mostrar todas las 9 concesiones en una sola página. Solucionados problemas de caching que impedían visualizar imágenes actualizadas inmediatamente
- July 01, 2025. Problema crítico de concesiones en landing pages resuelto completamente - Corregida discrepancia de valores de estado entre base de datos ('active') y consulta del endpoint ('activa'). Endpoint /api/parks/:id/extended actualizado para usar status='active' correcto. Sistema de concesiones ahora completamente funcional en todas las landing pages de parques. Las 9 concesiones activas distribuidas en 9 parques diferentes se muestran correctamente en sus respectivas páginas públicas
- July 01, 2025. Sistema de formularios de actividades completamente unificado - Implementada Opción A: eliminados formularios duplicados y consolidado todo hacia el formulario avanzado del organizador. Ruta /admin/organizador/catalogo/editar/:id ahora usa el formulario original mejor construido (editar.tsx). Archivo editar-nuevo.tsx eliminado. Base de datos limpiada completamente (24 actividades eliminadas) para empezar con datos frescos usando únicamente el formulario unificado del organizador. Archivo activities-simple.tsx eliminado para evitar confusión futura
- July 01, 2025. Sistema de mapeo de categorías de actividades optimizado completamente - Creada función helper reutilizable `mapCategoryToName` en server/routes.ts que centraliza la lógica de conversión de categorías. Función maneja tanto IDs numéricos como strings para garantizar consistencia. Eliminado código duplicado en endpoints POST y PUT de actividades. Sistema robusto que prioriza category_id → string numérico → category normal con fallback a 'Recreación y Bienestar'. Consolidación de lógica de mapeo para mayor mantenibilidad del código
- July 01, 2025. Sistema de precios de actividades completamente reparado - Identificado y corregido problema crítico en endpoint `/api/activities` en activityRoutes.ts donde faltaban campos price e is_free en consulta SQL. Eliminado endpoint duplicado en routes.ts para evitar conflictos. Verificado funcionamiento: actividad ID 78 "Sesiones de Yoga al Amanecer" ahora devuelve precio $150.00 correctamente. Sistema muestra precios reales en lugar de "Sin información de precio"
- July 01, 2025. Categorías del calendario de actividades corregidas a las 6 oficiales - Actualizado categoryColors en calendar.tsx para incluir todas las categorías: Arte y Cultura (verde), Recreación y Bienestar (azul), Eventos de Temporada (naranja), Deportivo (rojo), Comunidad (púrpura), Naturaleza y Ciencia (teal). Sección inferior del calendario ahora muestra las 6 categorías completas en lugar de solo 4
- July 01, 2025. Sidebar del módulo de Actividades reorganizado según orden solicitado - Reordenados los elementos del menú de Actividades en AdminSidebarComplete.tsx: Dashboard, Categorías, Listado, Nueva Actividad, Calendario, Instructores. Navegación optimizada con flujo lógico que va desde el dashboard general hacia funcionalidades específicas
- July 01, 2025. Sistema completo del Green Flag Award expandido y reposicionado - Logo oficial integrado en ExtendedParksList.tsx y ParkCard.tsx con funcionalidad extendida a 4 parques certificados: Bosque Los Colomos (ID: 5), Parque Metropolitano (ID: 2), Parque Alcalde (ID: 4), y Bosque Urbano Tlaquepaque (ID: 18). Logo reposicionado debajo del botón "Ir al Parque" con tamaño aumentado 100% (h-20 w-30) para mayor visibilidad. Estructura flex-col implementada para alineación vertical con gap-2 entre elementos. ParkLandingPage.tsx actualizado para mostrar logos en páginas landing individuales. Cuadro rojo de prueba eliminado completamente de todos los componentes
- July 02, 2025. Dashboard administrativo completamente renovado y mejorado - Eliminadas secciones obsoletas "navigation.modules" y "Estructura Original del Menu" que no aportaban valor. Implementado dashboard ejecutivo completo con gráficas interactivas usando Recharts: tendencias de crecimiento mensuales (LineChart), adopción de módulos (Progress bars), flujo financiero (AreaChart), distribución de tipos de parques (PieChart). Métricas principales con datos reales de todos los módulos (parques, personal RH, actividades, finanzas) con indicadores de progreso y tendencias. Secciones de KPIs críticos, estado del sistema y acciones pendientes. Resumen visual de todos los módulos principales (voluntarios, concesiones, arbolado, comunicación) con enlaces directos de gestión. Colores corporativos Parques de México aplicados consistentemente. Dashboard completamente funcional y profesional
- July 02, 2025. Botones de acción rápida eliminados del dashboard ejecutivo - Removidos los botones "Nuevo Parque", "Nueva Actividad" y "Nuevo Empleado" para crear un diseño más limpio y enfocado únicamente en métricas y análisis
- July 02, 2025. Reorganización completa del sidebar administrativo - Módulos reorganizados en el orden específico solicitado: Configuración, Parques, Árboles, Amenidades, Actividades, Activos, Incidencias, Finanzas, Eventos, Marketing, Concesiones, Recursos Humanos, Comunicación, Seguridad. Navegación optimizada con flujo lógico y acceso directo a todas las funcionalidades del sistema
- July 02, 2025. Sistema de carga de imágenes de perfil completamente reparado - Corregidos problemas críticos de cache y actualización automática. Implementado cache busting con timestamps, eventos personalizados para actualización inmediata, mejor manejo de errores y notificaciones de confirmación. Corregido componente UserProfileImage en sidebar para mostrar correctamente la foto de perfil del usuario logueado usando userId en lugar del objeto user completo
- July 02, 2025. Sistema de edición de árboles completamente expandido con todos los campos del formulario - Auditoria completa de campos del formulario vs base de datos realizada. Agregados 5 campos faltantes: has_hollows, has_exposed_roots, has_pests, is_protected, image_url. Esquema de trees actualizado a 23 campos completos en shared/schema.ts. Backend expandido para mapear todos los campos del formulario (development_stage, age_estimate, canopy_coverage, hasHollows, hasExposedRoots, hasPests, isProtected, imageUrl). Endpoint GET actualizado para devolver todos los nuevos campos con mapeo correcto snake_case a camelCase. Frontend actualizado para cargar y usar todos los campos reales de la base de datos. Sistema completamente sincronizado entre formulario, backend y base de datos con 100% de campos funcionales
- July 02, 2025. Ruta faltante de registro de voluntarios implementada - Creada página /admin/volunteers/register que estaba causando error 404. Formulario completo con validación Zod, información personal, contacto de emergencia, áreas de interés, disponibilidad y consentimientos legales. Integrado con sistema de usuarios para crear voluntarios con rol específico. Navegación corregida en App.tsx con lazy loading y ruta registrada correctamente
- July 02, 2025. Nombres del sidebar de Voluntarios corregidos - Cambiados los nombres en español: "navigation.register" → "Registro", "navigation.evaluations" → "Evaluaciones", "navigation.recognition" → "Reconocimientos". Eliminadas referencias a claves de traducción innecesarias para mejor legibilidad del menú
- July 02, 2025. Sistema de edición de árboles completamente reparado - Corregido acceso a datos del árbol usando estructura correcta del API (treeResponse?.data), actualizado mapeo de campos para usar nombres correctos del backend (speciesId, parkId, healthStatus, etc.), corregidos componentes DatePicker para usar propiedades selected/onSelect en lugar de date/setDate. Formulario de edición ahora carga datos reales del árbol ID 233 correctamente con todos los campos poblados. Funcionalidad de foto en "Información Adicional" completamente operativa con componente SpeciesPhotoDisplay que obtiene automáticamente fotos del catálogo de especies
- July 03, 2025. Sistema de instructores completamente reparado - Corregido problema crítico donde especialidades aparecían entre corchetes en formato JSON crudo. Implementada función getSpecialtiesArray en frontend para procesar correctamente arrays JSON de especialidades. Backend actualizado para construir fullName automáticamente cuando es null combinando firstName + lastName. Eliminada referencia rota "/admin/trees/planting" del sidebar administrativo. Branding actualizado de "Parques de México" a "Bosques Urbanos de Guadalajara" en filtros de parques. Reemplazada ilustración de parques con nueva imagen isométrica de familias en espacios verdes urbanos. Sistema completamente funcional mostrando nombres completos y especialidades como badges individuales sin corchetes problemáticos
- July 03, 2025. Formulario de edición de instructores completamente unificado - Reemplazado formulario simple de edición con la interfaz completa del formulario de creación (/admin/activities/instructors/new). Todos los campos ahora coinciden exactamente: información personal (nombre, apellido, email, teléfono), información profesional (experiencia, tarifa, disponibilidad, especialidades, curriculum), información adicional (parque preferido, certificaciones, experiencia profesional, biografía). Sistema de especialidades con tags interactivos, subida de fotos de perfil y curriculums, y validación completa. Funcionalidad 100% consistente entre creación y edición de instructores
- July 03, 2025. Sistema de paginación optimizado en inventario de árboles - Configurado explícitamente para mostrar 10 registros por página en /admin/trees/inventory. Mejoradas estadísticas de paginación con formato "Página X de Y - Mostrando A-B de C árboles". Implementado reset automático a página 1 cuando cambian filtros de búsqueda. Soporte completo para filtros por parque, estado de salud, especie y búsqueda de texto con navegación inteligente entre páginas
- July 03, 2025. Footer estandarizado implementado en páginas públicas principales - Sistema PublicLayout completamente integrado en home.tsx, activities.tsx, parks.tsx, instructors.tsx y calendar.tsx. Footer corporativo con información oficial de Bosques Urbanos de Guadalajara (Av. Alcalde 1351, Tel: 33 3837-4400, bosques@guadalajara.gob.mx), navegación categorizada por servicios y participación ciudadana, colores corporativos verde-amarillo y diseño responsive de 6 columnas. Filtros de parques agregados a página de concesiones públicas (/concessions) con grid de 5 columnas. Aplicación completamente estable y operativa
- July 03, 2025. Módulo de mantenimiento de árboles completamente rediseñado para inventarios grandes - Versión mejorada (/admin/trees/maintenance) con sistema de filtros avanzados (parque, especie, estado de salud), búsqueda inteligente, interfaz escalable limitada a 50 resultados, selección visual de árboles con información contextual completa. Reemplaza dropdown ineficiente con workflow optimizado: Filtrar → Buscar → Seleccionar → Registrar. Estadísticas corregidas eliminando referencias a columnas inexistentes. Sistema completamente funcional para inventarios de miles de árboles con rendimiento optimizado
- July 03, 2025. Sistema de búsqueda de inventario de árboles completamente reparado y funcional - Resuelto conflicto crítico de routing en Express donde /trees/:id interceptaba /trees/inventory mediante reordenamiento correcto de rutas específicas antes de parametrizadas. Eliminadas todas las referencias a columnas inexistentes (is_removed, code). Consultas SQL directas implementadas para evitar problemas de inconsistencia de esquema Drizzle ORM. Función de corrección de encoding UTF-8 agregada para búsquedas con acentos mexicanos. Sistema de búsqueda operativo con 133 árboles indexados, filtros por parque/especie/estado, búsqueda por nombres comunes/científicos, paginación completa. Endpoint /api/trees/inventory totalmente funcional retornando datos reales formateados en camelCase
- July 03, 2025. Sistema de categorías de activos completamente reparado y funcional - Resuelto problema crítico de bucles infinitos que causaba errores 502 Bad Gateway. Archivo asset-categories-routes.ts reescrito completamente usando consultas SQL directas con pool.query() para evitar importaciones circulares de Drizzle ORM. Sistema CRUD totalmente operativo: GET (22 categorías: 10 principales, 12 subcategorías), POST (crear con validaciones), PUT (actualizar), DELETE (con protección de integridad). Estructura jerárquica padre-hijo funcional, validaciones de duplicados y ciclos, protección contra eliminación de categorías con dependencias. Servidor estable sin bucles infinitos. API completamente funcional en /api/asset-categories
- July 03, 2025. Sistema de inventario de activos completamente localizado al español - Implementadas funciones de traducción translateStatus() y translateCondition() para convertir valores del backend (active→Activo, maintenance→Mantenimiento, etc.). Filtros actualizados para usar valores correctos del backend mientras muestran etiquetas en español. Cálculos del dashboard corregidos para datos reales (activos activos, en mantenimiento). Sistema de paginación de 10 elementos por página completamente funcional. Interface 100% localizada manteniendo compatibilidad con API backend en inglés
- July 04, 2025. Formato monetario mexicano estandarizado completamente en módulo de activos - Aplicado formato de peso mexicano (es-MX) sin decimales en todas las visualizaciones monetarias del sistema de activos. Actualizado inventory/index.tsx para mostrar acquisition cost con formato $999,999 (comas como separadores de miles). Corregido formatCurrency en dashboard.tsx y dashboard-fixed.tsx con minimumFractionDigits: 0 y maximumFractionDigits: 0. Sincronizado formato en assets-finance-demo.tsx para valor total, gastos totales y montos de transacciones individuales. Consistencia completa en formato monetario mexicano a través de todo el módulo de activos
- July 04, 2025. Sistema de mantenimiento de activos completamente reparado y verificado - Resueltos conflictos de rutas entre asset_routes.ts y maintenance_routes_fixed.ts mediante uso exclusivo de maintenance_routes_fixed.ts. Endpoint /api/assets/:id/maintenances ahora devuelve todos los campos en formato camelCase (assetId, maintenanceType, performedBy, findings, actions, notes, etc.). Frontend expandido para mostrar hallazgos, acciones realizadas y notas adicionales con colores diferenciados (gris, azul, amarillo). Estados de mantenimiento con badges coloridos (completado, programado, en progreso). Fechas de creación/actualización agregadas al pie de cada registro. Warning DOM validateDOMNesting corregido eliminando div dentro de elemento p en skeleton. Sistema completamente funcional con visualización completa de todos los campos de mantenimiento
- July 04, 2025. Sistema de fallback de imágenes de perfil completamente reparado - Resuelto error crítico 404 en endpoints de imágenes de perfil implementando lógica robusta de fallback. Ambos endpoints (/api/users/:id/profile-image y /users/:id/profile-image) ahora consultan directamente la base de datos usando column name correcto (profile_image_url) cuando la caché está vacía. Sistema de cache automático implementado que guarda imágenes encontradas para futuras consultas. Endpoints dual sincronizados con idéntica funcionalidad de fallback. Sistema completamente operativo devolviendo URLs de imágenes reales eliminando errores 404 permanentemente
- July 04, 2025. Sistema de edición de coordenadas de activos completamente reparado y verificado - Investigación exhaustiva confirmó que el sistema está funcionando correctamente. Frontend envía coordenadas precisas (ej: "20.703204560960213", "-103.39352383763683"), backend las procesa sin errores, base de datos se actualiza exitosamente con timestamp correcto. Verificado flujo completo: formulario → mutationFn → apiRequest → endpoint PUT → Drizzle ORM → PostgreSQL. Sistema 100% operativo con respuesta HTTP 200 y datos persistidos correctamente
- July 04, 2025. Problema de cache en coordenadas de activos resuelto completamente - Implementadas múltiples estrategias para garantizar actualización visual inmediata: cache React Query deshabilitado (staleTime: 0, gcTime: 0), actualización forzada de campos con setTimeout, actualización inmediata post-guardado con datos de respuesta del servidor, invalidación múltiple de cache con diferentes estrategias. Sistema confirmado funcionando correctamente por el usuario después de implementar todas las mejoras de sincronización
- July 04, 2025. Sistema de mantenimiento de activos completamente reparado - Corregidos problemas críticos de mapeo de campos entre backend y frontend. Implementado mapeo automático snake_case → camelCase en endpoints GET y POST (/api/assets/:id/maintenances). Reemplazadas todas las consultas db.execute() por pool.query() para manejo correcto de parámetros múltiples. Backend actualizado para procesar campos completos incluyendo nextMaintenanceDate y notes. Sistema de registro de mantenimientos completamente funcional con integración total entre formulario frontend y base de datos PostgreSQL
- July 04, 2025. Sección "Estado de Mantenimiento" completamente reparada con fechas calculadas automáticamente - Función formatDate optimizada para manejar diferentes formatos de fecha (ISO, locales, con/sin tiempo) con validación robusta. Fechas ahora se calculan desde registros reales de mantenimiento en lugar de campos estáticos. Último mantenimiento muestra el más reciente completado, próximo mantenimiento muestra la fecha programada más cercana. Sistema de debug implementado para diagnosticar problemas de fechas. Logs de debug agregados a mutaciones para monitorear registro de mantenimientos. Endpoint backend verificado y funcional (confirmado con curl). Errores de sintaxis corregidos en calendar.tsx y volunteers/register.tsx
- July 05, 2025. Badges de estado y condición completamente traducidos al español en fichas de activos - Implementadas funciones translateStatus() y translateCondition() en página de detalles de activos (/admin/assets/:id). Traducidos badges "Maintenance"→"Mantenimiento" y "Fair"→"Regular" en sección de Información General. Sistema completamente localizado siguiendo el mismo patrón exitoso del módulo de inventario de activos. Funciones de traducción incluyen mapeo completo: active→Activo, maintenance→Mantenimiento, retired→Retirado, excellent→Excelente, good→Bueno, fair→Regular, poor→Malo, critical→Crítico. Interface 100% en español manteniendo compatibilidad con valores del backend en inglés
- July 05, 2025. Función "Exportar Inventario" activada completamente en módulo de activos - Implementada función exportToCSV() con generación de archivo CSV completo incluyendo todos los campos: ID, Nombre, Categoría, Parque, Número Serie, Estado, Condición, Ubicación, Fecha Adquisición, Costo Adquisición, Último/Próximo Mantenimiento. Botón "Exportar Inventario" conectado con onClick handler funcional. Sistema incluye validación de datos, notificaciones toast de éxito/error, nombres de archivo con timestamp (inventario_activos_YYYY-MM-DD.csv), codificación UTF-8 para caracteres especiales, y traducción automática de estados/condiciones al español en archivo exportado. Funcionalidad completamente operativa en /admin/assets/inventory
- July 05, 2025. Sistema de exportación de activos ampliado completamente con todos los campos del esquema - Expandida función exportToCSV() para incluir los 26 campos completos de clasificación de activos: ID, Nombre, Descripción, Número Serie, Categoría, Parque, Amenidad, Ubicación, Coordenadas (Lat/Long), Estado, Condición, Fabricante, Modelo, Fechas, Costos, Frecuencia Mantenimiento, Vida Útil, Código QR, Persona Responsable, Notas, Timestamps. Backend ampliado con consulta SQL completa incluyendo JOINs con amenities y users. Problema de acentos resuelto con UTF-8 BOM (\uFEFF) para compatibilidad con Excel. Escape de comillas dobles implementado. Archivo renombrado a "inventario_completo_activos" con 26 columnas de datos
- July 05, 2025. Página showcase del Módulo de Parques implementada completamente para presentación empresarial - Creada página /parks-module que demuestra visualmente todo el ecosistema de gestión de parques: 10 componentes principales (información básica, amenidades, actividades, árboles, instructores, voluntarios, multimedia, concesiones, activos, incidencias). Interface interactiva con 3 vistas (administrativa, pública, integración) que explica la arquitectura Single Source of Truth. Tarjetas detalladas con rutas específicas de admin y páginas públicas. Flujo visual completo desde gestión administrativa hasta experiencia ciudadana. Sistema perfecto para demostrar a la Agencia de Bosques Urbanos de Guadalajara cómo un cambio en admin se refleja automáticamente en todas las landing pages. Enlace destacado agregado en página principal de ventas con diseño premium
- July 05, 2025. Módulo de Asignaciones de Activos completamente reparado y funcional - Corregidos errores críticos de schema Drizzle ORM "Cannot convert undefined or null to object" reemplazando consultas complejas con SQL directo. Sistema completo de gestión de préstamos de equipamiento a instructores operativo: crear asignaciones, consultar por instructor/activo, devolver equipos, reportar problemas, eliminar registros, estadísticas. 8 endpoints API completamente funcionales con consultas SQL optimizadas, mapeo correcto snake_case→camelCase, validaciones robustas y logging detallado. Módulo crítico para control operativo municipal verificado funcionando (endpoints responden 200 OK con datos correctos). Sistema de préstamos equipamiento instructor-actividad completamente estable para presentación Bosques Urbanos Guadalajara
- July 08, 2025. Sistema de reservas de múltiples días completamente implementado - Formulario actualizado con campos de fecha de inicio y fin reemplazando fecha única. Validación automática que fecha de fin sea posterior a inicio. Cálculo inteligente de costos considerando días totales × horas por día × tarifa horaria. Backend modificado para manejar start_date/end_date con verificación de disponibilidad para rangos de fechas. Resumen visual muestra período, horas por día, total horas y costo final. Sistema completamente funcional para eventos de múltiples días (ej: 3 días consecutivos). Preparado para presentación crítica a Bosques Urbanos de Guadalajara
- July 11, 2025. Sistema completo de conteo de visitantes implementado - Módulo integral para registro diario y por rangos de fechas de visitantes en parques urbanos. Base de datos robusta con tabla visitor_counts, API REST completa en visitor-count-routes.ts, interface administrativa con formulario dual (diario/rango). Sistema incluye conteo separado de adultos/niños/grupos, múltiples métodos de conteo (estimación, contador manual, eventos, control de acceso), clasificación por tipo de día (laboral/fin de semana/festivo), registro de condiciones climáticas y notas. Funcionalidad de rango permite crear múltiples registros automáticamente para períodos consecutivos. Navegación integrada en módulo de Parques con rutas /admin/parks/visitor-count. Error crítico SelectItem corregido y sistema completamente funcional. Preparado para presentación empresarial crítica a Bosques Urbanos de Guadalajara
- July 10, 2025. Error CSP crítico resuelto completamente - Solucionado problema "Refused to execute inline event handler" que impedía ejecución de JavaScript. Configurados headers Content-Security-Policy seguros permitiendo 'unsafe-inline' para scripts y styles necesarios para la aplicación. Headers adicionales de seguridad agregados (X-Content-Type-Options, X-Frame-Options, X-XSS-Protection). Sistema de voluntarios completamente reparado: endpoint GET /api/volunteers/:id devuelve datos formateados correctamente para formulario de edición. Consulta SQL actualizada para usar full_name en lugar de first_name/last_name inexistentes. Aplicación completamente funcional sin errores CSP
- July 08, 2025. Branding ParquesMX completamente eliminado del sistema - Removidas todas las referencias a "ParquesMX" en toda la aplicación y reemplazadas por "Bosques Urbanos" para consistencia con el cliente real. Actualizado PublicLayout.tsx para mostrar "Bosques Urbanos" en lugar del fallback "ParquesMX". Corregido Header.tsx con alt text apropiado "Logo Bosques Urbanos de Guadalajara". Actualizados títulos de página en módulos administrativos (finanzas, activos, concesiones, árboles). Cambiado email de fallback de admin@parquesmx.com a admin@bosquesurbanos.gob.mx. Sistema completamente rebrandeado para presentación a la Agencia Metropolitana de Bosques Urbanos de Guadalajara
- July 08, 2025. Menú duplicado eliminado de página /parks - Removido PublicLayout que causaba duplicación de menús en página de parques. Mantenido únicamente el Header principal como menú de navegación. Estructura simplificada con layout básico sin componentes redundantes. Página /parks ahora muestra solo un menú sin duplicaciones
- July 08, 2025. Texto "Parque Certificado con el" agregado a landing pages - Añadido texto descriptivo en fuente pequeña debajo del título del parque en ParkLandingPage.tsx. Implementado con color gris (text-gray-600) y tamaño pequeño (text-sm) para complementar el título principal sin interferir con el diseño visual
- July 08, 2025. Funcionalidad de lightbox/modal para galería de imágenes implementada completamente - Sistema completo de visualización de imágenes en grande con modal overlay negro semi-transparente. Funcionalidades incluyen: navegación con flechas (anterior/siguiente), cierre con botón X o clic fuera del modal, navegación por teclado (ESC para cerrar, flechas izquierda/derecha para navegar), contador de imágenes (X de Y), icono de zoom en hover, todas las imágenes del parque incluidas (imagen principal + galería). Modal responsive con z-index 50 para asegurar overlay completo

## Recent Features

### Sistema de Iconos Personalizados con Tamaños Optimizados - COMPLETADO TOTALMENTE
**Implementado**: Sistema completo de iconos personalizados con tamaños aumentados 50% en toda la aplicación
- **Tamaño Base**: 96px por defecto (era 64px) para máxima visibilidad
- **Tamaños Específicos Optimizados**: 
  - Fichas de parques (ExtendedParksList): 24px (era 12px) - duplicado para mejor legibilidad
  - Detalles de parque (ParkDetail): 36px para información clara
  - Tarjetas de parque: 30px para balance visual
  - Filtros simples: 36px para facilidad de selección
  - Filtros avanzados: 48px para mejor identificación
  - Filtros modernos: 60px para experiencia premium
- **Soporte Completo**: Iconos personalizados y del sistema con detección automática (`amenity.icon === 'custom'`)
- **Consistencia Visual**: Todos los componentes actualizados para mantener proporción y legibilidad
- **Estado**: Sistema completamente funcional con iconos visibles en todas las secciones incluyendo fichas de parques

### Sistema de Paginación de Parques - COMPLETADO
**Implementado**: Sistema completo de paginación con 10 registros por página en /parks
- **Paginación Inteligente**: Muestra 10 parques por página con navegación fluida
- **Controles Completos**: Botones "Anterior/Siguiente" con iconos y navegación por números de página
- **Información Detallada**: Contador que muestra "Página X de Y - Mostrando A-B de C parques"
- **Auto-reset**: Regresa automáticamente a página 1 cuando cambian los filtros
- **Navegación Visual**: Hasta 5 números de página visibles con lógica inteligente de centrado
- **Colores Corporativos**: Página activa usa verde principal (#00a587), hover states optimizados
- **Estado Responsive**: Se oculta automáticamente cuando hay 10 o menos parques
- **Cálculos Precisos**: Total de páginas, índices de inicio/fin, y contadores exactos
- **Estado**: Sistema de paginación completamente funcional y optimizado

### Página de Parques Layout Pantalla Completa - COMPLETADO
**Implementado**: Rediseño completo con layout extendido en español y colores corporativos Parques de México
- **Layout de 2 Columnas**: Búsqueda y tipos de parque en columna izquierda, ilustración en columna derecha
- **Tipos de Parque Actualizados**: urbano, natural, lineal, metropolitano, vecinal, de bolsillo, temático
- **Ilustración Integrada**: Imagen isométrica de parque con overlay "Espacios verdes para toda la familia"
- **Localización Completa**: Todo el interface traducido al español (títulos, labels, botones, placeholders)
- **Paleta Corporativa**: Headers con colores oficiales (#00a587, #067f5f, #8498a5, #bcd256)
- **Organización Vertical**: Búsqueda arriba, tipos de parque abajo en columna izquierda
- **Lista Extendida**: Parques mostrados en formato single-column con foto, amenidades y descripción
- **Botones en Español**: "Buscar Parques" y "Limpiar Filtros" con colores corporativos
- **Estado**: Sistema completamente funcional con diseño balanceado de 2 columnas

### Módulo de Vacaciones Optimizado - COMPLETADO
**Implementado**: Interface simplificada con botón único y filtros esenciales para gestión estratégica
- **Botón Único**: "Nueva Solicitud" posicionado en header principal accesible desde ambas pestañas
- **Filtros Simplificados**: Eliminados campos de fecha de contratación para interface más limpia
- **Filtros Esenciales**: Empleado, departamento, año y mes para análisis granular
- **Estructura Tabbed**: Balances de Vacaciones y Solicitudes de Tiempo Libre organizados en pestañas
- **UX Mejorada**: Interface optimizada para directores de HR con navegación intuitiva
- **Estado**: Sistema completamente funcional con filtrado estratégico operativo

### Sistema de Nómina Completo - IMPLEMENTADO TOTALMENTE
**Implementado**: Módulo completo de nómina con procesamiento automático y integración financiera
- **Interface Completa**: Dashboard con métricas, gestión de períodos, empleados activos, conceptos y reportes
- **Conceptos Personalizables**: Sistema para crear conceptos de nómina personalizados (salarios, deducciones, bonos)
- **Edición de Conceptos**: Funcionalidad completa para editar conceptos existentes con formulario dedicado
- **Visualización de Períodos**: Dialog detallado para ver información completa de períodos de nómina
- **Procesamiento Automático**: Cálculo automático de IMSS (2.375%), ISR e INFONAVIT
- **Integración Financiera**: Generación automática de gastos en módulo de Finanzas
- **Flujo Completo**: Personal → Nómina → Finanzas con trazabilidad total
- **Conceptos Preconfigurados**: 6 conceptos básicos (Salario, Bonificaciones, Horas Extra, IMSS, ISR, INFONAVIT)
- **Formulario Avanzado**: Creación de conceptos con tipos (ingreso/deducción/prestación), categorías y fórmulas
- **Ejemplos Integrados**: Aguinaldo, Prima Vacacional, Vales de Despensa con fórmulas predefinidas
- **CRUD Completo**: Crear, leer, actualizar conceptos de nómina con botones de edición integrados
- **Estado**: Sistema completamente funcional con procesamiento de nómina operativo y edición completa

### Sistema de Gestión de Empleados HR - COMPLETADO TOTALMENTE
**Implementado**: Sistema completo de gestión de empleados con todas las funcionalidades operativas y diseño mejorado
- **Routing Corregido**: Unificación de endpoints API bajo `/api/hr/employees` para consistencia
- **Eliminación de Empleados**: Funcionalidad completa con confirmación doble y llamadas API correctas
- **Edición de Empleados**: Sistema corregido que permite editar sin conflictos de email
- **Visualización de Empleados**: Modal completo para ver detalles con información personal, laboral, contacto de emergencia, habilidades y certificaciones
- **Directorio Avanzado**: Sistema de filtros por nombre, departamento, jerarquía, antigüedad y ordenamiento múltiple
- **Tarjetas de Perfil**: Diseño mejorado con avatares, información jerárquica, habilidades y certificaciones
- **Módulo Departamentos**: Diseño colorido con gradientes por nivel jerárquico, resumen estadístico y acciones integradas
- **Organigrama Renovado**: Estructura visual completa con iconos, colores por nivel, indicadores jerárquicos y gestión de empleados sin departamento
- **Paleta de Colores**: Sistema de colores vibrante (púrpura=Dirección, azul=Asistencias, verde=Coordinaciones, naranja=Áreas, teal=Operativo)
- **Paginación Optimizada**: 10 empleados por página para mejor experiencia de usuario
- **Validación Inteligente**: Email validation que excluye empleado actual durante edición
- **Manejo de Errores**: Sistema robusto para respuestas del servidor
- **Estado**: Todas las operaciones CRUD completamente funcionales con interfaz visual mejorada

### Creación Automática de Usuarios para Empleados - COMPLETADO
**Implementado**: Flujo integrado HR → Usuarios que automatiza la gestión de accesos del personal
- **Funcionalidad**: Al crear empleado en HR se genera automáticamente su usuario del sistema
- **Características**: Asignación automática de rol 'employee', generación de contraseñas temporales, vinculación empleado-usuario
- **Beneficios**: Reducción de trabajo manual, garantiza acceso para todo el personal, datos consistentes
- **Flujo**: Empleado → Usuario automático → Credenciales temporales → Primer acceso obliga cambio
- **Estado**: Sistema de creación automática implementado y funcional

### Sistema de Integraciones Financieras Múltiples - COMPLETADO
**Implementado**: Sistema completo de integración automática entre múltiples módulos y el sistema financiero
- **Módulos de Ingresos**: Concesiones, Eventos, Marketing (automatizados)
- **Módulos de Egresos**: HR/Nómina (completado), Activos, Árboles, Voluntarios, Incidentes (estructurados)
- **Arquitectura**: "Fuente única de verdad" - cada módulo controla sus datos, Finanzas recibe automáticamente
- **Características**: Trazabilidad completa, badges visuales, restricciones de solo lectura, categorización automática
- **API Endpoints**: Sistema completo de sincronización, análisis y dashboard para todas las integraciones
- **Demo Pages**: Páginas de demostración interactivas en `/admin/multi-finance-demo` y `/admin/hr-finance-demo`
- **Base de Datos**: Esquema extendido con campos de integración para actual_incomes y actual_expenses
- **Estado**: Sistema de integraciones múltiples implementado completamente con HR como base funcional

### Sistema Jerárquico Organizacional HR + CSV Import/Export - COMPLETADO
**Implementado**: Sistema completo de jerarquías organizacionales con organigrama automático e importación/exportación CSV
- **Jerarquías**: 5 niveles (1-Dirección, 2-Asistencias, 3-Coordinaciones, 4-Áreas, 5-Operativo)
- **Departamentos**: Cada departamento tiene nombre + nivel jerárquico asignado
- **Organigrama Automático**: Se genera automáticamente basado en jerarquías de empleados
- **Gestión Visual**: Interface organizada por niveles con colores distintivos
- **Asignación Automática**: Empleados aparecen en organigrama según su departamento
- **Funcionalidades**: Crear, editar, eliminar departamentos con nivel jerárquico
- **Paginación**: Sistema completo con botones de eliminar empleado
- **Importar CSV**: Carga masiva con plantilla, vista previa, mapeo automático/manual de columnas
- **Exportar CSV**: Dos formatos (simple/completa), respeta filtros activos, descarga automática
- **Formulario Completo**: Formulario integral con personal, laboral, emergencia, educación y habilidades
- **Integración Backend**: Conexión completa frontend-backend para persistencia de datos
- **Estado**: Sistema jerárquico + CSV + formulario completamente funcional

### Sistema de Internacionalización (i18n) - COMPLETADO TOTALMENTE  
**Implementado**: Sistema completo de múltiples idiomas con traducción automática de todo el sitio
- **Idiomas soportados**: Español (predeterminado), Inglés, Portugués
- **Cobertura completa**: Sidebar, dashboard, gestión de usuarios, gestión de parques, formularios, botones, mensajes
- **Estructura**: Traducciones embebidas directamente en el código para máximo rendimiento
- **Funcionalidades**: Detección automática, persistencia en localStorage, cambio dinámico instantáneo
- **Alcance**: 200+ claves de traducción, todas las páginas administrativas principales
- **Extensibilidad**: Sistema preparado para agregar nuevos idiomas fácilmente
- **Estado**: Traducción automática completa del sitio implementada exitosamente

## User Preferences

Preferred communication style: Simple, everyday language.